import{aK as ot,s as ce,a as Ge,p as U,F as N,m as rt,aN as lt,h as re,_ as Z,d as _e,aO as ct,al as ut,aP as dt,ak as Te,u as ht,v as we,E as pt,e as n,o as mt,I as M,S as $e,C as Ve,b as gt,aQ as ft,L as Ye,M as Ze,aG as bt,i as vt,a0 as xt,r as yt,f as kt,a8 as wt,g as ke,z as Et,P as Ft,c as De}from"./db-EEYTw_tY.js";import{u as Ct}from"./index-_Y-Lyw2n.js";class At{constructor(e,a,{tabInsertsSuggestions:s,defaultFirstOption:r}={}){this.input=e,this.list=a,this.tabInsertsSuggestions=s??!0,this.defaultFirstOption=r??!1,this.isComposing=!1,a.id||(a.id=`combobox-${Math.random().toString().slice(2,6)}`),this.ctrlBindings=!!navigator.userAgent.match(/Macintosh/),this.keyboardEventHandler=l=>Lt(l,this),this.compositionEventHandler=l=>Bt(l,this),this.inputHandler=this.clearSelection.bind(this),e.setAttribute("role","combobox"),e.setAttribute("aria-controls",a.id),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-haspopup","listbox")}destroy(){this.clearSelection(),this.stop(),this.input.removeAttribute("role"),this.input.removeAttribute("aria-controls"),this.input.removeAttribute("aria-expanded"),this.input.removeAttribute("aria-autocomplete"),this.input.removeAttribute("aria-haspopup")}start(){this.input.setAttribute("aria-expanded","true"),this.input.addEventListener("compositionstart",this.compositionEventHandler),this.input.addEventListener("compositionend",this.compositionEventHandler),this.input.addEventListener("input",this.inputHandler),this.input.addEventListener("keydown",this.keyboardEventHandler),this.list.addEventListener("click",Se),this.indicateDefaultOption()}stop(){this.clearSelection(),this.input.setAttribute("aria-expanded","false"),this.input.removeEventListener("compositionstart",this.compositionEventHandler),this.input.removeEventListener("compositionend",this.compositionEventHandler),this.input.removeEventListener("input",this.inputHandler),this.input.removeEventListener("keydown",this.keyboardEventHandler),this.list.removeEventListener("click",Se)}indicateDefaultOption(){var e;this.defaultFirstOption&&((e=Array.from(this.list.querySelectorAll('[role="option"]:not([aria-disabled="true"])')).filter(ye)[0])===null||e===void 0||e.setAttribute("data-combobox-option-default","true"))}navigate(e=1){const a=Array.from(this.list.querySelectorAll('[aria-selected="true"]')).filter(ye)[0],s=Array.from(this.list.querySelectorAll('[role="option"]')).filter(ye),r=s.indexOf(a);if(r===s.length-1&&e===1||r===0&&e===-1){this.clearSelection(),this.input.focus();return}let l=e===1?0:s.length-1;if(a&&r>=0){const h=r+e;h>=0&&h<s.length&&(l=h)}const u=s[l];if(u)for(const h of s)h.removeAttribute("data-combobox-option-default"),u===h?(this.input.setAttribute("aria-activedescendant",u.id),u.setAttribute("aria-selected","true"),It(this.list,u)):h.removeAttribute("aria-selected")}clearSelection(){this.input.removeAttribute("aria-activedescendant");for(const e of this.list.querySelectorAll('[aria-selected="true"]'))e.removeAttribute("aria-selected");this.indicateDefaultOption()}}function Lt(t,e){if(!(t.shiftKey||t.metaKey||t.altKey)&&!(!e.ctrlBindings&&t.ctrlKey)&&!e.isComposing)switch(t.key){case"Enter":je(e.input,e.list)&&t.preventDefault();break;case"Tab":e.tabInsertsSuggestions&&je(e.input,e.list)&&t.preventDefault();break;case"Escape":e.clearSelection();break;case"ArrowDown":e.navigate(1),t.preventDefault();break;case"ArrowUp":e.navigate(-1),t.preventDefault();break;case"n":e.ctrlBindings&&t.ctrlKey&&(e.navigate(1),t.preventDefault());break;case"p":e.ctrlBindings&&t.ctrlKey&&(e.navigate(-1),t.preventDefault());break;default:if(t.ctrlKey)break;e.clearSelection()}}function Se(t){if(!(t.target instanceof Element))return;const e=t.target.closest('[role="option"]');e&&e.getAttribute("aria-disabled")!=="true"&&zt(e)}function je(t,e){const a=e.querySelector('[aria-selected="true"], [data-combobox-option-default="true"]');return a?(a.getAttribute("aria-disabled")==="true"||a.click(),!0):!1}function zt(t){t.dispatchEvent(new CustomEvent("combobox-commit",{bubbles:!0}))}function ye(t){return!t.hidden&&!(t instanceof HTMLInputElement&&t.type==="hidden")&&(t.offsetWidth>0||t.offsetHeight>0)}function Bt(t,e){e.isComposing=t.type==="compositionstart",document.getElementById(e.input.getAttribute("aria-controls")||"")&&e.clearSelection()}function It(t,e){_t(t,e)||(t.scrollTop=e.offsetTop)}function _t(t,e){const a=t.scrollTop,s=a+t.clientHeight,r=e.offsetTop,l=r+e.clientHeight;return r>=a&&l<=s}const Tt=/\s|\(|\[/;function $t(t,e,a,{multiWord:s,lookBackIndex:r,lastMatchPosition:l}={multiWord:!1,lookBackIndex:0,lastMatchPosition:null}){let u=t.lastIndexOf(e,a-1);if(u===-1||u<r)return;if(s){if(l!=null){if(l===u)return;u=l-e.length}if(t[u+1]===" "&&a>=u+e.length+1||t.lastIndexOf(`
`,a-1)>u||t.lastIndexOf(".",a-1)>u)return}else if(t.lastIndexOf(" ",a-1)>u)return;const h=t[u-1];return h&&!Tt.test(h)?void 0:{text:t.substring(u+e.length,a),position:u+e.length}}const Dt=["position:absolute;","overflow:auto;","word-wrap:break-word;","top:0px;","left:-9999px;"],Me=["box-sizing","font-family","font-size","font-style","font-variant","font-weight","height","letter-spacing","line-height","max-height","min-height","padding-bottom","padding-left","padding-right","padding-top","border-bottom","border-left","border-right","border-top","text-decoration","text-indent","text-transform","width","word-spacing"],Pe=new WeakMap;function St(t,e){const a=t.nodeName.toLowerCase();if(a!=="textarea"&&a!=="input")throw new Error("expected textField to a textarea or input");let s=Pe.get(t);if(s&&s.parentElement===t.parentElement)s.innerHTML="";else{s=document.createElement("div"),Pe.set(t,s);const h=window.getComputedStyle(t),g=Dt.slice(0);a==="textarea"?g.push("white-space:pre-wrap;"):g.push("white-space:nowrap;");for(let x=0,E=Me.length;x<E;x++){const f=Me[x];g.push(`${f}:${h.getPropertyValue(f)};`)}s.style.cssText=g.join(" ")}const r=document.createElement("span");r.style.cssText="position: absolute;",r.innerHTML="&nbsp;";let l,u;if(typeof e=="number"){let h=t.value.substring(0,e);h&&(l=document.createTextNode(h)),h=t.value.substring(e),h&&(u=document.createTextNode(h))}else{const h=t.value;h&&(l=document.createTextNode(h))}if(l&&s.appendChild(l),s.appendChild(r),u&&s.appendChild(u),!s.parentElement){if(!t.parentElement)throw new Error("textField must have a parentElement to mirror");t.parentElement.insertBefore(s,t)}return s.scrollTop=t.scrollTop,s.scrollLeft=t.scrollLeft,{mirror:s,marker:r}}function jt(t,e=t.selectionEnd){const{mirror:a,marker:s}=St(t,e),r=a.getBoundingClientRect(),l=s.getBoundingClientRect();return setTimeout(()=>{a.remove()},5e3),{top:l.top-r.top,left:l.left-r.left}}const pe=new WeakMap;function Mt(t){try{if(t.matches(":popover-open"))return!0}catch{}try{if(t.matches("dialog:modal"))return!0}catch{}try{if(t.matches(":fullscreen"))return!0}catch{}return!1}class Pt{constructor(e,a){this.expander=e,this.input=a,this.combobox=null,this.menu=null,this.match=null,this.justPasted=!1,this.lookBackIndex=0,this.oninput=this.onInput.bind(this),this.onpaste=this.onPaste.bind(this),this.onkeydown=this.onKeydown.bind(this),this.oncommit=this.onCommit.bind(this),this.onmousedown=this.onMousedown.bind(this),this.onblur=this.onBlur.bind(this),this.interactingWithList=!1,a.addEventListener("paste",this.onpaste),a.addEventListener("input",this.oninput),a.addEventListener("keydown",this.onkeydown),a.addEventListener("blur",this.onblur)}destroy(){this.input.removeEventListener("paste",this.onpaste),this.input.removeEventListener("input",this.oninput),this.input.removeEventListener("keydown",this.onkeydown),this.input.removeEventListener("blur",this.onblur)}dismissMenu(){this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex)}activate(e,a){var s,r;if(this.input!==document.activeElement&&this.input!==((r=(s=document.activeElement)===null||s===void 0?void 0:s.shadowRoot)===null||r===void 0?void 0:r.activeElement))return;this.deactivate(),this.menu=a,a.id||(a.id=`text-expander-${Math.floor(Math.random()*1e5).toString()}`),this.expander.append(a),this.combobox=new At(this.input,a),this.expander.dispatchEvent(new Event("text-expander-activate"));let{top:l,left:u}=jt(this.input,e.position);if(Mt(a)){const h=this.input.getBoundingClientRect();l+=h.top,u+=h.left,getComputedStyle(a).position==="absolute"&&(l+=window.scrollY,u+=window.scrollX)}a.style.top=`${l}px`,a.style.left=`${u}px`,this.combobox.start(),a.addEventListener("combobox-commit",this.oncommit),a.addEventListener("mousedown",this.onmousedown),this.combobox.navigate(1)}deactivate(){const e=this.menu;return!e||!this.combobox?!1:(this.expander.dispatchEvent(new Event("text-expander-deactivate")),this.menu=null,e.removeEventListener("combobox-commit",this.oncommit),e.removeEventListener("mousedown",this.onmousedown),this.combobox.destroy(),this.combobox=null,e.remove(),!0)}onCommit({target:e}){var a;const s=e;if(!(s instanceof HTMLElement)||!this.combobox)return;const r=this.match;if(!r)return;const l=this.input.value.substring(0,r.position-r.key.length),u=this.input.value.substring(r.position+r.text.length),h={item:s,key:r.key,value:null,continue:!1};if(!this.expander.dispatchEvent(new CustomEvent("text-expander-value",{cancelable:!0,detail:h}))||!h.value)return;let x=(a=this.expander.getAttribute("suffix"))!==null&&a!==void 0?a:" ";h.continue&&(x="");const E=`${h.value}${x}`;this.input.value=l+E+u;const f=l.length+E.length;this.deactivate(),this.input.focus({preventScroll:!0}),this.input.selectionStart=f,this.input.selectionEnd=f,h.continue||(this.lookBackIndex=f,this.match=null),this.expander.dispatchEvent(new CustomEvent("text-expander-committed",{cancelable:!1,detail:{input:this.input}}))}onBlur(){if(this.interactingWithList){this.interactingWithList=!1;return}this.deactivate()}onPaste(){this.justPasted=!0}async onInput(){if(this.justPasted){this.justPasted=!1;return}const e=this.findMatch();if(e){this.match=e;const a=await this.notifyProviders(e);if(!this.match)return;a?this.activate(e,a):this.deactivate()}else this.match=null,this.deactivate()}findMatch(){const e=this.input.selectionEnd||0,a=this.input.value;e<=this.lookBackIndex&&(this.lookBackIndex=e-1);for(const{key:s,multiWord:r}of this.expander.keys){const l=$t(a,s,e,{multiWord:r,lookBackIndex:this.lookBackIndex,lastMatchPosition:this.match?this.match.position:null});if(l)return{text:l.text,key:s,position:l.position}}}async notifyProviders(e){const a=[],s=h=>a.push(h);return this.expander.dispatchEvent(new CustomEvent("text-expander-change",{cancelable:!0,detail:{provide:s,text:e.text,key:e.key}}))?(await Promise.all(a)).filter(h=>h.matched).map(h=>h.fragment)[0]:void 0}onMousedown(){this.interactingWithList=!0}onKeydown(e){e.key==="Escape"&&(this.match=null,this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex,e.stopImmediatePropagation(),e.preventDefault()))}}class Re extends HTMLElement{get keys(){const e=this.getAttribute("keys"),a=e?e.split(" "):[],s=this.getAttribute("multiword"),r=s?s.split(" "):[],l=r.length===0&&this.hasAttribute("multiword");return a.map(u=>({key:u,multiWord:l||r.includes(u)}))}connectedCallback(){const e=this.querySelector('input[type="text"], textarea');if(!(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement))return;const a=new Pt(this,e);pe.set(this,a)}disconnectedCallback(){const e=pe.get(this);e&&(e.destroy(),pe.delete(this))}dismiss(){const e=pe.get(this);e&&e.dismissMenu()}}window.customElements.get("text-expander")||(window.TextExpanderElement=Re,window.customElements.define("text-expander",Re));function Rt({onlyFirst:t=!1}={}){const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,t?void 0:"g")}const Nt=Rt();function Ht(t){if(typeof t!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof t}\``);return t.replace(Nt,"")}const Ot=new Intl.Segmenter;function Ne(t,{countAnsiEscapeCodes:e=!1}={}){if(t===""||(e||(t=Ht(t)),t===""))return 0;let a=0;for(const s of Ot.segment(t))a++;return a}const Ee=[["aa","Afar","Afaraf"],["ab","Abkhaz","аҧсуа бызшәа"],["ae","Avestan","avesta"],["af","Afrikaans","Afrikaans"],["ak","Akan","Akan"],["am","Amharic","አማርኛ"],["an","Aragonese","aragonés"],["ar","Arabic","اللغة العربية"],["as","Assamese","অসমীয়া"],["av","Avaric","авар мацӀ"],["ay","Aymara","aymar aru"],["az","Azerbaijani","azərbaycan dili"],["ba","Bashkir","башҡорт теле"],["be","Belarusian","беларуская мова"],["bg","Bulgarian","български език"],["bh","Bihari","भोजपुरी"],["bi","Bislama","Bislama"],["bm","Bambara","bamanankan"],["bn","Bengali","বাংলা"],["bo","Tibetan","བོད་ཡིག"],["br","Breton","brezhoneg"],["bs","Bosnian","bosanski jezik"],["ca","Catalan","Català"],["ce","Chechen","нохчийн мотт"],["ch","Chamorro","Chamoru"],["co","Corsican","corsu"],["cr","Cree","ᓀᐦᐃᔭᐍᐏᐣ"],["cs","Czech","čeština"],["cu","Old Church Slavonic","ѩзыкъ словѣньскъ"],["cv","Chuvash","чӑваш чӗлхи"],["cy","Welsh","Cymraeg"],["da","Danish","dansk"],["de","German","Deutsch"],["dv","Divehi","Dhivehi"],["dz","Dzongkha","རྫོང་ཁ"],["ee","Ewe","Eʋegbe"],["el","Greek","Ελληνικά"],["en","English","English"],["eo","Esperanto","Esperanto"],["es","Spanish","Español"],["et","Estonian","eesti"],["eu","Basque","euskara"],["fa","Persian","فارسی"],["ff","Fula","Fulfulde"],["fi","Finnish","suomi"],["fj","Fijian","Vakaviti"],["fo","Faroese","føroyskt"],["fr","French","Français"],["fy","Western Frisian","Frysk"],["ga","Irish","Gaeilge"],["gd","Scottish Gaelic","Gàidhlig"],["gl","Galician","galego"],["gu","Gujarati","ગુજરાતી"],["gv","Manx","Gaelg"],["ha","Hausa","هَوُسَ"],["he","Hebrew","עברית"],["hi","Hindi","हिन्दी"],["ho","Hiri Motu","Hiri Motu"],["hr","Croatian","Hrvatski"],["ht","Haitian","Kreyòl ayisyen"],["hu","Hungarian","magyar"],["hy","Armenian","Հայերեն"],["hz","Herero","Otjiherero"],["ia","Interlingua","Interlingua"],["id","Indonesian","Bahasa Indonesia"],["ie","Interlingue","Interlingue"],["ig","Igbo","Asụsụ Igbo"],["ii","Nuosu","ꆈꌠ꒿ Nuosuhxop"],["ik","Inupiaq","Iñupiaq"],["io","Ido","Ido"],["is","Icelandic","Íslenska"],["it","Italian","Italiano"],["iu","Inuktitut","ᐃᓄᒃᑎᑐᑦ"],["ja","Japanese","日本語"],["jv","Javanese","basa Jawa"],["ka","Georgian","ქართული"],["kg","Kongo","Kikongo"],["ki","Kikuyu","Gĩkũyũ"],["kj","Kwanyama","Kuanyama"],["kk","Kazakh","қазақ тілі"],["kl","Kalaallisut","kalaallisut"],["km","Khmer","ខេមរភាសា"],["kn","Kannada","ಕನ್ನಡ"],["ko","Korean","한국어"],["kr","Kanuri","Kanuri"],["ks","Kashmiri","कश्मीरी"],["ku","Kurmanji (Kurdish)","Kurmancî"],["kv","Komi","коми кыв"],["kw","Cornish","Kernewek"],["ky","Kyrgyz","Кыргызча"],["la","Latin","latine"],["lb","Luxembourgish","Lëtzebuergesch"],["lg","Ganda","Luganda"],["li","Limburgish","Limburgs"],["ln","Lingala","Lingála"],["lo","Lao","ລາວ"],["lt","Lithuanian","lietuvių kalba"],["lu","Luba-Katanga","Tshiluba"],["lv","Latvian","latviešu valoda"],["mg","Malagasy","fiteny malagasy"],["mh","Marshallese","Kajin M̧ajeļ"],["mi","Māori","te reo Māori"],["mk","Macedonian","македонски јазик"],["ml","Malayalam","മലയാളം"],["mn","Mongolian","Монгол хэл"],["mr","Marathi","मराठी"],["ms","Malay","Bahasa Melayu"],["mt","Maltese","Malti"],["my","Burmese","ဗမာစာ"],["na","Nauru","Ekakairũ Naoero"],["nb","Norwegian Bokmål","Norsk bokmål"],["nd","Northern Ndebele","isiNdebele"],["ne","Nepali","नेपाली"],["ng","Ndonga","Owambo"],["nl","Dutch","Nederlands"],["nn","Norwegian Nynorsk","Norsk Nynorsk"],["no","Norwegian","Norsk"],["nr","Southern Ndebele","isiNdebele"],["nv","Navajo","Diné bizaad"],["ny","Chichewa","chiCheŵa"],["oc","Occitan","occitan"],["oj","Ojibwe","ᐊᓂᔑᓈᐯᒧᐎᓐ"],["om","Oromo","Afaan Oromoo"],["or","Oriya","ଓଡ଼ିଆ"],["os","Ossetian","ирон æвзаг"],["pa","Panjabi","ਪੰਜਾਬੀ"],["pi","Pāli","पाऴि"],["pl","Polish","Polski"],["ps","Pashto","پښتو"],["pt","Portuguese","Português"],["qu","Quechua","Runa Simi"],["rm","Romansh","rumantsch grischun"],["rn","Kirundi","Ikirundi"],["ro","Romanian","Română"],["ru","Russian","Русский"],["rw","Kinyarwanda","Ikinyarwanda"],["sa","Sanskrit","संस्कृतम्"],["sc","Sardinian","sardu"],["sd","Sindhi","सिन्धी"],["se","Northern Sami","Davvisámegiella"],["sg","Sango","yângâ tî sängö"],["si","Sinhala","සිංහල"],["sk","Slovak","slovenčina"],["sl","Slovenian","slovenščina"],["sn","Shona","chiShona"],["so","Somali","Soomaaliga"],["sq","Albanian","Shqip"],["sr","Serbian","српски језик"],["ss","Swati","SiSwati"],["st","Southern Sotho","Sesotho"],["su","Sundanese","Basa Sunda"],["sv","Swedish","Svenska"],["sw","Swahili","Kiswahili"],["ta","Tamil","தமிழ்"],["te","Telugu","తెలుగు"],["tg","Tajik","тоҷикӣ"],["th","Thai","ไทย"],["ti","Tigrinya","ትግርኛ"],["tk","Turkmen","Türkmen"],["tl","Tagalog","Wikang Tagalog"],["tn","Tswana","Setswana"],["to","Tonga","faka Tonga"],["tr","Turkish","Türkçe"],["ts","Tsonga","Xitsonga"],["tt","Tatar","татар теле"],["tw","Twi","Twi"],["ty","Tahitian","Reo Tahiti"],["ug","Uyghur","ئۇيغۇرچە‎"],["uk","Ukrainian","Українська"],["ur","Urdu","اردو"],["uz","Uzbek","Ўзбек"],["ve","Venda","Tshivenḓa"],["vi","Vietnamese","Tiếng Việt"],["vo","Volapük","Volapük"],["wa","Walloon","walon"],["wo","Wolof","Wollof"],["xh","Xhosa","isiXhosa"],["yi","Yiddish","ייִדיש"],["yo","Yoruba","Yorùbá"],["za","Zhuang","Saɯ cueŋƅ"],["zh","Chinese","中文"],["zu","Zulu","isiZulu"],["zh-CN","Chinese (China)","简体中文"],["zh-HK","Chinese (Hong Kong)","繁體中文（香港）"],["zh-TW","Chinese (Taiwan)","繁體中文（臺灣）"],["zh-YUE","Cantonese","廣東話"],["ast","Asturian","Asturianu"],["chr","Cherokee","ᏣᎳᎩ ᎦᏬᏂᎯᏍᏗ"],["ckb","Sorani (Kurdish)","سۆرانی"],["cnr","Montenegrin","crnogorski"],["jbo","Lojban","la .lojban."],["kab","Kabyle","Taqbaylit"],["ldn","Láadan","Láadan"],["lfn","Lingua Franca Nova","lingua franca nova"],["sco","Scots","Scots"],["sma","Southern Sami","Åarjelsaemien Gïele"],["smj","Lule Sami","Julevsámegiella"],["szl","Silesian","ślůnsko godka"],["tok","Toki Pona","toki pona"],["xal","Kalmyk","Хальмг келн"],["zba","Balaibalan","باليبلن"],["zgh","Standard Moroccan Tamazight","ⵜⴰⵎⴰⵣⵉⵖⵜ"]],Kt="(((?:[^A-Za-z0-9@＠$#＃\\uFFFE\\uFEFF\\uFFFF]|[\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069]|^))((https?:\\/\\/)((?:(?:(?:[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/](?:[_-]|[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/])*)?[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/]\\.)*(?:(?:[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/](?:-|[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/])*)?[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/]\\.)(?:(?:(?:삼성|닷컴|닷넷|香格里拉|餐厅|食品|飞利浦|電訊盈科|集团|通販|购物|谷歌|诺基亚|联通|网络|网站|网店|网址|组织机构|移动|珠宝|点看|游戏|淡马锡|机构|書籍|时尚|新闻|政府|政务|招聘|手表|手机|我爱你|慈善|微博|广东|工行|家電|娱乐|天主教|大拿|大众汽车|在线|嘉里大酒店|嘉里|商标|商店|商城|公益|公司|八卦|健康|信息|佛山|企业|中文网|中信|世界|ポイント|ファッション|セール|ストア|コム|グーグル|クラウド|みんな|คอม|संगठन|नेट|कॉम|همراه|موقع|موبايلي|كوم|كاثوليك|عرب|شبكة|بيتك|بازار|العليان|ارامكو|اتصالات|ابوظبي|קום|сайт|рус|орг|онлайн|москва|ком|католик|дети|zuerich|zone|zippo|zip|zero|zara|zappos|yun|youtube|you|yokohama|yoga|yodobashi|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|voyage|voto|voting|vote|volvo|volkswagen|vodka|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vet|versicherung|vermögensberatung|vermögensberater|verisign|ventures|vegas|vanguard|vana|vacations|ups|uol|uno|university|unicom|uconnect|ubs|ubank|tvs|tushu|tunes|tui|tube|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|tmall|tkmaxx|tjx|tjmaxx|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|tci|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|systems|symantec|sydney|swiss|swiftcover|swatch|suzuki|surgery|surf|support|supply|supplies|sucks|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|srt|srl|spreadbetting|spot|sport|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|sncf|smile|smart|sling|skype|sky|skin|ski|site|singles|sina|silk|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|search|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sbs|sbi|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|ryukyu|rwe|run|ruhr|rugby|rsvp|room|rogers|rodeo|rocks|rocher|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|raid|radio|racing|qvc|quest|quebec|qpon|pwc|pub|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|post|porn|politie|poker|pohl|pnc|plus|plumbing|playstation|play|place|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|phd|pharmacy|pfizer|pet|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|pamperedchef|page|ovh|ott|otsuka|osaka|origins|orientexpress|organic|org|orange|oracle|open|ooo|onyourside|online|onl|ong|one|omega|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nyc|ntt|nrw|nra|nowtv|nowruz|now|norton|northwesternmutual|nokia|nissay|nissan|ninja|nikon|nike|nico|nhk|ngo|nfl|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|nba|navy|natura|nationwide|name|nagoya|nadex|nab|mutuelle|mutual|museum|mtr|mtpc|mtn|msd|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|montblanc|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mma|mls|mlb|mitsubishi|mit|mint|mini|mil|microsoft|miami|metlife|merckmsd|meo|menu|men|memorial|meme|melbourne|meet|media|med|mckinsey|mcdonalds|mcd|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|macys|luxury|luxe|lupin|lundbeck|ltda|ltd|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|llp|llc|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|kyoto|kuokgroup|kred|krd|kpn|kpmg|kosher|komatsu|koeln|kiwi|kitchen|kindle|kinder|kim|kia|kfh|kerryproperties|kerrylogistics|kerryhotels|kddi|kaufen|juniper|juegos|jprs|jpmorgan|joy|jot|joburg|jobs|jnj|jmp|jll|jlc|jio|jewelry|jetzt|jeep|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|istanbul|ist|ismaili|iselect|irish|ipiranga|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|immobilien|immo|imdb|imamat|ikano|iinet|ifm|ieee|icu|ice|icbc|ibm|hyundai|hyatt|hughes|htc|hsbc|how|house|hotmail|hotels|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hkt|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|guru|guitars|guide|guge|gucci|guardian|group|grocery|gripe|green|gratis|graphics|grainger|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gmx|gmo|gmbh|gmail|globo|global|gle|glass|glade|giving|gives|gifts|gift|ggee|george|genting|gent|gea|gdn|gbiz|gay|garden|gap|games|game|gallup|gallo|gallery|gal|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fly|flsmidth|flowers|florist|flir|flights|flickr|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|etisalat|esurance|estate|esq|erni|ericsson|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|education|edu|edeka|eco|eat|earth|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|doosan|domains|doha|dog|dodge|doctor|docs|dnp|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cyou|cymru|cuisinella|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cpa|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|church|chrysler|chrome|christmas|chloe|chintai|cheap|chat|chase|charity|channel|chanel|cfd|cfa|cern|ceo|center|ceb|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|bzh|buzz|buy|business|builders|build|bugatti|budapest|brussels|brother|broker|broadway|bridgestone|bradesco|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bnpparibas|bnl|bmw|bms|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|biz|bio|bingo|bing|bike|bid|bible|bharti|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|bcn|bcg|bbva|bbt|bbc|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|azure|axa|aws|avianca|autos|auto|author|auspost|audio|audible|audi|auction|attorney|athleta|associates|asia|asda|arte|art|arpa|army|archi|aramco|arab|aquarelle|apple|app|apartments|aol|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|akdn|airtel|airforce|airbus|aigo|aig|agency|agakhan|africa|afl|afamilycompany|aetna|aero|aeg|adult|ads|adac|actor|active|aco|accountants|accountant|accenture|academy|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa|onion)(?=[^0-9a-zA-Z@+-]|$))|(?:(?:한국|香港|澳門|新加坡|台灣|台湾|中國|中国|გე|ລາວ|ไทย|ලංකා|ഭാരതം|ಭಾರತ|భారత్|சிங்கப்பூர்|இலங்கை|இந்தியா|ଭାରତ|ભારત|ਭਾਰਤ|ভাৰত|ভারত|বাংলা|भारोत|भारतम्|भारत|ڀارت|پاکستان|موريتانيا|مليسيا|مصر|قطر|فلسطين|عمان|عراق|سورية|سودان|تونس|بھارت|بارت|ایران|امارات|المغرب|السعودية|الجزائر|البحرين|الاردن|հայ|қаз|укр|срб|рф|мон|мкд|ею|бел|бг|ευ|ελ|zw|zm|za|yt|ye|ws|wf|vu|vn|vi|vg|ve|vc|va|uz|uy|us|um|uk|ug|ua|tz|tw|tv|tt|tr|tp|to|tn|tm|tl|tk|tj|th|tg|tf|td|tc|sz|sy|sx|sv|su|st|ss|sr|so|sn|sm|sl|sk|sj|si|sh|sg|se|sd|sc|sb|sa|rw|ru|rs|ro|re|qa|py|pw|pt|ps|pr|pn|pm|pl|pk|ph|pg|pf|pe|pa|om|nz|nu|nr|np|no|nl|ni|ng|nf|ne|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|mn|mm|ml|mk|mh|mg|mf|me|md|mc|ma|ly|lv|lu|lt|ls|lr|lk|li|lc|lb|la|kz|ky|kw|kr|kp|kn|km|ki|kh|kg|ke|jp|jo|jm|je|it|is|ir|iq|io|in|im|il|ie|id|hu|ht|hr|hn|hm|hk|gy|gw|gu|gt|gs|gr|gq|gp|gn|gm|gl|gi|gh|gg|gf|ge|gd|gb|ga|fr|fo|fm|fk|fj|fi|eu|et|es|er|eh|eg|ee|ec|dz|do|dm|dk|dj|de|cz|cy|cx|cw|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|bz|by|bw|bv|bt|bs|br|bq|bo|bn|bm|bl|bj|bi|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ar|aq|ao|an|am|al|ai|ag|af|ae|ad|ac)(?=[^0-9a-zA-Z@+-]|$))|(?:xn--[\\-0-9a-z]+))))(?::([0-9]+))?(\\/(?:(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*(?:\\((?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+|(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*\\([a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*))\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*)*[\\+\\-a-z\\u0400-\\u04FF0-9=_#\\/\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]|(?:\\((?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+|(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*\\([a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*))\\)))|(?:@[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\/))*)?(\\?[a-z0-9!?\\*'@\\(\\);:&=\\+\\$\\/%#\\[\\]\\-_\\.,~|]*[a-z0-9\\-_&=#\\/])?))",qt="gi",He={source:Kt,flags:qt};var Ut={PHANPY_CLIENT_NAME:"Blaede Phanpy",PHANPY_WEBSITE:"https://phanpy.blaede.family",PHANPY_LINGVA_INSTANCES:"lingva.phanpy.social lingva.lunar.icu lingva.garudalinux.org translate.plausibility.cloud",PHANPY_PRIVACY_POLICY_URL:"https://mastodon.blaede.family/privacy-policy",VITE_APP_ENV:"production",PHANPY_DEFAULT_INSTANCE:"mastodon.blaede.family",PHANPY_DEFAULT_INSTANCE_REGISTRATION_URL:"https://mastodon.blaede.family/auth/sign_up",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{PHANPY_IMG_ALT_API_URL:Oe}=Ut,Wt=Ee.reduce((t,e)=>{const[a,s,r]=e;return t[a]={common:s,native:r},t},{}),Je={"5 minutes":5*60,"30 minutes":30*60,"1 hour":60*60,"6 hours":6*60*60,"12 hours":12*60*60,"1 day":24*60*60,"3 days":3*24*60*60,"7 days":7*24*60*60},Gt=Object.values(Je),Ke=24*60*60,qe=t=>{if(!t)return Ke;const e=(new Date(t).getTime()-Date.now())/1e3;return Gt.find(a=>a>=e)||Ke},ie=document.createElement("ul");ie.role="listbox";ie.className="text-expander-menu";const Vt=16,Yt=new IntersectionObserver(t=>{t.forEach(e=>{if(e.isIntersecting){const{left:a,width:s}=e.boundingClientRect,{innerWidth:r}=window;a+s>r&&(ie.style.left=r-s-Vt+"px")}})});Yt.observe(ie);const oe=ot([new Intl.DateTimeFormat().resolvedOptions().locale,...navigator.languages],Ee.map(t=>t[0]),"en"),Xe=new RegExp(He.source,He.flags),Zt=/(^|[^\/\w])@(([a-z0-9_]+)@[a-z0-9\.\-]+[a-z0-9]+)/gi,Jt="$2xxxxxxxxxxxxxxxxxxxxxxx";function Xt(t){return t.replace(Xe,Jt).replace(Zt,"$1@$3")}const Qt=/[a-z0-9_]+([a-z0-9_.-]+[a-z0-9_]+)?/i,en=new RegExp(`(^|[^=\\/\\w])(@${Qt.source}(?:@[\\p{L}\\w.-]+[\\w]+)?)`,"uig"),tn=new RegExp("(^|[^=\\/\\w])(#[a-z0-9_]+([a-z0-9_.-]+[a-z0-9_]+)?)(?![\\/\\w])","ig"),nn="[a-zA-Z0-9_]{2,}",an=new RegExp(`([^A-Za-z0-9_:\\n]|^)(:${nn}:)(?=[^A-Za-z0-9_:]|$)`,"g"),sn=new Intl.Segmenter;function on(t,{maxCharacters:e=1/0}){let a=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");const{composerCharacterCount:s}=ce;if(s>e){let r="",l="";const u=sn.segment(a);for(const{segment:h,index:g}of u)g<e?r+=h:l+=h;return l&&(l='<mark class="compose-highlight-exceeded">'+l+"</mark>"),r+l}return a.replace(Xe,'$2<mark class="compose-highlight-url">$3</mark>').replace(en,'$1<mark class="compose-highlight-mention">$2</mark>').replace(tn,'$1<mark class="compose-highlight-hashtag">$2</mark>').replace(an,'$1<mark class="compose-highlight-emoji-shortcode">$2</mark>')}function gn({onClose:t,replyToStatus:e,editStatus:a,draftStatus:s,standalone:r,hasOpener:l}){var Ie;const{masto:u,instance:h}=Ge(),[g,x]=U("default"),E=N((s==null?void 0:s.uid)||Ct()),f=rt(),p=f.info,w=lt(),{statuses:{maxCharacters:C,maxMediaAttachments:b,charactersReservedPerUrl:I}={},mediaAttachments:{supportedMimeTypes:F=[],imageSizeLimit:B,imageMatrixLimit:D,videoSizeLimit:K,videoMatrixLimit:P,videoFrameRateLimit:_}={},polls:{maxOptions:S,maxCharactersPerOption:R,maxExpiration:W,minExpiration:Y}={}}=w||{},z=N(),H=N(),[j,J]=U("public"),[q,ee]=U(!1),[T,ae]=U(re.session.get("currentLanguage")||oe),te=N(T),[A,X]=U([]),[O,se]=U(null),G=re.account.get("preferences")||{},me=()=>{z.current&&z.current.dispatchEvent(new Event("input"))},ue=()=>{setTimeout(()=>{var o;(o=z.current)==null||o.focus()},300)};Z(()=>{if(e){const{spoilerText:o,visibility:c,language:m,sensitive:d}=e;o&&H.current&&(H.current.value=o);const y=[...new Set([e.account.acct,...e.mentions.map(v=>v.acct)])].filter(v=>v!==p.acct);y.length>0&&(z.current.value=`${y.map(v=>`@${v}`).join(" ")} `,me()),ue(),J(c==="public"&&G["posting:default:visibility"]?G["posting:default:visibility"]:c),ae(m||G.postingDefaultLanguage||oe),ee(d&&!!o)}else if(a){const{visibility:o,language:c,sensitive:m,poll:d,mediaAttachments:L}=a,y=!!(d!=null&&d.options)&&{...d,options:d.options.map(v=>(v==null?void 0:v.title)||v),expiresIn:(d==null?void 0:d.expiresIn)||qe(d.expiresAt)};x("loading"),(async()=>{try{const v=await u.v1.statuses.$select(a.id).source.fetch(),{text:k,spoilerText:$}=v;z.current.value=k,z.current.dataset.source=k,me(),ue(),H.current.value=$,J(o),ae(c||presf.postingDefaultLanguage||oe),ee(m),se(y),X(L),x("default")}catch(v){alert((v==null?void 0:v.reason)||v),x("error")}})()}else ue(),G["posting:default:visibility"]&&J(G["posting:default:visibility"]),G["posting:default:language"]&&ae(G["posting:default:language"]),G["posting:default:sensitive"]&&ee(G["posting:default:sensitive"]);if(s){const{status:o,spoilerText:c,visibility:m,language:d,sensitive:L,poll:y,mediaAttachments:v}=s,k=!!(y!=null&&y.options)&&{...y,options:y.options.map($=>($==null?void 0:$.title)||$),expiresIn:(y==null?void 0:y.expiresIn)||qe(y.expiresAt)};z.current.value=o,me(),ue(),c&&(H.current.value=c),m&&J(m),ae(d||G.postingDefaultLanguage||oe),L!==null&&ee(L),k&&se(k),v&&X(v)}},[s,a,e]);const Fe=N(),Ce="You have unsaved changes. Discard this post?",ge=()=>{const{value:o,dataset:c}=z.current;if(g==="loading")return!1;const m=A.length>0;if(!o&&!m||A.length>0&&A.every(k=>k.id))return!0;const L=(e==null?void 0:e.account.id)===p.id,y=e&&o.trim()===`@${e.account.acct}`;return!!(!L&&y||o===(c==null?void 0:c.source))},de=()=>ge()?!0:confirm(Ce);Z(()=>{const o=c=>{ge()||(c.preventDefault(),c.returnValue=Ce)};return window.addEventListener("beforeunload",o,{capture:!0}),()=>window.removeEventListener("beforeunload",o,{capture:!0})},[]);const Qe=()=>{const{value:o}=z.current,{value:c}=H.current;return Ne(Xt(o))+Ne(c)},fe=()=>{const o=Qe();ce.composerCharacterCount=o};Z(fe,[]);const Ae=window.CloseWatcher,be=N(!1);_e("esc",()=>{be.current=!0},{enabled:!Ae,enableOnFormTags:!0}),_e("esc",()=>{!r&&be.current&&de()&&t(),be.current=!1},{enabled:!Ae,enableOnFormTags:!0,keyup:!0,ignoreEventWhen:o=>{const c=document.querySelectorAll("#modal-container > *"),m=!!c,d=c.length===1&&c[0].querySelector("#compose-container");return m&&!d}}),ct(()=>{!r&&de()&&t()},[r,de,t]);const Le=N({}),ze=()=>`${ut()}#${E.current}`,Be=()=>{if(a)return;const o=ze(),c={key:o,replyTo:e?{id:e.id,account:{id:e.account.id,username:e.account.username,acct:e.account.acct}}:null,draftStatus:{uid:E.current,status:z.current.value,spoilerText:H.current.value,visibility:j,language:T,sensitive:q,poll:O,mediaAttachments:A}};!dt(c,Le.current)&&!ge()&&(Te.drafts.set(o,{...c,state:"unsaved",updatedAt:Date.now()}).then(()=>{}).catch(m=>{}),Le.current=structuredClone(c))};ht(Be,5e3),Z(()=>(Be(),()=>{Te.drafts.del(ze())}),[]),Z(()=>{const o=m=>{const{items:d}=m.clipboardData||m.dataTransfer,L=[];for(let y=0;y<d.length;y++){const v=d[y];if(v.kind==="file"){const k=v.getAsFile();k&&F.includes(k.type)&&L.push(k)}}if(L.length>0&&A.length>=b){alert(`You can only attach up to ${b} files.`);return}if(L.length>0){m.preventDefault(),m.stopPropagation();const y=b-A.length,v=L.slice(0,y);if(v.length<=0){alert(`You can only attach up to ${b} files.`);return}const k=v.map($=>({file:$,type:$.type,size:$.size,url:URL.createObjectURL($),id:null,description:null}));X([...A,...k])}};window.addEventListener("paste",o);const c=m=>{m.dataTransfer.items.length>0&&(m.preventDefault(),m.stopPropagation())};return window.addEventListener("dragover",c),window.addEventListener("drop",o),()=>{window.removeEventListener("paste",o),window.removeEventListener("dragover",c),window.removeEventListener("drop",o)}},[A]);const[et,ve]=U(!1),[tt,nt]=we(()=>{const o=[],c=[],{contentTranslationHideLanguages:m=[]}=ce.settings;return Ee.forEach(d=>{const[L]=d;L===T||L===te.current||L===oe||m.includes(L)?o.push(d):c.push(d)}),o.sort(([d,L],[y,v])=>d===T?-1:y===T?1:L.localeCompare(v)),c.sort(([d,L],[y,v])=>L.localeCompare(v)),[o,c]},[T]);return n("div",{id:"compose-container-outer",children:[n("div",{id:"compose-container",class:r?"standalone":"",children:[n("div",{class:"compose-top",children:[(p==null?void 0:p.avatarStatic)&&n(pt,{account:p,accountInstance:f.instanceURL,hideDisplayName:!0,useAvatarStatic:!0}),r?l&&n("button",{type:"button",class:"light pop-button",disabled:g==="loading",onClick:()=>{if(!window.opener){alert("Looks like you closed the parent window.");return}window.opener.__STATES__.showCompose&&!confirm("Looks like you already have a compose field open in the parent window. Popping in this window will discard the changes you made in the parent window. Continue?")||t({fn:()=>{const o={editStatus:a,replyToStatus:e,draftStatus:{uid:E.current,status:z.current.value,spoilerText:H.current.value,visibility:j,language:T,sensitive:q,poll:O,mediaAttachments:A}};window.opener.__COMPOSE__=o,window.opener.__STATES__.showCompose=!0}})},children:n(M,{icon:"popin",alt:"Pop in"})}):n("span",{children:[n("button",{type:"button",class:"light pop-button",disabled:g==="loading",onClick:()=>{mt({editStatus:a,replyToStatus:e,draftStatus:{uid:E.current,status:z.current.value,spoilerText:H.current.value,visibility:j,language:T,sensitive:q,poll:O,mediaAttachments:A}})&&t()},children:n(M,{icon:"popout",alt:"Pop out"})})," ",n("button",{type:"button",class:"light close-button",disabled:g==="loading",onClick:()=>{de()&&t()},children:n(M,{icon:"x"})})]})]}),!!e&&n("div",{class:"status-preview",children:[n($e,{status:e,size:"s",previewMode:!0}),n("div",{class:"status-preview-legend reply-to",children:["Replying to @",e.account.acct||e.account.username,"’s post"]})]}),!!a&&n("div",{class:"status-preview",children:[n($e,{status:a,size:"s",previewMode:!0}),n("div",{class:"status-preview-legend",children:"Editing source post"})]}),n("form",{ref:Fe,class:`form-visibility-${j}`,style:{pointerEvents:g==="loading"?"none":"auto",opacity:g==="loading"?.5:1},onKeyDown:o=>{o.key==="Enter"&&(o.ctrlKey||o.metaKey)&&Fe.current.dispatchEvent(new Event("submit",{cancelable:!0}))},onSubmit:o=>{o.preventDefault();const c=new FormData(o.target),m=Object.fromEntries(c.entries());let{status:d,visibility:L,sensitive:y,spoilerText:v}=m;if(y=y==="on",O){if(O.options.length<2){alert("Poll must have at least 2 options");return}if(O.options.some(k=>k==="")){alert("Some poll choices are empty");return}}A.length>0&&A.some($=>{var V,le;return!((le=(V=$.description)==null?void 0:V.trim)!=null&&le.call(V))})&&!confirm("Some media have no descriptions. Continue?")||(v=y&&v||void 0,d=d===""?void 0:d,x("loading"),(async()=>{try{if(A.length>0){const V=A.map(Q=>{const{file:he,description:it,id:at}=Q;if(at)return Q;{const st=We({file:he,description:it});return u.v2.media.create(st).then(xe=>(xe.id&&(Q.id=xe.id),xe))}}),le=await Promise.allSettled(V);if(le.some(Q=>{var he;return Q.status==="rejected"||!((he=Q.value)!=null&&he.id)})){x("error"),le.forEach(Q=>{Q.status==="rejected"&&alert(Q.reason||`Attachment #${i} failed`)});return}}let k={status:d,spoiler_text:v,language:T,sensitive:y,poll:O,media_ids:A.map(V=>V.id)};a&&Ve("@mastodon/edit-media-attributes")?k.media_attributes=A.map(V=>({id:V.id,description:V.description})):a||(k.visibility=L,k.in_reply_to_id=(e==null?void 0:e.id)||void 0),k=We(k);let $;if(a)$=await u.v1.statuses.$select(a.id).update(k),gt($,h,{skipThreading:!0});else try{$=await u.v1.statuses.create(k,{idempotencyKey:E.current})}catch{$=await u.v1.statuses.create(k)}x("default"),t({type:a?"edit":e?"reply":"post",newStatus:$,instance:h})}catch(k){alert((k==null?void 0:k.reason)||k),x("error")}})())},children:[n("div",{class:"toolbar stretch",children:[n("input",{ref:H,type:"text",name:"spoilerText",placeholder:"Content warning",disabled:g==="loading",class:"spoiler-text-field",lang:T,spellCheck:"true",dir:"auto",style:{opacity:q?1:0,pointerEvents:q?"auto":"none"},onInput:()=>{fe()}}),n("label",{class:`toolbar-button ${q?"highlight":""}`,title:"Content warning or sensitive media",children:[n("input",{name:"sensitive",type:"checkbox",checked:q,disabled:g==="loading",onChange:o=>{var m,d;const c=o.target.checked;ee(c),c?(m=H.current)==null||m.focus():(d=z.current)==null||d.focus()}}),n(M,{icon:`eye-${q?"close":"open"}`})]})," ",n("label",{class:`toolbar-button ${j!=="public"&&!q?"show-field":""} ${j!=="public"?"highlight":""}`,title:`Visibility: ${j}`,children:[n(M,{icon:ft[j],alt:j}),n("select",{name:"visibility",value:j,onChange:o=>{J(o.target.value)},disabled:g==="loading"||!!a,children:[n("option",{value:"public",children:["Public ",n(M,{icon:"earth"})]}),n("option",{value:"unlisted",children:"Unlisted"}),n("option",{value:"private",children:"Followers only"}),n("option",{value:"direct",children:"Private mention"})]})]})," "]}),n(rn,{ref:z,placeholder:e?"Post your reply":a?"Edit your post":"What are you doing?",required:(A==null?void 0:A.length)===0,disabled:g==="loading",lang:T,onInput:()=>{fe()},maxCharacters:C,performSearch:o=>{const{type:c,q:m,limit:d}=o;return c==="accounts"?u.v1.accounts.search.list({q:m,limit:d,resolve:!1}):u.v2.search.fetch(o)}}),(A==null?void 0:A.length)>0&&n("div",{class:"media-attachments",children:[A.map((o,c)=>{const{id:m,file:d}=o,L=(d==null?void 0:d.size)+(d==null?void 0:d.type)+(d==null?void 0:d.name);return n(cn,{attachment:o,disabled:g==="loading",lang:T,onDescriptionChange:y=>{X(v=>{const k=[...v];return k[c].description=y,k})},onRemove:()=>{X(y=>y.filter((v,k)=>k!==c))}},m||L||c)}),n("label",{class:"media-sensitive",children:[n("input",{name:"sensitive",type:"checkbox",checked:q,disabled:g==="loading",onChange:o=>{const c=o.target.checked;ee(c)}})," ",n("span",{children:"Mark media as sensitive"})," ",n(M,{icon:`eye-${q?"close":"open"}`})]})]}),!!O&&n(un,{lang:T,maxOptions:S,maxExpiration:W,minExpiration:Y,maxCharactersPerOption:R,poll:O,disabled:g==="loading",onInput:o=>{if(o){const c={...o};se(c)}else se(null)}}),n("div",{class:"toolbar wrap",style:{justifyContent:"flex-end"},children:[n("span",{children:[n("label",{class:"toolbar-button",children:[n("input",{type:"file",accept:F.join(","),multiple:A.length<b-1,disabled:g==="loading"||A.length>=b||!!O,onChange:o=>{const c=o.target.files;if(!c)return;const m=Array.from(c).map(d=>({file:d,type:d.type,size:d.size,url:URL.createObjectURL(d),id:null,description:null}));A.length+m.length>b?alert(`You can only attach up to ${b} files.`):X(d=>d.concat(m)),o.target.value=""}}),n(M,{icon:"attachment"})]})," ",n("button",{type:"button",class:"toolbar-button",disabled:g==="loading"||!!O||!!A.length,onClick:()=>{se({options:["",""],expiresIn:24*60*60,multiple:!1})},children:n(M,{icon:"poll",alt:"Add poll"})})," ",n("button",{type:"button",class:"toolbar-button",disabled:g==="loading",onClick:()=>{ve(!0)},children:n(M,{icon:"emoji2"})})]}),n("div",{class:"spacer"}),g==="loading"?n(Ye,{abrupt:!0}):n(ln,{maxCharacters:C,hidden:g==="loading"}),n("label",{class:`toolbar-button ${T!==te.current?"highlight":""}`,children:[n("span",{class:"icon-text",children:(Ie=Wt[T])==null?void 0:Ie.native}),n("select",{name:"language",value:T,onChange:o=>{const{value:c}=o.target;ae(c||oe),re.session.set("currentLanguage",c||oe)},disabled:g==="loading",children:[tt.map(([o,c,m])=>n("option",{value:o,children:[c," (",m,")"]},o)),n("hr",{}),nt.map(([o,c,m])=>n("option",{value:o,children:[c," (",m,")"]},o))]})]})," ",n("button",{type:"submit",class:"large",disabled:g==="loading",children:e?"Reply":a?"Update":"Post"})]})]})]}),et&&n(Ze,{onClick:o=>{o.target===o.currentTarget&&ve(!1)},children:n(hn,{masto:u,instance:h,onClose:()=>{ve(!1)},onSelect:o=>{const c=` ${o} `,m=z.current;if(!m)return;const{selectionStart:d,selectionEnd:L}=m,y=m.value,v=y.slice(0,d)+c+y.slice(L);m.value=v,m.selectionStart=m.selectionEnd=L+c.length,m.focus(),m.dispatchEvent(new Event("input"))}})})]})}function Ue(t){if(!t)return;const{value:e,offsetHeight:a,scrollHeight:s,clientHeight:r}=t;if(a<window.innerHeight){const l=a-r,u=e?s+l+"px":null;t.style.height=u}}const rn=yt((t,e)=>{var C;const{masto:a}=Ge(),[s,r]=U(((C=e.current)==null?void 0:C.value)||""),{maxCharacters:l,performSearch:u=()=>{},...h}=t,g=N();Z(()=>{(async()=>{try{const b=await a.v1.customEmojis.list();g.current=b}catch{}})()},[]);const x=N(),E=N("");Z(()=>{let b,I,F;return x.current&&(b=B=>{const{key:D,provide:K,text:P}=B.detail;if(E.current=P,P===""){K(Promise.resolve({matched:!1}));return}if(D===":"){const S=dn(g.current,P);let R="";S.forEach(W=>{const{shortcode:Y,url:z}=W;R+=`
                <li role="option" data-value="${ne(Y)}">
                <img src="${ne(z)}" width="16" height="16" alt="" loading="lazy" /> 
                :${ne(Y)}:
              </li>`}),ie.innerHTML=R,K(Promise.resolve({matched:S.length>0,fragment:ie}));return}const _={"@":"accounts","#":"hashtags"}[D];K(new Promise(S=>{u({type:_,q:P,limit:5}).then(W=>{if(P!==E.current)return;const Y=W[_]||W;let z="";Y.forEach(H=>{var X;const{name:j,avatarStatic:J,displayName:q,username:ee,acct:T,emojis:ae,history:te}=H,A=bt(q,ae);if(T)z+=`
                    <li role="option" data-value="${ne(T)}">
                      <span class="avatar">
                        <img src="${ne(J)}" width="16" height="16" alt="" loading="lazy" />
                      </span>
                      <span>
                        <b>${A||ee}</b>
                        <br>@${ne(T)}
                      </span>
                    </li>
                  `;else{const O=(X=te==null?void 0:te.reduce)==null?void 0:X.call(te,(se,G)=>se+ +G.uses,0);z+=`
                    <li role="option" data-value="${ne(j)}">
                      <span class="grow">#<b>${ne(j)}</b></span>
                      ${O?`<span class="count">${vt(O)}</span>`:""}
                    </li>
                  `}ie.innerHTML=z}),S({matched:Y.length>0,fragment:ie})})}))},x.current.addEventListener("text-expander-change",b),I=B=>{const{key:D,item:K}=B.detail;D===":"?B.detail.value=`:${K.dataset.value}:`:B.detail.value=`${D}${K.dataset.value}`},x.current.addEventListener("text-expander-value",I),F=B=>{const{input:D}=B.detail;if(r(D.value),e.current){const K=new Event("input",{bubbles:!0});e.current.dispatchEvent(K)}},x.current.addEventListener("text-expander-committed",F)),()=>{x.current&&(x.current.removeEventListener("text-expander-change",b),x.current.removeEventListener("text-expander-value",I),x.current.removeEventListener("text-expander-committed",F))}},[]),Z(()=>{const b=e.current;if(!b)return;new ResizeObserver(()=>{if(x.current){const{height:F}=b.getBoundingClientRect();x.current.style.height=F+"px"}}).observe(b)},[]);const f=N(0),p=N(),w=xt(b=>{var B;if(!p.current)return;if(f.current>3){p.current.innerHTML="",p.current=null,(B=w==null?void 0:w.cancel)==null||B.call(w);return}let I,F;f.current<=3&&(I=Date.now()),p.current.innerHTML=on(b,{maxCharacters:l})+`
`,f.current<=3&&(F=Date.now()),I&&F&&F-I>50&&f.current++},500);return n("text-expander",{ref:x,keys:"@ # :",class:"compose-field-container",children:[n("textarea",{class:"compose-field",autoCapitalize:"sentences",autoComplete:"on",autoCorrect:"on",spellCheck:"true",dir:"auto",rows:"6",cols:"50",...h,ref:e,name:"status",value:s,onKeyDown:b=>{const{key:I,target:F}=b;if(I==="Enter"&&!(b.ctrlKey||b.metaKey))try{const{value:B,selectionStart:D}=F,P=B.slice(0,D).split(`
`).slice(-1)[0];if(P&&/^\s*(-|\d+\.)\s/.test(P)){const[_,S,R,W,Y]=P.match(/^(\s*)(-|\d+\.)(\s+)(.+)?/)||[];if(Y){b.preventDefault();const[z]=R.match(/\d+/)||[],H=z?`${+z+1}.`:"-",j=`
${S}${H}${W}`;F.setRangeText(j,D,D);const J=D+j.length;F.setSelectionRange(J,J)}else{const z=D-P.length;F.setRangeText("",z,D)}Ue(F),F.dispatchEvent(new Event("input"))}}catch{}p.current&&(p.current.scrollTop=F.scrollTop)},onInput:b=>{var B;const{target:I}=b,F=I.value;r(F),Ue(I),(B=t.onInput)==null||B.call(t,b),w(F)},style:{width:"100%",height:"4em"},onScroll:b=>{if(p.current){const{scrollTop:I}=b.target;p.current.scrollTop=I}}}),n("div",{ref:p,class:"compose-highlight","aria-hidden":"true"})]})});function ln({maxCharacters:t=500,hidden:e}){const s=kt(ce).composerCharacterCount,r=t-s;return e?n("meter",{class:"donut",hidden:!0}):n("meter",{class:`donut ${r<=-10?"explode":r<=0?"danger":r<=20?"warning":""}`,value:s,max:t,"data-left":r,title:`${r}/${t}`,style:{"--percentage":s/t*100}})}function cn({attachment:t,disabled:e,lang:a,onDescriptionChange:s=()=>{},onRemove:r=()=>{}}){const[l,u]=U("default"),h=Ve("@mastodon/edit-media-attributes"),{type:g,id:x,file:E}=t,f=we(()=>E?URL.createObjectURL(E):t.url,[E,t.url]),[p,w]=U(t.description),[C,b]=g.split("/"),I=wt(s,250),[F,B]=U(!1),D=N(null);Z(()=>{let _;return F&&D.current&&(_=setTimeout(()=>{D.current.focus()},100)),()=>{clearTimeout(_)}},[F]);const K=n(ke,{children:x&&!h?n("div",{class:"media-desc",children:[n("span",{class:"tag",children:"Uploaded"}),n("p",{title:p,children:t.description||n("i",{children:"No description"})})]}):n("textarea",{ref:D,value:p||"",lang:a,placeholder:{image:"Image description",video:"Video description",audio:"Audio description"}[C],autoCapitalize:"sentences",autoComplete:"on",autoCorrect:"on",spellCheck:"true",dir:"auto",disabled:e||l==="loading",class:l==="loading"?"loading":"",maxlength:"1500",onInput:_=>{const{value:S}=_.target;w(S),I(S)}})}),P=N(null);return Z(()=>()=>{var _,S;(S=(_=P.current)==null?void 0:_.hideToast)==null||S.call(_)},[]),n(ke,{children:[n("div",{class:"media-attachment",children:[n("div",{class:"media-preview",tabIndex:"0",onClick:()=>{B(!0)},children:C==="image"?n("img",{src:f,alt:""}):C==="video"||C==="gifv"?n("video",{src:f,playsinline:!0,muted:!0}):C==="audio"?n("audio",{src:f,controls:!0}):null}),K,n("div",{class:"media-aside",children:n("button",{type:"button",class:"plain close-button",disabled:e,onClick:r,children:n(M,{icon:"x"})})})]}),F&&n(Ze,{onClick:_=>{_.target===_.currentTarget&&B(!1)},children:n("div",{id:"media-sheet",class:"sheet sheet-max",children:[n("button",{type:"button",class:"sheet-close",onClick:()=>{B(!1)},children:n(M,{icon:"x"})}),n("header",{children:n("h2",{children:{image:"Edit image description",video:"Edit video description",audio:"Edit audio description"}[C]})}),n("main",{tabIndex:"-1",children:[n("div",{class:"media-preview",children:C==="image"?n("img",{src:f,alt:""}):C==="video"||C==="gifv"?n("video",{src:f,playsinline:!0,controls:!0}):C==="audio"?n("audio",{src:f,controls:!0}):null}),n("div",{class:"media-form",children:[K,n("footer",{children:[C==="image"&&/^(png|jpe?g|gif|webp)$/i.test(b)&&!!ce.settings.mediaAltGenerator&&!!Oe&&n(Et,{portal:{target:document.body},containerProps:{style:{zIndex:1001}},align:"center",position:"anchor",overflow:"auto",menuButton:n("button",{type:"button",title:"More",class:"plain",children:n(M,{icon:"more",size:"l",alt:"More"})}),children:n(Ft,{disabled:l==="loading",onClick:()=>{u("loading"),P.current=De({text:"Generating description. Please wait...",duration:-1}),async function(){var _,S;try{const R=new FormData;R.append("image",E);const W=await fetch(Oe,{method:"POST",body:R}).then(Y=>Y.json());if(W.error)throw new Error(W.error);w(W.description)}catch(R){De(`Failed to generate description${R!=null&&R.message?`: ${R.message}`:""}`)}finally{u("default"),(S=(_=P.current)==null?void 0:_.hideToast)==null||S.call(_)}}()},children:[n(M,{icon:"sparkles2"}),n("span",{children:"Generate description…"})]})}),n("button",{type:"button",class:"light block",onClick:()=>{B(!1)},disabled:l==="loading",children:"Done"})]})]})]})]})})]})}function un({lang:t,poll:e,disabled:a,onInput:s=()=>{},maxOptions:r,maxExpiration:l,minExpiration:u,maxCharactersPerOption:h}){const{options:g,expiresIn:x,multiple:E}=e;return n("div",{class:`poll ${E?"multiple":""}`,children:[n("div",{class:"poll-choices",children:g.map((f,p)=>n("div",{class:"poll-choice",children:[n("input",{required:!0,type:"text",value:f,disabled:a,maxlength:h,placeholder:`Choice ${p+1}`,lang:t,spellCheck:"true",dir:"auto",onInput:w=>{const{value:C}=w.target;g[p]=C,s(e)}}),n("button",{type:"button",class:"plain2 poll-button",disabled:a||g.length<=1,onClick:()=>{g.splice(p,1),s(e)},children:n(M,{icon:"x",size:"s"})})]},p))}),n("div",{class:"poll-toolbar",children:[n("button",{type:"button",class:"plain2 poll-button",disabled:a||g.length>=r,onClick:()=>{g.push(""),s(e)},children:"+"})," ",n("label",{class:"multiple-choices",children:[n("input",{type:"checkbox",checked:E,disabled:a,onChange:f=>{const{checked:p}=f.target;e.multiple=p,s(e)}})," ","Multiple choices"]}),n("label",{class:"expires-in",children:["Duration"," ",n("select",{value:x,disabled:a,onChange:f=>{const{value:p}=f.target;e.expiresIn=p,s(e)},children:Object.entries(Je).filter(([f,p])=>p>=u&&p<=l).map(([f,p])=>n("option",{value:p,children:f},p))})]})]}),n("div",{class:"poll-toolbar",children:n("button",{type:"button",class:"plain remove-poll-button",disabled:a,onClick:()=>{s(null)},children:"Remove poll"})})]})}function dn(t,e){return e=e.toLowerCase(),t.sort((a,s)=>{let r=a.shortcode.toLowerCase(),l=s.shortcode.toLowerCase(),u=r.startsWith(e),h=l.startsWith(e),g=r.includes(e),x=l.includes(e);return u&&h?a.length-s.length:u?-1:h?1:g&&x?a.length-s.length:g?-1:x?1:0}).slice(0,5)}function ne(t){return t.replace(/[&<>"']/g,function(e){return"&#"+e.charCodeAt(0)+";"})}function We(t){for(let e in t)(t[e]===null||t[e]===void 0)&&delete t[e];return t}function hn({masto:t,instance:e,onClose:a=()=>{},onSelect:s=()=>{}}){const[r,l]=U("default"),u=N([]),[h,g]=U({}),x=we(()=>re.account.get("recentlyUsedCustomEmojis")||[]);return Z(()=>{l("loading"),(async()=>{try{const E=await t.v1.customEmojis.list(),f={"--recent--":x.filter(w=>E.find(C=>C.shortcode===w.shortcode))},p=[];E.forEach(w=>{var C,b;if(w.visibleInPicker){if((b=(C=u.current)==null?void 0:C.push)==null||b.call(C,w),!w.category){p.push(w);return}f[w.category]||(f[w.category]=[]),f[w.category].push(w)}}),p.length&&(f["--others--"]=p),g(f),l("default")}catch{l("error")}})()},[]),n("div",{id:"custom-emojis-sheet",class:"sheet",children:[!!a&&n("button",{type:"button",class:"sheet-close",onClick:a,children:n(M,{icon:"x"})}),n("header",{children:[n("b",{children:"Custom emojis"})," ",r==="loading"?n(Ye,{}):n("small",{class:"insignificant",children:[" • ",e]})]}),n("main",{children:n("div",{class:"custom-emojis-list",children:[r==="error"&&n("div",{class:"ui-state",children:n("p",{children:"Error loading custom emojis"})}),r==="default"&&Object.entries(h).map(([E,f])=>!!(f!=null&&f.length)&&n(ke,{children:[n("div",{class:"section-header",children:{"--recent--":"Recently used","--others--":"Others"}[E]||E}),n("section",{children:f.map(p=>n("button",{type:"button",class:"plain4",onClick:()=>{a(),requestAnimationFrame(()=>{s(`:${p.shortcode}:`)});let w=re.account.get("recentlyUsedCustomEmojis")||[];const C=w.findIndex(b=>b.shortcode===p.shortcode);C!==-1?(w.splice(C,1),w.unshift(p)):(w.unshift(p),w=w.filter(b=>{var I,F;return(F=(I=u.current)==null?void 0:I.find)==null?void 0:F.call(I,B=>B.shortcode===b.shortcode)}),w=w.slice(0,10)),re.account.set("recentlyUsedCustomEmojis",w)},title:`:${p.shortcode}:`,children:n("picture",{children:[!!p.staticUrl&&n("source",{srcset:p.staticUrl,media:"(prefers-reduced-motion: reduce)"}),n("img",{class:"shortcode-emoji",src:p.url||p.staticUrl,alt:p.shortcode,width:"16",height:"16",loading:"lazy",decoding:"async"})]})},p))})]}))]})})]})}export{gn as C};
//# sourceMappingURL=compose-ByGGTysR.js.map
