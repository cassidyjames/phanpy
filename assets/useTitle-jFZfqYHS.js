import{K as Na,L as Ba,D as ja,O as Xn,P as Va,v as Qn,i as Ua,_ as ee,p as he,h as X,a as e,w as It,u as Ne,Q as Ha,e as Ka,N as ea,U as qa,V as Wa,M as $e,W as Ga,S as Ja,g as W,X as Za,Y as ht,Z as Ya,$ as Xa,a0 as Qa,a1 as eo,a2 as ta,B as to,a3 as no,a4 as ao,a5 as oo,a6 as io,a7 as ro,a8 as so,a9 as co,aa as lo,ab as uo,ac as na,ad as mo,f as ho,ae as po,T as aa,F as Se,y as sn,af as In,r as fo,b as nt,q as go,o as vo,d as Gt,J as oa,C as bo,ag as yo,ah as _o,ai as Rn,aj as ko,ak as Dn,al as wo,m as xo,x as Pn}from"./vendor-mzv5qb3T.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();function ia(t){const n=B.local.getJSON("accounts")||[];return n.find(a=>a.info.id===t)||n[0]}function Eo(t){return(B.local.getJSON("accounts")||[]).find(a=>a.accessToken===t)}function Rt(){window.__IGNORE_GET_ACCOUNT_ERROR__;const t=B.session.get("currentAccount");return ia(t)}function Lt(){const t=Rt(),{instanceURL:n,info:{id:a}}=t;return`${a}@${n}`}function To(t){const n=B.local.getJSON("accounts")||[],a=n.find(s=>s.info.id===t.info.id);a?(a.info=t.info,a.instanceURL=t.instanceURL,a.accessToken=t.accessToken,a.vapidKey=t.vapidKey):n.push(t),B.local.setJSON("accounts",n),B.session.set("currentAccount",t.info.id)}function nr(t){const n=B.local.getJSON("accounts")||[],a=n.find(s=>s.info.id===t.id);a&&(a.info.displayName!==t.displayName||a.info.avatar!==t.avatar||a.info.avatar_static!==t.avatar_static)&&(a.info={...a.info,...t},B.local.setJSON("accounts",n))}let Jt=null;function ra(){if(Jt)return Jt;try{const t=Rt(),n=B.local.getJSON("instances"),a=t.instanceURL.toLowerCase();return Jt=n[a]}catch(t){return alert(`Failed to load instance configuration. Please try again.

${t}`),B.local.del("instances"),location.reload(),{}}}function Lo(t){const{configuration:n,maxMediaAttachments:a,maxTootChars:s,pleroma:o,pollLimits:r}=t,c=(n==null?void 0:n.statuses)||{};a&&(c.maxMediaAttachments??(c.maxMediaAttachments=a)),s&&(c.maxCharacters??(c.maxCharacters=s));const u=(n==null?void 0:n.polls)||{};return r&&(u.maxCharactersPerOption??(u.maxCharactersPerOption=r.maxOptionChars),u.maxExpiration??(u.maxExpiration=r.maxExpiration),u.maxOptions??(u.maxOptions=r.maxOptions),u.minExpiration??(u.minExpiration=r.minExpiration)),{...n,statuses:c,polls:u}}function Ao(){const t=ra();return Lo(t)}const Be={get:t=>{try{return localStorage.getItem(t)}catch{return null}},getJSON:t=>{try{return JSON.parse(Be.get(t))}catch{return null}},set:(t,n)=>{try{return localStorage.setItem(t,n)}catch{return null}},setJSON:(t,n)=>{try{return Be.set(t,JSON.stringify(n))}catch{return null}},del:t=>{try{return localStorage.removeItem(t)}catch{return null}}},cn={get:t=>{try{return sessionStorage.getItem(t)}catch{return null}},getJSON:t=>{try{return JSON.parse(cn.get(t))}catch{return null}},set:(t,n)=>{try{return sessionStorage.setItem(t,n)}catch{return null}},setJSON:(t,n)=>{try{return cn.set(t,JSON.stringify(n))}catch{return null}},del:t=>{try{return sessionStorage.removeItem(t)}catch{return null}}},Fo={get:t=>{try{return Be.getJSON(t)[Lt()]}catch{return null}},set:(t,n)=>{try{const a=Be.getJSON(t)||{};return a[Lt()]=n,Be.setJSON(t,a)}catch{return null}},del:t=>{try{const n=Be.getJSON(t)||{};return delete n[Lt()],Be.setJSON(t,n)}catch{return null}}},B={local:Be,session:cn,account:Fo},At="mastodon.social",Ct={},De={};window.__ACCOUNT_APIS__=De;let ge;function Ke({instance:t,accessToken:n}){/^https?:\/\//.test(t)&&(t=t.replace(/^https?:\/\//,"").replace(/\/+$/,"").toLowerCase());const a=t?`https://${t}`:`https://${At}`,o={masto:Na({url:a,accessToken:n,timeout:3e4}),instance:t,accessToken:n};return Ct[t]=o,De[t]||(De[t]={}),n&&(De[t][n]=o),o}async function ar(t,n){const{masto:a,accessToken:s}=t;let o;try{o=await a.v2.instance.fetch()}catch{}if(!o)try{o=await a.v1.instance.fetch()}catch{}if(!o)return;const{uri:r,urls:{streamingApi:c}={},domain:u,configuration:{urls:{streaming:h}={}}={}}=o,g=B.local.getJSON("instances")||{};if((r||u)&&(g[(u||r).replace(/^https?:\/\//,"").replace(/\/+$/,"").toLowerCase()]=o),n&&(g[n.toLowerCase()]=o),B.local.setJSON("instances",g),"WebSocket"in window&&(c||h)){const p=Ba({streamingApiUrl:h||c,accessToken:s,implementation:WebSocket});t.streaming=p}}async function or(t,n,a,s){const{masto:o}=t,r=await o.v1.accounts.verifyCredentials();B.session.set("currentAccount",r.id),To({info:r,instanceURL:n.toLowerCase(),accessToken:a,vapidKey:s})}async function ir(t){try{const{masto:n}=t,a=await n.v1.preferences.fetch();B.account.set("preferences",a)}catch{}}function Je({instance:t,accessToken:n,accountID:a,account:s}={}){var h,g,m,p;if(t&&(t=t.toLowerCase().trim()),t&&n){const d=((h=De[t])==null?void 0:h[n])||Ke({instance:t,accessToken:n}),{masto:f,streaming:_}=d;return{masto:f,streaming:_,client:d,authenticated:!0,instance:t}}if(n)for(const d in De)if(De[d][n]){const f=De[d][n],{masto:_,streaming:y}=f;return{masto:_,streaming:y,client:f,authenticated:!0,instance:d}}else{const f=Eo(n);if(f){const _=f.accessToken,y=f.instanceURL.toLowerCase().trim(),v=Ke({instance:y,accessToken:_}),{masto:b,streaming:w}=v;return{masto:b,streaming:w,client:v,authenticated:!0,instance:y}}else throw new Error("Access token not found")}if(s||a)if(s=s||ia(a),s){const d=s.accessToken,f=s.instanceURL.toLowerCase().trim(),_=((g=De[f])==null?void 0:g[d])||Ke({instance:f,accessToken:d}),{masto:y,streaming:v}=_;return{masto:y,streaming:v,client:_,authenticated:!0,instance:f}}else throw new Error(`Account ${a} not found`);const o=Rt();if(t){if((ge==null?void 0:ge.instance)===t)return{masto:ge.masto,streaming:ge.streaming,client:ge,authenticated:!0,instance:t};if((o==null?void 0:o.instanceURL)===t){const{accessToken:v}=o;return ge=((m=De[t])==null?void 0:m[v])||Ke({instance:t,accessToken:v}),{masto:ge.masto,streaming:ge.streaming,client:ge,authenticated:!0,instance:t}}const d=Ct[t]||Ke({instance:t}),{masto:f,streaming:_,accessToken:y}=d;return{masto:f,streaming:_,client:d,authenticated:!!y,instance:t}}if(ge)return{masto:ge.masto,streaming:ge.streaming,client:ge,authenticated:!0,instance:ge.instance};if(o){const{accessToken:d,instanceURL:f}=o;return ge=((p=De[f])==null?void 0:p[d])||Ke({instance:f,accessToken:d}),{masto:ge.masto,streaming:ge.streaming,client:ge,authenticated:!0,instance:f}}const r=Ct[At]||Ke({instance:At}),{masto:c,streaming:u}=r;return{masto:c,streaming:u,client:r,authenticated:!1,instance:At}}window.__API__={currentAccountApi:ge,apis:Ct,accountApis:De};window._showToast=Ce;function Ce(t){typeof t=="string"&&(t={text:t});const{onClick:n,delay:a,...s}=t,o=ja({className:`${n||t.destination?"shiny-pill":""}`,gravity:"bottom",position:"center",...s,onClick:()=>{n==null||n(o)}});a?setTimeout(()=>{o.showToast()},a):o.showToast()}window._moize=Xn;function Ye(t,n={}){return Xn(t,{...n,maxSize:50,isDeepEqual:!0})}function Dt(t,n={}){return Ye(t,{isPromise:!0,...n})}const L=Va({appVersion:{},prevLocation:null,currentLocation:null,statuses:{},statusThreadNumber:{},home:[],homeNew:[],homeLast:null,homeLastFetchTime:null,notifications:[],notificationsLast:null,notificationsNew:[],notificationsShowNew:!1,notificationsLastFetchTime:null,reloadStatusPage:0,reloadGenericAccounts:{id:null,counter:0},spoilers:{},scrollPositions:{},unfurledLinks:{},statusQuotes:{},statusFollowedTags:{},accounts:{},routeNotification:null,showCompose:!1,showSettings:!1,showAccount:!1,showAccounts:!1,showDrafts:!1,showMediaModal:!1,showShortcutsSettings:!1,showKeyboardShortcutsHelp:!1,showGenericAccounts:!1,showMediaAlt:!1,shortcuts:[],settings:{autoRefresh:!1,shortcutsViewMode:null,shortcutsColumnsMode:!1,boostsCarousel:!0,contentTranslation:!0,contentTranslationTargetLanguage:null,contentTranslationHideLanguages:[],contentTranslationAutoInline:!1,cloakMode:!1}});function rr(){L.notificationsLast=B.account.get("notificationsLast")||null,L.shortcuts=B.account.get("shortcuts")??[],L.settings.autoRefresh=B.account.get("settings-autoRefresh")??!1,L.settings.shortcutsViewMode=B.account.get("settings-shortcutsViewMode")??null,B.account.get("settings-shortcutsColumnsMode")&&(L.settings.shortcutsColumnsMode=!0),L.settings.boostsCarousel=B.account.get("settings-boostsCarousel")??!0,L.settings.contentTranslation=B.account.get("settings-contentTranslation")??!0,L.settings.contentTranslationTargetLanguage=B.account.get("settings-contentTranslationTargetLanguage")||null,L.settings.contentTranslationHideLanguages=B.account.get("settings-contentTranslationHideLanguages")||[],L.settings.contentTranslationAutoInline=B.account.get("settings-contentTranslationAutoInline")??!1,L.settings.cloakMode=B.account.get("settings-cloakMode")??!1}Qn(L,"notificationsLast",t=>{B.account.set("notificationsLast",L.notificationsLast)});Ua(L,t=>{for(const[n,a,s,o]of t)a.join(".")==="settings.autoRefresh"&&B.account.set("settings-autoRefresh",!!s),a.join(".")==="settings.boostsCarousel"&&B.account.set("settings-boostsCarousel",!!s),a.join(".")==="settings.shortcutsViewMode"&&B.account.set("settings-shortcutsViewMode",s),a.join(".")==="settings.contentTranslation"&&B.account.set("settings-contentTranslation",!!s),a.join(".")==="settings.contentTranslationAutoInline"&&B.account.set("settings-contentTranslationAutoInline",!!s),a.join(".")==="settings.contentTranslationTargetLanguage"&&B.account.set("settings-contentTranslationTargetLanguage",s),/^settings\.contentTranslationHideLanguages/i.test(a.join("."))&&B.account.set("settings-contentTranslationHideLanguages",L.settings.contentTranslationHideLanguages),(a==null?void 0:a[0])==="shortcuts"&&B.account.set("shortcuts",L.shortcuts),a.join(".")==="settings.cloakMode"&&B.account.set("settings-cloakMode",!!s)});function Pe(t,n){if(t)return n?`${n}/${t}`:t}function sa(t,n){if(n){const a=Pe(t,n);return L.statuses[a]}return L.statuses[t]}function Re(t,n,a){typeof n=="object"&&(a=n,n=null);const{override:s,skipThreading:o}=Object.assign({override:!0,skipThreading:!1},a);if(!t)return;const r=sa(t.id,n);if(!s&&r)return;const c=Pe(t.id,n);if(r!=null&&r._pinned&&(t._pinned=r._pinned),L.statuses[c]=t,t.reblog){const u=Pe(t.reblog.id,n);L.statuses[u]=t.reblog}o||requestAnimationFrame(()=>{Mn(t,n),t.reblog&&Mn(t.reblog,n)})}function Mn(t,n){const{masto:a,instance:s}=Je({instance:n});let o=0;async function r(c,u=0){const{inReplyToId:h,inReplyToAccountId:g}=c;if(!h||g!==c.account.id)return[c];if(h&&g!==c.account.id)throw"Not a thread";const m=Pe(h,s);let p=L.statuses[m];if(!p){if(o++>3)throw"Too many fetches for thread";await new Promise(d=>setTimeout(d,500*o)),p=await Co(h,a),Re(p,s,{skipThreading:!0})}return[...await r(p,++u),c]}return r(t).then(c=>{c.length>1&&c.forEach((u,h)=>{const g=Pe(u.id,s);L.statusThreadNumber[g]=h+1})}).catch(c=>{})}const Co=Dt((t,n)=>n.v1.statuses.$select(t).fetch());function $o(t,n,a,s){const o=ee(t);he(()=>{o.current=t},[t,a]),he(()=>{!s||n===null||n===!1||o.current()},[s]),he(()=>{if(n===null||n===!1)return;const c=setInterval(()=>o.current(),n);return()=>clearInterval(c)},[n])}function ca(t){const n=new URL("/compose/",window.location),{width:a,height:s}=window.screen,o=Math.max(0,(a-600)/2),r=Math.max(0,(s-450)/2),c=Math.min(a,600),u=Math.min(s,450),h=(t==null?void 0:t.uid)||Math.random(),g=window.open(n,"compose"+h,`width=${c},height=${u},left=${o},top=${r}`);return g?g.__COMPOSE__=t:alert("Looks like your browser is blocking popups."),g}const So="modulepreload",Io=function(t,n){return new URL(t,n).href},On={},k=function(n,a,s){let o=Promise.resolve();if(a&&a.length>0){const r=document.getElementsByTagName("link");o=Promise.all(a.map(c=>{if(c=Io(c,s),c in On)return;On[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!s)for(let p=r.length-1;p>=0;p--){const d=r[p];if(d.href===c&&(!u||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":So,u||(m.as="script",m.crossOrigin=""),m.href=c,document.head.appendChild(m),u)return new Promise((p,d)=>{m.addEventListener("load",p),m.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${c}`)))})}))}return o.then(()=>n()).catch(r=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=r,window.dispatchEvent(c),!c.defaultPrevented)throw r})},Ro={s:12,m:16,l:20,xl:24,xxl:32},Do={x:()=>k(()=>import("./icons/close-line-YTE7hIJE.js"),__vite__mapDeps([]),import.meta.url),heart:()=>k(()=>import("./icons/heart-line-VwvWYh8h.js"),__vite__mapDeps([]),import.meta.url),bookmark:()=>k(()=>import("./icons/bookmark-line-D6jQ7QFs.js"),__vite__mapDeps([]),import.meta.url),"check-circle":()=>k(()=>import("./icons/check-circle-line-sE41WGxF.js"),__vite__mapDeps([]),import.meta.url),"x-circle":()=>k(()=>import("./icons/close-circle-line-qd3g541O.js"),__vite__mapDeps([]),import.meta.url),transfer:()=>k(()=>import("./icons/transfer-4-line-Q9QJoxz3.js"),__vite__mapDeps([]),import.meta.url),rocket:()=>k(()=>import("./icons/rocket-line-rZbVYYCZ.js"),__vite__mapDeps([]),import.meta.url),"arrow-left":()=>k(()=>import("./icons/arrow-left-line-_YC6-XGG.js"),__vite__mapDeps([]),import.meta.url),"arrow-right":()=>k(()=>import("./icons/arrow-right-line-PypiEqpu.js"),__vite__mapDeps([]),import.meta.url),"arrow-up":()=>k(()=>import("./icons/arrow-up-line-fcuKqhVE.js"),__vite__mapDeps([]),import.meta.url),"arrow-down":()=>k(()=>import("./icons/arrow-down-line-0TRJUP_K.js"),__vite__mapDeps([]),import.meta.url),earth:()=>k(()=>import("./icons/earth-line-t1Um8wpQ.js"),__vite__mapDeps([]),import.meta.url),lock:()=>k(()=>import("./icons/lock-line-0jNHqZpm.js"),__vite__mapDeps([]),import.meta.url),unlock:()=>k(()=>import("./icons/unlock-line-w3piJMVb.js"),__vite__mapDeps([]),import.meta.url),"eye-close":()=>k(()=>import("./icons/eye-close-line-lBiePPv9.js"),__vite__mapDeps([]),import.meta.url),"eye-open":()=>k(()=>import("./icons/eye-2-line-vz_Kw-rK.js"),__vite__mapDeps([]),import.meta.url),message:()=>k(()=>import("./icons/mail-line-5XLS6FEo.js"),__vite__mapDeps([]),import.meta.url),comment:()=>k(()=>import("./icons/chat-3-line-F0xcdpXY.js"),__vite__mapDeps([]),import.meta.url),comment2:()=>k(()=>import("./icons/comment-2-line-xEXuT-Ip.js"),__vite__mapDeps([]),import.meta.url),home:()=>k(()=>import("./icons/home-3-line-qJiZhXUH.js"),__vite__mapDeps([]),import.meta.url),notification:()=>k(()=>import("./icons/notification-line-olNPLtgS.js"),__vite__mapDeps([]),import.meta.url),follow:()=>k(()=>import("./icons/user-follow-line-k_GCWTtp.js"),__vite__mapDeps([]),import.meta.url),"follow-add":()=>k(()=>import("./icons/user-add-line-zzW9OULB.js"),__vite__mapDeps([]),import.meta.url),poll:[()=>k(()=>import("./icons/chart-bar-line-5r_DfN2w.js"),__vite__mapDeps([]),import.meta.url),"90deg"],pencil:()=>k(()=>import("./icons/pencil-line-bKXqElLR.js"),__vite__mapDeps([]),import.meta.url),quill:()=>k(()=>import("./icons/quill-pen-line-h_5-FsGz.js"),__vite__mapDeps([]),import.meta.url),at:()=>k(()=>import("./icons/at-line-9vJS_Hnl.js"),__vite__mapDeps([]),import.meta.url),attachment:()=>k(()=>import("./icons/attachment-line-C2PUa1Ke.js"),__vite__mapDeps([]),import.meta.url),upload:()=>k(()=>import("./icons/upload-3-line-Qsjvubiw.js"),__vite__mapDeps([]),import.meta.url),gear:()=>k(()=>import("./icons/settings-3-line-kt4MSpRv.js"),__vite__mapDeps([]),import.meta.url),more:()=>k(()=>import("./icons/more-3-line-wUD-Yhmj.js"),__vite__mapDeps([]),import.meta.url),external:()=>k(()=>import("./icons/external-link-line-8nOOkmFu.js"),__vite__mapDeps([]),import.meta.url),popout:()=>k(()=>import("./icons/external-link-line-8nOOkmFu.js"),__vite__mapDeps([]),import.meta.url),popin:[()=>k(()=>import("./icons/external-link-line-8nOOkmFu.js"),__vite__mapDeps([]),import.meta.url),"180deg"],plus:()=>k(()=>import("./icons/add-circle-line--O-MfyNy.js"),__vite__mapDeps([]),import.meta.url),"chevron-left":()=>k(()=>import("./icons/left-line-Jck0yVmC.js"),__vite__mapDeps([]),import.meta.url),"chevron-right":()=>k(()=>import("./icons/right-line-7VBoqLdz.js"),__vite__mapDeps([]),import.meta.url),"chevron-down":()=>k(()=>import("./icons/down-line-9PeS5YhF.js"),__vite__mapDeps([]),import.meta.url),reply:[()=>k(()=>import("./icons/share-forward-line-4jL-2Q4u.js"),__vite__mapDeps([]),import.meta.url),"180deg","horizontal"],thread:()=>k(()=>import("./icons/route-line-2YYy3958.js"),__vite__mapDeps([]),import.meta.url),group:()=>k(()=>import("./icons/group-line-JvhJklhQ.js"),__vite__mapDeps([]),import.meta.url),bot:()=>k(()=>import("./icons/android-2-line-uPwvVubH.js"),__vite__mapDeps([]),import.meta.url),menu:()=>k(()=>import("./icons/rows-4-line-SxGPYpTa.js"),__vite__mapDeps([]),import.meta.url),list:()=>k(()=>import("./icons/list-check-line-qNqx9Mm4.js"),__vite__mapDeps([]),import.meta.url),search:()=>k(()=>import("./icons/search-2-line-G39AynEw.js"),__vite__mapDeps([]),import.meta.url),hashtag:()=>k(()=>import("./icons/hashtag-line-SS3QMu1R.js"),__vite__mapDeps([]),import.meta.url),info:()=>k(()=>import("./icons/information-line-8SOch6cR.js"),__vite__mapDeps([]),import.meta.url),shortcut:()=>k(()=>import("./icons/lightning-line-JMYUlCZM.js"),__vite__mapDeps([]),import.meta.url),user:()=>k(()=>import("./icons/user-4-line-zT_bpOrS.js"),__vite__mapDeps([]),import.meta.url),following:()=>k(()=>import("./icons/walk-line-CF7a5s4t.js"),__vite__mapDeps([]),import.meta.url),pin:()=>k(()=>import("./icons/pin-line-ULyRQyWZ.js"),__vite__mapDeps([]),import.meta.url),bus:()=>k(()=>import("./icons/bus-2-line-XuQdDZ_w.js"),__vite__mapDeps([]),import.meta.url),link:()=>k(()=>import("./icons/link-2-line-BUqp1EwN.js"),__vite__mapDeps([]),import.meta.url),history:()=>k(()=>import("./icons/history-line-yoG7K8wL.js"),__vite__mapDeps([]),import.meta.url),share:()=>k(()=>import("./icons/share-2-line-PYo-zN94.js"),__vite__mapDeps([]),import.meta.url),sparkles:()=>k(()=>import("./icons/sparkles-line-wjZWGZ1a.js"),__vite__mapDeps([]),import.meta.url),exit:()=>k(()=>import("./icons/exit-line-l-1uUgI7.js"),__vite__mapDeps([]),import.meta.url),translate:()=>k(()=>import("./icons/translate-line-HpDtlqS2.js"),__vite__mapDeps([]),import.meta.url),play:()=>k(()=>import("./icons/play-fill-Ey-zv2eL.js"),__vite__mapDeps([]),import.meta.url),trash:()=>k(()=>import("./icons/delete-2-line-pjUduCFs.js"),__vite__mapDeps([]),import.meta.url),mute:()=>k(()=>import("./icons/volume-mute-line-WthBoXru.js"),__vite__mapDeps([]),import.meta.url),unmute:()=>k(()=>import("./icons/volume-line-PZujbN8h.js"),__vite__mapDeps([]),import.meta.url),block:()=>k(()=>import("./icons/forbid-circle-line-3FxopGoP.js"),__vite__mapDeps([]),import.meta.url),unblock:[()=>k(()=>import("./icons/forbid-circle-line-3FxopGoP.js"),__vite__mapDeps([]),import.meta.url),"180deg"],flag:()=>k(()=>import("./icons/flag-4-line-M3u-PO0J.js"),__vite__mapDeps([]),import.meta.url),time:()=>k(()=>import("./icons/time-line-ThP0kTRr.js"),__vite__mapDeps([]),import.meta.url),refresh:()=>k(()=>import("./icons/refresh-2-line-t42qqclb.js"),__vite__mapDeps([]),import.meta.url),emoji2:()=>k(()=>import("./icons/emoji-2-line--uNVc2IC.js"),__vite__mapDeps([]),import.meta.url),filter:()=>k(()=>import("./icons/filter-2-line-KyjbFYlO.js"),__vite__mapDeps([]),import.meta.url),chart:()=>k(()=>import("./icons/chart-line-line-pHaLt6yC.js"),__vite__mapDeps([]),import.meta.url),react:()=>k(()=>import("./icons/react-line-YfZPqZem.js"),__vite__mapDeps([]),import.meta.url),layout4:()=>k(()=>import("./icons/layout-4-line-FOdnyEcZ.js"),__vite__mapDeps([]),import.meta.url),layout5:()=>k(()=>import("./icons/layout-5-line-9Kks7dle.js"),__vite__mapDeps([]),import.meta.url),announce:()=>k(()=>import("./icons/announcement-line-MSlAmDH1.js"),__vite__mapDeps([]),import.meta.url),alert:()=>k(()=>import("./icons/alert-line-zyc6hy8V.js"),__vite__mapDeps([]),import.meta.url),round:()=>k(()=>import("./icons/round-fill-a0rplSmV.js"),__vite__mapDeps([]),import.meta.url),"arrow-up-circle":()=>k(()=>import("./icons/arrow-up-circle-line-e3kZqEZN.js"),__vite__mapDeps([]),import.meta.url),"arrow-down-circle":()=>k(()=>import("./icons/arrow-down-circle-line-mpqFtRtO.js"),__vite__mapDeps([]),import.meta.url),clipboard:()=>k(()=>import("./icons/clipboard-line-9F_Yeo71.js"),__vite__mapDeps([]),import.meta.url),"account-edit":()=>k(()=>import("./icons/user-edit-line-9VnWCh0X.js"),__vite__mapDeps([]),import.meta.url),"account-warning":()=>k(()=>import("./icons/user-warning-line-gL3RGb1N.js"),__vite__mapDeps([]),import.meta.url),keyboard:()=>k(()=>import("./icons/keyboard-line-10AZQcVH.js"),__vite__mapDeps([]),import.meta.url),cloud:()=>k(()=>import("./icons/cloud-line-abe0HgFS.js"),__vite__mapDeps([]),import.meta.url),month:()=>k(()=>import("./icons/calendar-month-line-VoXZVWAe.js"),__vite__mapDeps([]),import.meta.url),media:()=>k(()=>import("./icons/photo-album-line--GdJqjfq.js"),__vite__mapDeps([]),import.meta.url)};function Po({icon:t,size:n="m",alt:a,title:s,class:o="",style:r={}}){if(!t)return null;const c=Ro[n];let u=Do[t],h,g;Array.isArray(u)&&([u,h,g]=u);const[m,p]=X(null);return he(async()=>{const d=await u();p(d.default)},[u]),e("span",{class:`icon ${o}`,title:s||a,style:{width:`${c}px`,height:`${c}px`,...r},children:m&&e("svg",{width:c,height:c,viewBox:`0 0 ${m.width} ${m.height}`,dangerouslySetInnerHTML:{__html:m.body},style:{transform:`${h?`rotate(${h})`:""} ${g?"scaleX(-1)":""}`}})})}const T=It(Po);function Mo(t,n=[]){!t||typeof t!="function"||he(()=>{const a=new CloseWatcher;return a.addEventListener("close",t),()=>{a.destroy()}},n)}const la=window.CloseWatcher?Mo:()=>{},Oo=document.getElementById("modal-container");function Pt({children:t,onClose:n,onClick:a,class:s}){if(!t)return null;const o=ee();he(()=>{let h=setTimeout(()=>{var m;const g=(m=o.current)==null?void 0:m.querySelector('[tabindex="-1"]');g&&g.focus()},100);return()=>clearTimeout(h)},[]);const r=window.CloseWatcher,c=Ne("esc",()=>{setTimeout(()=>{n==null||n()},0)},{enabled:!r&&!!n,keydown:!1,keyup:!0},[n]);la(n,[n]);const u=e("div",{ref:h=>{var g;o.current=h,c.current=((g=h==null?void 0:h.querySelector)==null?void 0:g.call(h,'[tabindex="-1"]'))||h},className:s,onClick:h=>{a==null||a(h),h.target===h.currentTarget&&(n==null||n(h))},tabIndex:"-1",onFocus:h=>{var g,m,p,d;h.target===h.currentTarget&&((d=(p=(m=(g=o.current)==null?void 0:g.querySelector)==null?void 0:m.call(g,'[tabindex="-1"]'))==null?void 0:p.focus)==null||d.call(p))},children:t});return Ha(u,Oo)}function Mt({abrupt:t,hidden:n,...a}){return e("span",{...a,class:`loader-container ${t?"abrupt":""} ${n?"hidden":""}`,children:e("span",{class:"loader"})})}const zn={s:16,m:20,l:24,xl:32,xxl:50,xxxl:64},lt={},ut=window.OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas"),Zt=ut.getContext("2d",{willReadFrequently:!0});function zo({url:t,size:n,alt:a="",squircle:s,...o}){n=zn[n]||n||zn.m;const r=ee(),c=/missing\.png$/.test(t);return e("span",{ref:r,class:`avatar ${s?"squircle":""} ${lt[t]?"has-alpha":""}`,style:{width:n,height:n},title:a,...o,children:!!t&&e("img",{src:t,width:n,height:n,alt:a,loading:"lazy",decoding:"async",crossOrigin:lt[t]===void 0&&!c?"anonymous":void 0,onError:u=>{u.target.crossOrigin&&(u.target.crossOrigin=null,u.target.src=t)},onLoad:u=>{if(r.current&&(r.current.dataset.loaded=!0),lt[t]===void 0&&!c)try{const{width:h,height:g}=u.target;ut.width!==h&&(ut.width=h),ut.height!==g&&(ut.height=g),Zt.drawImage(u.target,0,0);const m=Zt.getImageData(0,0,h,g),p=m.data.filter((d,f)=>f%4===3&&d<=128).length/(m.data.length/4)>.1;p&&r.current.classList.add("has-alpha"),lt[t]=p,Zt.clearRect(0,0,h,g)}catch{lt[t]=!1}}})})}const Ze=Ye(zo),tt=ea((t,n)=>{let a;try{a=Ka()}catch{}let s=(location.hash||"").replace(/^#/,"").trim();s===""&&(s="/");const{to:o,...r}=t;if(s&&s!=="/"&&s.includes("?"))try{const u=new URL(s,location.origin);if(u.searchParams.size){const h=Array.from(u.searchParams.entries()).map(([g,m])=>`${g}=${encodeURIComponent(m)}`).join("&");s=u.pathname+"?"+h}}catch{}const c=s===o||decodeURIComponent(s)===o;return e("a",{ref:n,href:`#${o}`,...r,class:`${t.class||""} ${c?"is-active":""}`,onClick:u=>{var h,g,m;(g=(h=u.currentTarget)==null?void 0:h.parentNode)!=null&&g.closest("a")&&u.stopPropagation(),a&&(L.prevLocation=a),(m=t.onClick)==null||m.call(t,u)}})}),No=document.documentElement,Et=getComputedStyle(No),Bo=8;let ua=[0,0,0,0];function da(){const t=Et.getPropertyValue("--sai-top"),n=Et.getPropertyValue("--sai-right"),a=Et.getPropertyValue("--sai-bottom"),s=Et.getPropertyValue("--sai-left");ua=[Math.max(0,parseInt(t,10)),Math.max(0,parseInt(n,10)),Math.max(0,parseInt(a,10)),Math.max(0,parseInt(s,10))]}requestAnimationFrame(da);function ma(t=[]){return ua.map((a,s)=>(a||Bo)+(t[s]||0)).join(" ")}CSS.supports("top: env(safe-area-inset-top)")&&window.addEventListener("resize",da,{passive:!0});function ha(t){const{containerProps:n,instanceRef:a}=t,s=qa(),o=a!=null&&a.current?a:ee();return e(Wa,{boundingBoxPadding:ma(),repositionFlag:`${s.width}x${s.height}`,unmountOnClose:!0,...t,instanceRef:o,containerProps:{onClick:r=>{var c,u,h;r.target===r.currentTarget&&((u=(c=o.current)==null?void 0:c.closeMenu)==null||u.call(c)),(h=n==null?void 0:n.onClick)==null||h.call(n,r)},...n}})}function Yt({subMenu:t=!1,confirm:n=!0,confirmLabel:a,menuItemClassName:s,menuFooter:o,...r}){const{children:c,onClick:u,...h}=r;if(!n)return t?e($e,{...r}):u?Ga(c,{onClick:u}):c;const g=t?Ja:ha,m=ee();return e(g,{instanceRef:m,openTrigger:"clickOnly",direction:"bottom",overflow:"auto",gap:-8,shift:8,menuClassName:"menu-emphasized",...h,menuButton:t?void 0:c,label:t?c:void 0,itemProps:{onPointerMove:p=>{var d,f;p.pointerType==="touch"&&((f=(d=m.current)==null?void 0:d.openMenu)==null||f.call(d))},onPointerLeave:p=>{var d,f;p.pointerType==="touch"&&((f=(d=m.current)==null?void 0:d.openMenu)==null||f.call(d))}},children:[e($e,{className:s,onClick:u,children:a}),o]})}function pt({text:t,emojis:n}){if(!t)return"";if(!(n!=null&&n.length)||t.indexOf(":")===-1)return t;const a=new RegExp(`:(${n.map(o=>o.shortcode).join("|")}):`,"g");return t.split(a).map(o=>{const r=n.find(c=>c.shortcode===o);if(r){const{url:c,staticUrl:u}=r;return e("picture",{children:[e("source",{srcset:u,media:"(prefers-reduced-motion: reduce)"}),e("img",{src:c,alt:o,class:"shortcode-emoji emoji",width:"16",height:"16",loading:"lazy",decoding:"async"},o)]})}return o})}function jo({account:t,instance:n,showAvatar:a,showAcct:s,short:o,external:r,onClick:c}){var R;const{acct:u,avatar:h,avatarStatic:g,id:m,url:p,displayName:d,emojis:f,bot:_}=t;let{username:y}=t;const[v,b,w]=u.match(/([^@]+)(@.+)/i)||[,u],A=y.toLowerCase().trim(),$=(d||"").toLowerCase().trim(),x=$.replace(/(\:(\w|\+|\-)+\:)(?=|[\!\.\?]|$)/g,"").replace(/\s+/g,""),O=x.replace(/[^a-z0-9]/gi,"");return!o&&(A===$||A===x||A===O||((R=A.localeCompare)==null?void 0:R.call(A,x,"en",{sensitivity:"base"}))===0)&&(y=null),e("a",{class:`name-text ${s?"show-acct":""} ${o?"short":""}`,href:p,target:r?"_blank":null,title:`${d?`${d} `:""}@${u}`,onClick:N=>{if(!r){if(N.preventDefault(),N.stopPropagation(),c)return c(N);L.showAccount={account:t,instance:n}}},children:[a&&e(W,{children:[e(Ze,{url:g||h,squircle:_})," "]}),d&&!o?e(W,{children:[e("b",{children:e(pt,{text:d,emojis:f})}),!s&&y&&e(W,{children:[" ",e("i",{children:["@",y]})]})]}):o?e("i",{children:y}):e("b",{children:y}),s&&e(W,{children:[e("br",{}),e("i",{children:["@",b,e("span",{class:"ib",children:w})]})]})]})}const dt=It(jo);ht.extend(Za);ht.extend(Ya);ht.extend(Xa);const Vo=new Intl.DateTimeFormat;function ft({datetime:t,format:n}){if(!t)return null;const a=ht(t),[s,o]=X("");return he(()=>{let r,c;const u=()=>{c=requestAnimationFrame(()=>{let h;if(n==="micro"){const g=ht();g.diff(a,"day")<=1||g.year()===a.year()?h=a.twitter():h=Vo.format(a.toDate())}else h=a.fromNow();o(h),r=setTimeout(u,3e4)})};return c=requestAnimationFrame(u),()=>{clearTimeout(r),cancelAnimationFrame(c)}},[a]),e("time",{datetime:a.toISOString(),title:a.format("LLLL"),children:s})}const Uo=[{code:"af",name:"Afrikaans"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bho",name:"Bhojpuri"},{code:"bs",name:"Bosnian"},{code:"bg",name:"Bulgarian"},{code:"ca",name:"Catalan"},{code:"ceb",name:"Cebuano"},{code:"ny",name:"Chichewa"},{code:"zh",name:"Chinese"},{code:"zh_HANT",name:"Chinese (Traditional)"},{code:"co",name:"Corsican"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Dhivehi"},{code:"doi",name:"Dogri"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"tl",name:"Filipino"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"fy",name:"Frisian"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek"},{code:"gn",name:"Guarani"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian Creole"},{code:"ha",name:"Hausa"},{code:"haw",name:"Hawaiian"},{code:"iw",name:"Hebrew"},{code:"hi",name:"Hindi"},{code:"hmn",name:"Hmong"},{code:"hu",name:"Hungarian"},{code:"is",name:"Icelandic"},{code:"ig",name:"Igbo"},{code:"ilo",name:"Ilocano"},{code:"id",name:"Indonesian"},{code:"ga",name:"Irish"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"jw",name:"Javanese"},{code:"kn",name:"Kannada"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"rw",name:"Kinyarwanda"},{code:"gom",name:"Konkani"},{code:"ko",name:"Korean"},{code:"kri",name:"Krio"},{code:"ku",name:"Kurdish (Kurmanji)"},{code:"ckb",name:"Kurdish (Sorani)"},{code:"ky",name:"Kyrgyz"},{code:"lo",name:"Lao"},{code:"la",name:"Latin"},{code:"lv",name:"Latvian"},{code:"ln",name:"Lingala"},{code:"lt",name:"Lithuanian"},{code:"lg",name:"Luganda"},{code:"lb",name:"Luxembourgish"},{code:"mk",name:"Macedonian"},{code:"mai",name:"Maithili"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"Maori"},{code:"mr",name:"Marathi"},{code:"mni-Mtei",name:"Meiteilon (Manipuri)"},{code:"lus",name:"Mizo"},{code:"mn",name:"Mongolian"},{code:"my",name:"Myanmar (Burmese)"},{code:"ne",name:"Nepali"},{code:"no",name:"Norwegian"},{code:"or",name:"Odia (Oriya)"},{code:"om",name:"Oromo"},{code:"ps",name:"Pashto"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"pa",name:"Punjabi"},{code:"qu",name:"Quechua"},{code:"ro",name:"Romanian"},{code:"ru",name:"Russian"},{code:"sm",name:"Samoan"},{code:"sa",name:"Sanskrit"},{code:"gd",name:"Scots Gaelic"},{code:"nso",name:"Sepedi"},{code:"sr",name:"Serbian"},{code:"st",name:"Sesotho"},{code:"sn",name:"Shona"},{code:"sd",name:"Sindhi"},{code:"si",name:"Sinhala"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovenian"},{code:"so",name:"Somali"},{code:"es",name:"Spanish"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"sv",name:"Swedish"},{code:"tg",name:"Tajik"},{code:"ta",name:"Tamil"},{code:"tt",name:"Tatar"},{code:"te",name:"Telugu"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"ts",name:"Tsonga"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"},{code:"ak",name:"Twi"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"ug",name:"Uyghur"},{code:"uz",name:"Uzbek"},{code:"vi",name:"Vietnamese"},{code:"cy",name:"Welsh"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"zu",name:"Zulu"}];function Ho(...t){try{return Qa(...t)}catch{return t[2]||!1}}const $t=Ye(Ho),Ko=[new Intl.DateTimeFormat().resolvedOptions().locale,...navigator.languages];function pa(t=!1){if(t){const{contentTranslationTargetLanguage:n}=L.settings;if(n)return n}return $t(Ko,Uo.map(n=>n.code.replace("_","-")),"en")}function Xt(t){try{return new Intl.DisplayNames(navigator.languages,{type:"language"}).of(t)}catch{return null}}function un(t,n=[]){return t?(!n.length||t.indexOf(":")===-1||n.forEach(a=>{const{shortcode:s,staticUrl:o,url:r}=a;t=t.replace(new RegExp(`:${s}:`,"g"),`<picture><source srcset="${o}" media="(prefers-reduced-motion: reduce)"></source><img class="shortcode-emoji emoji" src="${r}" alt=":${s}:" width="16" height="16" loading="lazy" decoding="async" /></picture>`)}),t):""}const Qe=document.createElement("div"),qo=["u-url","mention","hashtag"];function Wo(t,n={}){const{emojis:a,postEnhanceDOM:s=()=>{}}=n;let o=t;const r=document.createElement("div");r.innerHTML=o;const c=/<a/i.test(o),u=o.indexOf("```")!==-1;if(c&&(Array.from(r.querySelectorAll('a:not([target="_blank"])')).forEach(p=>{p.setAttribute("target","_blank")}),Array.from(r.querySelectorAll("a[class]")).forEach(p=>{Array.from(p.classList).forEach(d=>{qo.includes(d)||p.classList.remove(d)})})),c&&Array.from(r.querySelectorAll("a[href]")).forEach(m=>{/^https?:\/\//i.test(m.textContent.trim())&&m.classList.add("has-url-text")}),c){const g=Array.from(r.querySelectorAll("a[href]")),m=[];g.forEach(p=>{const d=p.innerText.trim(),f=p.querySelector("*");if(/^@[^@]+(@[^@]+)?$/g.test(d)){const[_,y,v]=d.split("@");f||(!m.find(([b])=>b===y)||m.find(([b,w])=>b===y&&w===v)?(p.innerHTML=`@<span>${y}</span>`,m.push([y,v])):p.innerHTML=`@<span>${y}@${v}</span>`),p.classList.add("mention")}/^#[^#]+$/g.test(d)&&(f||(p.innerHTML=`#<span>${d.slice(1)}</span>`),p.classList.add("mention","hashtag"))})}let h;if(o.indexOf(":")!==-1&&(h=Qt(r),h.forEach(g=>{let m=g.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a&&(m=un(m,a)),Qe.innerHTML=m;const p=Array.from(Qe.childNodes);g.replaceWith(...p)})),u&&Array.from(r.querySelectorAll("p")).filter(m=>/^```[^]+```$/g.test(m.innerText.trim())).forEach(m=>{const p=document.createElement("pre");m.querySelectorAll("br").forEach(d=>d.replaceWith(`
`)),p.innerHTML=`<code>${m.innerHTML.trim()}</code>`,m.replaceWith(p)}),u&&Array.from(r.querySelectorAll("p")).filter(p=>/^```/g.test(p.innerText)).forEach(p=>{const d=[p];let f=!1,_=p;for(;_.nextElementSibling;){const y=_.nextElementSibling;if(y&&y.tagName==="P")if(/```$/g.test(y.innerText)){d.push(y),f=!0;break}else d.push(y);else break;_=y}if(f){const y=document.createElement("pre");d.forEach(b=>{b.querySelectorAll("br").forEach(w=>w.replaceWith(`
`))});const v=d.map(b=>b.innerHTML).join(`

`);y.innerHTML=`<code tabindex="0">${v}</code>`,p.replaceWith(y),d.forEach(b=>b.remove())}}),o.indexOf("`")!==-1&&(h=Qt(r),h.forEach(g=>{let m=g.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");/`[^`]+`/g.test(m)&&(m=m.replaceAll(/(`[^]+?`)/g,"<code>$1</code>")),Qe.innerHTML=m;const p=Array.from(Qe.childNodes);g.replaceWith(...p)})),/twitter\.com/i.test(o)&&(h=Qt(r,{rejectFilter:["A"]}),h.forEach(g=>{let m=g.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");/@[a-zA-Z0-9_]+@twitter\.com/g.test(m)&&(m=m.replaceAll(/(@([a-zA-Z0-9_]+)@twitter\.com)/g,'<a href="https://twitter.com/$2" rel="nofollow noopener noreferrer" target="_blank">$1</a>')),Qe.innerHTML=m;const p=Array.from(Qe.childNodes);g.replaceWith(...p)})),o.indexOf("#")!==-1){let g=null;const m=Array.from(r.querySelectorAll("p")).filter((p,d)=>{let f=0;for(let _=0;_<p.childNodes.length;_++){const y=p.childNodes[_];if(y.nodeType===Node.TEXT_NODE){if(y.textContent.trim()!=="")return!1}else if(y.tagName!=="BR")if(y.tagName==="A"){const v=y.textContent.trim();if(!v||!v.startsWith("#"))return!1;f++}else return!1}if(f>3||f>1&&g&&d===g+1)return g=d,!0});m!=null&&m.length&&m.forEach(p=>{p.classList.add("hashtag-stuffing"),p.title=p.innerText})}return s&&s(r),o=r.innerHTML,o}const fa=Ye(Wo),Go=["STYLE","IMG","VIDEO","AUDIO","AREA","MAP","TRACK","EMBED","IFRAME","OBJECT","PICTURE","PORTAL","SOURCE","SVG","MATH","CANVAS","NOSCRIPT","SCRIPT","INPUT","OPTION","TEXTAREA","SLOT","TEMPLATE"],Jo=Object.fromEntries(Go.map(t=>[t,!0]));function Qt(t,n={}){const a=[],s=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode(r){return Jo[r.parentNode.nodeName]||n.rejectFilter&&n.rejectFilter.includes(r.parentNode.nodeName)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},!1);let o;for(;o=s.nextNode();)a.push(o);return a}const en=document.createElement("div");function Zo(t){return t?(en.innerHTML=t.replace(/<\/p>/g,`</p>

`).replace(/<\/li>/g,`</li>
`),en.querySelectorAll("br").forEach(n=>{n.replaceWith(`
`)}),en.innerText.replace(/[\r\n]{3,}/g,`

`).trim()):""}const ln=Ye(Zo);function Yo(t){const{mentions:n=[],instance:a,previewMode:s,statusURL:o}=t||{};return r=>{var m,p;let{target:c}=r;if(c=c.closest("a"),!c||r.metaKey||r.ctrlKey||r.shiftKey||r.altKey||r.which===2)return;const u=(m=c.previousSibling)==null?void 0:m.textContent,h=u==null?void 0:u.endsWith("@"),g=c.innerText.startsWith("@");if(c.classList.contains("u-url")&&g||h&&!g){const d=(c.querySelector("span")||c).innerText.trim(),f=d.replace(/^@/,""),_=c.getAttribute("href"),y=n.find(v=>v.username===f||v.acct===f||v.url===_);if(y)r.preventDefault(),r.stopPropagation(),L.showAccount={account:y.acct,instance:a};else if(!/^http/i.test(d)){r.preventDefault(),r.stopPropagation();const v=c.getAttribute("href");L.showAccount={account:v,instance:a}}}else if(!s){const d=u==null?void 0:u.endsWith("#");if(c.classList.contains("hashtag")||d){r.preventDefault(),r.stopPropagation();const f=c.innerText.replace(/^#/,"").trim(),_=a?`#/${a}/t/${f}`:`#/t/${f}`;location.hash=_}else(p=L.unfurledLinks[c.href])!=null&&p.url&&o!==c.href&&(r.preventDefault(),r.stopPropagation(),L.prevLocation={pathname:location.hash.replace(/^#/,"")},location.hash=`#${L.unfurledLinks[c.href].url}`)}}}const{locale:Xo}=new Intl.DateTimeFormat().resolvedOptions();function St(t,{hideTime:n,formatOpts:a}={}){t instanceof Date||(t=new Date(t));const s=new Date().getFullYear();return Intl.DateTimeFormat(Xo,{year:t.getFullYear()===s?void 0:"numeric",month:"short",day:"numeric",hour:n?void 0:"numeric",minute:n?void 0:"numeric",...a}).format(t)}const{locale:Qo}=Intl.NumberFormat().resolvedOptions(),Ve=Intl.NumberFormat(Qo,{notation:"compact"}).format;function ei({skeleton:t,account:n,avatarSize:a="xl",useAvatarStatic:s=!1,instance:o,external:r,internal:c,onClick:u,showActivity:h=!1,showStats:g=!1,accountInstance:m,hideDisplayName:p=!1,relationship:d={},excludeRelationshipAttrs:f=[]}){if(t)return e("div",{class:"account-block skeleton",children:[e(Ze,{size:a}),e("span",{children:[e("b",{children:"████████"}),e("br",{}),e("span",{class:"account-block-acct",children:"@██████"})]})]});const{id:_,acct:y,avatar:v,avatarStatic:b,displayName:w,username:A,emojis:$,url:x,statusesCount:O,lastStatusAt:R,bot:N,fields:Y,note:V,group:M,followersCount:D}=n;let[H,ye,ce]=y.match(/([^@]+)(@.+)/i)||[,y];m&&(ce=`@${m}`);const le=Y==null?void 0:Y.find(J=>!!J.verifiedAt&&!!J.value),S={};for(const J in d)f.includes(J)||(S[J]=d[J]);const ae=S.following||S.followedBy||S.requested;return e("a",{class:"account-block",href:x,target:r?"_blank":null,title:`@${y}`,onClick:J=>{if(!r){if(J.preventDefault(),u)return u(J);c?location.hash=`/${o}/a/${_}`:L.showAccount={account:n,instance:o}}},children:[e(Ze,{url:s?b:v||b,size:a,squircle:N}),e("span",{class:"account-block-content",children:[!p&&e(W,{children:w?e("b",{children:e(pt,{text:w,emojis:$})}):e("b",{children:A})})," ",e("span",{class:"account-block-acct",children:["@",ye,e("wbr",{}),ce]}),h&&e(W,{children:[e("br",{}),e("small",{class:"last-status-at insignificant",children:["Posts: ",O,!!R&&e(W,{children:[" ","· Last posted:"," ",St(R,{hideTime:!0})]})]})]}),g&&e("div",{class:"account-block-stats",children:[N&&e(W,{children:e("span",{class:"tag collapsed",children:[e(T,{icon:"bot"})," Automated"]})}),!!M&&e(W,{children:e("span",{class:"tag collapsed",children:[e(T,{icon:"group"})," Group"]})}),ae&&e("div",{class:"shazam-container-horizontal",children:e("div",{class:"shazam-container-inner",children:S.following&&S.followedBy?e("span",{class:"tag minimal",children:"Mutual"}):S.requested?e("span",{class:"tag minimal",children:"Requested"}):S.following?e("span",{class:"tag minimal",children:"Following"}):S.followedBy?e("span",{class:"tag minimal",children:"Follows you"}):null})},d.id),!!D&&e("span",{class:"ib",children:[Ve(D)," ",D===1?"follower":"followers"]}),!!le&&e("span",{class:"verified-field",children:[e(T,{icon:"check-circle",size:"s"})," ",e("span",{dangerouslySetInnerHTML:{__html:fa(le.value,{emojis:$})}})]})]})]})]})}const ti={"@mastodon/edit-media-attributes":">=4.1","@mastodon/list-exclusive":">=4.2"},tn={};function ga(t){try{const{version:n,domain:a}=ra(),s=`${a}-${t}`;if(tn[s])return tn[s];const o=ti[t];return o?tn[s]=eo(n,o,{includePrerelease:!0,loose:!0}):!1}catch{return!1}}const ni=[{code:"auto",name:"Detect"},{code:"af",name:"Afrikaans"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bho",name:"Bhojpuri"},{code:"bs",name:"Bosnian"},{code:"bg",name:"Bulgarian"},{code:"ca",name:"Catalan"},{code:"ceb",name:"Cebuano"},{code:"ny",name:"Chichewa"},{code:"zh",name:"Chinese"},{code:"co",name:"Corsican"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Dhivehi"},{code:"doi",name:"Dogri"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"tl",name:"Filipino"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"fy",name:"Frisian"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek"},{code:"gn",name:"Guarani"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian Creole"},{code:"ha",name:"Hausa"},{code:"haw",name:"Hawaiian"},{code:"iw",name:"Hebrew"},{code:"hi",name:"Hindi"},{code:"hmn",name:"Hmong"},{code:"hu",name:"Hungarian"},{code:"is",name:"Icelandic"},{code:"ig",name:"Igbo"},{code:"ilo",name:"Ilocano"},{code:"id",name:"Indonesian"},{code:"ga",name:"Irish"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"jw",name:"Javanese"},{code:"kn",name:"Kannada"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"rw",name:"Kinyarwanda"},{code:"gom",name:"Konkani"},{code:"ko",name:"Korean"},{code:"kri",name:"Krio"},{code:"ku",name:"Kurdish (Kurmanji)"},{code:"ckb",name:"Kurdish (Sorani)"},{code:"ky",name:"Kyrgyz"},{code:"lo",name:"Lao"},{code:"la",name:"Latin"},{code:"lv",name:"Latvian"},{code:"ln",name:"Lingala"},{code:"lt",name:"Lithuanian"},{code:"lg",name:"Luganda"},{code:"lb",name:"Luxembourgish"},{code:"mk",name:"Macedonian"},{code:"mai",name:"Maithili"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"Maori"},{code:"mr",name:"Marathi"},{code:"mni-Mtei",name:"Meiteilon (Manipuri)"},{code:"lus",name:"Mizo"},{code:"mn",name:"Mongolian"},{code:"my",name:"Myanmar (Burmese)"},{code:"ne",name:"Nepali"},{code:"no",name:"Norwegian"},{code:"or",name:"Odia (Oriya)"},{code:"om",name:"Oromo"},{code:"ps",name:"Pashto"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"pa",name:"Punjabi"},{code:"qu",name:"Quechua"},{code:"ro",name:"Romanian"},{code:"ru",name:"Russian"},{code:"sm",name:"Samoan"},{code:"sa",name:"Sanskrit"},{code:"gd",name:"Scots Gaelic"},{code:"nso",name:"Sepedi"},{code:"sr",name:"Serbian"},{code:"st",name:"Sesotho"},{code:"sn",name:"Shona"},{code:"sd",name:"Sindhi"},{code:"si",name:"Sinhala"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovenian"},{code:"so",name:"Somali"},{code:"es",name:"Spanish"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"sv",name:"Swedish"},{code:"tg",name:"Tajik"},{code:"ta",name:"Tamil"},{code:"tt",name:"Tatar"},{code:"te",name:"Telugu"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"ts",name:"Tsonga"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"},{code:"ak",name:"Twi"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"ug",name:"Uyghur"},{code:"uz",name:"Uzbek"},{code:"vi",name:"Vietnamese"},{code:"cy",name:"Welsh"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"zu",name:"Zulu"}],ai=ta({limit:1,interval:2e3}),Nn=["lingva.phanpy.social","lingva.lunar.icu","lingva.garudalinux.org","translate.plausibility.cloud"];let nn=0;function oi(t,n,a){return to(()=>{let o=Nn[nn];return fetch(`https://${o}/api/v1/${n}/${a}/${encodeURIComponent(t)}`).then(r=>{if(!r.ok)throw new Error(r.statusText);return r.json()}).then(r=>{var c;return{provider:"lingva",content:r.translation,detectedSourceLanguage:(c=r.info)==null?void 0:c.detectedSource,info:r.info}})},{retries:3,onFailedAttempt:o=>{nn=(nn+1)%Nn.length}})}const va=1e3*60*60,ba=Dt(oi,{maxAge:va}),ii=Dt(ai(ba),{maxAge:va});function ri({forceTranslate:t,sourceLanguage:n,onTranslate:a,text:s="",mini:o}){const r=pa(!0),[c,u]=X("default"),[h,g]=X(null),[m,p]=X(null),[d,f]=X(null),_=ee(),y=n?Xt(n):null,v=Xt(r),b=ee("auto");a||(a=o?ii:ba);const w=async()=>{var A,$;u("loading");try{const{content:x,detectedSourceLanguage:O,provider:R,error:N,...Y}=await a(s,b.current,r);if(x){if(O){const V=Xt(O);f(V)}if(R==="lingva"){const V=($=(A=Y==null?void 0:Y.info)==null?void 0:A.pronunciation)==null?void 0:$.query;V&&g(V)}p(x),u("default"),!o&&x.trim()!==s.trim()&&(_.current.open=!0,_.current.scrollIntoView({behavior:"smooth",block:"nearest"}))}else u("error")}catch{u("error")}};return he(()=>{t&&w()},[t]),o?m&&m.trim()!==s.trim()&&d!==v?e("div",{class:"shazam-container",children:e("div",{class:"shazam-container-inner",children:e("div",{class:"status-translation-block-mini",children:[e(T,{icon:"translate",alt:`Auto-translated from ${y}`}),e("output",{lang:r,dir:"auto",title:h||"",children:m})]})})}):null:e("div",{class:"status-translation-block",onClick:A=>{A.preventDefault()},children:e("details",{ref:_,children:[e("summary",{children:e("button",{type:"button",onClick:async A=>{A.preventDefault(),A.stopPropagation(),_.current.open=!_.current.open,c!=="loading"&&(m||w())},children:[e(T,{icon:"translate"})," ",e("span",{children:c==="loading"?"Translating…":n&&y&&!d?`Translate from ${y}`:"Translate"})]})}),e("div",{class:"translated-block",children:[e("div",{class:"translation-info insignificant",children:[e("select",{class:"translated-source-select",disabled:c==="loading",onChange:A=>{b.current=A.target.value,w()},children:ni.map(A=>e("option",{value:A.code,children:A.code==="auto"?`Auto (${d??"…"})`:A.name}))})," ",e("span",{children:["→ ",v]}),e(Mt,{abrupt:!0,hidden:c!=="loading"})]}),c==="error"?e("p",{class:"ui-state",children:"Failed to translate"}):!!m&&e(W,{children:[e("output",{class:"translated-content",lang:r,dir:"auto",children:m}),!!h&&e("output",{class:"translated-pronunciation-content",tabIndex:-1,onClick:A=>{A.target.classList.toggle("expand")},children:h})]})]})]})})}const dn=[["aa","Afar","Afaraf"],["ab","Abkhaz","аҧсуа бызшәа"],["ae","Avestan","avesta"],["af","Afrikaans","Afrikaans"],["ak","Akan","Akan"],["am","Amharic","አማርኛ"],["an","Aragonese","aragonés"],["ar","Arabic","اللغة العربية"],["as","Assamese","অসমীয়া"],["av","Avaric","авар мацӀ"],["ay","Aymara","aymar aru"],["az","Azerbaijani","azərbaycan dili"],["ba","Bashkir","башҡорт теле"],["be","Belarusian","беларуская мова"],["bg","Bulgarian","български език"],["bh","Bihari","भोजपुरी"],["bi","Bislama","Bislama"],["bm","Bambara","bamanankan"],["bn","Bengali","বাংলা"],["bo","Tibetan","བོད་ཡིག"],["br","Breton","brezhoneg"],["bs","Bosnian","bosanski jezik"],["ca","Catalan","Català"],["ce","Chechen","нохчийн мотт"],["ch","Chamorro","Chamoru"],["co","Corsican","corsu"],["cr","Cree","ᓀᐦᐃᔭᐍᐏᐣ"],["cs","Czech","čeština"],["cu","Old Church Slavonic","ѩзыкъ словѣньскъ"],["cv","Chuvash","чӑваш чӗлхи"],["cy","Welsh","Cymraeg"],["da","Danish","dansk"],["de","German","Deutsch"],["dv","Divehi","Dhivehi"],["dz","Dzongkha","རྫོང་ཁ"],["ee","Ewe","Eʋegbe"],["el","Greek","Ελληνικά"],["en","English","English"],["eo","Esperanto","Esperanto"],["es","Spanish","Español"],["et","Estonian","eesti"],["eu","Basque","euskara"],["fa","Persian","فارسی"],["ff","Fula","Fulfulde"],["fi","Finnish","suomi"],["fj","Fijian","Vakaviti"],["fo","Faroese","føroyskt"],["fr","French","Français"],["fy","Western Frisian","Frysk"],["ga","Irish","Gaeilge"],["gd","Scottish Gaelic","Gàidhlig"],["gl","Galician","galego"],["gu","Gujarati","ગુજરાતી"],["gv","Manx","Gaelg"],["ha","Hausa","هَوُسَ"],["he","Hebrew","עברית"],["hi","Hindi","हिन्दी"],["ho","Hiri Motu","Hiri Motu"],["hr","Croatian","Hrvatski"],["ht","Haitian","Kreyòl ayisyen"],["hu","Hungarian","magyar"],["hy","Armenian","Հայերեն"],["hz","Herero","Otjiherero"],["ia","Interlingua","Interlingua"],["id","Indonesian","Bahasa Indonesia"],["ie","Interlingue","Interlingue"],["ig","Igbo","Asụsụ Igbo"],["ii","Nuosu","ꆈꌠ꒿ Nuosuhxop"],["ik","Inupiaq","Iñupiaq"],["io","Ido","Ido"],["is","Icelandic","Íslenska"],["it","Italian","Italiano"],["iu","Inuktitut","ᐃᓄᒃᑎᑐᑦ"],["ja","Japanese","日本語"],["jv","Javanese","basa Jawa"],["ka","Georgian","ქართული"],["kg","Kongo","Kikongo"],["ki","Kikuyu","Gĩkũyũ"],["kj","Kwanyama","Kuanyama"],["kk","Kazakh","қазақ тілі"],["kl","Kalaallisut","kalaallisut"],["km","Khmer","ខេមរភាសា"],["kn","Kannada","ಕನ್ನಡ"],["ko","Korean","한국어"],["kr","Kanuri","Kanuri"],["ks","Kashmiri","कश्मीरी"],["ku","Kurmanji (Kurdish)","Kurmancî"],["kv","Komi","коми кыв"],["kw","Cornish","Kernewek"],["ky","Kyrgyz","Кыргызча"],["la","Latin","latine"],["lb","Luxembourgish","Lëtzebuergesch"],["lg","Ganda","Luganda"],["li","Limburgish","Limburgs"],["ln","Lingala","Lingála"],["lo","Lao","ລາວ"],["lt","Lithuanian","lietuvių kalba"],["lu","Luba-Katanga","Tshiluba"],["lv","Latvian","latviešu valoda"],["mg","Malagasy","fiteny malagasy"],["mh","Marshallese","Kajin M̧ajeļ"],["mi","Māori","te reo Māori"],["mk","Macedonian","македонски јазик"],["ml","Malayalam","മലയാളം"],["mn","Mongolian","Монгол хэл"],["mr","Marathi","मराठी"],["ms","Malay","Bahasa Melayu"],["mt","Maltese","Malti"],["my","Burmese","ဗမာစာ"],["na","Nauru","Ekakairũ Naoero"],["nb","Norwegian Bokmål","Norsk bokmål"],["nd","Northern Ndebele","isiNdebele"],["ne","Nepali","नेपाली"],["ng","Ndonga","Owambo"],["nl","Dutch","Nederlands"],["nn","Norwegian Nynorsk","Norsk Nynorsk"],["no","Norwegian","Norsk"],["nr","Southern Ndebele","isiNdebele"],["nv","Navajo","Diné bizaad"],["ny","Chichewa","chiCheŵa"],["oc","Occitan","occitan"],["oj","Ojibwe","ᐊᓂᔑᓈᐯᒧᐎᓐ"],["om","Oromo","Afaan Oromoo"],["or","Oriya","ଓଡ଼ିଆ"],["os","Ossetian","ирон æвзаг"],["pa","Panjabi","ਪੰਜਾਬੀ"],["pi","Pāli","पाऴि"],["pl","Polish","Polski"],["ps","Pashto","پښتو"],["pt","Portuguese","Português"],["qu","Quechua","Runa Simi"],["rm","Romansh","rumantsch grischun"],["rn","Kirundi","Ikirundi"],["ro","Romanian","Română"],["ru","Russian","Русский"],["rw","Kinyarwanda","Ikinyarwanda"],["sa","Sanskrit","संस्कृतम्"],["sc","Sardinian","sardu"],["sd","Sindhi","सिन्धी"],["se","Northern Sami","Davvisámegiella"],["sg","Sango","yângâ tî sängö"],["si","Sinhala","සිංහල"],["sk","Slovak","slovenčina"],["sl","Slovenian","slovenščina"],["sn","Shona","chiShona"],["so","Somali","Soomaaliga"],["sq","Albanian","Shqip"],["sr","Serbian","српски језик"],["ss","Swati","SiSwati"],["st","Southern Sotho","Sesotho"],["su","Sundanese","Basa Sunda"],["sv","Swedish","Svenska"],["sw","Swahili","Kiswahili"],["ta","Tamil","தமிழ்"],["te","Telugu","తెలుగు"],["tg","Tajik","тоҷикӣ"],["th","Thai","ไทย"],["ti","Tigrinya","ትግርኛ"],["tk","Turkmen","Türkmen"],["tl","Tagalog","Wikang Tagalog"],["tn","Tswana","Setswana"],["to","Tonga","faka Tonga"],["tr","Turkish","Türkçe"],["ts","Tsonga","Xitsonga"],["tt","Tatar","татар теле"],["tw","Twi","Twi"],["ty","Tahitian","Reo Tahiti"],["ug","Uyghur","ئۇيغۇرچە‎"],["uk","Ukrainian","Українська"],["ur","Urdu","اردو"],["uz","Uzbek","Ўзбек"],["ve","Venda","Tshivenḓa"],["vi","Vietnamese","Tiếng Việt"],["vo","Volapük","Volapük"],["wa","Walloon","walon"],["wo","Wolof","Wollof"],["xh","Xhosa","isiXhosa"],["yi","Yiddish","ייִדיש"],["yo","Yoruba","Yorùbá"],["za","Zhuang","Saɯ cueŋƅ"],["zh","Chinese","中文"],["zu","Zulu","isiZulu"],["zh-CN","Chinese (China)","简体中文"],["zh-HK","Chinese (Hong Kong)","繁體中文（香港）"],["zh-TW","Chinese (Taiwan)","繁體中文（臺灣）"],["zh-YUE","Cantonese","廣東話"],["ast","Asturian","Asturianu"],["chr","Cherokee","ᏣᎳᎩ ᎦᏬᏂᎯᏍᏗ"],["ckb","Sorani (Kurdish)","سۆرانی"],["cnr","Montenegrin","crnogorski"],["jbo","Lojban","la .lojban."],["kab","Kabyle","Taqbaylit"],["kmr","Kurmanji (Kurdish)","Kurmancî"],["ldn","Láadan","Láadan"],["lfn","Lingua Franca Nova","lingua franca nova"],["sco","Scots","Scots"],["sma","Southern Sami","Åarjelsaemien Gïele"],["smj","Lule Sami","Julevsámegiella"],["szl","Silesian","ślůnsko godka"],["tok","Toki Pona","toki pona"],["xal","Kalmyk","Хальмг келн"],["zba","Balaibalan","باليبلن"],["zgh","Standard Moroccan Tamazight","ⵜⴰⵎⴰⵣⵉⵖⵜ"]],si="(((?:[^A-Za-z0-9@＠$#＃\\uFFFE\\uFEFF\\uFFFF]|[\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069]|^))((https?:\\/\\/)((?:(?:(?:[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/](?:[_-]|[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/])*)?[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/]\\.)*(?:(?:[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/](?:-|[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/])*)?[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/]\\.)(?:(?:(?:삼성|닷컴|닷넷|香格里拉|餐厅|食品|飞利浦|電訊盈科|集团|通販|购物|谷歌|诺基亚|联通|网络|网站|网店|网址|组织机构|移动|珠宝|点看|游戏|淡马锡|机构|書籍|时尚|新闻|政府|政务|招聘|手表|手机|我爱你|慈善|微博|广东|工行|家電|娱乐|天主教|大拿|大众汽车|在线|嘉里大酒店|嘉里|商标|商店|商城|公益|公司|八卦|健康|信息|佛山|企业|中文网|中信|世界|ポイント|ファッション|セール|ストア|コム|グーグル|クラウド|みんな|คอม|संगठन|नेट|कॉम|همراه|موقع|موبايلي|كوم|كاثوليك|عرب|شبكة|بيتك|بازار|العليان|ارامكو|اتصالات|ابوظبي|קום|сайт|рус|орг|онлайн|москва|ком|католик|дети|zuerich|zone|zippo|zip|zero|zara|zappos|yun|youtube|you|yokohama|yoga|yodobashi|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|voyage|voto|voting|vote|volvo|volkswagen|vodka|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vet|versicherung|vermögensberatung|vermögensberater|verisign|ventures|vegas|vanguard|vana|vacations|ups|uol|uno|university|unicom|uconnect|ubs|ubank|tvs|tushu|tunes|tui|tube|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|tmall|tkmaxx|tjx|tjmaxx|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|tci|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|systems|symantec|sydney|swiss|swiftcover|swatch|suzuki|surgery|surf|support|supply|supplies|sucks|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|srt|srl|spreadbetting|spot|sport|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|sncf|smile|smart|sling|skype|sky|skin|ski|site|singles|sina|silk|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|search|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sbs|sbi|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|ryukyu|rwe|run|ruhr|rugby|rsvp|room|rogers|rodeo|rocks|rocher|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|raid|radio|racing|qvc|quest|quebec|qpon|pwc|pub|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|post|porn|politie|poker|pohl|pnc|plus|plumbing|playstation|play|place|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|phd|pharmacy|pfizer|pet|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|pamperedchef|page|ovh|ott|otsuka|osaka|origins|orientexpress|organic|org|orange|oracle|open|ooo|onyourside|online|onl|ong|one|omega|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nyc|ntt|nrw|nra|nowtv|nowruz|now|norton|northwesternmutual|nokia|nissay|nissan|ninja|nikon|nike|nico|nhk|ngo|nfl|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|nba|navy|natura|nationwide|name|nagoya|nadex|nab|mutuelle|mutual|museum|mtr|mtpc|mtn|msd|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|montblanc|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mma|mls|mlb|mitsubishi|mit|mint|mini|mil|microsoft|miami|metlife|merckmsd|meo|menu|men|memorial|meme|melbourne|meet|media|med|mckinsey|mcdonalds|mcd|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|macys|luxury|luxe|lupin|lundbeck|ltda|ltd|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|llp|llc|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|kyoto|kuokgroup|kred|krd|kpn|kpmg|kosher|komatsu|koeln|kiwi|kitchen|kindle|kinder|kim|kia|kfh|kerryproperties|kerrylogistics|kerryhotels|kddi|kaufen|juniper|juegos|jprs|jpmorgan|joy|jot|joburg|jobs|jnj|jmp|jll|jlc|jio|jewelry|jetzt|jeep|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|istanbul|ist|ismaili|iselect|irish|ipiranga|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|immobilien|immo|imdb|imamat|ikano|iinet|ifm|ieee|icu|ice|icbc|ibm|hyundai|hyatt|hughes|htc|hsbc|how|house|hotmail|hotels|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hkt|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|guru|guitars|guide|guge|gucci|guardian|group|grocery|gripe|green|gratis|graphics|grainger|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gmx|gmo|gmbh|gmail|globo|global|gle|glass|glade|giving|gives|gifts|gift|ggee|george|genting|gent|gea|gdn|gbiz|gay|garden|gap|games|game|gallup|gallo|gallery|gal|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fly|flsmidth|flowers|florist|flir|flights|flickr|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|etisalat|esurance|estate|esq|erni|ericsson|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|education|edu|edeka|eco|eat|earth|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|doosan|domains|doha|dog|dodge|doctor|docs|dnp|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cyou|cymru|cuisinella|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cpa|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|church|chrysler|chrome|christmas|chloe|chintai|cheap|chat|chase|charity|channel|chanel|cfd|cfa|cern|ceo|center|ceb|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|bzh|buzz|buy|business|builders|build|bugatti|budapest|brussels|brother|broker|broadway|bridgestone|bradesco|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bnpparibas|bnl|bmw|bms|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|biz|bio|bingo|bing|bike|bid|bible|bharti|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|bcn|bcg|bbva|bbt|bbc|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|azure|axa|aws|avianca|autos|auto|author|auspost|audio|audible|audi|auction|attorney|athleta|associates|asia|asda|arte|art|arpa|army|archi|aramco|arab|aquarelle|apple|app|apartments|aol|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|akdn|airtel|airforce|airbus|aigo|aig|agency|agakhan|africa|afl|afamilycompany|aetna|aero|aeg|adult|ads|adac|actor|active|aco|accountants|accountant|accenture|academy|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa|onion)(?=[^0-9a-zA-Z@+-]|$))|(?:(?:한국|香港|澳門|新加坡|台灣|台湾|中國|中国|გე|ລາວ|ไทย|ලංකා|ഭാരതം|ಭಾರತ|భారత్|சிங்கப்பூர்|இலங்கை|இந்தியா|ଭାରତ|ભારત|ਭਾਰਤ|ভাৰত|ভারত|বাংলা|भारोत|भारतम्|भारत|ڀارت|پاکستان|موريتانيا|مليسيا|مصر|قطر|فلسطين|عمان|عراق|سورية|سودان|تونس|بھارت|بارت|ایران|امارات|المغرب|السعودية|الجزائر|البحرين|الاردن|հայ|қаз|укр|срб|рф|мон|мкд|ею|бел|бг|ευ|ελ|zw|zm|za|yt|ye|ws|wf|vu|vn|vi|vg|ve|vc|va|uz|uy|us|um|uk|ug|ua|tz|tw|tv|tt|tr|tp|to|tn|tm|tl|tk|tj|th|tg|tf|td|tc|sz|sy|sx|sv|su|st|ss|sr|so|sn|sm|sl|sk|sj|si|sh|sg|se|sd|sc|sb|sa|rw|ru|rs|ro|re|qa|py|pw|pt|ps|pr|pn|pm|pl|pk|ph|pg|pf|pe|pa|om|nz|nu|nr|np|no|nl|ni|ng|nf|ne|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|mn|mm|ml|mk|mh|mg|mf|me|md|mc|ma|ly|lv|lu|lt|ls|lr|lk|li|lc|lb|la|kz|ky|kw|kr|kp|kn|km|ki|kh|kg|ke|jp|jo|jm|je|it|is|ir|iq|io|in|im|il|ie|id|hu|ht|hr|hn|hm|hk|gy|gw|gu|gt|gs|gr|gq|gp|gn|gm|gl|gi|gh|gg|gf|ge|gd|gb|ga|fr|fo|fm|fk|fj|fi|eu|et|es|er|eh|eg|ee|ec|dz|do|dm|dk|dj|de|cz|cy|cx|cw|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|bz|by|bw|bv|bt|bs|br|bq|bo|bn|bm|bl|bj|bi|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ar|aq|ao|an|am|al|ai|ag|af|ae|ad|ac)(?=[^0-9a-zA-Z@+-]|$))|(?:xn--[\\-0-9a-z]+))))(?::([0-9]+))?(\\/(?:(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*(?:\\((?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+|(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*\\([a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*))\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*)*[\\+\\-a-z\\u0400-\\u04FF0-9=_#\\/\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]|(?:\\((?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+|(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*\\([a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*))\\)))|(?:@[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\/))*)?(\\?[a-z0-9!?\\*'@\\(\\);:&=\\+\\$\\/%#\\[\\]\\-_\\.,~|]*[a-z0-9\\-_&=#\\/])?))",ci="gi",Bn={source:si,flags:ci},qe=no("drafts-db","drafts-store"),li={set:(t,n)=>ao(t,n,qe),get:t=>oo(t,qe),getMany:t=>io(t,qe),del:t=>ro(t,qe),delMany:t=>so(t,qe),clear:()=>co(qe),keys:()=>lo(qe)},jn={drafts:li},et={public:"earth",unlisted:"group",private:"lock",direct:"message"};function ui({poll:t,lang:n,readOnly:a,refresh:s=()=>{},votePoll:o=()=>{}}){const[r,c]=X("default"),{expired:u,expiresAt:h,id:g,multiple:m,options:p,ownVotes:d,voted:f,votersCount:_,votesCount:y,emojis:v}=t,b=!!h&&new Date(h),w=_||y;let A=0;w<=1e3?A=0:w<=1e4?A=1:w<=1e5&&(A=2);const[$,x]=X(!1),O=p.every(R=>R.votesCount!==null);return e("div",{lang:n,dir:"auto",class:`poll ${a?"read-only":""} ${r==="loading"?"loading":""}`,children:[$&&O||f||u?e(W,{children:[e("div",{class:"poll-options",children:p.map((R,N)=>{const{title:Y,votesCount:V}=R,M=w?(V/w*100).toFixed(A):0,D=V>0&&V===Math.max(...p.map(H=>H.votesCount));return e("div",{class:`poll-option poll-result ${D?"poll-option-leading":""}`,style:{"--percentage":`${M}%`},children:[e("div",{class:"poll-option-title",children:[e("span",{children:e(pt,{text:Y,emojis:v})}),f&&d.includes(N)&&e(W,{children:[" ",e(T,{icon:"check-circle"})]})]}),e("div",{class:"poll-option-votes",title:`${V} vote${V===1?"":"s"}`,children:[M,"%"]})]},`${N}-${Y}-${V}`)})}),!u&&!f&&e("button",{class:"poll-vote-button plain2",disabled:r==="loading",onClick:R=>{R.preventDefault(),x(!1)},children:[e(T,{icon:"arrow-left",size:"s"})," Hide results"]})]}):e("form",{onSubmit:async R=>{R.preventDefault();const N=R.target,Y=new FormData(N),V=[];Y.forEach((M,D)=>{D==="poll"&&V.push(M)}),V.length&&(c("loading"),await o(V),c("default"))},children:[e("div",{class:"poll-options",children:p.map((R,N)=>{const{title:Y}=R;return e("div",{class:"poll-option",children:e("label",{class:"poll-label",children:[e("input",{type:m?"checkbox":"radio",name:"poll",value:N,disabled:r==="loading",readOnly:a}),e("span",{class:"poll-option-title",children:e(pt,{text:Y,emojis:v})})]})})})}),!a&&e("button",{class:"poll-vote-button",type:"submit",disabled:r==="loading",children:"Vote"})]}),e("p",{class:"poll-meta",children:[!u&&!a&&e("button",{type:"button",class:"plain small",disabled:r==="loading",style:{marginLeft:-8},onClick:R=>{R.preventDefault(),c("loading"),(async()=>(await s(),c("default")))()},title:"Refresh",children:e(T,{icon:"refresh",alt:"Refresh"})}),!f&&!u&&!a&&O&&e("button",{type:"button",class:"plain small",disabled:r==="loading",onClick:R=>{R.preventDefault(),x(!$)},title:$?"Hide results":"Show results",children:[e(T,{icon:$?"eye-open":"eye-close",alt:$?"Hide results":"Show results"})," "]}),!u&&!a&&" ",e("span",{title:y,children:Ve(y)})," vote",y===1?"":"s",!!_&&_!==y&&e(W,{children:[" ","• ",e("span",{title:_,children:Ve(_)})," ","voter",_===1?"":"s"]})," ","• ",u?"Ended":"Ending"," ",!!b&&e(ft,{datetime:b})]})," "]})}const di=uo();function mi(t,n){if(!(t!=null&&t.length))return!1;const a=t.filter(r=>{const{filter:c}=r,u=c.context.includes(n);return u?c.expiresAt?new Date(c.expiresAt)>new Date:u:!1});if(!a.length)return!1;if(a.some(r=>r.filter.filterAction==="hide"))return{action:"hide"};if(a.some(r=>r.filter.filterAction==="warn")){const r=a.map(c=>c.filter.title);return{action:"warn",titles:r,titlesStr:r.join(" • ")}}return!1}const ya=Ye(mi);function hi(t,n,a){var c;const{filtered:s}=t;if(!(s!=null&&s.length)||a&&((c=t.account)==null?void 0:c.id)===a)return!0;const r=ya(s,n);return r?r.action!=="hide":!0}function sr(t,n){if(!(t!=null&&t.length))return[];if(!n)return t;const a=B.session.get("currentAccount");return t.filter(s=>hi(s,n,a))}const an=document.createElement("div");function on(t){return t?(an.innerHTML=t,an.querySelectorAll(".invisible").forEach(n=>{n.remove()}),an.innerText.length):0}function _a(t){try{const{pathname:n,hash:a}=new URL(t);return/^\/.*\/\d+$/i.test(n)||/^\/@[^/]+\/(statuses|posts)\/\w+\/?$/i.test(n)||/^\/notes\/[a-z0-9]+$/i.test(n)||/^\/notes\/[a-z0-9]+$/i.test(n)||/^\/(notice|objects)\/[a-z0-9-]+$/i.test(n)||/#\/[^\/]+\.[^\/]+\/s\/.+/i.test(a)}catch{return!1}}function pi(t){const{spoilerText:n,content:a,poll:s,mediaAttachments:o}=t;let r="";return n!=null&&n.trim()?r+=n:r+=ln(a),r=r.trim(),s&&(r+=" 📊"),o!=null&&o.length&&(r+=" "+o.map(c=>({image:"🖼️",gifv:"🎞️",video:"📹",audio:"🎵",unknown:""})[c.type]||"").join("")),r}function Ft({className:t="truncated"}={}){const n=ee(),a=na(({height:s})=>{if(n.current){const{scrollHeight:o}=n.current;let r=o>s;if(r){const{height:c,maxHeight:u}=getComputedStyle(n.current),h=parseInt(u||c,10);r=o>h}n.current.classList.toggle(t,r)}},300);return mo({ref:n,box:"border-box",onResize:a}),n}const fi=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),gi="ALT",rn=t=>{const{alt:n,lang:a,index:s,...o}=t;return!n||!n.trim()?null:e("button",{type:"button",class:"alt-badge clickable",...o,onClick:r=>{r.stopPropagation(),r.preventDefault(),L.showMediaAlt={alt:n,lang:a}},title:"Media description",children:[gi,!!s&&e("sup",{children:s})]})},vi=140,ka=Ye(t=>t!=null&&t.length?t.length>vi||/[\n\r].*[\n\r]/.test(t.trim()):!1);function bi({class:t="",media:n,to:a,lang:s,showOriginal:o,autoAnimate:r,showCaption:c,altIndex:u,onClick:h=()=>{}}){const{blurhash:g,description:m,meta:p,previewRemoteUrl:d,previewUrl:f,remoteUrl:_,url:y,type:v}=n,{original:b={},small:w,focus:A}=p||{},$=o?b==null?void 0:b.width:w==null?void 0:w.width,x=o?b==null?void 0:b.height:w==null?void 0:w.height,O=o?y:f||y,R=o?_:d||_,N=$>=x?"landscape":"portrait",Y=g?ho(g):null,V=ee();let M;if(A){const G=(A.x+1)/2*100,ie=(1-A.y)/2*100;M=`${G.toFixed(0)}% ${ie.toFixed(0)}%`}const D=ee(),H=aa(({x:G,y:ie,scale:Q})=>{const{current:Le}=D;if(Le){const fe=po({x:G,y:ie,scale:Q});Q===1?Le.style.removeProperty("transform"):Le.style.setProperty("transform",fe),Le.closest(".media-zoom").style.touchAction=Q<=1.01?"pan-x":""}},[]),[ye,ce]=X(!1),le={enabled:ye,draggableUnZoomed:!1,inertiaFriction:.9,doubleTapZoomOutOnMaxScale:!0,containerProps:{className:"media-zoom",style:{overflow:"visible"}},onUpdate:H},S=Se(()=>a?G=>e(tt,{to:a,...G}):"div",[a]),ae=v==="unknown"&&/\.(mp4|m4a|m4p|m4b|m4r|m4v|mov|webm)$/i.test(R),J=v==="image"||v==="unknown"&&f&&!ae,j=ee(),[pe,me]=X(!1);sn(()=>{if(!J||!o||!j.current)return;const{offsetWidth:G,offsetHeight:ie}=j.current,Q=$<G&&x<ie;Q&&me(Q)},[$,x]);const ve=window.innerHeight*(N==="portrait"?.45:.33),oe=N==="portrait"?0:160,Te={"--average-color":Y&&`rgb(${Y.join(",")})`},we=$&&x?{"--width":`${$}px`,"--height":`${x}px`,"--aspectWidth":`${$/x*Math.max(oe,ve)}px`,aspectRatio:`${$} / ${x}`,...Te}:{...Te},be=ka(m),te=!!c&&!o&&!!m&&!be,ue=te?G=>{const{children:ie,...Q}=G;return e("figure",{...Q,children:[ie,e("figcaption",{class:"media-caption",lang:s,dir:"auto",onClick:Le=>{Le.preventDefault(),Le.stopPropagation(),L.showMediaAlt={alt:m,lang:s}},children:m})]})}:W;if(J)return le.containerProps.style.display="inherit",sn(()=>{fi&&o&&(async()=>{try{await fetch(O,{mode:"no-cors"}),D.current.src=O}catch{}})()},[O]),e(ue,{children:e(S,{ref:j,class:`media media-image ${t}`,onClick:h,"data-orientation":N,"data-has-alt":!te,style:o?{backgroundImage:`url(${f})`,backgroundSize:pe?`${$}px ${x}px`:void 0,...Te}:we,children:o?e(In,{...le,children:e("img",{ref:D,src:O,alt:m,width:$,height:x,"data-orientation":N,loading:"eager",decoding:"sync",onLoad:G=>{G.target.closest(".media-image").style.backgroundImage="",G.target.closest(".media-zoom").style.display="",ce(!0)},onError:G=>{const{src:ie}=G.target;ie===O&&O!==R&&(G.target.src=R)}})}):e(W,{children:[e("img",{src:O,alt:te?"":m,width:$,height:x,"data-orientation":N,loading:"lazy",style:{backgroundColor:Y&&`rgb(${Y.join(",")})`,backgroundPosition:M||"center","--anim-duration":`${Math.min(Math.max(Math.max($,x)/100,5),120)}s`},onLoad:G=>{G.target.closest(".media-image").style.backgroundImage="",G.target.dataset.loaded=!0},onError:G=>{const{src:ie}=G.target;ie===O&&O!==R&&(G.target.src=R)}}),!te&&e(rn,{alt:m,lang:s,index:u})]})})});if(v==="gifv"||v==="video"||ae){const G=b.duration<31,ie=v==="gifv"&&G,Q=b.duration<61,Le=Hn(b.duration),fe=!o&&!r&&ie,xe=!o&&r&&ie,_e=b.duration>5,Ae=`
    <video
      src="${y}"
      poster="${f}"
      width="${$}"
      height="${x}"
      data-orientation="${N}"
      preload="auto"
      autoplay
      muted="${ie}"
      ${ie?"":"controls"}
      playsinline
      loop="${Q}"
      ${ie?'ondblclick="this.paused ? this.play() : this.pause()"':""}
      ${ie&&_e?"ontimeupdate=\"this.closest('.media-gif') && this.closest('.media-gif').style.setProperty('--progress', `${~~((this.currentTime / this.duration) * 100)}%`)\"":""}
    ></video>
  `;return e(ue,{children:e(S,{class:`media ${t} media-${ie?"gif":"video"} ${xe?"media-contain":""}`,"data-orientation":N,"data-formatted-duration":o?void 0:Le,"data-label":ie&&!o&&!xe?"GIF":"","data-has-alt":!te,style:!o&&we,onClick:ne=>{if(fe)try{V.current.pause()}catch{}h(ne)},onMouseEnter:()=>{if(fe)try{V.current.play()}catch{}},onMouseLeave:()=>{if(fe)try{V.current.pause()}catch{}},onFocus:()=>{if(fe)try{V.current.play()}catch{}},onBlur:()=>{if(fe)try{V.current.pause()}catch{}},children:[o||xe?ie&&o?e(In,{...le,enabled:!0,children:e("div",{ref:D,dangerouslySetInnerHTML:{__html:Ae}})}):e("div",{class:"video-container",dangerouslySetInnerHTML:{__html:Ae}}):ie?e("video",{ref:V,src:y,poster:f,width:$,height:x,"data-orientation":N,preload:"auto",playsinline:!0,loop:!0,muted:!0,onTimeUpdate:_e?ne=>{const{target:ke}=ne,at=ke==null?void 0:ke.closest(".media-gif");if(at){const Ie=ke.currentTime/ke.duration*100;at.style.setProperty("--progress",`${Ie}%`)}}:void 0}):e(W,{children:[e("img",{src:f,alt:te?"":m,width:$,height:x,"data-orientation":N,loading:"lazy"}),e("div",{class:"media-play",children:e(T,{icon:"play",size:"xl"})})]}),!o&&!te&&e(rn,{alt:m,lang:s,index:u})]})})}else if(v==="audio"){const G=Hn(b.duration);return e(ue,{children:e(S,{class:`media media-audio ${t}`,"data-formatted-duration":o?void 0:G,"data-has-alt":!te,onClick:h,style:!o&&we,children:[o?e("audio",{src:_||y,preload:"none",controls:!0,autoplay:!0}):f?e("img",{src:f,alt:te?"":m,width:$,height:x,"data-orientation":N,loading:"lazy"}):null,!o&&e(W,{children:[e("div",{class:"media-play",children:e(T,{icon:"play",size:"xl"})}),!te&&e(rn,{alt:m,lang:s,index:u})]})]})})}}function Vn(t){return e(fo,{children:({ref:n,closeMenu:a})=>e(tt,{...t,ref:n,onClick:({detail:s})=>a(s===0?"Enter":void 0)})})}const yi=280,_i=140,ki=ta({limit:1,interval:1e3});function wi(t,n){return n.v1.accounts.$select(t).fetch()}const xi=Dt(wi),mt={public:"Public",unlisted:"Unlisted",private:"Followers only",direct:"Private mention"},Ei=window.ontouchstart!==void 0&&/iPad|iPhone|iPod/.test(navigator.userAgent),Un=80;function Ge({statusID:t,status:n,instance:a,size:s="m",contentTextWeight:o,readOnly:r,enableCommentHint:c,withinContext:u,skeleton:h,enableTranslate:g,forceTranslate:m,previewMode:p,onMediaClick:d,quoted:f,onStatusLinkClick:_=()=>{},showFollowedTags:y}){var Ln,An,Fn,Cn;if(h)return e("div",{class:"status skeleton",children:[e(Ze,{size:"xxl"}),e("div",{class:"container",children:[e("div",{class:"meta",children:"███ ████████"}),e("div",{class:"content-container",children:e("div",{class:"content",children:e("p",{children:"████ ████████"})})})]})]});const{masto:v,instance:b,authenticated:w}=Je({instance:a}),{instance:A}=Je(),$=b===A;let x=Pe(t,b);const O=nt(L);if(n||(n=O.statuses[x]||O.statuses[t],x=Pe(n==null?void 0:n.id,b)),!n)return null;const{account:{acct:R,avatar:N,avatarStatic:Y,id:V,url:M,displayName:D,username:H,emojis:ye,bot:ce,group:le},id:S,repliesCount:ae,reblogged:J,reblogsCount:j,favourited:pe,favouritesCount:me,bookmarked:ve,poll:oe,muted:Te,sensitive:we,spoilerText:be,visibility:te,language:ue,editedAt:G,filtered:ie,card:Q,createdAt:Le,inReplyToId:fe,inReplyToAccountId:xe,content:_e,mentions:Ae,mediaAttachments:ne,reblog:ke,uri:at,url:Ie,emojis:Xe,tags:E,_deleted:F,_pinned:P}=n,I=Se(()=>B.session.get("currentAccount"),[]),Z=Se(()=>I&&I===V,[V,I]),K=go(di),z=!Z&&!r&&!p&&ya(ie,K);if((z==null?void 0:z.action)==="hide")return null;const U=l=>{l.shiftKey};if(s!=="l"&&z)return e(Si,{status:n,filterInfo:z,instance:b,containerProps:{onMouseEnter:U},showFollowedTags:!0});const re=new Date(Le),Ee=new Date(G);let Oe=Ae==null?void 0:Ae.find(l=>l.id===xe);!Oe&&xe===S&&(Oe={url:M,username:H,displayName:D});const[Fe,Ue]=X(Oe);if(!u&&!Fe&&xe){const l=L.accounts[xe];l?Ue(l):xi(xe,v).then(C=>{Ue(C),L.accounts[C.id]=C}).catch(C=>{})}const gt=xe===I||(Ae==null?void 0:Ae.find(l=>l.id===I)),ot=Se(()=>!!(B.account.get("preferences")||{})["reading:expand:spoilers"],[]),Me=p||ot||!!O.spoilers[S]||!1;if(ke)return le?e("div",{"data-state-post-id":x,class:"status-group",onMouseEnter:U,children:[e("div",{class:"status-pre-meta",children:[e(T,{icon:"group",size:"l",alt:"Group"})," ",e(dt,{account:n.account,instance:b,showAvatar:!0})]}),e(Ge,{status:t?null:ke,statusID:t?ke.id:null,instance:b,size:s,contentTextWeight:o,readOnly:r})]}):e("div",{"data-state-post-id":x,class:"status-reblog",onMouseEnter:U,children:[e("div",{class:"status-pre-meta",children:[e(T,{icon:"rocket",size:"l"})," ",e(dt,{account:n.account,instance:b,showAvatar:!0})," ",e("span",{children:"boosted"})]}),e(Ge,{status:t?null:ke,statusID:t?ke.id:null,instance:b,size:s,contentTextWeight:o,readOnly:r,enableCommentHint:!0})]});if(y&&((Ln=O.statusFollowedTags[x])!=null&&Ln.length))return e("div",{"data-state-post-id":x,class:"status-followed-tags",onMouseEnter:U,children:[e("div",{class:"status-pre-meta",children:[e(T,{icon:"hashtag",size:"l"})," ",O.statusFollowedTags[x].slice(0,3).map(l=>e(tt,{to:b?`/${b}/t/${l}`:`/t/${l}`,class:"status-followed-tag-item",children:l},l))]}),e(Ge,{status:t?null:n,statusID:t?n.id:null,instance:b,size:s,contentTextWeight:o,readOnly:r,enableCommentHint:!0})]});const se=s==="l",[Ot,Ta]=X(m),mn=pa(!0),La=O.settings.contentTranslationHideLanguages||[],{contentTranslation:zt,contentTranslationAutoInline:hn}=O.settings;zt||(g=!1);const pn=Se(()=>{if(!zt||!hn||r||u&&!se||p||be||we||oe||Q||ne!=null&&ne.length)return!1;const l=on(_e);return l>0&&l<=_i},[zt,hn,r,u,se,p,be,we,oe,Q,ne,_e]),[Nt,vt]=X(!1),Aa=Ft(),Fa=Ft(),Ca=Ft(),fn="Read more →",Bt=ee(null),it="Sorry, your current logged-in instance can't interact with this post from another instance.",gn=aa(()=>Math.max(Math.round((be.length+on(_e))/140)||1,1),[be,_e]),vn=St(re),bn=G&&St(Ee);let rt=w&&te!=="direct"&&te!=="private";te==="private"&&Z&&(rt=!0);const jt=l=>{var C;if(!$||!w)return alert(it);(l!=null&&l.shiftKey||(C=l==null?void 0:l.syntheticEvent)!=null&&C.shiftKey)&&ca({replyToStatus:n})||(L.showCompose={replyToStatus:n})},Vt=Se(()=>ne.some(l=>{var C,q;return!((q=(C=l.description)==null?void 0:C.trim)!=null&&q.call(C))}),[ne]),Qi=async()=>{if(!$||!w)return alert(it),!1;try{if(!J){let l="Boost this post?";if(Vt&&(l+=`

⚠️ Some media have no descriptions.`),!confirm(l))return!1}if(L.statuses[x]={...n,reblogged:!J,reblogsCount:j+(J?-1:1)},J){const l=await v.v1.statuses.$select(S).unreblog();return Re(l,b),!0}else{const l=await v.v1.statuses.$select(S).reblog();return Re(l,b),!0}}catch{return L.statuses[x]=n,!1}},Ut=async()=>{if(!$||!w)return alert(it),!1;try{if(L.statuses[x]={...n,reblogged:!J,reblogsCount:j+(J?-1:1)},J){const l=await v.v1.statuses.$select(S).unreblog();return Re(l,b),!0}else{const l=await v.v1.statuses.$select(S).reblog();return Re(l,b),!0}}catch{return L.statuses[x]=n,!1}},Ht=async()=>{if(!$||!w)return alert(it);try{if(L.statuses[x]={...n,favourited:!pe,favouritesCount:me+(pe?-1:1)},pe){const l=await v.v1.statuses.$select(S).unfavourite();Re(l,b)}else{const l=await v.v1.statuses.$select(S).favourite();Re(l,b)}}catch{L.statuses[x]=n}},Kt=async()=>{if(!$||!w)return alert(it);try{if(L.statuses[x]={...n,bookmarked:!ve},ve){const l=await v.v1.statuses.$select(S).unbookmark();Re(l,b)}else{const l=await v.v1.statuses.$select(S).bookmark();Re(l,b)}}catch{L.statuses[x]=n}},yn=!!ue&&ue!==mn&&!$t([ue],[mn])&&!La.find(l=>ue===l||$t([ue],[l])),_n=ee(),kn=ee();async function $a(l){var de,He,$n,Sn;l&&(_n.current=v.v1.statuses.$select(t).rebloggedBy.list({limit:Un}),kn.current=v.v1.statuses.$select(t).favouritedBy.list({limit:Un}));const[{value:C},{value:q}]=await Promise.allSettled([_n.current.next(),kn.current.next()]);if((de=C.value)!=null&&de.length||(He=q.value)!=null&&He.length){const Wt=[];return($n=C.value)!=null&&$n.length&&Wt.push(...C.value.map(ct=>(ct._types=["reblog"],ct))),(Sn=q.value)!=null&&Sn.length&&Wt.push(...q.value.map(ct=>(ct._types=["favourite"],ct))),{value:Wt,done:C.done&&q.done}}return{value:[],done:!0}}const er=ee(),wn=e(W,{children:[!se&&e(W,{children:[e(vo,{children:[e("span",{class:"ib",children:[e(T,{icon:et[te],size:"s"})," ",e("span",{children:mt[te]})]})," ",e("span",{class:"ib",children:[ae>0&&e("span",{children:[e(T,{icon:"comment2",alt:"Replies",size:"s"})," ",e("span",{children:Ve(ae)})]})," ",j>0&&e("span",{children:[e(T,{icon:"rocket",alt:"Boosts",size:"s"})," ",e("span",{children:Ve(j)})]})," ",me>0&&e("span",{children:[e(T,{icon:"heart",alt:"Likes",size:"s"})," ",e("span",{children:Ve(me)})]})]}),e("br",{}),vn]}),e(Vn,{to:b?`/${b}/s/${S}`:`/s/${S}`,onClick:l=>{_(l,n)},children:[e(T,{icon:"arrow-right"}),e("span",{children:["View post by @",H||R]})]})]}),!!G&&e($e,{onClick:()=>{vt(S)},children:[e(T,{icon:"history"}),e("span",{children:["Show Edit History",e("br",{}),e("small",{class:"more-insignificant",children:["Edited: ",bn]})]})]}),(!se||!!G)&&e(Gt,{}),se&&e($e,{onClick:()=>{L.showGenericAccounts={heading:"Boosted/Liked by…",fetchAccounts:$a,instance:b,showReactions:!0}},children:[e(T,{icon:"react"}),e("span",{children:["Boosted/Liked by",e("span",{class:"more-insignificant",children:"…"})]})]}),!se&&$&&e(W,{children:[e("div",{class:"menu-horizontal",children:[e(Yt,{subMenu:!0,confirmLabel:e(W,{children:[e(T,{icon:"rocket"}),e("span",{children:J?"Unboost?":"Boost to everyone?"})]}),menuFooter:Vt&&!J&&e("div",{class:"footer",children:[e(T,{icon:"alert"}),"Some media have no descriptions."]}),disabled:!rt,onClick:async()=>{try{const l=await Ut();!se&&l&&Ce(J?`Unboosted @${H||R}'s post`:`Boosted @${H||R}'s post`)}catch{}},children:[e(T,{icon:"rocket",style:{color:J&&"var(--reblog-color)"}}),e("span",{children:J?"Unboost":"Boost…"})]}),e($e,{onClick:()=>{try{Ht(),se||Ce(pe?`Unliked @${H||R}'s post`:`Liked @${H||R}'s post`)}catch{}},children:[e(T,{icon:"heart",style:{color:pe&&"var(--favourite-color)"}}),e("span",{children:pe?"Unlike":"Like"})]})]}),e("div",{class:"menu-horizontal",children:[e($e,{onClick:jt,children:[e(T,{icon:"reply"}),e("span",{children:"Reply"})]}),e($e,{onClick:()=>{try{Kt(),se||Ce(ve?`Unbookmarked @${H||R}'s post`:`Bookmarked @${H||R}'s post`)}catch{}},children:[e(T,{icon:"bookmark",style:{color:ve&&"var(--link-color)"}}),e("span",{children:ve?"Unbookmark":"Bookmark"})]})]})]}),g?e($e,{disabled:Ot,onClick:()=>{Ta(!0)},children:[e(T,{icon:"translate"}),e("span",{children:"Translate"})]}):(!ue||yn)&&e(Vn,{to:`${b?`/${b}`:""}/s/${S}?translate=1`,children:[e(T,{icon:"translate"}),e("span",{children:"Translate"})]}),(!se&&$||g)&&e(Gt,{}),e($e,{href:Ie,target:"_blank",children:[e(T,{icon:"external"}),e("small",{class:"menu-double-lines",children:$i(Ie)})]}),e("div",{class:"menu-horizontal",children:[e($e,{onClick:()=>{try{navigator.clipboard.writeText(Ie),Ce("Link copied")}catch{Ce("Unable to copy link")}},children:[e(T,{icon:"link"}),e("span",{children:"Copy"})]}),(navigator==null?void 0:navigator.share)&&((An=navigator==null?void 0:navigator.canShare)==null?void 0:An.call(navigator,{url:Ie}))&&e($e,{onClick:()=>{try{navigator.share({url:Ie})}catch{alert("Sharing doesn't seem to work.")}},children:[e(T,{icon:"share"}),e("span",{children:"Share…"})]})]}),(Z||gt)&&e(Gt,{}),(Z||gt)&&e($e,{onClick:async()=>{try{const l=await v.v1.statuses.$select(S)[Te?"unmute":"mute"]();Re(l,b),Ce(Te?"Conversation unmuted":"Conversation muted")}catch{Ce(Te?"Unable to unmute conversation":"Unable to mute conversation")}},children:Te?e(W,{children:[e(T,{icon:"unmute"}),e("span",{children:"Unmute conversation"})]}):e(W,{children:[e(T,{icon:"mute"}),e("span",{children:"Mute conversation"})]})}),Z&&e("div",{class:"menu-horizontal",children:[e($e,{onClick:()=>{L.showCompose={editStatus:n}},children:[e(T,{icon:"pencil"}),e("span",{children:"Edit"})]}),se&&e(Yt,{subMenu:!0,confirmLabel:e(W,{children:[e(T,{icon:"trash"}),e("span",{children:"Delete this post?"})]}),menuItemClassName:"danger",onClick:()=>{(async()=>{try{await v.v1.statuses.$select(S).remove();const l=sa(S,b);l._deleted=!0,Ce("Deleted")}catch{Ce("Unable to delete")}})()},children:[e(T,{icon:"trash"}),e("span",{children:"Delete…"})]})]})]}),xn=ee(),[En,bt]=X(!1),[yt,qt]=X({}),_t=!se&&!p&&!F&&!f,Sa=oa(Ei&&_t?l=>{var He;if(l.pointerType==="mouse")return;const{clientX:C,clientY:q}=((He=l.touches)==null?void 0:He[0])||l,de=l.target.closest("a");de&&/^https?:\/\//.test(de.getAttribute("href"))||(l.preventDefault(),qt({anchorPoint:{x:C,y:q},direction:"right"}),bt(!0))}:null,{threshold:600,captureEvent:!0,detect:"touch",cancelOnMovement:2}),kt=!r&&!p,Ia=Ne("r, shift+r",jt,{enabled:kt}),Ra=Ne("f, l",()=>{try{Ht(),se||Ce(pe?`Unliked @${H||R}'s post`:`Liked @${H||R}'s post`)}catch{}},{enabled:kt}),Da=Ne("d",()=>{try{Kt(),se||Ce(ve?`Unbookmarked @${H||R}'s post`:`Bookmarked @${H||R}'s post`)}catch{}},{enabled:kt}),Pa=Ne("shift+b",()=>{(async()=>{try{const l=await Ut();!se&&l&&Ce(J?`Unboosted @${H||R}'s post`:`Boosted @${H||R}'s post`)}catch{}})()},{enabled:kt&&rt}),Ma=Ne("x",l=>{const C=document.activeElement.closest(".status-link, .status-focus");if(C){const q=C.querySelector("button.spoiler:not(.spoiling)");q&&(l.stopPropagation(),q.click())}}),wt=ne.slice(0,se?void 0:4),xt=ne.length>1&&wt.some(l=>!!l.description&&!ka(l.description)),Oa=Se(()=>{if(!xt)return null;const l=[];return wt.forEach((C,q)=>{if(!C.description)return;const de=l.findIndex(He=>He.media.description===C.description);de===-1?l.push({media:C,indices:[q]}):l[de].indices.push(q)}),l.map(({media:C,indices:q})=>e("div",{"data-caption-index":q.map(de=>de+1).join(" "),onClick:de=>{de.preventDefault(),de.stopPropagation(),L.showMediaAlt={alt:C.description,lang:ue}},title:C.description,children:[e("sup",{children:q.map(de=>de+1).join(" ")})," ",C.description]},C.id))},[xt,wt,ue]),st=Se(()=>{var l;return!!fe&&xe===((l=n.account)==null?void 0:l.id)||!!O.statusThreadNumber[x]},[fe,xe,(Fn=n.account)==null?void 0:Fn.id,O.statusThreadNumber[x]]),za=Se(()=>c&&!st&&!u&&!fe&&te==="public"&&ae>0,[c,st,u,fe,ae,te]),Tn=Se(()=>{if(Q||oe||we||be||ne!=null&&ne.length||st||u||fe||ae<=0||!/[??？︖❓❔⁇⁈⁉¿‽؟]/.test(_e))return!1;const q=on(_e);if(q>0&&q<=yi)return!0},[Q,oe,we,be,ne,ke,st,u,fe,ae,_e]);return e("article",{"data-state-post-id":x,ref:l=>{var q;Bt.current=l;const C=((q=l==null?void 0:l.closest)==null?void 0:q.call(l,".timeline-item, .timeline-item-alt, .status-link, .status-focus"))||l;Ia.current=C,Ra.current=C,Da.current=C,Pa.current=C,Ma.current=C},tabindex:"-1",class:`status ${!u&&fe&&Fe?"status-reply-to":""} visibility-${te} ${P?"status-pinned":""} ${{s:"small",m:"medium",l:"large"}[s]} ${F?"status-deleted":""} ${f?"status-card":""}`,onMouseEnter:U,onContextMenu:l=>{if(!_t||l.metaKey)return;const C=l.target.closest("a");C&&/^https?:\/\//.test(C.getAttribute("href"))||(l.preventDefault(),qt({anchorPoint:{x:l.clientX,y:l.clientY},direction:"right"}),bt(!0))},..._t?Sa():{},children:[_t&&e(bo,{ref:xn,state:En?"open":void 0,...yt,onClose:l=>{var C,q,de;bt(!1),(l==null?void 0:l.reason)==="click"&&((de=(q=(C=Bt.current)==null?void 0:C.closest("[tabindex]"))==null?void 0:q.focus)==null||de.call(q))},portal:{target:document.body},containerProps:{style:{zIndex:1001},onClick:()=>{var l,C;(C=(l=xn.current)==null?void 0:l.closeMenu)==null||C.call(l)}},overflow:"auto",boundingBoxPadding:ma(),unmountOnClose:!0,children:wn}),s!=="l"&&e("div",{class:"status-badge",children:[J&&e(T,{class:"reblog",icon:"rocket",size:"s"}),pe&&e(T,{class:"favourite",icon:"heart",size:"s"}),ve&&e(T,{class:"bookmark",icon:"bookmark",size:"s"}),P&&e(T,{class:"pin",icon:"pin",size:"s"})]}),s!=="s"&&e("a",{href:M,tabindex:"-1",title:`@${R}`,onClick:l=>{l.preventDefault(),l.stopPropagation(),L.showAccount={account:n.account,instance:b}},children:e(Ze,{url:Y||N,size:"xxl",squircle:ce})}),e("div",{class:"container",children:[e("div",{class:"meta",children:[e("span",{class:"meta-name",children:e(dt,{account:n.account,instance:b,showAvatar:s==="s",showAcct:se})})," ",s!=="l"&&(F?e("span",{class:"status-deleted-tag",children:"Deleted"}):Ie&&!p&&!f?e(tt,{to:b?`/${b}/s/${S}`:`/s/${S}`,onClick:l=>{l.metaKey||l.ctrlKey||l.shiftKey||l.altKey||l.which===2||(l.preventDefault(),l.stopPropagation(),_==null||_(l,n),qt({anchorRef:{current:l.currentTarget},align:"end",direction:"bottom",gap:4}),bt(!0))},class:`time ${En&&(yt!=null&&yt.anchorRef)?"is-open":""}`,children:[za&&!Tn?e(T,{icon:"comment2",size:"s",alt:`${ae} ${ae===1?"reply":"replies"}`}):e(T,{icon:et[te],alt:mt[te],size:"s"})," ",e(ft,{datetime:re,format:"micro"})]}):e("span",{class:"time",children:[e(T,{icon:et[te],alt:mt[te],size:"s"})," ",e(ft,{datetime:re,format:"micro"})]}))]}),te==="direct"&&e(W,{children:[e("div",{class:"status-direct-badge",children:"Private mention"})," "]}),!u&&e(W,{children:st?e("div",{class:"status-thread-badge",children:[e(T,{icon:"thread",size:"s"}),"Thread",O.statusThreadNumber[x]?` ${O.statusThreadNumber[x]}/X`:""]}):!!fe&&!!Fe&&(!!be||!Ae.find(l=>l.id===xe))&&e("div",{class:"status-reply-badge",children:[e(T,{icon:"reply"})," ",e(dt,{account:Fe,instance:b,short:!0})]})}),e("div",{class:`content-container ${be||we?"has-spoiler":""} ${Me?"show-spoiler":""}`,"data-content-text-weight":o?gn():null,style:(se||o)&&{"--content-text-weight":gn()},children:[!!be&&e(W,{children:[e("div",{class:"content spoiler-content",lang:ue,dir:"auto",ref:Aa,"data-read-more":fn,children:e("p",{children:e(pt,{text:be,emojis:Xe})})}),e("button",{class:`light spoiler ${Me?"spoiling":""}`,type:"button",disabled:ot,onClick:l=>{l.preventDefault(),l.stopPropagation(),Me?delete L.spoilers[S]:L.spoilers[S]=!0},children:[e(T,{icon:Me?"eye-open":"eye-close"})," ",ot?"Content warning":Me?"Show less":"Show more"]})]}),!!_e&&e("div",{class:"content",ref:Fa,"data-read-more":fn,children:[e("div",{lang:ue,dir:"auto",class:"inner-content",onClick:Yo({mentions:Ae,instance:b,previewMode:p,statusURL:Ie}),dangerouslySetInnerHTML:{__html:fa(_e,{emojis:Xe,postEnhanceDOM:l=>{l.querySelectorAll('a.u-url[target="_blank"]').forEach(C=>{/http/i.test(C.innerText.trim())||C.removeAttribute("target")}),!p&&Array.from(l.querySelectorAll("a[href]:not(.u-url):not(.mention):not(.hashtag)")).filter(C=>{const q=C.href;return!(q===n.url||q===n.uri)&&_a(q)}).forEach((C,q)=>{wa(A,C.href).then(de=>{de&&(C.removeAttribute("target"),x&&(Array.isArray(L.statusQuotes[x])||(L.statusQuotes[x]=[]),L.statusQuotes[x][q]||L.statusQuotes[x].splice(q,0,de)))})})}})}}),e(Ii,{id:S,instance:b,level:f})]}),!!oe&&e(ui,{lang:ue,poll:oe,readOnly:r||!$||!w,onUpdate:l=>{L.statuses[x].poll=l},refresh:()=>v.v1.polls.$select(oe.id).fetch().then(l=>{L.statuses[x].poll=l}).catch(l=>{}),votePoll:l=>v.v1.polls.$select(oe.id).votes.create({choices:l}).then(C=>{L.statuses[x].poll=C}).catch(C=>{})}),((g||pn)&&!!_e.trim()&&!!ln(un(_e,Xe))&&yn||Ot)&&e(ri,{forceTranslate:Ot||pn,mini:!se&&!u,sourceLanguage:ue,text:(be?`${be}

`:"")+ln(_e)+((Cn=oe==null?void 0:oe.options)!=null&&Cn.length?`

Poll:
${oe.options.map(l=>`- ${l.title}${l.votesCount>=0?` (${l.votesCount})`:""}`).join(`
`)}`:"")}),!be&&we&&!!ne.length&&e("button",{class:`plain spoiler ${Me?"spoiling":""}`,type:"button",onClick:l=>{l.preventDefault(),l.stopPropagation(),Me?delete L.spoilers[S]:L.spoilers[S]=!0},children:[e(T,{icon:Me?"eye-open":"eye-close"})," Sensitive content"]}),!!ne.length&&e(Ti,{lang:ue,enabled:xt,captionChildren:Oa,children:e("div",{ref:Ca,class:`media-container media-eq${ne.length} ${ne.length>2?"media-gt2":""} ${ne.length>4?"media-gt4":""}`,children:wt.map((l,C)=>e(bi,{media:l,autoAnimate:se,showCaption:ne.length===1,lang:ue,altIndex:xt&&!!l.description&&C+1,to:`/${b}/s/${S}?${u?"media":"media-only"}=${C+1}`,onClick:d?q=>{d(q,C,l,n)}:void 0},l.id))})}),!!Q&&/^https/i.test(Q==null?void 0:Q.url)&&!we&&!be&&!oe&&!ne.length&&!O.statusQuotes[x]&&e(Li,{card:Q,selfReferential:(Q==null?void 0:Q.url)===n.url||(Q==null?void 0:Q.url)===n.uri,instance:A})]}),!se&&Tn&&e("div",{class:"content-comment-hint insignificant",children:[e(T,{icon:"comment2",alt:"Replies"})," ",ae]}),se&&e(W,{children:[e("div",{class:"extra-meta",children:F?e("span",{class:"status-deleted-tag",children:"Deleted"}):e(W,{children:[e(T,{icon:et[te],alt:mt[te]})," ",e("a",{href:Ie,target:"_blank",rel:"noopener noreferrer",children:e("time",{class:"created",datetime:re.toISOString(),title:re.toLocaleString(),children:vn})}),G&&e(W,{children:[" ","• ",e(T,{icon:"pencil",alt:"Edited"})," ",e("time",{tabIndex:"0",class:"edited",datetime:Ee.toISOString(),onClick:()=>{vt(S)},children:bn})]})]})}),e("div",{class:`actions ${F?"disabled":""}`,children:[e("div",{class:"action has-count",children:e(Tt,{title:"Reply",alt:"Comments",class:"reply-button",icon:"comment",count:ae,onClick:jt})}),e(Yt,{disabled:!rt,onClick:Ut,confirmLabel:e(W,{children:[e(T,{icon:"rocket"}),e("span",{children:J?"Unboost?":"Boost to everyone?"})]}),menuFooter:Vt&&!J&&e("div",{class:"footer",children:[e(T,{icon:"alert"}),"Some media have no descriptions."]}),children:e("div",{class:"action has-count",children:e(Tt,{checked:J,title:["Boost","Unboost"],alt:["Boost","Boosted"],class:"reblog-button",icon:"rocket",count:j,disabled:!rt})})}),e("div",{class:"action has-count",children:e(Tt,{checked:pe,title:["Like","Unlike"],alt:["Like","Liked"],class:"favourite-button",icon:"heart",count:me,onClick:Ht})}),e("div",{class:"action",children:e(Tt,{checked:ve,title:["Bookmark","Unbookmark"],alt:["Bookmark","Bookmarked"],class:"bookmark-button",icon:"bookmark",onClick:Kt})}),e(ha,{portal:{target:document.querySelector(".status-deck")||document.body},align:"end",gap:4,overflow:"auto",viewScroll:"close",menuButton:e("div",{class:"action",children:e("button",{type:"button",title:"More",class:"plain more-button",children:e(T,{icon:"more",size:"l",alt:"More"})})}),children:wn})]})]})]}),!!Nt&&e(Pt,{class:"light",onClick:l=>{l.target===l.currentTarget&&vt(!1)},children:e(Ai,{statusID:Nt,instance:b,fetchStatusHistory:()=>v.v1.statuses.$select(Nt).history.list(),onClose:()=>{var l;vt(!1),(l=Bt.current)==null||l.focus()}})})]})}function Ti(t){const{enabled:n,children:a,lang:s,captionChildren:o}=t;return!n||!o?a:e("figure",{class:"media-figure-multiple",children:[a,e("figcaption",{lang:s,dir:"auto",children:o})]})}function Li({card:t,selfReferential:n,instance:a}){var V;const s=nt(L),{blurhash:o,title:r,description:c,html:u,providerName:h,providerUrl:g,authorName:m,authorUrl:p,width:d,height:f,image:_,imageDescription:y,url:v,type:b,embedUrl:w,language:A,publishedAt:$}=t,x=r||h||m,R=d/f>=1.2?"large":"",[N,Y]=X(null);if(he(()=>{x&&_&&!n&&_a(v)&&wa(a,v).then(M=>{if(!M)return;const{id:D,url:H}=M;Y("#"+H)})},[x,_,n]),s.unfurledLinks[v])return null;if(x&&(_||b==="photo"&&o)){const M=new URL(v).hostname.replace(/^www\./,"").replace(/\/$/,"");let D;if(!_){const ce=yo(o,44,44),le=document.createElement("canvas");le.width=44,le.height=44;const S=le.getContext("2d"),ae=S.createImageData(44,44);ae.data.set(ce),S.putImageData(ae,0,0),D=le.toDataURL()}return e("a",{href:N||v,target:N?null:"_blank",rel:"nofollow noopener noreferrer",class:`card link ${D?"":R}`,lang:A,dir:"auto",children:[e("div",{class:"card-image",children:e("img",{src:_||D,width:d,height:f,loading:"lazy",alt:y||"",onError:H=>{try{H.target.style.display="none"}catch{}}})}),e("div",{class:"meta-container",children:[e("p",{class:"meta domain",dir:"auto",children:M}),e("p",{class:"title",dir:"auto",children:r}),e("p",{class:"meta",dir:"auto",children:c||!!$&&e(ft,{datetime:$,format:"micro"})})]})]})}else{if(b==="photo")return e("a",{href:v,target:"_blank",rel:"nofollow noopener noreferrer",class:"card photo",children:e("img",{src:w,width:d,height:f,alt:r||c,loading:"lazy",style:{height:"auto",aspectRatio:`${d}/${f}`}})});if(b==="video"){if(/youtube/i.test(h)){const M=(V=v.match(/watch\?v=([^&]+)/))==null?void 0:V[1];if(M)return e("lite-youtube",{videoid:M,nocookie:!0})}return e("div",{class:"card video",style:{aspectRatio:`${d}/${f}`},dangerouslySetInnerHTML:{__html:u}})}else if(x&&!_){const M=new URL(v).hostname.replace(/^www\./,"");return e("a",{href:N||v,target:N?null:"_blank",rel:"nofollow noopener noreferrer",class:"card link no-image",lang:A,children:e("div",{class:"meta-container",children:[e("p",{class:"meta domain",children:[e(T,{icon:"link",size:"s"})," ",e("span",{children:M})]}),e("p",{class:"title",children:r}),e("p",{class:"meta",children:c||h||m})]})})}}}function Ai({statusID:t,instance:n,fetchStatusHistory:a=()=>{},onClose:s}){const[o,r]=X("default"),[c,u]=X([]);return he(()=>{r("loading"),(async()=>{try{const h=await a();u(h),r("default")}catch{r("error")}})()},[]),e("div",{id:"edit-history",class:"sheet",children:[!!s&&e("button",{type:"button",class:"sheet-close",onClick:s,children:e(T,{icon:"x"})}),e("header",{children:[e("h2",{children:"Edit History"}),o==="error"&&e("p",{children:"Failed to load history"}),o==="loading"&&e("p",{children:[e(Mt,{abrupt:!0})," Loading…"]})]}),e("main",{tabIndex:"-1",children:c.length>0&&e("ol",{children:c.map(h=>{const{createdAt:g}=h,m=new Date(g);return e("li",{class:"history-item",children:[e("h3",{children:e("time",{children:St(m,{formatOpts:{weekday:"short",second:"numeric"}})})}),e(Ge,{status:h,instance:n,size:"s",withinContext:!0,readOnly:!0,previewMode:!0})]},g)})})})]})}function Tt({checked:t,count:n,class:a,title:s,alt:o,icon:r,onClick:c,...u}){typeof s=="string"&&(s=[s,s]),typeof o=="string"&&(o=[o,o]);const[h,g]=X(s[0]||""),[m,p]=X(o[0]||"");return he(()=>{t?(g(s[1]||""),p(o[1]||"")):(g(s[0]||""),p(o[0]||""))},[t,s,o]),e("button",{type:"button",title:h,class:`plain ${a} ${t?"checked":""}`,onClick:d=>{c&&(d.preventDefault(),d.stopPropagation(),c(d))},...u,children:[e(T,{icon:r,size:"l",alt:m}),!!n&&e(W,{children:[" ",e("small",{title:n,children:Ve(n)})]})]})}function Hn(t){if(!t)return;let n=Math.floor(t/3600),a=Math.floor(t%3600/60),s=Math.round(t%60);return n===0?`${a}:${s.toString().padStart(2,"0")}`:`${n}:${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}const Fi=/(twitter|github)\.com/i,Kn={};function Ci(t,n){var y;const a=_o(L);if(Fi.test(n)||Kn[n])return;if(new RegExp(t+"/").test((y=a.unfurledLinks[n])==null?void 0:y.url))return Promise.resolve(a.unfurledLinks[n]);let o,r=n;/\/\/elk\.[^\/]+\/[^\/]+\.[^\/]+/i.test(r)&&(r=r.replace(/elk\.[^\/]+\//i,"")),/\/\/trunks\.[^\/]+\/status\/[^\/]+\.[^\/]+/i.test(r)&&(r=r.replace(/trunks\.[^\/]+\/status\//i,"")),/\/#\/[^\/]+\.[^\/]+\/s\/.+/i.test(r)&&(r=`https://${r.split("/#/")[1].replace(/\/s\//i,"/@fakeUsername/")}`);let c;try{c=new URL(r)}catch{return}const u=c.hostname,h=c.pathname,m=/\/@([^@\/]+)@?([^\/]+)?\/(\d+)$/i.exec(h);if(m){const v=m[3],{masto:b}=Je({instance:u});o=b.v1.statuses.$select(v).fetch().then(w=>{if(w!=null&&w.id)return{status:w,instance:u};throw new Error("No results")})}const{masto:p}=Je({instance:t}),d=p.v2.search.fetch({q:r,type:"statuses",resolve:!0,limit:1}).then(v=>{if(v.statuses.length>0)return{status:v.statuses[0],instance:t};throw new Error("No results")});function f(v){const{status:b,instance:w}=v,{id:A}=b,$=`/${w}/s/${A}`,x={id:A,instance:w,url:$};return L.unfurledLinks[n]=x,Re(b,w,{skipThreading:!0}),x}function _(v){Kn[n]=!0}return o?Promise.any([o,d]).then(f).catch(_):d.then(f).catch(_)}function $i(t){if(!t)return;const n=new URL(t),{host:a,pathname:s}=n,o=s.replace(/\/$/,""),[r,c,u]=o.match(/\/(@[^\/]+)\/(.*)/)||[];return e(W,{children:[a,c?e(W,{children:["/",c,e("wbr",{}),e("span",{class:"more-insignificant",children:["/",u]})]}):e("span",{class:"more-insignificant",children:o})]})}const wa=ki(Ci);function Si({status:t,filterInfo:n,instance:a,containerProps:s={},showFollowedTags:o}){var M;const r=nt(L),{id:c,account:{avatar:u,avatarStatic:h,bot:g,group:m},createdAt:p,visibility:d,reblog:f}=t,_=!!f,y=(n==null?void 0:n.titlesStr)||"",v=new Date(p),b=pi(t.reblog||t),[w,A]=X(!1),$=oa(()=>{A(!0)},{threshold:600,captureEvent:!0,detect:"touch",cancelOnMovement:2}),x=Ft(),O=Pe(t.id,a),R=Pe(t.id,a)+" "+(Pe(f==null?void 0:f.id,a)||""),N=(f==null?void 0:f.id)||c,Y=a?`/${a}/s/${N}`:`/s/${N}`,V=o&&!!((M=r.statusFollowedTags[O])!=null&&M.length);return e("div",{class:_?m?"status-group":"status-reblog":V?"status-followed-tags":"",...s,title:b,onContextMenu:D=>{D.preventDefault(),A(!0)},...$(),children:[e("article",{"data-state-post-id":R,class:"status filtered",tabindex:"-1",children:[e("b",{class:"status-filtered-badge clickable badge-meta",title:y,onClick:D=>{D.preventDefault(),A(!0)},children:[e("span",{children:"Filtered"}),e("span",{children:y})]})," ",e(Ze,{url:h||u,squircle:g}),e("span",{class:"status-filtered-info",children:[e("span",{class:"status-filtered-info-1",children:[e(dt,{account:t.account,instance:a})," ",e(T,{icon:et[d],alt:mt[d],size:"s"})," ",_?"boosted":V?e("span",{children:r.statusFollowedTags[O].slice(0,3).map(D=>e("span",{class:"status-followed-tag-item",children:["#",D]},D))}):e(ft,{datetime:v,format:"micro"})]}),e("span",{class:"status-filtered-info-2",children:[_&&e(W,{children:[e(Ze,{url:f.account.avatarStatic||f.account.avatar,squircle:g})," "]}),b]})]})]}),!!w&&e(Pt,{class:"light",onClick:D=>{D.target===D.currentTarget&&A(!1)},children:e("div",{id:"filtered-status-peek",class:"sheet",children:[e("button",{type:"button",class:"sheet-close",onClick:()=>A(!1),children:e(T,{icon:"x"})}),e("header",{children:[e("b",{class:"status-filtered-badge",children:"Filtered"})," ",y]}),e("main",{tabIndex:"-1",children:e(tt,{ref:x,class:"status-link",to:Y,onClick:()=>{A(!1)},"data-read-more":"Read more →",children:e(Ge,{status:t,instance:a,size:"s",readOnly:!0})})})]})})]})}const Ii=It(({id:t,instance:n,level:a=0})=>{if(!t||!n)return;const s=nt(L),o=Pe(t,n),r=s.statusQuotes[o],c=r==null?void 0:r.filter((u,h,g)=>g.findIndex(m=>m.url===u.url)===h);if(c!=null&&c.length&&!(a>2))return c.map(u=>e(tt,{to:`${u.instance?`/${u.instance}`:""}/s/${u.id}`,class:"status-card-link","data-read-more":"Read more →",children:e(Ge,{statusID:u.id,instance:u.instance,size:"s",quoted:a+1,enableCommentHint:!0})},u.instance+u.id))}),qn=It(Ge),Ri=dn.reduce((t,n)=>{const[a,s,o]=n;return t[a]={common:s,native:o},t},{}),xa={"5 minutes":5*60,"30 minutes":30*60,"1 hour":60*60,"6 hours":6*60*60,"12 hours":12*60*60,"1 day":24*60*60,"3 days":3*24*60*60,"7 days":7*24*60*60},Di=Object.values(xa),Wn=24*60*60,Gn=t=>{if(!t)return Wn;const n=(new Date(t).getTime()-Date.now())/1e3;return Di.find(a=>a>=n)||Wn},je=document.createElement("ul");je.role="listbox";je.className="text-expander-menu";const Pi=16,Mi=new IntersectionObserver(t=>{t.forEach(n=>{if(n.isIntersecting){const{left:a,width:s}=n.boundingClientRect,{innerWidth:o}=window;a+s>o&&(je.style.left=o-s-Pi+"px")}})});Mi.observe(je);const We=$t([new Intl.DateTimeFormat().resolvedOptions().locale,...navigator.languages],dn.map(t=>t[0]),"en"),Ea=new RegExp(Bn.source,Bn.flags),Oi=/(^|[^\/\w])@(([a-z0-9_]+)@[a-z0-9\.\-]+[a-z0-9]+)/gi,zi="$2xxxxxxxxxxxxxxxxxxxxxxx";function Ni(t){return t.replace(Ea,zi).replace(Oi,"$1@$3")}const Bi=/[a-z0-9_]+([a-z0-9_.-]+[a-z0-9_]+)?/i,ji=new RegExp(`(^|[^=\\/\\w])(@${Bi.source}(?:@[\\p{L}\\w.-]+[\\w]+)?)`,"uig"),Vi=new RegExp("(^|[^=\\/\\w])(#[a-z0-9_]+([a-z0-9_.-]+[a-z0-9_]+)?)(?![\\/\\w])","ig"),Ui="[a-zA-Z0-9_]{2,}",Hi=new RegExp(`([^A-Za-z0-9_:\\n]|^)(:${Ui}:)(?=[^A-Za-z0-9_:]|$)`,"g");function Ki(t,{maxCharacters:n=1/0}){let a=t;const{composerCharacterCount:s}=L;let o="";return s>n?(o='<mark class="compose-highlight-exceeded">'+Rn(a,n)+"</mark>",a=Rn(a,0,n),a+o):a.replace(Ea,'$2<mark class="compose-highlight-url">$3</mark>').replace(ji,'$1<mark class="compose-highlight-mention">$2</mark>').replace(Vi,'$1<mark class="compose-highlight-hashtag">$2</mark>').replace(Hi,'$1<mark class="compose-highlight-emoji-shortcode">$2</mark>')}function cr({onClose:t,replyToStatus:n,editStatus:a,draftStatus:s,standalone:o,hasOpener:r}){var Xe;const{masto:c,instance:u}=Je(),[h,g]=X("default"),m=ee((s==null?void 0:s.uid)||ko()),p=Rt(),d=p.info,f=Ao(),{statuses:{maxCharacters:_,maxMediaAttachments:y,charactersReservedPerUrl:v}={},mediaAttachments:{supportedMimeTypes:b=[],imageSizeLimit:w,imageMatrixLimit:A,videoSizeLimit:$,videoMatrixLimit:x,videoFrameRateLimit:O}={},polls:{maxOptions:R,maxCharactersPerOption:N,maxExpiration:Y,minExpiration:V}={}}=f||{},M=ee(),D=ee(),[H,ye]=X("public"),[ce,le]=X(!1),[S,ae]=X(B.session.get("currentLanguage")||We),J=ee(S),[j,pe]=X([]),[me,ve]=X(null),oe=B.account.get("preferences")||{},Te=()=>{M.current&&M.current.dispatchEvent(new Event("input"))},we=()=>{setTimeout(()=>{var E;(E=M.current)==null||E.focus()},300)};he(()=>{if(n){const{spoilerText:E,visibility:F,language:P,sensitive:I}=n;E&&D.current&&(D.current.value=E);const K=[...new Set([n.account.acct,...n.mentions.map(z=>z.acct)])].filter(z=>z!==d.acct);K.length>0&&(M.current.value=`${K.map(z=>`@${z}`).join(" ")} `,Te()),we(),ye(F==="public"&&oe["posting:default:visibility"]?oe["posting:default:visibility"]:F),ae(P||oe.postingDefaultLanguage||We),le(I&&!!E)}else if(a){const{visibility:E,language:F,sensitive:P,poll:I,mediaAttachments:Z}=a,K=!!(I!=null&&I.options)&&{...I,options:I.options.map(z=>(z==null?void 0:z.title)||z),expiresIn:(I==null?void 0:I.expiresIn)||Gn(I.expiresAt)};g("loading"),(async()=>{try{const z=await c.v1.statuses.$select(a.id).source.fetch(),{text:U,spoilerText:re}=z;M.current.value=U,M.current.dataset.source=U,Te(),we(),D.current.value=re,ye(E),ae(F||presf.postingDefaultLanguage||We),le(P),ve(K),pe(Z),g("default")}catch(z){alert((z==null?void 0:z.reason)||z),g("error")}})()}else we(),oe["posting:default:visibility"]&&ye(oe["posting:default:visibility"]),oe["posting:default:language"]&&ae(oe["posting:default:language"]),oe["posting:default:sensitive"]&&le(oe["posting:default:sensitive"]);if(s){const{status:E,spoilerText:F,visibility:P,language:I,sensitive:Z,poll:K,mediaAttachments:z}=s,U=!!(K!=null&&K.options)&&{...K,options:K.options.map(re=>(re==null?void 0:re.title)||re),expiresIn:(K==null?void 0:K.expiresIn)||Gn(K.expiresAt)};M.current.value=E,Te(),we(),F&&(D.current.value=F),P&&ye(P),ae(I||oe.postingDefaultLanguage||We),Z!==null&&le(Z),U&&ve(U),z&&pe(z)}},[s,a,n]);const be=ee(),te="You have unsaved changes. Discard this post?",ue=()=>{const{value:E,dataset:F}=M.current;if(h==="loading")return!1;const P=j.length>0;if(!E&&!P||j.length>0&&j.every(U=>U.id))return!0;const Z=(n==null?void 0:n.account.id)===d.id,K=n&&E.trim()===`@${n.account.acct}`;return!!(!Z&&K||E===(F==null?void 0:F.source))},G=()=>ue()?!0:confirm(te);he(()=>{const E=F=>{ue()||(F.preventDefault(),F.returnValue=te)};return window.addEventListener("beforeunload",E,{capture:!0}),()=>window.removeEventListener("beforeunload",E,{capture:!0})},[]);const ie=()=>{const{value:E}=M.current,{value:F}=D.current;return Dn(Ni(E))+Dn(F)},Q=()=>{const E=ie();L.composerCharacterCount=E};he(Q,[]);const Le=window.CloseWatcher,fe=ee(!1);Ne("esc",()=>{fe.current=!0},{enabled:!Le,enableOnFormTags:!0}),Ne("esc",()=>{!o&&fe.current&&G()&&t(),fe.current=!1},{enabled:!Le,enableOnFormTags:!0,keyup:!0,ignoreEventWhen:E=>{const F=document.querySelectorAll("#modal-container > *"),P=!!F,I=F.length===1&&F[0].querySelector("#compose-container");return P&&!I}}),la(()=>{!o&&G()&&t()},[o,G,t]);const xe=ee({}),_e=()=>`${Lt()}#${m.current}`,Ae=()=>{if(a)return;const E=_e(),F={key:E,replyTo:n?{id:n.id,account:{id:n.account.id,username:n.account.username,acct:n.account.acct}}:null,draftStatus:{uid:m.current,status:M.current.value,spoilerText:D.current.value,visibility:H,language:S,sensitive:ce,poll:me,mediaAttachments:j}};!wo(F,xe.current)&&!ue()&&(jn.drafts.set(E,{...F,state:"unsaved",updatedAt:Date.now()}).then(()=>{}).catch(P=>{}),xe.current=structuredClone(F))};$o(Ae,5e3),he(()=>(Ae(),()=>{jn.drafts.del(_e())}),[]),he(()=>{const E=P=>{const{items:I}=P.clipboardData||P.dataTransfer,Z=[];for(let K=0;K<I.length;K++){const z=I[K];if(z.kind==="file"){const U=z.getAsFile();U&&b.includes(U.type)&&Z.push(U)}}if(Z.length>0&&j.length>=y){alert(`You can only attach up to ${y} files.`);return}if(Z.length>0){P.preventDefault(),P.stopPropagation();const K=y-j.length,z=Z.slice(0,K);if(z.length<=0){alert(`You can only attach up to ${y} files.`);return}const U=z.map(re=>({file:re,type:re.type,size:re.size,url:URL.createObjectURL(re),id:null,description:null}));pe([...j,...U])}};window.addEventListener("paste",E);const F=P=>{P.dataTransfer.items.length>0&&(P.preventDefault(),P.stopPropagation())};return window.addEventListener("dragover",F),window.addEventListener("drop",E),()=>{window.removeEventListener("paste",E),window.removeEventListener("dragover",F),window.removeEventListener("drop",E)}},[j]);const[ne,ke]=X(!1),[at,Ie]=Se(()=>{const E=[],F=[],{contentTranslationHideLanguages:P=[]}=L.settings;return dn.forEach(I=>{const[Z]=I;Z===S||Z===J.current||Z===We||P.includes(Z)?E.push(I):F.push(I)}),E.sort(([I,Z],[K,z])=>I===S?-1:K===S?1:Z.localeCompare(z)),F.sort(([I,Z],[K,z])=>Z.localeCompare(z)),[E,F]},[S]);return e("div",{id:"compose-container-outer",children:[e("div",{id:"compose-container",class:o?"standalone":"",children:[e("div",{class:"compose-top",children:[(d==null?void 0:d.avatarStatic)&&e(ei,{account:d,accountInstance:p.instanceURL,hideDisplayName:!0,useAvatarStatic:!0}),o?r&&e("button",{type:"button",class:"light pop-button",disabled:h==="loading",onClick:()=>{if(!window.opener){alert("Looks like you closed the parent window.");return}window.opener.__STATES__.showCompose&&!confirm("Looks like you already have a compose field open in the parent window. Popping in this window will discard the changes you made in the parent window. Continue?")||t({fn:()=>{const E={editStatus:a,replyToStatus:n,draftStatus:{uid:m.current,status:M.current.value,spoilerText:D.current.value,visibility:H,language:S,sensitive:ce,poll:me,mediaAttachments:j}};window.opener.__COMPOSE__=E,window.opener.__STATES__.showCompose=!0}})},children:e(T,{icon:"popin",alt:"Pop in"})}):e("span",{children:[e("button",{type:"button",class:"light pop-button",disabled:h==="loading",onClick:()=>{ca({editStatus:a,replyToStatus:n,draftStatus:{uid:m.current,status:M.current.value,spoilerText:D.current.value,visibility:H,language:S,sensitive:ce,poll:me,mediaAttachments:j}})&&t()},children:e(T,{icon:"popout",alt:"Pop out"})})," ",e("button",{type:"button",class:"light close-button",disabled:h==="loading",onClick:()=>{G()&&t()},children:e(T,{icon:"x"})})]})]}),!!n&&e("div",{class:"status-preview",children:[e(qn,{status:n,size:"s",previewMode:!0}),e("div",{class:"status-preview-legend reply-to",children:["Replying to @",n.account.acct||n.account.username,"’s post"]})]}),!!a&&e("div",{class:"status-preview",children:[e(qn,{status:a,size:"s",previewMode:!0}),e("div",{class:"status-preview-legend",children:"Editing source post"})]}),e("form",{ref:be,class:`form-visibility-${H}`,style:{pointerEvents:h==="loading"?"none":"auto",opacity:h==="loading"?.5:1},onKeyDown:E=>{E.key==="Enter"&&(E.ctrlKey||E.metaKey)&&be.current.dispatchEvent(new Event("submit",{cancelable:!0}))},onSubmit:E=>{E.preventDefault();const F=new FormData(E.target),P=Object.fromEntries(F.entries());let{status:I,visibility:Z,sensitive:K,spoilerText:z}=P;if(K=K==="on",me){if(me.options.length<2){alert("Poll must have at least 2 options");return}if(me.options.some(U=>U==="")){alert("Some poll choices are empty");return}}j.length>0&&j.some(re=>{var Ee,Oe;return!((Oe=(Ee=re.description)==null?void 0:Ee.trim)!=null&&Oe.call(Ee))})&&!confirm("Some media have no descriptions. Continue?")||(z=K&&z||void 0,I=I===""?void 0:I,g("loading"),(async()=>{try{if(j.length>0){const Ee=j.map(Fe=>{const{file:Ue,description:gt,id:ot}=Fe;if(ot)return Fe;{const Me=Zn({file:Ue,description:gt});return c.v2.media.create(Me).then(se=>(se.id&&(Fe.id=se.id),se))}}),Oe=await Promise.allSettled(Ee);if(Oe.some(Fe=>{var Ue;return Fe.status==="rejected"||!((Ue=Fe.value)!=null&&Ue.id)})){g("error"),Oe.forEach(Fe=>{Fe.status==="rejected"&&alert(Fe.reason||`Attachment #${i} failed`)});return}}let U={status:I,spoiler_text:z,language:S,sensitive:K,poll:me,media_ids:j.map(Ee=>Ee.id)};a&&ga("@mastodon/edit-media-attributes")?U.media_attributes=j.map(Ee=>({id:Ee.id,description:Ee.description})):a||(U.visibility=Z,U.in_reply_to_id=(n==null?void 0:n.id)||void 0),U=Zn(U);let re;if(a)re=await c.v1.statuses.$select(a.id).update(U),Re(re,u,{skipThreading:!0});else try{re=await c.v1.statuses.create(U,{idempotencyKey:m.current})}catch{re=await c.v1.statuses.create(U)}g("default"),t({type:a?"edit":n?"reply":"post",newStatus:re,instance:u})}catch(U){alert((U==null?void 0:U.reason)||U),g("error")}})())},children:[e("div",{class:"toolbar stretch",children:[e("input",{ref:D,type:"text",name:"spoilerText",placeholder:"Content warning",disabled:h==="loading",class:"spoiler-text-field",lang:S,spellCheck:"true",dir:"auto",style:{opacity:ce?1:0,pointerEvents:ce?"auto":"none"},onInput:()=>{Q()}}),e("label",{class:`toolbar-button ${ce?"highlight":""}`,title:"Content warning or sensitive media",children:[e("input",{name:"sensitive",type:"checkbox",checked:ce,disabled:h==="loading",onChange:E=>{var P,I;const F=E.target.checked;le(F),F?(P=D.current)==null||P.focus():(I=M.current)==null||I.focus()}}),e(T,{icon:`eye-${ce?"close":"open"}`})]})," ",e("label",{class:`toolbar-button ${H!=="public"&&!ce?"show-field":""} ${H!=="public"?"highlight":""}`,title:`Visibility: ${H}`,children:[e(T,{icon:et[H],alt:H}),e("select",{name:"visibility",value:H,onChange:E=>{ye(E.target.value)},disabled:h==="loading"||!!a,children:[e("option",{value:"public",children:["Public ",e(T,{icon:"earth"})]}),e("option",{value:"unlisted",children:"Unlisted"}),e("option",{value:"private",children:"Followers only"}),e("option",{value:"direct",children:"Private mention"})]})]})," "]}),e(qi,{ref:M,placeholder:n?"Post your reply":a?"Edit your post":"What are you doing?",required:(j==null?void 0:j.length)===0,disabled:h==="loading",lang:S,onInput:()=>{Q()},maxCharacters:_,performSearch:E=>{const{type:F,q:P,limit:I}=E;return F==="accounts"?c.v1.accounts.search.list({q:P,limit:I,resolve:!1}):c.v2.search.fetch(E)}}),(j==null?void 0:j.length)>0&&e("div",{class:"media-attachments",children:[j.map((E,F)=>{const{id:P,file:I}=E,Z=(I==null?void 0:I.size)+(I==null?void 0:I.type)+(I==null?void 0:I.name);return e(Gi,{attachment:E,disabled:h==="loading",lang:S,onDescriptionChange:K=>{pe(z=>{const U=[...z];return U[F].description=K,U})},onRemove:()=>{pe(K=>K.filter((z,U)=>U!==F))}},P||Z||F)}),e("label",{class:"media-sensitive",children:[e("input",{name:"sensitive",type:"checkbox",checked:ce,disabled:h==="loading",onChange:E=>{const F=E.target.checked;le(F)}})," ",e("span",{children:"Mark media as sensitive"})," ",e(T,{icon:`eye-${ce?"close":"open"}`})]})]}),!!me&&e(Ji,{lang:S,maxOptions:R,maxExpiration:Y,minExpiration:V,maxCharactersPerOption:N,poll:me,disabled:h==="loading",onInput:E=>{if(E){const F={...E};ve(F)}else ve(null)}}),e("div",{class:"toolbar wrap",style:{justifyContent:"flex-end"},children:[e("span",{children:[e("label",{class:"toolbar-button",children:[e("input",{type:"file",accept:b.join(","),multiple:j.length<y-1,disabled:h==="loading"||j.length>=y||!!me,onChange:E=>{const F=E.target.files;if(!F)return;const P=Array.from(F).map(I=>({file:I,type:I.type,size:I.size,url:URL.createObjectURL(I),id:null,description:null}));j.length+P.length>y?alert(`You can only attach up to ${y} files.`):pe(I=>I.concat(P)),E.target.value=""}}),e(T,{icon:"attachment"})]})," ",e("button",{type:"button",class:"toolbar-button",disabled:h==="loading"||!!me||!!j.length,onClick:()=>{ve({options:["",""],expiresIn:24*60*60,multiple:!1})},children:e(T,{icon:"poll",alt:"Add poll"})})," ",e("button",{type:"button",class:"toolbar-button",disabled:h==="loading",onClick:()=>{ke(!0)},children:e(T,{icon:"emoji2"})})]}),e("div",{class:"spacer"}),h==="loading"?e(Mt,{abrupt:!0}):e(Wi,{maxCharacters:_,hidden:h==="loading"}),e("label",{class:`toolbar-button ${S!==J.current?"highlight":""}`,children:[e("span",{class:"icon-text",children:(Xe=Ri[S])==null?void 0:Xe.native}),e("select",{name:"language",value:S,onChange:E=>{const{value:F}=E.target;ae(F||We),B.session.set("currentLanguage",F||We)},disabled:h==="loading",children:[at.map(([E,F,P])=>e("option",{value:E,children:[F," (",P,")"]},E)),e("hr",{}),Ie.map(([E,F,P])=>e("option",{value:E,children:[F," (",P,")"]},E))]})]})," ",e("button",{type:"submit",class:"large",disabled:h==="loading",children:n?"Reply":a?"Update":"Post"})]})]})]}),ne&&e(Pt,{class:"light",onClick:E=>{E.target===E.currentTarget&&ke(!1)},children:e(Yi,{masto:c,instance:u,onClose:()=>{ke(!1)},onSelect:E=>{const F=` ${E} `,P=M.current;if(!P)return;const{selectionStart:I,selectionEnd:Z}=P,K=P.value,z=K.slice(0,I)+F+K.slice(Z);P.value=z,P.selectionStart=P.selectionEnd=Z+F.length,P.focus(),P.dispatchEvent(new Event("input"))}})})]})}function Jn(t){if(!t)return;const{value:n,offsetHeight:a,scrollHeight:s,clientHeight:o}=t;if(a<window.innerHeight){const r=a-o,c=n?s+r+"px":null;t.style.height=c}}const qi=ea((t,n)=>{var y;const{masto:a}=Je(),[s,o]=X(((y=n.current)==null?void 0:y.value)||""),{maxCharacters:r,performSearch:c=()=>{},...u}=t,h=nt(L),g=ee();he(()=>{(async()=>{try{const v=await a.v1.customEmojis.list();g.current=v}catch{}})()},[]);const m=ee(),p=ee("");he(()=>{let v,b,w;return m.current&&(v=A=>{const{key:$,provide:x,text:O}=A.detail;if(p.current=O,O===""){x(Promise.resolve({matched:!1}));return}if($===":"){const N=Zi(g.current,O);let Y="";N.forEach(V=>{const{shortcode:M,url:D}=V;Y+=`
                <li role="option" data-value="${ze(M)}">
                <img src="${ze(D)}" width="16" height="16" alt="" loading="lazy" /> 
                :${ze(M)}:
              </li>`}),je.innerHTML=Y,x(Promise.resolve({matched:N.length>0,fragment:je}));return}const R={"@":"accounts","#":"hashtags"}[$];x(new Promise(N=>{c({type:R,q:O,limit:5}).then(V=>{if(O!==p.current)return;const M=V[R]||V;let D="";M.forEach(H=>{var me;const{name:ye,avatarStatic:ce,displayName:le,username:S,acct:ae,emojis:J,history:j}=H,pe=un(le,J);if(ae)D+=`
                    <li role="option" data-value="${ze(ae)}">
                      <span class="avatar">
                        <img src="${ze(ce)}" width="16" height="16" alt="" loading="lazy" />
                      </span>
                      <span>
                        <b>${pe||S}</b>
                        <br>@${ze(ae)}
                      </span>
                    </li>
                  `;else{const ve=(me=j==null?void 0:j.reduce)==null?void 0:me.call(j,(oe,Te)=>oe+ +Te.uses,0);D+=`
                    <li role="option" data-value="${ze(ye)}">
                      <span class="grow">#<b>${ze(ye)}</b></span>
                      ${ve?`<span class="count">${Ve(ve)}</span>`:""}
                    </li>
                  `}je.innerHTML=D}),N({matched:M.length>0,fragment:je})})}))},m.current.addEventListener("text-expander-change",v),b=A=>{const{key:$,item:x}=A.detail;$===":"?A.detail.value=`:${x.dataset.value}:`:A.detail.value=`${$}${x.dataset.value}`},m.current.addEventListener("text-expander-value",b),w=A=>{const{input:$}=A.detail;if(o($.value),n.current){const x=new Event("input",{bubbles:!0});n.current.dispatchEvent(x)}},m.current.addEventListener("text-expander-committed",w)),()=>{m.current&&(m.current.removeEventListener("text-expander-change",v),m.current.removeEventListener("text-expander-value",b),m.current.removeEventListener("text-expander-committed",w))}},[]),he(()=>{const v=n.current;if(!v)return;new ResizeObserver(()=>{if(m.current){const{height:w}=v.getBoundingClientRect();m.current.style.height=w+"px"}}).observe(v)},[]);const d=ee(0),f=ee(),_=na(v=>{var A;if(!f.current)return;if(d.current>3){f.current.innerHTML="",f.current=null,(A=_==null?void 0:_.cancel)==null||A.call(_);return}let b,w;d.current<=3&&(b=Date.now()),f.current.innerHTML=Ki(v,{maxCharacters:r})+`
`,d.current<=3&&(w=Date.now()),b&&w&&w-b>50&&d.current++},500);return e("text-expander",{ref:m,keys:"@ # :",class:"compose-field-container",children:[e("textarea",{class:"compose-field",autoCapitalize:"sentences",autoComplete:"on",autoCorrect:"on",spellCheck:"true",dir:"auto",rows:"6",cols:"50",...u,ref:n,name:"status",value:s,onKeyDown:v=>{const{key:b,target:w}=v;if(b==="Enter")try{const{value:A,selectionStart:$}=w,O=A.slice(0,$).split(`
`).slice(-1)[0];if(O&&/^\s*(-|\d+\.)\s/.test(O)){const[R,N,Y,V,M]=O.match(/^(\s*)(-|\d+\.)(\s+)(.+)?/)||[];if(M){v.preventDefault();const[D]=Y.match(/\d+/)||[],H=D?`${+D+1}.`:"-",ye=`
${N}${H}${V}`;w.setRangeText(ye,$,$);const ce=$+ye.length;w.setSelectionRange(ce,ce)}else{const D=$-O.length;w.setRangeText("",D,$)}Jn(w),w.dispatchEvent(new Event("input"))}}catch{}f.current&&(f.current.scrollTop=w.scrollTop)},onInput:v=>{var A;const{target:b}=v,w=b.value;o(w),Jn(b),(A=t.onInput)==null||A.call(t,v),_(w)},style:{width:"100%",height:"4em"},onScroll:v=>{if(f.current){const{scrollTop:b}=v.target;f.current.scrollTop=b}}}),e("div",{ref:f,class:"compose-highlight","aria-hidden":"true"})]})});function Wi({maxCharacters:t=500,hidden:n}){const s=nt(L).composerCharacterCount,o=t-s;return n?e("meter",{class:"donut",hidden:!0}):e("meter",{class:`donut ${o<=-10?"explode":o<=0?"danger":o<=20?"warning":""}`,value:s,max:t,"data-left":o,title:`${o}/${t}`,style:{"--percentage":s/t*100}})}function Gi({attachment:t,disabled:n,lang:a,onDescriptionChange:s=()=>{},onRemove:o=()=>{}}){const r=ga("@mastodon/edit-media-attributes"),{type:c,id:u,file:h}=t,g=Se(()=>h?URL.createObjectURL(h):t.url,[h,t.url]),[m,p]=X(t.description),d=c.split("/")[0],f=xo(s,250),[_,y]=X(!1),v=ee(null);he(()=>{let w;return _&&v.current&&(w=setTimeout(()=>{v.current.focus()},100)),()=>{clearTimeout(w)}},[_]);const b=e(W,{children:u&&!r?e("div",{class:"media-desc",children:[e("span",{class:"tag",children:"Uploaded"}),e("p",{title:m,children:t.description||e("i",{children:"No description"})})]}):e("textarea",{ref:v,value:m||"",lang:a,placeholder:{image:"Image description",video:"Video description",audio:"Audio description"}[d],autoCapitalize:"sentences",autoComplete:"on",autoCorrect:"on",spellCheck:"true",dir:"auto",disabled:n,maxlength:"1500",onInput:w=>{const{value:A}=w.target;p(A),f(A)}})});return e(W,{children:[e("div",{class:"media-attachment",children:[e("div",{class:"media-preview",tabIndex:"0",onClick:()=>{y(!0)},children:d==="image"?e("img",{src:g,alt:""}):d==="video"||d==="gifv"?e("video",{src:g,playsinline:!0,muted:!0}):d==="audio"?e("audio",{src:g,controls:!0}):null}),b,e("div",{class:"media-aside",children:e("button",{type:"button",class:"plain close-button",disabled:n,onClick:o,children:e(T,{icon:"x"})})})]}),_&&e(Pt,{class:"light",onClick:w=>{w.target===w.currentTarget&&y(!1)},children:e("div",{id:"media-sheet",class:"sheet sheet-max",children:[e("button",{type:"button",class:"sheet-close",onClick:()=>{y(!1)},children:e(T,{icon:"x"})}),e("header",{children:e("h2",{children:{image:"Edit image description",video:"Edit video description",audio:"Edit audio description"}[d]})}),e("main",{tabIndex:"-1",children:[e("div",{class:"media-preview",children:d==="image"?e("img",{src:g,alt:""}):d==="video"||d==="gifv"?e("video",{src:g,playsinline:!0,controls:!0}):d==="audio"?e("audio",{src:g,controls:!0}):null}),e("div",{class:"media-form",children:[b,e("footer",{children:e("button",{type:"button",class:"light block",onClick:()=>{y(!1)},children:"Done"})})]})]})]})})]})}function Ji({lang:t,poll:n,disabled:a,onInput:s=()=>{},maxOptions:o,maxExpiration:r,minExpiration:c,maxCharactersPerOption:u}){const{options:h,expiresIn:g,multiple:m}=n;return e("div",{class:`poll ${m?"multiple":""}`,children:[e("div",{class:"poll-choices",children:h.map((p,d)=>e("div",{class:"poll-choice",children:[e("input",{required:!0,type:"text",value:p,disabled:a,maxlength:u,placeholder:`Choice ${d+1}`,lang:t,spellCheck:"true",dir:"auto",onInput:f=>{const{value:_}=f.target;h[d]=_,s(n)}}),e("button",{type:"button",class:"plain2 poll-button",disabled:a||h.length<=1,onClick:()=>{h.splice(d,1),s(n)},children:e(T,{icon:"x",size:"s"})})]},d))}),e("div",{class:"poll-toolbar",children:[e("button",{type:"button",class:"plain2 poll-button",disabled:a||h.length>=o,onClick:()=>{h.push(""),s(n)},children:"+"})," ",e("label",{class:"multiple-choices",children:[e("input",{type:"checkbox",checked:m,disabled:a,onChange:p=>{const{checked:d}=p.target;n.multiple=d,s(n)}})," ","Multiple choices"]}),e("label",{class:"expires-in",children:["Duration"," ",e("select",{value:g,disabled:a,onChange:p=>{const{value:d}=p.target;n.expiresIn=d,s(n)},children:Object.entries(xa).filter(([p,d])=>d>=c&&d<=r).map(([p,d])=>e("option",{value:d,children:p},d))})]})]}),e("div",{class:"poll-toolbar",children:e("button",{type:"button",class:"plain remove-poll-button",disabled:a,onClick:()=>{s(null)},children:"Remove poll"})})]})}function Zi(t,n){return n=n.toLowerCase(),t.sort((a,s)=>{let o=a.shortcode.toLowerCase(),r=s.shortcode.toLowerCase(),c=o.startsWith(n),u=r.startsWith(n),h=o.includes(n),g=r.includes(n);return c&&u?a.length-s.length:c?-1:u?1:h&&g?a.length-s.length:h?-1:g?1:0}).slice(0,5)}function ze(t){return t.replace(/[&<>"']/g,function(n){return"&#"+n.charCodeAt(0)+";"})}function Zn(t){for(let n in t)(t[n]===null||t[n]===void 0)&&delete t[n];return t}function Yi({masto:t,instance:n,onClose:a=()=>{},onSelect:s=()=>{}}){const[o,r]=X("default"),c=ee([]),[u,h]=X({}),g=Se(()=>B.account.get("recentlyUsedCustomEmojis")||[]);return he(()=>{r("loading"),(async()=>{try{const m=await t.v1.customEmojis.list(),p={"--recent--":g.filter(f=>m.find(_=>_.shortcode===f.shortcode))},d=[];m.forEach(f=>{var _,y;if(f.visibleInPicker){if((y=(_=c.current)==null?void 0:_.push)==null||y.call(_,f),!f.category){d.push(f);return}p[f.category]||(p[f.category]=[]),p[f.category].push(f)}}),d.length&&(p["--others--"]=d),h(p),r("default")}catch{r("error")}})()},[]),e("div",{id:"custom-emojis-sheet",class:"sheet",children:[!!a&&e("button",{type:"button",class:"sheet-close",onClick:a,children:e(T,{icon:"x"})}),e("header",{children:[e("b",{children:"Custom emojis"})," ",o==="loading"?e(Mt,{}):e("small",{class:"insignificant",children:[" • ",n]})]}),e("main",{children:e("div",{class:"custom-emojis-list",children:[o==="error"&&e("div",{class:"ui-state",children:e("p",{children:"Error loading custom emojis"})}),o==="default"&&Object.entries(u).map(([m,p])=>!!(p!=null&&p.length)&&e(W,{children:[e("div",{class:"section-header",children:{"--recent--":"Recently used","--others--":"Others"}[m]||m}),e("section",{children:p.map(d=>e("button",{type:"button",class:"plain4",onClick:()=>{a(),requestAnimationFrame(()=>{s(`:${d.shortcode}:`)});let f=B.account.get("recentlyUsedCustomEmojis")||[];const _=f.findIndex(y=>y.shortcode===d.shortcode);_!==-1?(f.splice(_,1),f.unshift(d)):(f.unshift(d),f=f.filter(y=>{var v,b;return(b=(v=c.current)==null?void 0:v.find)==null?void 0:b.call(v,w=>w.shortcode===y.shortcode)}),f=f.slice(0,10)),B.account.set("recentlyUsedCustomEmojis",f)},title:`:${d.shortcode}:`,children:e("picture",{children:[!!d.staticUrl&&e("source",{srcset:d.staticUrl,media:"(prefers-reduced-motion: reduce)"}),e("img",{class:"shortcode-emoji",src:d.url||d.staticUrl,alt:d.shortcode,width:"16",height:"16",loading:"lazy",decoding:"async"})]})},d))})]}))]})})]})}var Xi={VITE_CLIENT_NAME:"Phanpy",VITE_CLIENT_ID:"social.phanpy",VITE_WEBSITE:"https://phanpy.social",VITE_APP_ENV:"production",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_CLIENT_NAME:Yn}=Xi;function lr(t,n){function a(){const{currentLocation:s}=L,o=Array.isArray(n);let r=o?n:[];!o&&/:?\w+\?/.test(n)&&(r.push(n.replace(/(:\w+)\?/g,"$1")),r.push(n.replace(/\/?:\w+\?/g,"")));let c=!1;r.length?c=r.some(u=>Pn(u,s)):n&&(c=Pn(n,s)),c&&(document.title=t?`${t} / ${Yn}`:Yn)}sn(()=>{const s=Qn(L,"currentLocation",a);return a(),s},[t,n])}export{ar as $,Ze as A,bi as B,Vn as C,cr as D,pt as E,Ft as F,Eo as G,Pe as H,T as I,di as J,ya as K,tt as L,Pt as M,dt as N,ma as O,pi as P,lr as Q,ft as R,qn as S,ri as T,sr as U,sa as V,ra as W,Mn as X,on as Y,Do as Z,Ke as _,Je as a,or as a0,rr as a1,ir as a2,Re as b,Ce as c,B as d,ha as e,Yt as f,Rt as g,pa as h,ga as i,ei as j,Yo as k,Xt as l,fa as m,Ve as n,ca as o,Dt as p,St as q,nr as r,L as s,Uo as t,$o as u,Mt as v,ln as w,jn as x,Lt as y,$t as z};
//# sourceMappingURL=useTitle-jFZfqYHS.js.map
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}