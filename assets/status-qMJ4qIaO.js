import{N as Oo,F as ne,_ as Ee,a as e,W as Vo,p as K,u as Ke,a2 as Uo,e as No,n as Ho,a3 as zo,a4 as Bo,a5 as Fo,M as ee,a6 as jo,x as ht,m as P,a7 as qo,a8 as Ve,a9 as Ko,aa as Wo,y as Go,q as _e,ab as Yo,ac as Xo,B as Zo,ad as Jo,X as Qo,L as ea,ae as ta,af as na,ag as oa,ah as aa,ai as ra,aj as ia,ak as sa,al as ca,am as la,o as da,an as ua,h as Xn,ao as ma,g as Dt,A as On,ap as Vn,b as pt,P as Zn,d as at,J as Jn,C as ha,f as nn,aq as pa,ar as fa,as as ga}from"./vendor-nmEC-eWS.js";import{_ as p,w as De,s as S,h as _a,p as cn,L as Qn,g as eo,a as Un,i as Ie,c as Nn,b as Ae,m as to,x as va,y as ba}from"./useTitle-tWRuLwqM.js";window._showToast=me;function me(t){typeof t=="string"&&(t={text:t});const{onClick:n,delay:o,...a}=t,r=Oo({className:`${n||t.destination?"shiny-pill":""}`,gravity:"bottom",position:"center",...a,onClick:()=>{n==null||n(r)}});return o?setTimeout(()=>{r.showToast()},o):r.showToast(),r}function Or(t,n,o,a){const r=ne(t);Ee(()=>{r.current=t},[t,o]),Ee(()=>{!a||n===null||n===!1||r.current()},[a]),Ee(()=>{if(n===null||n===!1)return;const c=setInterval(()=>r.current(),n);return()=>clearInterval(c)},[n])}function ya(t){const n=new URL("/compose/",window.location),{width:o,height:a}=window.screen,r=Math.max(0,(o-600)/2),s=Math.max(0,(a-450)/2),c=Math.min(o,600),l=Math.min(a,450),u=(t==null?void 0:t.uid)||Math.random(),d=window.open(n,"compose"+u,`width=${c},height=${l},left=${r},top=${s}`);return d?d.__COMPOSE__=t:alert("Looks like your browser is blocking popups."),d}const no={x:()=>p(()=>import("./icons/close-line-YTE7hIJE.js"),[],import.meta.url),heart:()=>p(()=>import("./icons/heart-line-VwvWYh8h.js"),[],import.meta.url),bookmark:()=>p(()=>import("./icons/bookmark-line-D6jQ7QFs.js"),[],import.meta.url),"check-circle":()=>p(()=>import("./icons/check-circle-line-sE41WGxF.js"),[],import.meta.url),"x-circle":()=>p(()=>import("./icons/close-circle-line-qd3g541O.js"),[],import.meta.url),transfer:()=>p(()=>import("./icons/transfer-4-line-Q9QJoxz3.js"),[],import.meta.url),rocket:()=>p(()=>import("./icons/rocket-line-rZbVYYCZ.js"),[],import.meta.url),"arrow-left":()=>p(()=>import("./icons/arrow-left-line-_YC6-XGG.js"),[],import.meta.url),"arrow-right":()=>p(()=>import("./icons/arrow-right-line-PypiEqpu.js"),[],import.meta.url),"arrow-up":()=>p(()=>import("./icons/arrow-up-line-fcuKqhVE.js"),[],import.meta.url),"arrow-down":()=>p(()=>import("./icons/arrow-down-line-0TRJUP_K.js"),[],import.meta.url),earth:()=>p(()=>import("./icons/earth-line-t1Um8wpQ.js"),[],import.meta.url),lock:()=>p(()=>import("./icons/lock-line-0jNHqZpm.js"),[],import.meta.url),unlock:()=>p(()=>import("./icons/unlock-line-w3piJMVb.js"),[],import.meta.url),"eye-close":()=>p(()=>import("./icons/eye-close-line-lBiePPv9.js"),[],import.meta.url),"eye-open":()=>p(()=>import("./icons/eye-2-line-vz_Kw-rK.js"),[],import.meta.url),message:()=>p(()=>import("./icons/mail-line-5XLS6FEo.js"),[],import.meta.url),comment:()=>p(()=>import("./icons/chat-3-line-F0xcdpXY.js"),[],import.meta.url),comment2:()=>p(()=>import("./icons/comment-2-line-xEXuT-Ip.js"),[],import.meta.url),home:()=>p(()=>import("./icons/home-3-line-qJiZhXUH.js"),[],import.meta.url),notification:()=>p(()=>import("./icons/notification-line-olNPLtgS.js"),[],import.meta.url),follow:()=>p(()=>import("./icons/user-follow-line-k_GCWTtp.js"),[],import.meta.url),"follow-add":()=>p(()=>import("./icons/user-add-line-zzW9OULB.js"),[],import.meta.url),poll:[()=>p(()=>import("./icons/chart-bar-line-5r_DfN2w.js"),[],import.meta.url),"90deg"],pencil:()=>p(()=>import("./icons/pencil-line-bKXqElLR.js"),[],import.meta.url),quill:()=>p(()=>import("./icons/quill-pen-line-h_5-FsGz.js"),[],import.meta.url),at:()=>p(()=>import("./icons/at-line-9vJS_Hnl.js"),[],import.meta.url),attachment:()=>p(()=>import("./icons/attachment-line-C2PUa1Ke.js"),[],import.meta.url),upload:()=>p(()=>import("./icons/upload-3-line-Qsjvubiw.js"),[],import.meta.url),gear:()=>p(()=>import("./icons/settings-3-line-kt4MSpRv.js"),[],import.meta.url),more:()=>p(()=>import("./icons/more-3-line-wUD-Yhmj.js"),[],import.meta.url),more2:()=>p(()=>import("./icons/more-1-fill-je1-slyh.js"),[],import.meta.url),external:()=>p(()=>import("./icons/external-link-line-8nOOkmFu.js"),[],import.meta.url),popout:()=>p(()=>import("./icons/external-link-line-8nOOkmFu.js"),[],import.meta.url),popin:[()=>p(()=>import("./icons/external-link-line-8nOOkmFu.js"),[],import.meta.url),"180deg"],plus:()=>p(()=>import("./icons/add-circle-line--O-MfyNy.js"),[],import.meta.url),"chevron-left":()=>p(()=>import("./icons/left-line-Jck0yVmC.js"),[],import.meta.url),"chevron-right":()=>p(()=>import("./icons/right-line-7VBoqLdz.js"),[],import.meta.url),"chevron-down":()=>p(()=>import("./icons/down-line-9PeS5YhF.js"),[],import.meta.url),reply:[()=>p(()=>import("./icons/share-forward-line-4jL-2Q4u.js"),[],import.meta.url),"180deg","horizontal"],thread:()=>p(()=>import("./icons/route-line-2YYy3958.js"),[],import.meta.url),group:()=>p(()=>import("./icons/group-line-JvhJklhQ.js"),[],import.meta.url),bot:()=>p(()=>import("./icons/android-2-line-uPwvVubH.js"),[],import.meta.url),menu:()=>p(()=>import("./icons/rows-4-line-SxGPYpTa.js"),[],import.meta.url),list:()=>p(()=>import("./icons/list-check-line-qNqx9Mm4.js"),[],import.meta.url),search:()=>p(()=>import("./icons/search-2-line-G39AynEw.js"),[],import.meta.url),hashtag:()=>p(()=>import("./icons/hashtag-line-SS3QMu1R.js"),[],import.meta.url),info:()=>p(()=>import("./icons/information-line-8SOch6cR.js"),[],import.meta.url),shortcut:()=>p(()=>import("./icons/lightning-line-JMYUlCZM.js"),[],import.meta.url),user:()=>p(()=>import("./icons/user-4-line-zT_bpOrS.js"),[],import.meta.url),following:()=>p(()=>import("./icons/walk-line-CF7a5s4t.js"),[],import.meta.url),pin:()=>p(()=>import("./icons/pin-line-ULyRQyWZ.js"),[],import.meta.url),unpin:[()=>p(()=>import("./icons/pin-line-ULyRQyWZ.js"),[],import.meta.url),"180deg"],bus:()=>p(()=>import("./icons/bus-2-line-XuQdDZ_w.js"),[],import.meta.url),link:()=>p(()=>import("./icons/link-2-line-BUqp1EwN.js"),[],import.meta.url),history:()=>p(()=>import("./icons/history-line-yoG7K8wL.js"),[],import.meta.url),share:()=>p(()=>import("./icons/share-2-line-PYo-zN94.js"),[],import.meta.url),sparkles:()=>p(()=>import("./icons/sparkles-line-wjZWGZ1a.js"),[],import.meta.url),sparkles2:()=>p(()=>import("./icons/sparkles-2-line-g2FqdZ0R.js"),[],import.meta.url),exit:()=>p(()=>import("./icons/exit-line-l-1uUgI7.js"),[],import.meta.url),translate:()=>p(()=>import("./icons/translate-line-HpDtlqS2.js"),[],import.meta.url),play:()=>p(()=>import("./icons/play-fill-Ey-zv2eL.js"),[],import.meta.url),trash:()=>p(()=>import("./icons/delete-2-line-pjUduCFs.js"),[],import.meta.url),mute:()=>p(()=>import("./icons/volume-mute-line-WthBoXru.js"),[],import.meta.url),unmute:()=>p(()=>import("./icons/volume-line-PZujbN8h.js"),[],import.meta.url),block:()=>p(()=>import("./icons/forbid-circle-line-3FxopGoP.js"),[],import.meta.url),unblock:[()=>p(()=>import("./icons/forbid-circle-line-3FxopGoP.js"),[],import.meta.url),"180deg"],flag:()=>p(()=>import("./icons/flag-1-line-xvcg7G7Q.js"),[],import.meta.url),time:()=>p(()=>import("./icons/time-line-ThP0kTRr.js"),[],import.meta.url),refresh:()=>p(()=>import("./icons/refresh-2-line-t42qqclb.js"),[],import.meta.url),emoji2:()=>p(()=>import("./icons/emoji-2-line--uNVc2IC.js"),[],import.meta.url),filter:()=>p(()=>import("./icons/filter-2-line-KyjbFYlO.js"),[],import.meta.url),filters:()=>p(()=>import("./icons/filter-line-1KEfnWDm.js"),[],import.meta.url),chart:()=>p(()=>import("./icons/chart-line-line-pHaLt6yC.js"),[],import.meta.url),react:()=>p(()=>import("./icons/react-line-YfZPqZem.js"),[],import.meta.url),layout4:()=>p(()=>import("./icons/layout-4-line-FOdnyEcZ.js"),[],import.meta.url),layout5:()=>p(()=>import("./icons/layout-5-line-9Kks7dle.js"),[],import.meta.url),announce:()=>p(()=>import("./icons/announcement-line-MSlAmDH1.js"),[],import.meta.url),alert:()=>p(()=>import("./icons/alert-line-zyc6hy8V.js"),[],import.meta.url),round:()=>p(()=>import("./icons/round-fill-a0rplSmV.js"),[],import.meta.url),"arrow-up-circle":()=>p(()=>import("./icons/arrow-up-circle-line-e3kZqEZN.js"),[],import.meta.url),"arrow-down-circle":()=>p(()=>import("./icons/arrow-down-circle-line-mpqFtRtO.js"),[],import.meta.url),clipboard:()=>p(()=>import("./icons/clipboard-line-9F_Yeo71.js"),[],import.meta.url),"account-edit":()=>p(()=>import("./icons/user-edit-line-9VnWCh0X.js"),[],import.meta.url),"account-warning":()=>p(()=>import("./icons/user-warning-line-gL3RGb1N.js"),[],import.meta.url),keyboard:()=>p(()=>import("./icons/keyboard-line-10AZQcVH.js"),[],import.meta.url),cloud:()=>p(()=>import("./icons/cloud-line-abe0HgFS.js"),[],import.meta.url),month:()=>p(()=>import("./icons/calendar-month-line-VoXZVWAe.js"),[],import.meta.url),media:()=>p(()=>import("./icons/photo-album-line--GdJqjfq.js"),[],import.meta.url),speak:()=>p(()=>import("./icons/radar-line-ndI8IhOG.js"),[],import.meta.url),building:()=>p(()=>import("./icons/building-5-line-ew7lu83B.js"),[],import.meta.url),history2:()=>p(()=>import("./icons/history-2-line-3yIVzoWo.js"),[],import.meta.url),document:()=>p(()=>import("./icons/document-line--D6ooZg1.js"),[],import.meta.url),"arrows-right":()=>p(()=>import("./icons/arrows-right-line-HF4HILdT.js"),[],import.meta.url),code:()=>p(()=>import("./icons/code-line-h4RWLaak.js"),[],import.meta.url),copy:()=>p(()=>import("./icons/copy-2-line-mPSDKieb.js"),[],import.meta.url),quote:()=>p(()=>import("./icons/quote-left-line-NQzeELMO.js"),[],import.meta.url),settings:()=>p(()=>import("./icons/settings-6-line-ZgCBilgF.js"),[],import.meta.url),"heart-break":()=>p(()=>import("./icons/heart-crack-line-P3DoKfTT.js"),[],import.meta.url),"user-x":()=>p(()=>import("./icons/user-x-line-zIdph-gu.js"),[],import.meta.url)},Ea={s:12,m:16,l:20,xl:24,xxl:32},Hn={},Ta=Vo(function({width:t,height:n,body:o,rotate:a,flip:r}){return e("svg",{viewBox:`0 0 ${t} ${n}`,dangerouslySetInnerHTML:{__html:o},style:{transform:`${a?`rotate(${a})`:""} ${r?"scaleX(-1)":""}`}})},{isShallowEqual:!0,maxSize:Object.keys(no).length,matchesArg:(t,n)=>t.icon===n.icon&&t.body===n.body});function v({icon:t,size:n="m",alt:o,title:a,class:r="",style:s={}}){if(!t)return null;const c=Ea[n];let l=no[t];if(!l)return null;let u,d;Array.isArray(l)&&([l,u,d]=l);const[m,h]=K(Hn[t]),b=ne(t);return Ee(()=>{m&&b.current===t||((async()=>{const w=await l();h(w.default),Hn[t]=w.default})(),b.current=t)},[t]),e("span",{class:`icon ${r}`,title:a||o,style:{width:`${c}px`,height:`${c}px`,...s},children:m&&e(Ta,{icon:t,width:m.width,height:m.height,body:m.body,rotate:u,flip:d})})}function ka(t,n=[]){!t||typeof t!="function"||Ee(()=>{const o=new CloseWatcher;return o.addEventListener("close",t),()=>{o.destroy()}},n)}const La=window.CloseWatcher?ka:()=>{},wa=document.getElementById("modal-container");function on({children:t,onClose:n,onClick:o,class:a}){if(!t)return null;const r=ne();Ee(()=>{let u=setTimeout(()=>{var m;const d=(m=r.current)==null?void 0:m.querySelector('[tabindex="-1"]');d&&d.focus()},100);return()=>clearTimeout(u)},[]);const s=window.CloseWatcher,c=Ke("esc",()=>{setTimeout(()=>{n==null||n()},0)},{enabled:!s&&!!n,keydown:!1,keyup:!0},[n]);La(n,[n]);const l=e("div",{ref:u=>{var d;r.current=u,c.current=((d=u==null?void 0:u.querySelector)==null?void 0:d.call(u,'[tabindex="-1"]'))||u},className:a,onClick:u=>{o==null||o(u),u.target===u.currentTarget&&(n==null||n(u))},tabIndex:"-1",onFocus:u=>{var d,m;try{if(u.target===u.currentTarget){const h=(d=r.current)==null?void 0:d.querySelector('[tabindex="-1"]'),b=!!h&&((m=getComputedStyle(h))==null?void 0:m.pointerEvents)!=="none";h&&b&&h.focus()}}catch{}},children:t});return Uo(l,wa)}const zn={s:16,m:20,l:24,xl:32,xxl:50,xxxl:64},rt={},st=window.OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas"),St=st.getContext("2d",{willReadFrequently:!0});St.imageSmoothingEnabled=!1;function $a({url:t,size:n,alt:o="",squircle:a,...r}){n=zn[n]||n||zn.m;const s=ne(),c=/missing\.png$/.test(t);return e("span",{ref:s,class:`avatar ${a?"squircle":""} ${rt[t]?"has-alpha":""}`,style:{width:n,height:n},title:o,...r,children:!!t&&e("img",{src:t,width:n,height:n,alt:o,loading:"lazy",decoding:"async",crossOrigin:rt[t]===void 0&&!c?"anonymous":void 0,onError:l=>{l.target.crossOrigin&&(l.target.crossOrigin=null,l.target.src=t)},onLoad:l=>{s.current&&(s.current.dataset.loaded=!0),rt[t]===void 0&&(c||queueMicrotask(()=>{try{const{width:u,height:d}=l.target;st.width!==u&&(st.width=u),st.height!==d&&(st.height=d),St.drawImage(l.target,0,0);const m=St.getImageData(0,0,u,d),h=m.data.filter((b,w)=>w%4===3&&b<=128).length/(m.data.length/4)>.1;h&&s.current.classList.add("has-alpha"),rt[t]=h,St.clearRect(0,0,u,d)}catch{rt[t]=!1}}))}})})}const Se=De($a),We=Ho((t,n)=>{let o;try{o=No()}catch{}let a=(location.hash||"").replace(/^#/,"").trim();a===""&&(a="/");const{to:r,...s}=t;if(a&&a!=="/"&&a.includes("?"))try{const l=new URL(a,location.origin);if(l.searchParams.size){const u=Array.from(l.searchParams.entries()).map(([d,m])=>`${d}=${encodeURIComponent(m)}`).join("&");a=l.pathname+"?"+u}}catch{}const c=a===r||decodeURIComponent(a)===r;return e("a",{ref:n,href:`#${r}`,...s,class:`${t.class||""} ${c?"is-active":""}`,onClick:l=>{var u,d,m;(d=(u=l.currentTarget)==null?void 0:u.parentNode)!=null&&d.closest("a")&&l.stopPropagation(),o&&(S.prevLocation=o),(m=t.onClick)==null||m.call(t,l)}})}),Aa=document.documentElement,At=getComputedStyle(Aa),Pa=8;let oo=[0,0,0,0];function ao(){const t=At.getPropertyValue("--sai-top"),n=At.getPropertyValue("--sai-right"),o=At.getPropertyValue("--sai-bottom"),a=At.getPropertyValue("--sai-left");oo=[Math.max(0,parseInt(t,10)),Math.max(0,parseInt(n,10)),Math.max(0,parseInt(o,10)),Math.max(0,parseInt(a,10))]}requestAnimationFrame(ao);function ro(t=[]){return oo.map((o,a)=>(o||Pa)+(t[a]||0)).join(" ")}CSS.supports("top: env(safe-area-inset-top)")&&window.addEventListener("resize",ao,{passive:!0});function io(t){const{containerProps:n,instanceRef:o}=t,a=zo(),r=o!=null&&o.current?o:ne();return e(Bo,{boundingBoxPadding:ro(),repositionFlag:`${a.width}x${a.height}`,unmountOnClose:!0,...t,instanceRef:r,containerProps:{onClick:s=>{var c,l,u;s.target===s.currentTarget&&((l=(c=r.current)==null?void 0:c.closeMenu)==null||l.call(c)),(u=n==null?void 0:n.onClick)==null||u.call(n,s)},...n}})}function Ia(t){const n=ne();return e(Fo,{...t,instanceRef:n,itemProps:{onPointerMove:o=>{var a,r;o.pointerType==="touch"&&((r=(a=n.current)==null?void 0:a.openMenu)==null||r.call(a))},onPointerLeave:o=>{var a,r;o.pointerType==="touch"&&((r=(a=n.current)==null?void 0:a.openMenu)==null||r.call(a))}}})}function qt({subMenu:t=!1,confirm:n=!0,confirmLabel:o,menuItemClassName:a,menuFooter:r,menuExtras:s,...c}){const{children:l,onClick:u,...d}=c;return n?e(t?Ia:io,{openTrigger:"clickOnly",direction:"bottom",overflow:"auto",gap:-8,shift:8,menuClassName:"menu-emphasized",...d,menuButton:t?void 0:l,label:t?l:void 0,children:[e(ee,{className:a,onClick:u,children:o}),s,r]}):t?e(ee,{...c}):u?jo(l,{onClick:u}):l}function an({staticUrl:t,alt:n,url:o}){return e("picture",{children:[t&&e("source",{srcset:t,media:"(prefers-reduced-motion: reduce)"}),e("img",{src:o,alt:n,class:"shortcode-emoji emoji",width:"16",height:"16",loading:"lazy",decoding:"async"},n||o)]})}function Sa({text:t,emojis:n}){if(!t)return"";if(!(n!=null&&n.length)||t.indexOf(":")===-1)return t;const o=new RegExp(`:(${n.map(r=>r.shortcode).join("|")}):`,"g");return t.split(o).map(r=>{const s=n.find(c=>c.shortcode===r);if(s){const{url:c,staticUrl:l}=s;return e(an,{staticUrl:l,alt:r,url:c})}return r})}const Ge=ht(Sa,(t,n)=>{var o,a;return t.text===n.text&&((o=t.emojis)==null?void 0:o.length)===((a=n.emojis)==null?void 0:a.length)}),Ra=new Intl.Collator("en",{sensitivity:"base"});function Da({account:t,instance:n,showAvatar:o,showAcct:a,short:r,external:s,onClick:c}){const{acct:l,avatar:u,avatarStatic:d,id:m,url:h,displayName:b,emojis:w,bot:_}=t;let{username:T}=t;const[L,R,E]=l.match(/([^@]+)(@.+)/i)||[,l],k=T.toLowerCase().trim(),f=(b||"").toLowerCase().trim(),g=f.replace(/(\:(\w|\+|\-)+\:)(?=|[\!\.\?]|$)/g,"").replace(/\s+/g,""),M=g.replace(/[^a-z0-9]/gi,"");return!r&&(k===f||k===g||k===M||Ra.compare(k,g)===0)&&(T=null),e("a",{class:`name-text ${a?"show-acct":""} ${r?"short":""}`,href:h,target:s?"_blank":null,title:b?`${b} (${E?"":"@"}${l})`:`${E?"":"@"}${l}`,onClick:x=>{if(!s){if(x.preventDefault(),x.stopPropagation(),c)return c(x);S.showAccount={account:t,instance:n}}},children:[o&&e(P,{children:[e(Se,{url:d||u,squircle:_})," "]}),b&&!r?e(P,{children:[e("b",{children:e(Ge,{text:b,emojis:w})}),!a&&T&&e(P,{children:[" ",e("i",{children:["@",T]})]})]}):r?e("i",{children:T}):e("b",{children:T}),a&&e(P,{children:[e("br",{}),e("i",{children:[E?"":"@",R,!!E&&e("span",{class:"ib",children:E})]})]})]})}const ct=ht(Da,(t,n)=>{const{account:o}=t,{account:a}=n;return(o==null?void 0:o.acct)===(a==null?void 0:a.acct)});Ve.extend(qo);Ve.extend(Ko);Ve.extend(Wo);const xa=new Intl.DateTimeFormat;function Ue({datetime:t,format:n}){if(!t)return null;const[o,a]=Go(u=>u+1,0),r=_e(()=>Ve(t),[t]),[s,c,l]=_e(()=>{if(!r.isValid())return[""+t,"",""];let u;if(n==="micro"){const d=Ve();d.diff(r,"day")<=1||d.year()===r.year()?u=r.twitter():u=xa.format(r.toDate())}return u||(u=r.fromNow()),[u,r.toISOString(),r.format("LLLL")]},[r,n,o]);return Ee(()=>{if(!r.isValid())return;let u,d;function m(){d=requestAnimationFrame(()=>{a(),h()})}function h(){r.diff(Ve(),"minute",!0)<1?u=setTimeout(m,1e4):r.diff(Ve(),"hour",!0)<1&&(u=setTimeout(m,6e4))}return h(),()=>{clearTimeout(u),cancelAnimationFrame(d)}},[]),e("time",{datetime:c,title:l,children:s})}const Ca=[{code:"af",name:"Afrikaans"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bho",name:"Bhojpuri"},{code:"bs",name:"Bosnian"},{code:"bg",name:"Bulgarian"},{code:"ca",name:"Catalan"},{code:"ceb",name:"Cebuano"},{code:"ny",name:"Chichewa"},{code:"zh",name:"Chinese"},{code:"zh_HANT",name:"Chinese (Traditional)"},{code:"co",name:"Corsican"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Dhivehi"},{code:"doi",name:"Dogri"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"tl",name:"Filipino"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"fy",name:"Frisian"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek"},{code:"gn",name:"Guarani"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian Creole"},{code:"ha",name:"Hausa"},{code:"haw",name:"Hawaiian"},{code:"iw",name:"Hebrew"},{code:"hi",name:"Hindi"},{code:"hmn",name:"Hmong"},{code:"hu",name:"Hungarian"},{code:"is",name:"Icelandic"},{code:"ig",name:"Igbo"},{code:"ilo",name:"Ilocano"},{code:"id",name:"Indonesian"},{code:"ga",name:"Irish"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"jw",name:"Javanese"},{code:"kn",name:"Kannada"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"rw",name:"Kinyarwanda"},{code:"gom",name:"Konkani"},{code:"ko",name:"Korean"},{code:"kri",name:"Krio"},{code:"ku",name:"Kurdish (Kurmanji)"},{code:"ckb",name:"Kurdish (Sorani)"},{code:"ky",name:"Kyrgyz"},{code:"lo",name:"Lao"},{code:"la",name:"Latin"},{code:"lv",name:"Latvian"},{code:"ln",name:"Lingala"},{code:"lt",name:"Lithuanian"},{code:"lg",name:"Luganda"},{code:"lb",name:"Luxembourgish"},{code:"mk",name:"Macedonian"},{code:"mai",name:"Maithili"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"Maori"},{code:"mr",name:"Marathi"},{code:"mni-Mtei",name:"Meiteilon (Manipuri)"},{code:"lus",name:"Mizo"},{code:"mn",name:"Mongolian"},{code:"my",name:"Myanmar (Burmese)"},{code:"ne",name:"Nepali"},{code:"no",name:"Norwegian"},{code:"or",name:"Odia (Oriya)"},{code:"om",name:"Oromo"},{code:"ps",name:"Pashto"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"pa",name:"Punjabi"},{code:"qu",name:"Quechua"},{code:"ro",name:"Romanian"},{code:"ru",name:"Russian"},{code:"sm",name:"Samoan"},{code:"sa",name:"Sanskrit"},{code:"gd",name:"Scots Gaelic"},{code:"nso",name:"Sepedi"},{code:"sr",name:"Serbian"},{code:"st",name:"Sesotho"},{code:"sn",name:"Shona"},{code:"sd",name:"Sindhi"},{code:"si",name:"Sinhala"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovenian"},{code:"so",name:"Somali"},{code:"es",name:"Spanish"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"sv",name:"Swedish"},{code:"tg",name:"Tajik"},{code:"ta",name:"Tamil"},{code:"tt",name:"Tatar"},{code:"te",name:"Telugu"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"ts",name:"Tsonga"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"},{code:"ak",name:"Twi"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"ug",name:"Uyghur"},{code:"uz",name:"Uzbek"},{code:"vi",name:"Vietnamese"},{code:"cy",name:"Welsh"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"zu",name:"Zulu"}];function Ma(...t){try{return Yo(...t)}catch{return t[2]||!1}}const rn=De(Ma),Oa=[new Intl.DateTimeFormat().resolvedOptions().locale,...navigator.languages],Va=rn(Oa,Ca.map(t=>t.code.replace("_","-")),"en");function so(t=!1){if(t){const{contentTranslationTargetLanguage:n}=S.settings;if(n)return n}return Va}const Ua=new Intl.DisplayNames(navigator.languages,{type:"language"});function Na(t){try{return Ua.of(t)}catch{return null}}const Kt=De(Na);function xt(t,n=[]){return t?(!n.length||t.indexOf(":")===-1||n.forEach(o=>{const{shortcode:a,staticUrl:r,url:s}=o;t=t.replace(new RegExp(`:${a}:`,"g"),`<picture><source srcset="${r}" media="(prefers-reduced-motion: reduce)"></source><img class="shortcode-emoji emoji" src="${s}" alt=":${a}:" width="16" height="16" loading="lazy" decoding="async" /></picture>`)}),t):""}const je=document.createElement("div"),Ha=["u-url","mention","hashtag"];function za(t,n={}){const{emojis:o,postEnhanceDOM:a=()=>{}}=n;let r=t;const s=document.createElement("div");s.innerHTML=r;const c=/<a/i.test(r),l=r.includes("```");if(c&&(s.querySelectorAll('a:not([target="_blank"])').forEach(h=>{h.setAttribute("target","_blank")}),s.querySelectorAll("a[class]").forEach(h=>{h.classList.forEach(b=>{Ha.includes(b)||h.classList.remove(b)})})),c&&s.querySelectorAll("a[href]").forEach(m=>{/^https?:\/\//i.test(m.textContent.trim())&&(m.classList.add("has-url-text"),qa(m))}),c){const d=s.querySelectorAll("a[href]"),m=[];d.forEach(h=>{const b=h.innerText.trim(),w=h.querySelector("*");if(/^@[^@]+(@[^@]+)?$/g.test(b)){const[_,T,L]=b.split("@");w||(!m.some(([R])=>R===T)||m.some(([R,E])=>R===T&&E===L)?(h.innerHTML=`@<span>${T}</span>`,m.push([T,L])):h.innerHTML=`@<span>${T}@${L}</span>`),h.classList.add("mention")}/^#[^#]+$/g.test(b)&&(w||(h.innerHTML=`#<span>${b.slice(1)}</span>`),h.classList.add("mention","hashtag"))})}let u;if(r.includes(":")&&(u=Gt(s),u.forEach(d=>{let m=d.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");o&&(m=xt(m,o)),je.innerHTML=m,d.replaceWith(...je.childNodes)})),l&&[...s.querySelectorAll("p")].filter(m=>/^```[^]+```$/g.test(m.innerText.trim())).forEach(m=>{const h=document.createElement("pre");m.querySelectorAll("br").forEach(b=>b.replaceWith(`
`)),h.innerHTML=`<code>${m.innerHTML.trim()}</code>`,m.replaceWith(h)}),l&&[...s.querySelectorAll("p")].filter(h=>/^```/g.test(h.innerText)).forEach(h=>{const b=[h];let w=!1,_=h;for(;_.nextElementSibling;){const T=_.nextElementSibling;if(T&&T.tagName==="P")if(/```$/g.test(T.innerText)){b.push(T),w=!0;break}else b.push(T);else break;_=T}if(w){const T=document.createElement("pre");b.forEach(R=>{R.querySelectorAll("br").forEach(E=>E.replaceWith(`
`))});const L=b.map(R=>R.innerHTML).join(`

`);T.innerHTML=`<code tabindex="0">${L}</code>`,h.replaceWith(T),b.forEach(R=>R.remove())}}),r.includes("`")&&(u=Gt(s),u.forEach(d=>{let m=d.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");/`[^`]+`/g.test(m)&&(m=m.replaceAll(/(`[^]+?`)/g,"<code>$1</code>")),je.innerHTML=m,d.replaceWith(...je.childNodes)})),/twitter\.com/i.test(r)&&(u=Gt(s,{rejectFilter:["A"]}),u.forEach(d=>{let m=d.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");/@[a-zA-Z0-9_]+@twitter\.com/g.test(m)&&(m=m.replaceAll(/(@([a-zA-Z0-9_]+)@twitter\.com)/g,'<a href="https://twitter.com/$2" rel="nofollow noopener noreferrer" target="_blank">$1</a>')),je.innerHTML=m,d.replaceWith(...je.childNodes)})),r.includes("#")){let d=null;const m=[...s.querySelectorAll("p")].filter((h,b)=>{let w=0;for(let _=0;_<h.childNodes.length;_++){const T=h.childNodes[_];if(T.nodeType===Node.TEXT_NODE){if(T.textContent.trim()!=="")return!1}else if(T.tagName!=="BR")if(T.tagName==="A"){const L=T.textContent.trim();if(!L||!L.startsWith("#"))return!1;w++}else return!1}if(w>3||w>1&&d&&b===d+1)return d=b,!0});m!=null&&m.length&&m.forEach(h=>{h.classList.add("hashtag-stuffing"),h.title=h.innerText})}return r.includes("<img")&&s.querySelectorAll("img").forEach(d=>{const m=d.getAttribute("width")||d.naturalWidth,h=d.getAttribute("height")||d.naturalHeight;m&&h&&d.style.setProperty("--original-aspect-ratio",`${m}/${h}`)}),a&&queueMicrotask(()=>a(s)),r=s.innerHTML,r}const co=De(za),Ba=["STYLE","IMG","VIDEO","AUDIO","AREA","MAP","TRACK","EMBED","IFRAME","OBJECT","PICTURE","PORTAL","SOURCE","SVG","MATH","CANVAS","NOSCRIPT","SCRIPT","INPUT","OPTION","TEXTAREA","SLOT","TEMPLATE"],Fa=Object.fromEntries(Ba.map(t=>[t,!0])),ja=/^(https?:\/\/(www\.)?|xmpp:)/,Wt=30;function qa(t){var n;if(!(!t||(n=t.querySelector)!=null&&n.call(t,"*")))try{const o=t.innerText.trim(),a=(o.match(ja)||[])[0]||"";if(!a)return;const r=o.slice(a.length,a.length+Wt),s=o.slice(a.length+Wt),c=o.slice(a.length).length>Wt;t.innerHTML=`<span class="invisible">${a}</span><span class=${c?"ellipsis":""}>${r}</span><span class="invisible">${s}</span>`}catch{}}function Gt(t,n={}){var c;const o=[],a=Object.assign({},Fa,(c=n.rejectFilter)==null?void 0:c.reduce((l,u)=>(l[u]=!0,l),{})),r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode(l){return a[l.parentNode.nodeName]?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},!1);let s;for(;s=r.nextNode();)o.push(s);return o}const it=document.createElement("div");function Ka(t){return t?(it.innerHTML=t.replace(/<\/p>/g,`</p>

`).replace(/<\/li>/g,`</li>
`),it.querySelectorAll("br").forEach(n=>{n.replaceWith(`
`)}),it.querySelectorAll(".invisible").forEach(n=>{n.remove()}),it.querySelectorAll(".ellipsis").forEach(n=>{n.append("...")}),it.innerText.replace(/[\r\n]{3,}/g,`

`).trim()):""}const ln=De(Ka);function Wa(t){const{mentions:n=[],instance:o,previewMode:a,statusURL:r}=t||{};return s=>{var m,h;let{target:c}=s;if(c=c.closest("a"),!c||s.metaKey||s.ctrlKey||s.shiftKey||s.altKey||s.which===2)return;const l=(m=c.previousSibling)==null?void 0:m.textContent,u=l==null?void 0:l.endsWith("@"),d=c.innerText.startsWith("@");if((c.classList.contains("u-url")||c.classList.contains("mention"))&&d||u&&!d){const b=(c.querySelector("span")||c).innerText.trim(),w=b.replace(/^@/,""),_=c.getAttribute("href"),T=n.find(L=>L.url===_)||n.find(L=>L.acct===w||L.username===w);if(T)s.preventDefault(),s.stopPropagation(),S.showAccount={account:T.acct,instance:o};else if(!/^http/i.test(b)){s.preventDefault(),s.stopPropagation();const L=c.getAttribute("href");S.showAccount={account:L,instance:o}}}else if(!a){const b=l==null?void 0:l.endsWith("#");if(c.classList.contains("hashtag")||b){s.preventDefault(),s.stopPropagation();const w=c.innerText.replace(/^#/,"").trim(),_=o?`#/${o}/t/${w}`:`#/t/${w}`;location.hash=_}else(h=S.unfurledLinks[c.href])!=null&&h.url&&r!==c.href&&(s.preventDefault(),s.stopPropagation(),S.prevLocation={pathname:location.hash.replace(/^#/,"")},location.hash=`#${S.unfurledLinks[c.href].url}`)}}}const{locale:Ga}=new Intl.DateTimeFormat().resolvedOptions(),Ya=t=>{const{dateYear:n,hideTime:o,formatOpts:a}=t||{},r=new Date().getFullYear();return Intl.DateTimeFormat(Ga,{year:n===r?void 0:"numeric",month:"short",day:"numeric",hour:o?void 0:"numeric",minute:o?void 0:"numeric",...a})},Xa=De(Ya);function mt(t,n){return t instanceof Date||(t=new Date(t)),Xa({dateYear:t.getFullYear(),...n}).format(t)}const{locale:Za}=Intl.NumberFormat().resolvedOptions(),Ne=Intl.NumberFormat(Za,{notation:"compact",roundingMode:"floor"}).format,Ja={"@mastodon/edit-media-attributes":">=4.1","@mastodon/list-exclusive":">=4.2","@mastodon/filtered-notifications":"~4.3 || >=4.3"},Qa=/pixelfed/i,Pe=/^(?!.*pixelfed).*$/i,Bn={"@mastodon/lists":Pe,"@mastodon/filters":Pe,"@mastodon/mentions":Pe,"@mastodon/trending-hashtags":Pe,"@mastodon/trending-links":Pe,"@mastodon/post-bookmark":Pe,"@mastodon/post-edit":Pe,"@mastodon/profile-edit":Pe,"@mastodon/profile-private-note":Pe,"@pixelfed/trending":Qa},Pt={};function It(t){try{const{version:n,domain:o}=_a(),a=`${o}-${t}`;if(Pt[a])return Pt[a];if(Bn[t])return Pt[a]=Bn[t].test(n);const r=Ja[t];return r?Pt[a]=Xo(n,r,{includePrerelease:!0,loose:!0}):!1}catch{return!1}}function Vr({skeleton:t,account:n,avatarSize:o="xl",useAvatarStatic:a=!1,instance:r,external:s,internal:c,onClick:l,showActivity:u=!1,showStats:d=!1,accountInstance:m,hideDisplayName:h=!1,relationship:b={},excludeRelationshipAttrs:w=[]}){if(t)return e("div",{class:"account-block skeleton",children:[e(Se,{size:o}),e("span",{children:[e("b",{children:"████████"}),e("br",{}),e("span",{class:"account-block-acct",children:"██████"})]})]});if(!n)return null;const{id:_,acct:T,avatar:L,avatarStatic:R,displayName:E,username:k,emojis:f,url:g,statusesCount:M,lastStatusAt:x,bot:O,fields:A,note:I,group:H,followersCount:N,createdAt:C,locked:X}=n;let[se,ve,Z]=T.match(/([^@]+)(@.+)/i)||[,T];m&&(Z=`@${m}`);const Te=A==null?void 0:A.find($=>!!$.verifiedAt&&!!$.value),j={};for(const $ in b)w.includes($)||(j[$]=b[$]);const J=j.following||j.followedBy||j.requested;return e("a",{class:"account-block",href:g,target:s?"_blank":null,title:Z?T:`@${T}`,onClick:$=>{if(!s){if($.preventDefault(),l)return l($);c?location.hash=`/${r}/a/${_}`:S.showAccount={account:n,instance:r}}},children:[e(Se,{url:a?R:L||R,size:o,squircle:O}),e("span",{class:"account-block-content",children:[!h&&e(P,{children:E?e("b",{children:e(Ge,{text:E,emojis:f})}):e("b",{children:k})})," ",e("span",{class:"account-block-acct",children:[Z?"":"@",ve,e("wbr",{}),Z,X&&e(P,{children:[" ",e(v,{icon:"lock",size:"s",alt:"Locked"})]})]}),u&&e(P,{children:[e("br",{}),e("small",{class:"last-status-at insignificant",children:["Posts: ",M,!!x&&e(P,{children:[" ","· Last posted:"," ",mt(x,{hideTime:!0})]})]})]}),d&&e("div",{class:"account-block-stats",children:[O&&e(P,{children:e("span",{class:"tag collapsed",children:[e(v,{icon:"bot"})," Automated"]})}),!!H&&e(P,{children:e("span",{class:"tag collapsed",children:[e(v,{icon:"group"})," Group"]})}),J&&e("div",{class:"shazam-container-horizontal",children:e("div",{class:"shazam-container-inner",children:j.following&&j.followedBy?e("span",{class:"tag minimal",children:"Mutual"}):j.requested?e("span",{class:"tag minimal",children:"Requested"}):j.following?e("span",{class:"tag minimal",children:"Following"}):j.followedBy?e("span",{class:"tag minimal",children:"Follows you"}):null})},b.id),!!N&&e("span",{class:"ib",children:[Ne(N)," ",N===1?"follower":"followers"]}),!!Te&&e("span",{class:"verified-field",children:[e(v,{icon:"check-circle",size:"s"})," ",e("span",{dangerouslySetInnerHTML:{__html:co(Te.value,{emojis:f})}})]}),!O&&!H&&!J&&!N&&!Te&&!!C&&e("span",{class:"created-at",children:["Joined"," ",e("time",{datetime:C,children:mt(C,{hideTime:!0})})]})]})]})]})}function Fn(t){const{className:n,disabled:o,...a}=t;return e(Zo,{className:n,disabled:o,children:({ref:r,closeMenu:s})=>e(We,{...a,ref:r,onClick:({detail:c})=>s(c===0?"Enter":void 0)})})}const er=[{code:"auto",name:"Detect"},{code:"af",name:"Afrikaans"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bho",name:"Bhojpuri"},{code:"bs",name:"Bosnian"},{code:"bg",name:"Bulgarian"},{code:"ca",name:"Catalan"},{code:"ceb",name:"Cebuano"},{code:"ny",name:"Chichewa"},{code:"zh",name:"Chinese"},{code:"co",name:"Corsican"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Dhivehi"},{code:"doi",name:"Dogri"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"tl",name:"Filipino"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"fy",name:"Frisian"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek"},{code:"gn",name:"Guarani"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian Creole"},{code:"ha",name:"Hausa"},{code:"haw",name:"Hawaiian"},{code:"iw",name:"Hebrew"},{code:"hi",name:"Hindi"},{code:"hmn",name:"Hmong"},{code:"hu",name:"Hungarian"},{code:"is",name:"Icelandic"},{code:"ig",name:"Igbo"},{code:"ilo",name:"Ilocano"},{code:"id",name:"Indonesian"},{code:"ga",name:"Irish"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"jw",name:"Javanese"},{code:"kn",name:"Kannada"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"rw",name:"Kinyarwanda"},{code:"gom",name:"Konkani"},{code:"ko",name:"Korean"},{code:"kri",name:"Krio"},{code:"ku",name:"Kurdish (Kurmanji)"},{code:"ckb",name:"Kurdish (Sorani)"},{code:"ky",name:"Kyrgyz"},{code:"lo",name:"Lao"},{code:"la",name:"Latin"},{code:"lv",name:"Latvian"},{code:"ln",name:"Lingala"},{code:"lt",name:"Lithuanian"},{code:"lg",name:"Luganda"},{code:"lb",name:"Luxembourgish"},{code:"mk",name:"Macedonian"},{code:"mai",name:"Maithili"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"Maori"},{code:"mr",name:"Marathi"},{code:"mni-Mtei",name:"Meiteilon (Manipuri)"},{code:"lus",name:"Mizo"},{code:"mn",name:"Mongolian"},{code:"my",name:"Myanmar (Burmese)"},{code:"ne",name:"Nepali"},{code:"no",name:"Norwegian"},{code:"or",name:"Odia (Oriya)"},{code:"om",name:"Oromo"},{code:"ps",name:"Pashto"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"pa",name:"Punjabi"},{code:"qu",name:"Quechua"},{code:"ro",name:"Romanian"},{code:"ru",name:"Russian"},{code:"sm",name:"Samoan"},{code:"sa",name:"Sanskrit"},{code:"gd",name:"Scots Gaelic"},{code:"nso",name:"Sepedi"},{code:"sr",name:"Serbian"},{code:"st",name:"Sesotho"},{code:"sn",name:"Shona"},{code:"sd",name:"Sindhi"},{code:"si",name:"Sinhala"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovenian"},{code:"so",name:"Somali"},{code:"es",name:"Spanish"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"sv",name:"Swedish"},{code:"tg",name:"Tajik"},{code:"ta",name:"Tamil"},{code:"tt",name:"Tatar"},{code:"te",name:"Telugu"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"ts",name:"Tsonga"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"},{code:"ak",name:"Twi"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"ug",name:"Uyghur"},{code:"uz",name:"Uzbek"},{code:"vi",name:"Vietnamese"},{code:"cy",name:"Welsh"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"zu",name:"Zulu"}],jn=48,Yt={};function lo({id:t,children:n}){const o=ne(),a=!!Yt[t],[r,s]=K(!1),[c,l]=K(a||!1),{ref:u}=Jo({root:null,rootMargin:`-${jn}px 0px 0px 0px`,trackVisibility:!0,delay:1e3,onChange:d=>{d&&(s(!0),t&&(Yt[t]=!0))},triggerOnce:!0,skip:c||r});return Ee(()=>{if(!o.current)return;const d=o.current.getBoundingClientRect();d.bottom>jn&&(d.top<window.innerHeight?s(!0):l(!0),t&&(Yt[t]=!0))},[]),c?n:e("div",{ref:o,class:"shazam-container no-animation",hidden:!r,children:e("div",{ref:u,class:"shazam-container-inner",children:n})})}var tr={PHANPY_CLIENT_NAME:"Blaede Phanpy",PHANPY_WEBSITE:"https://phanpy.blaede.family",PHANPY_LINGVA_INSTANCES:"lingva.phanpy.social lingva.lunar.icu lingva.garudalinux.org translate.plausibility.cloud",PHANPY_PRIVACY_POLICY_URL:"https://mastodon.blaede.family/privacy-policy",VITE_APP_ENV:"production",PHANPY_DEFAULT_INSTANCE:"mastodon.blaede.family",PHANPY_GIPHY_API_KEY:"48JGsrSS1XE5w4nWe9c9hqxPbsfRWR0e",PHANPY_DEFAULT_INSTANCE_REGISTRATION_URL:"https://mastodon.blaede.family/auth/sign_up",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{PHANPY_LINGVA_INSTANCES:qn}=tr,ut=qn?qn.split(/\s+/):[],nr=Qo({limit:1,interval:2e3});let Xt=0;function or(t,n,o){return ea(()=>{let r=ut[Xt];return fetch(`https://${r}/api/v1/${n}/${o}/${encodeURIComponent(t)}`).then(s=>{if(!s.ok)throw new Error(s.statusText);return s.json()}).then(s=>{var c;return{provider:"lingva",content:s.translation,detectedSourceLanguage:(c=s.info)==null?void 0:c.detectedSource,info:s.info}})},{retries:3,onFailedAttempt:r=>{Xt=(Xt+1)%ut.length}})}const uo=1e3*60*60,mo=cn(or,{maxAge:uo}),ar=cn(nr(mo),{maxAge:uo});function rr({forceTranslate:t,sourceLanguage:n,onTranslate:o,text:a="",mini:r}){const s=so(!0),[c,l]=K("default"),[u,d]=K(null),[m,h]=K(null),[b,w]=K(null),_=ne(),T=n?Kt(n):null,L=Kt(s),R=ne("auto");o||(o=r?ar:mo);const E=async()=>{var k,f;l("loading");try{const{content:g,detectedSourceLanguage:M,provider:x,error:O,...A}=await o(a,R.current,s);if(g){if(M){const I=Kt(M);w(I)}if(x==="lingva"){const I=(f=(k=A==null?void 0:A.info)==null?void 0:k.pronunciation)==null?void 0:f.query;I&&d(I)}h(g),l("default"),!r&&g.trim()!==a.trim()&&(_.current.open=!0,_.current.scrollIntoView({behavior:"smooth",block:"nearest"}))}else l("error")}catch{l("error")}};return Ee(()=>{t&&E()},[t]),r?m&&m.trim()!==a.trim()&&b!==L?e(lo,{children:e("div",{class:"status-translation-block-mini",children:[e(v,{icon:"translate",alt:`Auto-translated from ${T}`}),e("output",{lang:s,dir:"auto",title:u||"",children:m})]})}):null:e("div",{class:"status-translation-block",onClick:k=>{k.preventDefault()},children:e("details",{ref:_,children:[e("summary",{children:e("button",{type:"button",onClick:async k=>{k.preventDefault(),k.stopPropagation(),_.current.open=!_.current.open,c!=="loading"&&(m||E())},children:[e(v,{icon:"translate"})," ",e("span",{children:c==="loading"?"Translating…":n&&T&&!b?`Translate from ${T}`:"Translate"})]})}),e("div",{class:"translated-block",children:[e("div",{class:"translation-info insignificant",children:[e("select",{class:"translated-source-select",disabled:c==="loading",onChange:k=>{R.current=k.target.value,E()},children:er.map(k=>e("option",{value:k.code,children:k.code==="auto"?`Auto (${b??"…"})`:k.name}))})," ",e("span",{children:["→ ",L]}),e(Qn,{abrupt:!0,hidden:c!=="loading"})]}),c==="error"?e("p",{class:"ui-state",children:"Failed to translate"}):!!m&&e(P,{children:[e("output",{class:"translated-content",lang:s,dir:"auto",children:m}),!!u&&e("output",{class:"translated-pronunciation-content",tabIndex:-1,onClick:k=>{k.target.classList.toggle("expand")},children:u})]})]})]})})}const ir=ut!=null&&ut.length?rr:()=>null;function Kn(t,n){const o=ta(t,n);return{set:(a,r)=>na(a,r,o),get:a=>oa(a,o),getMany:a=>aa(a,o),del:a=>ra(a,o),delMany:a=>ia(a,o),clear:()=>sa(o),keys:()=>ca(o)}}const Ur={drafts:Kn("drafts-db","drafts-store"),catchup:Kn("catchup-db","catchup-store")};function sr({poll:t,lang:n,readOnly:o,refresh:a=()=>{},votePoll:r=()=>{}}){const[s,c]=K("default"),{expired:l,expiresAt:u,id:d,multiple:m,options:h,ownVotes:b,voted:w,votersCount:_,votesCount:T,emojis:L}=t,R=!!u&&new Date(u),E=_||T;let k=0;E<=1e3?k=0:E<=1e4?k=1:E<=1e5&&(k=2);const[f,g]=K(!1),M=h.every(x=>x.votesCount!==null);return e("div",{lang:n,dir:"auto",class:`poll ${o?"read-only":""} ${s==="loading"?"loading":""}`,children:[f&&M||w||l?e(P,{children:[e("div",{class:"poll-options",children:h.map((x,O)=>{const{title:A,votesCount:I}=x,H=E?(I/E*100).toFixed(k):0,N=I>0&&I===Math.max(...h.map(C=>C.votesCount));return e("div",{class:`poll-option poll-result ${N?"poll-option-leading":""}`,style:{"--percentage":`${H}%`},children:[e("div",{class:"poll-option-title",children:[e("span",{children:e(Ge,{text:A,emojis:L})}),w&&b.includes(O)&&e(P,{children:[" ",e(v,{icon:"check-circle"})]})]}),e("div",{class:"poll-option-votes",title:`${I} vote${I===1?"":"s"}`,children:[H,"%"]})]},`${O}-${A}-${I}`)})}),!l&&!w&&e("button",{class:"poll-vote-button plain2",disabled:s==="loading",onClick:x=>{x.preventDefault(),g(!1)},children:[e(v,{icon:"arrow-left",size:"s"})," Hide results"]})]}):e("form",{onSubmit:async x=>{x.preventDefault();const O=x.target,A=new FormData(O),I=[];A.forEach((H,N)=>{N==="poll"&&I.push(H)}),I.length&&(c("loading"),await r(I),c("default"))},children:[e("div",{class:"poll-options",children:h.map((x,O)=>{const{title:A}=x;return e("div",{class:"poll-option",children:e("label",{class:"poll-label",children:[e("input",{type:m?"checkbox":"radio",name:"poll",value:O,disabled:s==="loading",readOnly:o}),e("span",{class:"poll-option-title",children:e(Ge,{text:A,emojis:L})})]})})})}),!o&&e("button",{class:"poll-vote-button",type:"submit",disabled:s==="loading",children:"Vote"})]}),e("p",{class:"poll-meta",children:[!l&&!o&&e("button",{type:"button",class:"plain small",disabled:s==="loading",style:{marginLeft:-8},onClick:x=>{x.preventDefault(),c("loading"),(async()=>(await a(),c("default")))()},title:"Refresh",children:e(v,{icon:"refresh",alt:"Refresh"})}),!w&&!l&&!o&&M&&e("button",{type:"button",class:"plain small",disabled:s==="loading",onClick:x=>{x.preventDefault(),g(!f)},title:f?"Hide results":"Show results",children:[e(v,{icon:f?"eye-open":"eye-close",alt:f?"Hide results":"Show results"})," "]}),!l&&!o&&" ",e("span",{title:T,children:Ne(T)})," vote",T===1?"":"s",!!_&&_!==T&&e(P,{children:[" ","• ",e("span",{title:_,children:Ne(_)})," ","voter",_===1?"":"s"]})," ","• ",l?"Ended":"Ending"," ",!!R&&e(Ue,{datetime:R})]})," "]})}const ho=la();function cr(t,n){if(!(t!=null&&t.length))return!1;const o=t.filter(s=>{const{filter:c}=s,l=c.context.includes(n);return l?c.expiresAt?new Date(c.expiresAt)>new Date:l:!1});if(!o.length)return!1;if(o.some(s=>s.filter.filterAction==="hide"))return{action:"hide"};if(o.some(s=>s.filter.filterAction==="warn")){const s=o.map(c=>c.filter.title);return{action:"warn",titles:s,titlesStr:s.join(" • ")}}return!1}const dn=De(cr);function lr(t,n,o){var c;const{filtered:a}=t;if(!(a!=null&&a.length)||o&&((c=t.account)==null?void 0:c.id)===o)return!0;const s=dn(a,n);return s?s.action!=="hide":!0}function Nr(t,n){if(!(t!=null&&t.length))return[];if(!n)return t;const o=eo();return t.filter(a=>lr(a,n,o))}const Zt=document.createElement("div");function Jt(t){return t?(Zt.innerHTML=t,Zt.querySelectorAll(".invisible").forEach(n=>{n.remove()}),Zt.innerText.length):0}const lt="speechSynthesis"in window;function Wn(t,n){if(lt)try{speechSynthesis.speaking&&speechSynthesis.cancel();const o=new SpeechSynthesisUtterance(t);n&&(o.lang=n),speechSynthesis.speak(o)}catch(o){alert(o)}}function po(t){var c;const{spoilerText:n,content:o,poll:a,mediaAttachments:r}=t;let s="";return n!=null&&n.trim()?s+=n:s+=ln(o),s=s.trim(),(c=a==null?void 0:a.options)!=null&&c.length&&(s+=`

📊:
${a.options.map(l=>`${a.multiple?"▪️":"•"} ${l.title}`).join(`
`)}`),r!=null&&r.length&&(s+=" "+r.map(l=>({image:"🖼️",gifv:"🎞️",video:"📹",audio:"🎵",unknown:""})[l.type]||"").join("")),s}function Rt({className:t="truncated"}={}){const n=ne(),o=da(({height:a})=>{if(n.current){const{scrollHeight:r}=n.current;let s=r>a;if(s){const{height:c,maxHeight:l}=getComputedStyle(n.current),u=parseInt(l||c,10);s=r>u}n.current.classList.toggle(t,s)}},300);return ua({ref:n,box:"border-box",onResize:o}),n}const sn={public:"earth",unlisted:"group",private:"lock",direct:"message"};function Qt(t){if(!t)return;let n=Math.floor(t/3600),o=Math.floor(t%3600/60),a=Math.round(t%60);return n===0?`${o}:${a.toString().padStart(2,"0")}`:`${n}:${o.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}const dr=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),ur="ALT",en=t=>{const{alt:n,lang:o,index:a,...r}=t;return!n||!n.trim()?null:e("button",{type:"button",class:"alt-badge clickable",...r,onClick:s=>{s.stopPropagation(),s.preventDefault(),S.showMediaAlt={alt:n,lang:o}},title:"Media description",children:[ur,!!a&&e("sup",{children:a})]})},mr=140,hr=280,fo=De(t=>t!=null&&t.length?t.length>mr||/[\n\r].*[\n\r]/.test(t.trim()):!1);function go({class:t="",media:n,to:o,lang:a,showOriginal:r,autoAnimate:s,showCaption:c,allowLongerCaption:l,altIndex:u,onClick:d=()=>{}}){let{blurhash:m,description:h,meta:b,previewRemoteUrl:w,previewUrl:_,remoteUrl:T,url:L,type:R}=n;/no\-preview\./i.test(_)&&(_=null);const{original:E={},small:k,focus:f}=b||{},g=r?E==null?void 0:E.width:(k==null?void 0:k.width)||(E==null?void 0:E.width),M=r?E==null?void 0:E.height:(k==null?void 0:k.height)||(E==null?void 0:E.height),x=r?L:_||L,O=r?T:w||T,A=g&&M,I=A?g>M?"landscape":"portrait":null,H=m?Xn(m):null,N=ne();let C;if(f){const z=(f.x+1)/2*100,G=(1-f.y)/2*100;C=`${z.toFixed(0)}% ${G.toFixed(0)}%`}const X=ne(),se=Dt(({x:z,y:G,scale:D})=>{const{current:oe}=X;if(oe){const ge=ma({x:z,y:G,scale:D});D===1?oe.style.removeProperty("transform"):oe.style.setProperty("transform",ge),oe.closest(".media-zoom").style.touchAction=D<=1.01?"pan-x":""}},[]),[ve,Z]=K(!1),Te={enabled:ve,draggableUnZoomed:!1,inertiaFriction:.9,tapZoomFactor:2,doubleTapToggleZoom:!0,containerProps:{className:"media-zoom",style:{overflow:"visible"}},onUpdate:se},j=_e(()=>o?z=>e(We,{to:o,...z}):"div",[o]),J=O?pr(O):null,$=R==="unknown"&&J&&/\.(mp4|m4r|m4v|mov|webm)$/i.test(J.pathname),ce=R==="unknown"&&J&&/\.(mp3|ogg|wav|m4a|m4p|m4b)$/i.test(J.pathname),W=R==="image"||R==="unknown"&&_&&!$&&!ce,re=ne(),[ue,we]=K(!1);On(()=>{if(!W||!r||!re.current)return;const{offsetWidth:z,offsetHeight:G}=re.current,D=g<z&&M<G;D&&we(D)},[g,M]);const he=window.innerHeight*(I==="portrait"?.45:.33),pe=I==="portrait"?0:160,ke={"--average-color":H&&`rgb(${H.join(",")})`},fe=g&&M?{"--width":`${g}px`,"--height":`${M}px`,"--aspectWidth":`${g/M*Math.max(pe,he)}px`,aspectRatio:`${g} / ${M}`,...ke}:{...ke},te=fo(h);let U=!!c&&!r&&!!h&&!te;l&&!U&&(h==null?void 0:h.length)<=hr&&(U=!0);const B=U?z=>{const{children:G,...D}=z;return e("figure",{...D,children:[G,e("figcaption",{class:"media-caption",lang:a,dir:"auto",onClick:oe=>{oe.preventDefault(),oe.stopPropagation(),S.showMediaAlt={alt:h,lang:a}},children:h})]})}:P;if(W)return Te.containerProps.style.display="inherit",On(()=>{dr&&r&&(async()=>{try{await fetch(x,{mode:"no-cors"}),X.current.src=x}catch{}})()},[x]),e(B,{children:e(j,{ref:re,class:`media media-image ${t}`,onClick:d,"data-orientation":I,"data-has-alt":!U,style:r?{backgroundImage:`url(${_})`,backgroundSize:ue?`${g}px ${M}px`:void 0,...ke}:fe,children:r?e(Vn,{...Te,children:e("img",{ref:X,src:x,alt:h,width:g,height:M,"data-orientation":I,loading:"eager",decoding:"sync",onLoad:z=>{z.target.closest(".media-image").style.backgroundImage="",z.target.closest(".media-zoom").style.display="",Z(!0)},onError:z=>{const{src:G}=z.target;G===x&&O&&x!==O&&(z.target.src=O)}})}):e(P,{children:[e("img",{src:x,alt:U?"":h,width:g,height:M,"data-orientation":I,loading:"lazy",style:{objectPosition:C||"center","--anim-duration":`${Math.min(Math.max(Math.max(g,M)/100,5),120)}s`},onLoad:z=>{if(z.target.dataset.loaded=!0,!A){const G=z.target.closest(".media");if(G){const{naturalWidth:D,naturalHeight:oe}=z.target;G.dataset.orientation=D>oe?"landscape":"portrait",G.style.setProperty("--width",`${D}px`),G.style.setProperty("--height",`${oe}px`),G.style.aspectRatio=`${D}/${oe}`}}},onError:z=>{const{src:G}=z.target;G===x&&x!==O&&(z.target.src=O)}}),!U&&e(en,{alt:h,lang:a,index:u})]})})});if(R==="gifv"||R==="video"||$){const z=E.duration>0,G=E.duration<31,D=R==="gifv"&&G,oe=E.duration<61,ge=Qt(E.duration),ie=!r&&!s&&D,le=!r&&s&&D,Le=E.duration>5,q=`
    <video
      src="${L}"
      poster="${_}"
      width="${g}"
      height="${M}"
      data-orientation="${I}"
      preload="auto"
      autoplay
      ${D?"muted":""}
      ${D?"":"controls"}
      playsinline
      loop="${oe}"
      ${D?'ondblclick="this.paused ? this.play() : this.pause()"':""}
      ${D&&Le?"ontimeupdate=\"this.closest('.media-gif') && this.closest('.media-gif').style.setProperty('--progress', `${~~((this.currentTime / this.duration) * 100)}%`)\"":""}
    ></video>
  `;return e(B,{children:e(j,{class:`media ${t} media-${D?"gif":"video"} ${le?"media-contain":""} ${ie?"media-hover-animate":""}`,"data-orientation":I,"data-formatted-duration":r?void 0:ge,"data-label":D&&!r&&!le?"GIF":"","data-has-alt":!U,style:!r&&fe,onClick:Q=>{if(ie)try{N.current.pause()}catch{}d(Q)},onMouseEnter:()=>{if(ie)try{N.current.play()}catch{}},onMouseLeave:()=>{if(ie)try{N.current.pause()}catch{}},onFocus:()=>{if(ie)try{N.current.play()}catch{}},onBlur:()=>{if(ie)try{N.current.pause()}catch{}},children:[r||le?D&&r?e(Vn,{...Te,enabled:!0,children:e("div",{ref:X,dangerouslySetInnerHTML:{__html:q}})}):e("div",{class:"video-container",dangerouslySetInnerHTML:{__html:q}}):D?e("video",{ref:N,src:L,poster:_,width:g,height:M,"data-orientation":I,preload:"auto",playsinline:!0,loop:!0,muted:!0,onTimeUpdate:Le?Q=>{const{target:de}=Q,ae=de==null?void 0:de.closest(".media-gif");if(ae){const be=de.currentTime/de.duration*100;ae.style.setProperty("--progress",`${be}%`)}}:void 0}):e(P,{children:[_?e("img",{src:_,alt:U?"":h,width:g,height:M,"data-orientation":I,loading:"lazy",decoding:"async",onLoad:Q=>{if(!A){const de=Q.target.closest(".media");if(de){const{naturalHeight:ae,naturalWidth:be}=Q.target;de.dataset.orientation=be>ae?"landscape":"portrait",de.style.setProperty("--width",`${be}px`),de.style.setProperty("--height",`${ae}px`),de.style.aspectRatio=`${be}/${ae}`}}}}):e("video",{src:L+"#t=0.1",width:g,height:M,"data-orientation":I,preload:"metadata",muted:!0,disablePictureInPicture:!0,onLoadedMetadata:Q=>{if(!z){const{duration:de}=Q.target;if(de){const ae=Qt(de),be=Q.target.closest(".media-video");be&&(be.dataset.formattedDuration=ae)}}}}),e("div",{class:"media-play",children:e(v,{icon:"play",size:"xl"})})]}),!r&&!U&&e(en,{alt:h,lang:a,index:u})]})})}else if(R==="audio"||ce){const z=Qt(E.duration);return e(B,{children:e(j,{class:`media media-audio ${t}`,"data-formatted-duration":r?void 0:z,"data-has-alt":!U,onClick:d,style:!r&&fe,children:[r?e("audio",{src:T||L,preload:"none",controls:!0,autoplay:!0}):_?e("img",{src:_,alt:U?"":h,width:g,height:M,"data-orientation":I,loading:"lazy",onError:G=>{var D,oe;try{(oe=(D=G.target)==null?void 0:D.remove)==null||oe.call(D)}catch{}}}):null,!r&&e(P,{children:[e("div",{class:"media-play",children:e(v,{icon:"play",size:"xl"})}),!U&&e(en,{alt:h,lang:a,index:u})]})]})})}}function pr(t){try{return new URL(t,location.origin)}catch{return null}}const fr=280,gr=140;function _r(t,n){return n.v1.accounts.$select(t).fetch()}const vr=cn(_r),dt={public:"Public",unlisted:"Unlisted",private:"Followers only",direct:"Private mention"},br=window.ontouchstart!==void 0&&/iPad|iPhone|iPod/.test(navigator.userAgent),yr=new Intl.RelativeTimeFormat,Gn=80;function Er(t){var n;return(n=t==null?void 0:t.options)!=null&&n.length?`📊:
${t.options.map(o=>`- ${o.title}${o.votesCount>=0?` (${o.votesCount})`:""}`).join(`
`)}`:""}function tn(t){const{spoilerText:n,content:o,poll:a}=t;return(n?`${n}

`:"")+ln(o)+Er(a)}const Yn=ht(({post:t,instance:n,previewMode:o})=>{const{content:a,emojis:r,language:s,mentions:c,url:l}=t;return e("div",{lang:s,dir:"auto",class:"inner-content",onClick:Wa({mentions:c,instance:n,previewMode:o,statusURL:l}),dangerouslySetInnerHTML:{__html:co(a,{emojis:r,postEnhanceDOM:u=>{u.querySelectorAll('a.u-url[target="_blank"]').forEach(d=>{/http/i.test(d.innerText.trim())||d.removeAttribute("target")})}})}})},(t,n)=>{const{post:o}=t,{post:a}=n;return o.content===a.content}),Tr={s:"small",m:"medium",l:"large"};function Ye({statusID:t,status:n,instance:o,size:a="m",contentTextWeight:r,readOnly:s,enableCommentHint:c,withinContext:l,skeleton:u,enableTranslate:d,forceTranslate:m,previewMode:h,onMediaClick:b,quoted:w,onStatusLinkClick:_=()=>{},showFollowedTags:T,allowContextMenu:L,showActionsBar:R,showReplyParent:E,mediaFirst:k}){var xn,Cn,Mn;if(u)return e("div",{class:`status skeleton ${k?"status-media-first small":""}`,children:[!k&&e(Se,{size:"xxl"}),e("div",{class:"container",children:[e("div",{class:"meta",children:[(a==="s"||k)&&e(Se,{size:"m"})," ███ ████████"]}),e("div",{class:"content-container",children:[k&&e("div",{class:"media-first-container"}),e("div",{class:`content ${k?"media-first-content":""}`,children:e("p",{children:"████ ████████"})})]})]})]});const{masto:f,instance:g,authenticated:M}=Un({instance:o}),{instance:x}=Un(),O=g===x;let A=Ie(t||(n==null?void 0:n.id),g);const I=pt(S);if(n||(n=I.statuses[A]||I.statuses[t],A=Ie(n==null?void 0:n.id,g)),!n)return null;const{account:{acct:H,avatar:N,avatarStatic:C,id:X,url:se,displayName:ve,username:Z,emojis:Te,bot:j,group:J},id:$,repliesCount:ce,reblogged:W,reblogsCount:re,favourited:ue,favouritesCount:we,bookmarked:he,poll:pe,muted:ke,sensitive:fe,spoilerText:te,visibility:U,language:B,editedAt:z,filtered:G,card:D,createdAt:oe,inReplyToId:ge,inReplyToAccountId:ie,content:le,mentions:Le,mediaAttachments:q,reblog:Q,uri:de,url:ae,emojis:be,tags:Dr,_deleted:He,_pinned:ze,emojiReactions:ft}=n,Ct=!!(q!=null&&q.length);k&&Ct&&(a="s");const Xe=_e(()=>eo(),[]),xe=_e(()=>Xe&&Xe===X,[X,Xe]),vo=Zn(ho),Ze=!xe&&!s&&!h&&dn(G,vo);if((Ze==null?void 0:Ze.action)==="hide")return null;const Je=i=>{i.shiftKey};if(a!=="l"&&Ze)return e(Sr,{status:n,filterInfo:Ze,instance:g,containerProps:{onMouseEnter:Je},showFollowedTags:!0,quoted:w});const Ce=new Date(oe),un=new Date(z);let Mt=Le==null?void 0:Le.find(i=>i.id===ie);!Mt&&ie===$&&(Mt={url:se,username:Z,displayName:ve});const[gt,mn]=K(Mt);if(!l&&!gt&&ie){const i=S.accounts[ie];i?mn(i):vr(ie,f).then(y=>{mn(y),S.accounts[y.id]=y}).catch(y=>{})}const hn=ie===Xe||(Le==null?void 0:Le.find(i=>i.id===Xe)),Re=_e(()=>!!(Nn.account.get("preferences")||{})["reading:expand:spoilers"],[]),pn=_e(()=>(Nn.account.get("preferences")||{})["reading:expand:media"]||"default",[]),$e=h||Re||!!I.spoilers[$],Qe=h||pn==="show_all"||!!I.spoilersMedia[$];if(Q)return J?e("div",{"data-state-post-id":A,class:"status-group",onMouseEnter:Je,children:[e("div",{class:"status-pre-meta",children:[e(v,{icon:"group",size:"l",alt:"Group"})," ",e(ct,{account:n.account,instance:g,showAvatar:!0})]}),e(Ye,{status:t?null:Q,statusID:t?Q.id:null,instance:g,size:a,contentTextWeight:r,readOnly:s,mediaFirst:k})]}):e("div",{"data-state-post-id":A,class:"status-reblog",onMouseEnter:Je,children:[e("div",{class:"status-pre-meta",children:[e(v,{icon:"rocket",size:"l"})," ",e(ct,{account:n.account,instance:g,showAvatar:!0})," ",e("span",{children:"boosted"})]}),e(Ye,{status:t?null:Q,statusID:t?Q.id:null,instance:g,size:a,contentTextWeight:r,readOnly:s,enableCommentHint:!0,mediaFirst:k})]});const bo=Dt(({children:i})=>e("div",{"data-state-post-id":A,class:"status-followed-tags",onMouseEnter:Je,children:[e("div",{class:"status-pre-meta",children:[e(v,{icon:"hashtag",size:"l"})," ",I.statusFollowedTags[A].slice(0,3).map(y=>e(We,{to:g?`/${g}/t/${y}`:`/t/${y}`,class:"status-followed-tag-item",children:y},y))]}),i]}),[A,g,I.statusFollowedTags[A]]),yo=T&&((xn=I.statusFollowedTags[A])!=null&&xn.length)?bo:P,Y=a==="l",[Ot,Eo]=K(m),fn=so(!0),To=I.settings.contentTranslationHideLanguages||[],{contentTranslation:Vt,contentTranslationAutoInline:gn}=I.settings;Vt||(d=!1);const _n=_e(()=>{if(!Vt||!gn||s||l&&!Y||h||te||fe||pe||D||q!=null&&q.length)return!1;const i=Jt(le);return i>0&&i<=gr},[Vt,gn,s,l,Y,h,te,fe,pe,D,q,le]),[Ut,_t]=K(!1),[ko,Nt]=K(!1),vn=Rt(),bn=Rt(),Lo=Rt(),Ht="Read more →",Be=ne(null),et="Sorry, your current logged-in instance can't interact with this post from another instance.",yn=Dt(()=>Math.max(Math.round((te.length+Jt(le))/140)||1,1),[te,le]),En=mt(Ce),Tn=z&&mt(un);let tt=M&&U!=="direct"&&U!=="private";U==="private"&&xe&&(tt=!0);const vt=i=>{var y;if(!O||!M)return alert(et);(i!=null&&i.shiftKey||(y=i==null?void 0:i.syntheticEvent)!=null&&y.shiftKey)&&ya({replyToStatus:n})||(S.showCompose={replyToStatus:n})},zt=_e(()=>q.some(i=>{var y,V;return!((V=(y=i.description)==null?void 0:y.trim)!=null&&V.call(y))}),[q]),kn=_e(()=>Math.floor((new Date-Ce)/(1e3*60*60*24*30)),[Ce]),xr=async()=>{if(!O||!M)return alert(et),!1;try{if(!W){let i="Boost this post?";if(zt&&(i+=`

⚠️ Some media have no descriptions.`),!confirm(i))return!1}if(S.statuses[A]={...n,reblogged:!W,reblogsCount:re+(W?-1:1)},W){const i=await f.v1.statuses.$select($).unreblog();return Ae(i,g),!0}else{const i=await f.v1.statuses.$select($).reblog();return Ae(i,g),!0}}catch{return S.statuses[A]=n,!1}},Bt=async()=>{if(!O||!M)return alert(et),!1;try{if(S.statuses[A]={...n,reblogged:!W,reblogsCount:re+(W?-1:1)},W){const i=await f.v1.statuses.$select($).unreblog();Ae(i,g)}else{const i=await f.v1.statuses.$select($).reblog();Ae(i,g)}return!0}catch{return S.statuses[A]=n,!1}},Ln=async()=>{if(!O||!M)return alert(et),!1;try{if(S.statuses[A]={...n,favourited:!ue,favouritesCount:we+(ue?-1:1)},ue){const i=await f.v1.statuses.$select($).unfavourite();Ae(i,g)}else{const i=await f.v1.statuses.$select($).favourite();Ae(i,g)}return!0}catch{return S.statuses[A]=n,!1}},Ft=async()=>{try{const i=await Ln();!Y&&i&&me(ue?`Unliked @${Z||H}'s post`:`Liked @${Z||H}'s post`)}catch{}},wn=async()=>{if(It("@mastodon/post-bookmark")){if(!O||!M)return alert(et),!1;try{if(S.statuses[A]={...n,bookmarked:!he},he){const i=await f.v1.statuses.$select($).unbookmark();Ae(i,g)}else{const i=await f.v1.statuses.$select($).bookmark();Ae(i,g)}return!0}catch{return S.statuses[A]=n,!1}}},$n=async()=>{try{const i=await wn();!Y&&i&&me(he?`Unbookmarked @${Z||H}'s post`:`Bookmarked @${Z||H}'s post`)}catch{}},bt=!!B&&B!==fn&&!rn([B],[fn])&&!To.find(i=>B===i||rn([B],[i])),An=ne(),Pn=ne();async function wo(i){var F,ye,Fe,jt;i&&(An.current=f.v1.statuses.$select(t).rebloggedBy.list({limit:Gn}),Pn.current=f.v1.statuses.$select(t).favouritedBy.list({limit:Gn}));const[{value:y},{value:V}]=await Promise.allSettled([An.current.next(),Pn.current.next()]);if((F=y.value)!=null&&F.length||(ye=V.value)!=null&&ye.length){const Me=[];return(Fe=y.value)!=null&&Fe.length&&Me.push(...y.value.map(Oe=>(Oe._types=["reblog"],Oe))),(jt=V.value)!=null&&jt.length&&Me.push(...V.value.map(Oe=>(Oe._types=["favourite"],Oe))),{value:Me,done:y.done&&V.done}}return{value:[],done:!0}}const $o=ne(),In=["public","unlisted"].includes(U),Ao=["public","unlisted","private"].includes(U),Sn=e(P,{children:[!Y&&O&&e(P,{children:e("div",{class:"menu-control-group-horizontal status-menu",children:[e(ee,{onClick:vt,children:[e(v,{icon:"comment"}),e("span",{children:ce>0?Ne(ce):"Reply"})]}),e(qt,{subMenu:!0,confirmLabel:e(P,{children:[e(v,{icon:"rocket"}),e("span",{children:W?"Unboost":"Boost"})]}),className:`menu-reblog ${W?"checked":""}`,menuExtras:e(ee,{onClick:()=>{S.showCompose={draftStatus:{status:`
${ae}`}}},children:[e(v,{icon:"quote"}),e("span",{children:"Quote"})]}),menuFooter:zt&&!W?e("div",{class:"footer",children:[e(v,{icon:"alert"}),"Some media have no descriptions."]}):kn>=3&&e("div",{class:"footer",children:[e(v,{icon:"info"}),e("span",{children:["Old post (",e("strong",{children:yr.format(-kn,"month")}),")"]})]}),disabled:!tt,onClick:async()=>{try{const i=await Bt();!Y&&i&&me(W?`Unboosted @${Z||H}'s post`:`Boosted @${Z||H}'s post`)}catch{}},children:[e(v,{icon:"rocket"}),e("span",{children:re>0?Ne(re):W?"Unboost":"Boost…"})]}),e(ee,{onClick:Ft,className:`menu-favourite ${ue?"checked":""}`,children:[e(v,{icon:"heart"}),e("span",{children:we>0?Ne(we):ue?"Unlike":"Like"})]}),It("@mastodon/post-bookmark")&&e(ee,{onClick:$n,className:`menu-bookmark ${he?"checked":""}`,children:[e(v,{icon:"bookmark"}),e("span",{children:he?"Unbookmark":"Bookmark"})]})]})}),!Y&&O&&(Y||R)&&e(at,{}),(Y||R)&&e(P,{children:e(ee,{onClick:()=>{S.showGenericAccounts={heading:"Boosted/Liked by…",fetchAccounts:wo,instance:g,showReactions:!0,postID:A}},children:[e(v,{icon:"react"}),e("span",{children:["Boosted/Liked by",e("span",{class:"more-insignificant",children:"…"})]})]})}),!k&&e(P,{children:[(d||!B||bt)&&e(at,{}),d?e("div",{class:lt?"menu-horizontal":"",children:[e(ee,{disabled:Ot,onClick:()=>{Eo(!0)},children:[e(v,{icon:"translate"}),e("span",{children:"Translate"})]}),lt&&e(ee,{onClick:()=>{const i=tn(n);i&&Wn(i,B)},children:[e(v,{icon:"speak"}),e("span",{children:"Speak"})]})]}):(!B||bt)&&e("div",{class:lt?"menu-horizontal":"",children:[e(Fn,{to:`${g?`/${g}`:""}/s/${$}?translate=1`,children:[e(v,{icon:"translate"}),e("span",{children:"Translate"})]}),lt&&e(ee,{onClick:()=>{const i=tn(n);i&&Wn(i,B)},children:[e(v,{icon:"speak"}),e("span",{children:"Speak"})]})]})]}),(!Y&&O||d||!B||bt)&&e(at,{}),!Y&&e(P,{children:e(Fn,{to:g?`/${g}/s/${$}`:`/s/${$}`,onClick:i=>{_(i,n)},children:[e(v,{icon:"arrows-right"}),e("small",{children:["View post by @",Z||H,e("br",{}),e("span",{class:"more-insignificant",children:[dt[U]," • ",En]})]})]})}),!!z&&e(P,{children:e(ee,{onClick:()=>{_t($)},children:[e(v,{icon:"history"}),e("small",{children:["Show Edit History",e("br",{}),e("span",{class:"more-insignificant",children:["Edited: ",Tn]})]})]})}),e(ee,{href:ae,target:"_blank",children:[e(v,{icon:"external"}),e("small",{class:"menu-double-lines",children:Pr(ae)})]}),e("div",{class:"menu-horizontal",children:[e(ee,{onClick:()=>{try{navigator.clipboard.writeText(ae),me("Link copied")}catch{me("Unable to copy link")}},children:[e(v,{icon:"link"}),e("span",{children:"Copy"})]}),In&&(navigator==null?void 0:navigator.share)&&((Cn=navigator==null?void 0:navigator.canShare)==null?void 0:Cn.call(navigator,{url:ae}))&&e(ee,{onClick:()=>{try{navigator.share({url:ae})}catch{alert("Sharing doesn't seem to work.")}},children:[e(v,{icon:"share"}),e("span",{children:"Share…"})]})]}),In&&Y&&e(ee,{onClick:()=>{Nt(!0)},children:[e(v,{icon:"code"}),e("span",{children:"Embed post"})]}),(xe||hn)&&e(at,{}),(xe||hn)&&e(ee,{onClick:async()=>{try{const i=await f.v1.statuses.$select($)[ke?"unmute":"mute"]();Ae(i,g),me(ke?"Conversation unmuted":"Conversation muted")}catch{me(ke?"Unable to unmute conversation":"Unable to mute conversation")}},children:ke?e(P,{children:[e(v,{icon:"unmute"}),e("span",{children:"Unmute conversation"})]}):e(P,{children:[e(v,{icon:"mute"}),e("span",{children:"Mute conversation"})]})}),xe&&Ao&&e(ee,{onClick:async()=>{try{const i=await f.v1.statuses.$select($)[ze?"unpin":"pin"]();me(ze?"Post unpinned from profile":"Post pinned to profile")}catch{me(ze?"Unable to unpin post":"Unable to pin post")}},children:ze?e(P,{children:[e(v,{icon:"unpin"}),e("span",{children:"Unpin from profile"})]}):e(P,{children:[e(v,{icon:"pin"}),e("span",{children:"Pin to profile"})]})}),xe&&e("div",{class:"menu-horizontal",children:[It("@mastodon/post-edit")&&e(ee,{onClick:()=>{S.showCompose={editStatus:n}},children:[e(v,{icon:"pencil"}),e("span",{children:"Edit"})]}),Y&&e(qt,{subMenu:!0,confirmLabel:e(P,{children:[e(v,{icon:"trash"}),e("span",{children:"Delete this post?"})]}),menuItemClassName:"danger",onClick:()=>{(async()=>{try{await f.v1.statuses.$select($).remove();const i=to($,g);i._deleted=!0,me("Deleted")}catch{me("Unable to delete")}})()},children:[e(v,{icon:"trash"}),e("span",{children:"Delete…"})]})]}),!xe&&Y&&e(P,{children:[e(at,{}),e(ee,{className:"danger",onClick:()=>{S.showReportModal={account:n.account,post:n}},children:[e(v,{icon:"flag"}),e("span",{children:"Report post…"})]})]})]}),Rn=ne(),[yt,nt]=K(!1),[Et,Tt]=K({}),kt=L||!Y&&!h&&!He&&!w,Po=Jn(br&&kt?i=>{var ye;if(i.pointerType==="mouse")return;const{clientX:y,clientY:V}=((ye=i.touches)==null?void 0:ye[0])||i,F=i.target.closest("a");F&&Be.current.contains(F)&&!F.getAttribute("href").startsWith("#")||(i.preventDefault(),Tt({anchorPoint:{x:y,y:V},direction:"right"}),nt(!0))}:null,{threshold:600,captureEvent:!0,detect:"touch",cancelOnMovement:2}),Lt=!s&&!h&&!w,Io=Ke("r, shift+r",vt,{enabled:Lt}),So=Ke("f, l",Ft,{enabled:Lt}),Ro=Ke("d",$n,{enabled:Lt}),Do=Ke("shift+b",()=>{(async()=>{try{const i=await Bt();!Y&&i&&me(W?`Unboosted @${Z||H}'s post`:`Boosted @${Z||H}'s post`)}catch{}})()},{enabled:Lt&&tt}),xo=Ke("x",i=>{const y=document.activeElement.closest(".status-link, .status-focus");if(y){const V=y.querySelector(".spoiler-button:not(.spoiling)");if(V)i.stopPropagation(),V.click();else{const F=y.querySelector(".spoiler-media-button:not(.spoiling)");F&&(i.stopPropagation(),F.click())}}}),wt=q.slice(0,Y?void 0:4),$t=q.length>1&&wt.some(i=>!!i.description&&!fo(i.description)),Co=_e(()=>{if(!$t)return null;const i=[];return wt.forEach((y,V)=>{if(!y.description)return;const F=i.findIndex(ye=>ye.media.description===y.description);F===-1?i.push({media:y,indices:[V]}):i[F].indices.push(V)}),i.map(({media:y,indices:V})=>e("div",{"data-caption-index":V.map(F=>F+1).join(" "),onClick:F=>{F.preventDefault(),F.stopPropagation(),S.showMediaAlt={alt:y.description,lang:B}},title:y.description,children:[e("sup",{children:V.map(F=>F+1).join(" ")})," ",y.description]},y.id))},[$t,wt,B]),ot=_e(()=>{var i;return!!ge&&ie===((i=n.account)==null?void 0:i.id)||!!I.statusThreadNumber[A]},[ge,ie,(Mn=n.account)==null?void 0:Mn.id,I.statusThreadNumber[A]]),Mo=_e(()=>c&&!ot&&!l&&!ge&&U==="public"&&ce>0,[c,ot,l,ge,ce,U]),Dn=_e(()=>{if(D||pe||fe||te||q!=null&&q.length||ot||l||ge||ce<=0||!/[??？︖❓❔⁇⁈⁉¿‽؟]/.test(le))return!1;const V=Jt(le);if(V>0&&V<=fr)return!0},[D,pe,fe,te,q,Q,ot,l,ge,ce,le]);return e(yo,{children:[E&&!!(ge&&ie)&&e(Ir,{sKey:A}),e("article",{"data-state-post-id":A,ref:i=>{var V;Be.current=i;const y=((V=i==null?void 0:i.closest)==null?void 0:V.call(i,".timeline-item, .timeline-item-alt, .status-link, .status-focus"))||i;Io.current=y,So.current=y,Ro.current=y,Do.current=y,xo.current=y},tabindex:"-1",class:`status ${!l&&ge&&gt?"status-reply-to":""} visibility-${U} ${ze?"status-pinned":""} ${Tr[a]} ${He?"status-deleted":""} ${w?"status-card":""} ${yt?"status-menu-open":""} ${k&&Ct?"status-media-first":""}`,onMouseEnter:Je,onContextMenu:i=>{var F,ye;if(!kt||i.metaKey)return;const y=i.target.closest("a");if(y&&Be.current.contains(y)&&!y.getAttribute("href").startsWith("#"))return;const V=(F=window.getSelection)==null?void 0:F.call(window);if(V.toString().length>0){const{anchorNode:Fe}=V;if((ye=Be.current)!=null&&ye.contains(Fe))return}i.preventDefault(),Tt({anchorPoint:{x:i.clientX,y:i.clientY},direction:"right"}),nt(!0)},...kt?Po():{},children:[kt&&e(ha,{ref:Rn,state:yt?"open":void 0,...Et,onClose:i=>{var y,V,F;nt(!1),(i==null?void 0:i.reason)==="click"&&((F=(V=(y=Be.current)==null?void 0:y.closest("[tabindex]"))==null?void 0:V.focus)==null||F.call(V))},portal:{target:document.body},containerProps:{style:{zIndex:1001},onClick:()=>{var i,y;(y=(i=Rn.current)==null?void 0:i.closeMenu)==null||y.call(i)}},overflow:"auto",boundingBoxPadding:ro(),unmountOnClose:!0,children:Sn}),R&&a!=="l"&&!h&&!s&&!He&&!w&&e("div",{class:`status-actions ${yt==="actions-bar"?"open":""}`,ref:$o,children:[e(qe,{size:"s",title:"Reply",alt:"Reply",class:"reply-button",icon:"comment",iconSize:"m",onClick:vt}),e(qe,{size:"s",checked:ue,title:["Like","Unlike"],alt:["Like","Liked"],class:"favourite-button",icon:"heart",iconSize:"m",count:we,onClick:Ft}),e("button",{type:"button",title:"More",class:"plain more-button",onClick:i=>{i.preventDefault(),i.stopPropagation(),Tt({anchorRef:{current:i.currentTarget},align:"start",direction:"left",gap:0,shift:-8}),nt("actions-bar")},children:e(v,{icon:"more2",size:"m",alt:"More"})})]}),a!=="l"&&e("div",{class:"status-badge",children:[W&&e(v,{class:"reblog",icon:"rocket",size:"s"}),ue&&e(v,{class:"favourite",icon:"heart",size:"s"}),he&&e(v,{class:"bookmark",icon:"bookmark",size:"s"}),ze&&e(v,{class:"pin",icon:"pin",size:"s"})]}),a!=="s"&&e("a",{href:se,tabindex:"-1",title:`@${H}`,onClick:i=>{i.preventDefault(),i.stopPropagation(),S.showAccount={account:n.account,instance:g}},children:e(Se,{url:C||N,size:"xxl",squircle:j})}),e("div",{class:"container",children:[e("div",{class:"meta",children:[e("span",{class:"meta-name",children:e(ct,{account:n.account,instance:g,showAvatar:a==="s",showAcct:Y})})," ",a!=="l"&&(He?e("span",{class:"status-deleted-tag",children:"Deleted"}):ae&&!h&&!s&&!w?e(We,{to:g?`/${g}/s/${$}`:`/s/${$}`,onClick:i=>{i.metaKey||i.ctrlKey||i.shiftKey||i.altKey||i.which===2||(i.preventDefault(),i.stopPropagation(),_==null||_(i,n),Tt({anchorRef:{current:i.currentTarget},align:"end",direction:"bottom",gap:4}),nt(!0))},class:`time ${yt&&(Et!=null&&Et.anchorRef)?"is-open":""}`,children:[Mo&&!Dn?e(v,{icon:"comment2",size:"s",alt:`${ce} ${ce===1?"reply":"replies"}`}):U!=="public"&&U!=="direct"&&e(v,{icon:sn[U],alt:dt[U],size:"s"})," ",e(Ue,{datetime:Ce,format:"micro"}),!h&&!s&&e(v,{icon:"more2",class:"more"})]}):e("span",{class:"time",children:[U!=="public"&&U!=="direct"&&e(P,{children:[e(v,{icon:sn[U],alt:dt[U],size:"s"})," "]}),e(Ue,{datetime:Ce,format:"micro"})]}))]}),U==="direct"&&e(P,{children:[e("div",{class:"status-direct-badge",children:"Private mention"})," "]}),!l&&e(P,{children:ot?e("div",{class:"status-thread-badge",children:[e(v,{icon:"thread",size:"s"}),"Thread",I.statusThreadNumber[A]?` ${I.statusThreadNumber[A]}/X`:""]}):!!ge&&!!gt&&(!!te||!Le.find(i=>i.id===ie))&&e("div",{class:"status-reply-badge",children:[e(v,{icon:"reply"})," ",e(ct,{account:gt,instance:g,short:!0})]})}),e("div",{class:`content-container ${te||fe?"has-spoiler":""} ${$e?"show-spoiler":""} ${Qe?"show-media":""}`,"data-content-text-weight":r?yn():null,style:(Y||r)&&{"--content-text-weight":yn()},children:k&&Ct?e(P,{children:[(!!te||!!fe)&&!Re&&e(P,{children:[!!te&&e("span",{class:"spoiler-content media-first-spoiler-content",lang:B,dir:"auto",ref:vn,"data-read-more":Ht,children:[e(Ge,{text:te,emojis:be})," "]}),e("button",{class:`light spoiler-button media-first-spoiler-button ${$e?"spoiling":""}`,type:"button",onClick:i=>{i.preventDefault(),i.stopPropagation(),$e?(delete S.spoilers[$],Re||delete S.spoilersMedia[$]):(S.spoilers[$]=!0,Re||(S.spoilersMedia[$]=!0))},children:[e(v,{icon:$e?"eye-open":"eye-close"})," ",$e?"Show less":"Show content"]})]}),e(Lr,{mediaAttachments:q,language:B,postID:$,instance:g}),!!le&&e("div",{class:"media-first-content content",ref:bn,children:e(Yn,{post:n,instance:g,previewMode:h})})]}):e(P,{children:[!!te&&e(P,{children:[e("div",{class:"content spoiler-content",lang:B,dir:"auto",ref:vn,"data-read-more":Ht,children:e("p",{children:e(Ge,{text:te,emojis:be})})}),Re||h?e("div",{class:"spoiler-divider",children:[e(v,{icon:"eye-open"})," Content warning"]}):e("button",{class:`light spoiler-button ${$e?"spoiling":""}`,type:"button",onClick:i=>{i.preventDefault(),i.stopPropagation(),$e?(delete S.spoilers[$],Re||delete S.spoilersMedia[$]):(S.spoilers[$]=!0,Re||(S.spoilersMedia[$]=!0))},children:[e(v,{icon:$e?"eye-open":"eye-close"})," ",$e?"Show less":"Show content"]})]}),!!le&&e("div",{class:"content",ref:bn,"data-read-more":Ht,children:[e(Yn,{post:n,instance:g,previewMode:h}),e(Rr,{id:$,instance:g,level:w})]}),!!pe&&e(sr,{lang:B,poll:pe,readOnly:s||!O||!M,onUpdate:i=>{S.statuses[A].poll=i},refresh:()=>f.v1.polls.$select(pe.id).fetch().then(i=>{S.statuses[A].poll=i}).catch(i=>{}),votePoll:i=>f.v1.polls.$select(pe.id).votes.create({choices:i}).then(y=>{S.statuses[A].poll=y}).catch(y=>{})}),((d||_n)&&!!le.trim()&&!!ln(xt(le,be))&&bt||Ot)&&e(ir,{forceTranslate:Ot||_n,mini:!Y&&!l,sourceLanguage:B,text:tn(n)}),!h&&fe&&!!q.length&&pn!=="show_all"&&e("button",{class:`plain spoiler-media-button ${Qe?"spoiling":""}`,type:"button",hidden:!Re&&!!te,onClick:i=>{i.preventDefault(),i.stopPropagation(),Qe?delete S.spoilersMedia[$]:S.spoilersMedia[$]=!0},children:[e(v,{icon:Qe?"eye-open":"eye-close"})," ",Qe?"Show less":"Show media"]}),!!q.length&&e(kr,{lang:B,enabled:$t,captionChildren:Co,children:e("div",{ref:Lo,class:`media-container media-eq${q.length} ${q.length>2?"media-gt2":""} ${q.length>4?"media-gt4":""}`,children:wt.map((i,y)=>e(go,{media:i,autoAnimate:Y,showCaption:q.length===1,allowLongerCaption:!le&&q.length===1,lang:B,altIndex:$t&&!!i.description&&y+1,to:`/${g}/s/${$}?${l?"media":"media-only"}=${y+1}`,onClick:b?V=>{b(V,y,i,n)}:void 0},i.id))})}),!!D&&/^https/i.test(D==null?void 0:D.url)&&!fe&&!te&&!pe&&!q.length&&!I.statusQuotes[A]&&e(wr,{card:D,selfReferential:(D==null?void 0:D.url)===n.url||(D==null?void 0:D.url)===n.uri,instance:x})]})}),!Y&&Dn&&e("div",{class:"content-comment-hint insignificant",children:[e(v,{icon:"comment2",alt:"Replies"})," ",ce]}),Y&&e(P,{children:[e("div",{class:"extra-meta",children:He?e("span",{class:"status-deleted-tag",children:"Deleted"}):e(P,{children:[e("span",{children:dt[U]})," •"," ",e("a",{href:ae,target:"_blank",rel:"noopener noreferrer",children:e("time",{class:"created",datetime:Ce.toISOString(),title:Ce.toLocaleString(),children:En})}),z&&e(P,{children:[" ","• ",e(v,{icon:"pencil",alt:"Edited"})," ",e("time",{tabIndex:"0",class:"edited",datetime:un.toISOString(),onClick:()=>{_t($)},children:Tn})]})]})}),!!(ft!=null&&ft.length)&&e("div",{class:"emoji-reactions",children:ft.map(i=>{const{name:y,count:V,me:F,url:ye,staticUrl:Fe}=i;if(ye)return e("span",{class:`emoji-reaction tag ${F?"":"insignificant"}`,children:[e(an,{alt:y,url:ye,staticUrl:Fe})," ",V]});if(/^:.+?:$/.test(y)){const Me=be.find(Oe=>Oe.shortcode===y.replace(/^:/,"").replace(/:$/,""));if(Me)return e("span",{class:`emoji-reaction tag ${F?"":"insignificant"}`,children:[e(an,{alt:y,url:Me.url,staticUrl:Me.staticUrl})," ",V]})}return e("span",{class:`emoji-reaction tag ${F?"":"insignificant"}`,children:[y," ",V]})})}),e("div",{class:`actions ${He?"disabled":""}`,children:[e("div",{class:"action has-count",children:e(qe,{title:"Reply",alt:"Comments",class:"reply-button",icon:"comment",count:ce,onClick:vt})}),e(qt,{disabled:!tt,onClick:Bt,confirmLabel:e(P,{children:[e(v,{icon:"rocket"}),e("span",{children:W?"Unboost":"Boost"})]}),menuExtras:e(ee,{onClick:()=>{S.showCompose={draftStatus:{status:`
${ae}`}}},children:[e(v,{icon:"quote"}),e("span",{children:"Quote"})]}),menuFooter:zt&&!W&&e("div",{class:"footer",children:[e(v,{icon:"alert"}),"Some media have no descriptions."]}),children:e("div",{class:"action has-count",children:e(qe,{checked:W,title:["Boost","Unboost"],alt:["Boost","Boosted"],class:"reblog-button",icon:"rocket",count:re,disabled:!tt})})}),e("div",{class:"action has-count",children:e(qe,{checked:ue,title:["Like","Unlike"],alt:["Like","Liked"],class:"favourite-button",icon:"heart",count:we,onClick:Ln})}),It("@mastodon/post-bookmark")&&e("div",{class:"action",children:e(qe,{checked:he,title:["Bookmark","Unbookmark"],alt:["Bookmark","Bookmarked"],class:"bookmark-button",icon:"bookmark",onClick:wn})}),e(io,{portal:{target:document.querySelector(".status-deck")||document.body},align:"end",gap:4,overflow:"auto",viewScroll:"close",menuButton:e("div",{class:"action",children:e("button",{type:"button",title:"More",class:"plain more-button",children:e(v,{icon:"more",size:"l",alt:"More"})})}),children:Sn})]})]})]}),!!Ut&&e(on,{onClick:i=>{i.target===i.currentTarget&&_t(!1)},children:e($r,{statusID:Ut,instance:g,fetchStatusHistory:()=>f.v1.statuses.$select(Ut).history.list(),onClose:()=>{var i;_t(!1),(i=Be.current)==null||i.focus()}})}),!!ko&&e(on,{onClick:i=>{i.target===i.currentTarget&&Nt(!1)},children:e(Ar,{post:n,instance:g,onClose:()=>{Nt(!1)}})})]})]})}function kr(t){const{enabled:n,children:o,lang:a,captionChildren:r}=t;return!n||!r?o:e("figure",{class:"media-figure-multiple",children:[o,e("figcaption",{lang:a,dir:"auto",children:r})]})}function Lr(t){const{mediaAttachments:n,language:o,postID:a,instance:r}=t,s=n.length>1,c=ne(),[l,u]=K(0);return Ee(()=>{let d=()=>{const{clientWidth:m,scrollLeft:h}=c.current,b=Math.round(h/m);u(b)};return c.current&&c.current.addEventListener("scroll",d,{passive:!0}),()=>{c.current&&c.current.removeEventListener("scroll",d)}},[]),e(P,{children:[e("div",{class:"media-first-container",children:[e("div",{class:"media-first-carousel",ref:c,children:n.map((d,m)=>e("div",{class:"media-first-item",children:e(go,{media:d,lang:o,to:`/${r}/s/${a}?media=${m+1}`})},d.id))}),s&&e("div",{class:"media-carousel-controls",children:[e("div",{class:"carousel-indexer",children:[l+1,"/",n.length]}),e("label",{class:"media-carousel-button",children:e("button",{type:"button",class:"carousel-button",hidden:l===0,onClick:d=>{d.preventDefault(),d.stopPropagation(),c.current.focus(),c.current.scrollTo({left:c.current.clientWidth*(l-1),behavior:"smooth"})},children:e(v,{icon:"arrow-left"})})}),e("label",{class:"media-carousel-button",children:e("button",{type:"button",class:"carousel-button",hidden:l===n.length-1,onClick:d=>{d.preventDefault(),d.stopPropagation(),c.current.focus(),c.current.scrollTo({left:c.current.clientWidth*(l+1),behavior:"smooth"})},children:e(v,{icon:"arrow-right"})})})]})]}),s&&e("div",{class:"media-carousel-dots",style:{"--dots-count":n.length},children:n.map((d,m)=>e("span",{class:`carousel-dot ${m===l?"active":""}`},d.id))})]})}function wr({card:t,selfReferential:n,instance:o}){var N;const a=pt(S),{blurhash:r,title:s,description:c,html:l,providerName:u,providerUrl:d,authorName:m,authorUrl:h,width:b,height:w,image:_,imageDescription:T,url:L,type:R,embedUrl:E,language:k,publishedAt:f}=t,g=s||u||m,x=b/w>=1.2?"large":"",[O,A]=K(null);if(Ee(()=>{g&&_&&!n&&va(L)&&ba(o,L).then(C=>{if(!C)return;const{id:X,url:se}=C;A("#"+se)})},[g,_,n]),a.unfurledLinks[L])return null;const I=/<iframe/i.test(l),H=Dt(C=>{I&&(C.preventDefault(),S.showEmbedModal={html:l,url:L||E,width:b,height:w})},[I]);if(g&&(_||R==="photo"&&r)){const C=nn.toUnicode(new URL(L).hostname.replace(/^www\./,"").replace(/\/$/,""));let X;const se=_&&r?Xn(r):null;if(!_){const Te=pa(r,44,44),j=window.OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas");j.width=44,j.height=44;const J=j.getContext("2d");J.imageSmoothingEnabled=!1;const $=J.createImageData(44,44);$.data.set(Te),J.putImageData($,0,0),X=j.toDataURL()}return e("a",{href:O||L,target:O?null:"_blank",rel:"nofollow noopener noreferrer",class:`card link ${X?"":x}`,lang:k,dir:"auto",style:{"--average-color":se&&`rgb(${se.join(",")})`},onClick:H,children:[e("div",{class:"card-image",children:e("img",{src:_||X,width:b,height:w,loading:"lazy",alt:T||"",onError:ve=>{try{ve.target.style.display="none"}catch{}}})}),e("div",{class:"meta-container",children:[e("p",{class:"meta domain",children:[e("span",{class:"domain",children:C})," ",!!f&&e(P,{children:"· "}),!!f&&e(P,{children:e(Ue,{datetime:f,format:"micro"})})]}),e("p",{class:"title",dir:"auto",title:s,children:s}),e("p",{class:"meta",dir:"auto",title:c,children:c||!!f&&e(Ue,{datetime:f,format:"micro"})})]})]})}else{if(R==="photo")return e("a",{href:L,target:"_blank",rel:"nofollow noopener noreferrer",class:"card photo",onClick:H,children:e("img",{src:E,width:b,height:w,alt:s||c,loading:"lazy",style:{height:"auto",aspectRatio:`${b}/${w}`}})});if(R==="video"&&/youtube/i.test(u)){const C=(N=L.match(/watch\?v=([^&]+)/))==null?void 0:N[1];if(C)return e("a",{class:"card video",onClick:H,children:e("lite-youtube",{videoid:C,nocookie:!0})})}if(g&&!_){const C=nn.toUnicode(new URL(L).hostname.replace(/^www\./,""));return e("a",{href:O||L,target:O?null:"_blank",rel:"nofollow noopener noreferrer",class:"card link no-image",lang:k,onClick:H,children:e("div",{class:"meta-container",children:[e("p",{class:"meta domain",children:[e("span",{class:"domain",children:[e(v,{icon:"link",size:"s"})," ",e("span",{children:C})]})," ",!!f&&e(P,{children:"· "}),!!f&&e(P,{children:e(Ue,{datetime:f,format:"micro"})})]}),e("p",{class:"title",title:s,children:s}),e("p",{class:"meta",title:c||u||m,children:c||u||m})]})})}}}function $r({statusID:t,instance:n,fetchStatusHistory:o=()=>{},onClose:a}){const[r,s]=K("default"),[c,l]=K([]);return Ee(()=>{s("loading"),(async()=>{try{const u=await o();l(u),s("default")}catch{s("error")}})()},[]),e("div",{id:"edit-history",class:"sheet",children:[!!a&&e("button",{type:"button",class:"sheet-close",onClick:a,children:e(v,{icon:"x"})}),e("header",{children:[e("h2",{children:"Edit History"}),r==="error"&&e("p",{children:"Failed to load history"}),r==="loading"&&e("p",{children:[e(Qn,{abrupt:!0})," Loading…"]})]}),e("main",{tabIndex:"-1",children:c.length>0&&e("ol",{children:c.map(u=>{const{createdAt:d}=u,m=new Date(d);return e("li",{class:"history-item",children:[e("h3",{children:e("time",{children:mt(m,{formatOpts:{weekday:"short",second:"numeric"}})})}),e(Ye,{status:u,instance:n,size:"s",withinContext:!0,readOnly:!0,previewMode:!0})]},d)})})})]})}function _o(t,n,o=0){var H;const{account:{url:a,displayName:r,acct:s,username:c,emojis:l,bot:u,group:d},id:m,poll:h,spoilerText:b,language:w,editedAt:_,createdAt:T,content:L,mediaAttachments:R,url:E,emojis:k}=t,f=Ie(m,n),M=(S.statusQuotes[f]||[]).filter((N,C,X)=>X.findIndex(se=>se.url===N.url)===C),x=M.length&&o<=2?M.map(N=>{const{id:C,instance:X}=N,se=Ie(C,X),ve=S.statuses[se];if(ve)return _o(ve,X,++o)}).join(""):"",O=new Date(T),A=xt(L,k)+`
`+x+`
`+((H=h==null?void 0:h.options)!=null&&H.length?`
        <p>📊:</p>
        <ul>
        ${h.options.map(N=>`
              <li>
                ${N.title}
                ${N.votesCount>=0?` (${N.votesCount})`:""}
              </li>
            `).join("")}
        </ul>`:"")+(R.length>0?`
`+R.map(N=>{const{description:C,meta:X,previewRemoteUrl:se,previewUrl:ve,remoteUrl:Z,url:Te,type:j}=N,{original:J={},small:$}=X||{},ce=($==null?void 0:$.width)||(J==null?void 0:J.width),W=($==null?void 0:$.height)||(J==null?void 0:J.height),re=Z||Te,ue=se||ve,we=ue||re,he=re?new URL(re):null,pe=j==="unknown"&&he&&/\.(mp4|m4r|m4v|mov|webm)$/i.test(he.pathname),ke=j==="unknown"&&he&&/\.(mp3|ogg|wav|m4a|m4p|m4b)$/i.test(he.pathname),fe=j==="image"||j==="unknown"&&ue&&!pe&&!ke,te=j==="gifv"||j==="video"||pe,U=j==="audio"||ke;let B="";return fe?B=`<img src="${we}" width="${ce}" height="${W}" alt="${C}" loading="lazy" />`:te?B=`
                <video src="${re}" width="${ce}" height="${W}" controls preload="auto" poster="${ue}" loading="lazy"></video>
                ${C?`<figcaption>${C}</figcaption>`:""}
              `:U?B=`
                <audio src="${re}" controls preload="auto"></audio>
                ${C?`<figcaption>${C}</figcaption>`:""}
              `:B=`
                <a href="${re}">📄 ${C||re}</a>
              `,`<figure>${B}</figure>`}).join(`
`):""),I=`
    <blockquote lang="${w}" cite="${E}">
      ${b?`
            <details>
              <summary>${b}</summary>
              ${A}
            </details>
          `:A}
      <footer>
        — ${xt(r,l)} (@${s}) <a href="${E}"><time datetime="${O.toISOString()}">${O.toLocaleString()}</time></a>
      </footer>
    </blockquote>
  `;return fa(I)}function Ar({post:t,instance:n,onClose:o}){const{account:{url:a,displayName:r,username:s,emojis:c,bot:l,group:u},id:d,poll:m,spoilerText:h,language:b,editedAt:w,createdAt:_,content:T,mediaAttachments:L,url:R,emojis:E}=t,k=_o(t,n);return e("div",{id:"embed-post",class:"sheet",children:[!!o&&e("button",{type:"button",class:"sheet-close",onClick:o,children:e(v,{icon:"x"})}),e("header",{children:e("h2",{children:"Embed post"})}),e("main",{tabIndex:"-1",children:[e("h3",{children:"HTML Code"}),e("textarea",{class:"embed-code",readonly:!0,onClick:f=>{f.target.select()},children:k}),e("button",{type:"button",onClick:()=>{try{navigator.clipboard.writeText(k),me("HTML code copied")}catch{me("Unable to copy HTML code")}},children:[e(v,{icon:"clipboard"})," ",e("span",{children:"Copy"})]}),!!(L!=null&&L.length)&&e("section",{children:[e("p",{children:"Media attachments:"}),e("ol",{class:"links-list",children:L.map(f=>e("li",{children:e("a",{href:f.remoteUrl||f.url,target:"_blank",download:!0,children:f.remoteUrl||f.url})},f.id))})]}),!!(c!=null&&c.length)&&e("section",{children:[e("p",{children:"Account Emojis:"}),e("ul",{children:c.map(f=>e("li",{children:[e("picture",{children:[e("source",{srcset:f.staticUrl,media:"(prefers-reduced-motion: reduce)"}),e("img",{class:"shortcode-emoji emoji",src:f.url,alt:`:${f.shortcode}:`,width:"16",height:"16",loading:"lazy",decoding:"async"})]})," ",e("code",{children:[":",f.shortcode,":"]})," (",e("a",{href:f.url,target:"_blank",download:!0,children:"url"}),")",f.staticUrl?e(P,{children:[" ","(",e("a",{href:f.staticUrl,target:"_blank",download:!0,children:"static"}),")"]}):null]},f.shortcode))})]}),!!(E!=null&&E.length)&&e("section",{children:[e("p",{children:"Emojis:"}),e("ul",{children:E.map(f=>e("li",{children:[e("picture",{children:[e("source",{srcset:f.staticUrl,media:"(prefers-reduced-motion: reduce)"}),e("img",{class:"shortcode-emoji emoji",src:f.url,alt:`:${f.shortcode}:`,width:"16",height:"16",loading:"lazy",decoding:"async"})]})," ",e("code",{children:[":",f.shortcode,":"]})," (",e("a",{href:f.url,target:"_blank",download:!0,children:"url"}),")",f.staticUrl?e(P,{children:[" ","(",e("a",{href:f.staticUrl,target:"_blank",download:!0,children:"static"}),")"]}):null]},f.shortcode))})]}),e("section",{children:e("small",{children:[e("p",{children:"Notes:"}),e("ul",{children:[e("li",{children:"This is static, unstyled and scriptless. You may need to apply your own styles and edit as needed."}),e("li",{children:"Polls are not interactive, becomes a list with vote counts."}),e("li",{children:"Media attachments can be images, videos, audios or any file types."}),e("li",{children:"Post could be edited or deleted later."})]})]})}),e("h3",{children:"Preview"}),e("output",{class:"embed-preview",dangerouslySetInnerHTML:{__html:k}}),e("p",{children:e("small",{children:"Note: This preview is lightly styled."})})]})]})}function qe({checked:t,count:n,class:o,title:a,alt:r,size:s,icon:c,iconSize:l="l",onClick:u,...d}){typeof a=="string"&&(a=[a,a]),typeof r=="string"&&(r=[r,r]);const[m,h]=K(a[0]||""),[b,w]=K(r[0]||"");return Ee(()=>{t?(h(a[1]||""),w(r[1]||"")):(h(a[0]||""),w(r[0]||""))},[t,a,r]),e("button",{type:"button",title:m,class:`plain ${s?"small":""} ${o} ${t?"checked":""}`,onClick:_=>{u&&(_.preventDefault(),_.stopPropagation(),u(_))},...d,children:[e(v,{icon:c,size:l,alt:b}),!!n&&e(P,{children:[" ",e("small",{title:n,children:Ne(n)})]})]})}function Pr(t){if(!t)return;const n=new URL(t),{host:o,pathname:a}=n,r=a.replace(/\/$/,""),[s,c,l]=r.match(/\/(@[^\/]+)\/(.*)/)||[];return e(P,{children:[nn.toUnicode(o),c?e(P,{children:["/",c,e("wbr",{}),e("span",{class:"more-insignificant",children:["/",l]})]}):e("span",{class:"more-insignificant",children:r})]})}function Ir({sKey:t}){const o=pt(S).statusReply[t];if(!o)return null;const{id:a,instance:r}=o,s=to(a,r);if(!s)return null;const{sensitive:c,spoilerText:l,account:{avatar:u,avatarStatic:d,bot:m},visibility:h,content:b,language:w,filtered:_}=s;if(c||l||!b)return null;const T=Ie(a,r),L=po(s),R=Zn(ho),E=dn(_,R);if((E==null?void 0:E.action)==="hide")return null;const k=(E==null?void 0:E.titlesStr)||"";return e("article",{class:`status compact-reply ${h==="direct"?"visibility-direct":""}`,tabindex:"-1","data-state-post-id":T,children:[e(Se,{url:d||u,squircle:m}),e("div",{class:"content-compact",title:L,lang:w,dir:"auto",children:E?e("b",{class:"status-filtered-badge badge-meta",title:k,children:[e("span",{children:"Filtered"}),e("span",{children:k})]}):e("span",{children:L})})]})}function Sr({status:t,filterInfo:n,instance:o,containerProps:a={},showFollowedTags:r,quoted:s}){var N;const c=pt(S),{id:l,account:{avatar:u,avatarStatic:d,bot:m,group:h},createdAt:b,visibility:w,reblog:_}=t,T=!!_,L=(n==null?void 0:n.titlesStr)||"",R=new Date(b),E=po(t.reblog||t),[k,f]=K(!1),g=Jn(()=>{f(!0)},{threshold:600,captureEvent:!0,detect:"touch",cancelOnMovement:2}),M=Rt(),x=Ie(t.id,o),O=Ie(t.id,o)+" "+(Ie(_==null?void 0:_.id,o)||""),A=(_==null?void 0:_.id)||l,I=o?`/${o}/s/${A}`:`/s/${A}`,H=r&&!!((N=c.statusFollowedTags[x])!=null&&N.length);return e("div",{class:s?"":T?h?"status-group":"status-reblog":H?"status-followed-tags":"",...a,onContextMenu:C=>{C.preventDefault(),f(!0)},...g(),children:[e("article",{"data-state-post-id":O,class:`status filtered ${s?"status-card":""}`,tabindex:"-1",children:[e("b",{class:"status-filtered-badge clickable badge-meta",title:L,onClick:C=>{C.preventDefault(),f(!0)},children:[e("span",{children:"Filtered"}),e("span",{children:L})]})," ",e(Se,{url:d||u,squircle:m}),e("span",{class:"status-filtered-info",children:[e("span",{class:"status-filtered-info-1",children:[e(ct,{account:t.account,instance:o})," ",e(v,{icon:sn[w],alt:dt[w],size:"s"})," ",T?"boosted":H?e("span",{children:c.statusFollowedTags[x].slice(0,3).map(C=>e("span",{class:"status-followed-tag-item",children:["#",C]},C))}):e(Ue,{datetime:R,format:"micro"})]}),e("span",{class:"status-filtered-info-2",children:[T&&e(P,{children:[e(Se,{url:_.account.avatarStatic||_.account.avatar,squircle:m})," "]}),E]})]})]}),!!k&&e(on,{onClick:C=>{C.target===C.currentTarget&&f(!1)},children:e("div",{id:"filtered-status-peek",class:"sheet",children:[e("button",{type:"button",class:"sheet-close",onClick:()=>f(!1),children:e(v,{icon:"x"})}),e("header",{children:[e("b",{class:"status-filtered-badge",children:"Filtered"})," ",L]}),e("main",{tabIndex:"-1",children:e(We,{ref:M,class:"status-link",to:I,onClick:()=>{f(!1)},"data-read-more":"Read more →",children:e(Ye,{status:t,instance:o,size:"s",readOnly:!0})})})]})})]})}const Rr=ht(({id:t,instance:n,level:o=0})=>{if(!t||!n)return;const a=pt(S),r=Ie(t,n),s=a.statusQuotes[r],c=s==null?void 0:s.filter((l,u,d)=>d.findIndex(m=>m.url===l.url)===u);if(c!=null&&c.length&&!(o>2))return c.map(l=>e(lo,{id:l.instance+l.id,children:e(We,{to:`${l.instance?`/${l.instance}`:""}/s/${l.id}`,class:"status-card-link","data-read-more":"Read more →",children:e(Ye,{statusID:l.id,instance:l.instance,size:"s",quoted:o+1,enableCommentHint:!0})},l.instance+l.id)}))}),Hr=ht(Ye,(t,n)=>{const{status:o,...a}=t,{status:r,...s}=n;return(o==null?void 0:o.id)===(r==null?void 0:r.id)&&ga(a,s)});export{Se as A,po as B,an as C,Jt as D,Ge as E,ho as F,xt as G,no as H,v as I,La as J,sn as K,We as L,on as M,ct as N,Ue as R,Ia as S,ir as T,io as a,qt as b,It as c,Vr as d,Fn as e,co as f,so as g,Wa as h,Ne as i,ln as j,Ur as k,Kt as l,Hr as m,mt as n,ya as o,rn as p,lt as q,Wn as r,me as s,Ca as t,Or as u,go as v,Rt as w,dn as x,ro as y,Nr as z};
//# sourceMappingURL=status-qMJ4qIaO.js.map
