import{e as r,c as ur,s as Le,p as qr,u as vt,A as ue,a as pi,Y as Wr,y as Se,F as Vr,W as cr,T as ie,J as Gr,d as ne,M as lr,k as jt,m as Nt,l as nt,q as _n,z as Bn,G as cn,aR as Yr,N as Xr,aX as dr,I as Zr,a0 as Qr,V as Jr,t as ea,aO as ta,H as na,aY as ia,b as ra}from"./pwa-viewport-D2fQRWhD.js";import{a6 as aa,K as oa,a2 as sa,B as ua,x as Ct,af as ai,ag as Hi,ah as fr,X as ca,Z as Un,I as ee,r as Dt,q as zn,s as mt,h as Mn,i as hr,d as ut,l as fi,t as la,f as dn,v as pr,F as On,ai as da,aj as fa,ak as ha,a0 as pa,p as Ut,al as ma,am as ga,D as Ki,u as va,a as ba,a8 as ya,a7 as xa,c as qi,an as oi,ao as wa}from"./ScheduledAtField-ChApKQgo.js";import"./ICONS-HWvZmmNl.js";const mi=[["aa","Afar","Afaraf"],["ab","Abkhaz","аҧсуа бызшәа"],["ae","Avestan","avesta"],["af","Afrikaans","Afrikaans"],["ak","Akan","Akan"],["am","Amharic","አማርኛ"],["an","Aragonese","aragonés"],["ar","Arabic","اللغة العربية"],["as","Assamese","অসমীয়া"],["av","Avaric","авар мацӀ"],["ay","Aymara","aymar aru"],["az","Azerbaijani","azərbaycan dili"],["ba","Bashkir","башҡорт теле"],["be","Belarusian","беларуская мова"],["bg","Bulgarian","български език"],["bh","Bihari","भोजपुरी"],["bi","Bislama","Bislama"],["bm","Bambara","bamanankan"],["bn","Bengali","বাংলা"],["bo","Tibetan","བོད་ཡིག"],["br","Breton","brezhoneg"],["bs","Bosnian","bosanski jezik"],["ca","Catalan","Català"],["ce","Chechen","нохчийн мотт"],["ch","Chamorro","Chamoru"],["co","Corsican","corsu"],["cr","Cree","ᓀᐦᐃᔭᐍᐏᐣ"],["cs","Czech","čeština"],["cu","Old Church Slavonic","ѩзыкъ словѣньскъ"],["cv","Chuvash","чӑваш чӗлхи"],["cy","Welsh","Cymraeg"],["da","Danish","dansk"],["de","German","Deutsch"],["dv","Divehi","Dhivehi"],["dz","Dzongkha","རྫོང་ཁ"],["ee","Ewe","Eʋegbe"],["el","Greek","Ελληνικά"],["en","English","English"],["eo","Esperanto","Esperanto"],["es","Spanish","Español"],["et","Estonian","eesti"],["eu","Basque","euskara"],["fa","Persian","فارسی"],["ff","Fula","Fulfulde"],["fi","Finnish","suomi"],["fj","Fijian","Vakaviti"],["fo","Faroese","føroyskt"],["fr","French","Français"],["fy","Western Frisian","Frysk"],["ga","Irish","Gaeilge"],["gd","Scottish Gaelic","Gàidhlig"],["gl","Galician","galego"],["gu","Gujarati","ગુજરાતી"],["gv","Manx","Gaelg"],["ha","Hausa","هَوُسَ"],["he","Hebrew","עברית"],["hi","Hindi","हिन्दी"],["ho","Hiri Motu","Hiri Motu"],["hr","Croatian","Hrvatski"],["ht","Haitian","Kreyòl ayisyen"],["hu","Hungarian","magyar"],["hy","Armenian","Հայերեն"],["hz","Herero","Otjiherero"],["ia","Interlingua","Interlingua"],["id","Indonesian","Bahasa Indonesia"],["ie","Interlingue","Interlingue"],["ig","Igbo","Asụsụ Igbo"],["ii","Nuosu","ꆈꌠ꒿ Nuosuhxop"],["ik","Inupiaq","Iñupiaq"],["io","Ido","Ido"],["is","Icelandic","Íslenska"],["it","Italian","Italiano"],["iu","Inuktitut","ᐃᓄᒃᑎᑐᑦ"],["ja","Japanese","日本語"],["jv","Javanese","basa Jawa"],["ka","Georgian","ქართული"],["kg","Kongo","Kikongo"],["ki","Kikuyu","Gĩkũyũ"],["kj","Kwanyama","Kuanyama"],["kk","Kazakh","қазақ тілі"],["kl","Kalaallisut","kalaallisut"],["km","Khmer","ខេមរភាសា"],["kn","Kannada","ಕನ್ನಡ"],["ko","Korean","한국어"],["kr","Kanuri","Kanuri"],["ks","Kashmiri","कश्मीरी"],["ku","Kurmanji (Kurdish)","Kurmancî"],["kv","Komi","коми кыв"],["kw","Cornish","Kernewek"],["ky","Kyrgyz","Кыргызча"],["la","Latin","latine"],["lb","Luxembourgish","Lëtzebuergesch"],["lg","Ganda","Luganda"],["li","Limburgish","Limburgs"],["ln","Lingala","Lingála"],["lo","Lao","ລາວ"],["lt","Lithuanian","lietuvių kalba"],["lu","Luba-Katanga","Tshiluba"],["lv","Latvian","latviešu valoda"],["mg","Malagasy","fiteny malagasy"],["mh","Marshallese","Kajin M̧ajeļ"],["mi","Māori","te reo Māori"],["mk","Macedonian","македонски јазик"],["ml","Malayalam","മലയാളം"],["mn","Mongolian","Монгол хэл"],["mr","Marathi","मराठी"],["ms","Malay","Bahasa Melayu"],["ms-Arab","Jawi Malay","بهاس ملايو"],["mt","Maltese","Malti"],["my","Burmese","ဗမာစာ"],["na","Nauru","Ekakairũ Naoero"],["nb","Norwegian Bokmål","Norsk bokmål"],["nd","Northern Ndebele","isiNdebele"],["ne","Nepali","नेपाली"],["ng","Ndonga","Owambo"],["nl","Dutch","Nederlands"],["nn","Norwegian Nynorsk","Norsk Nynorsk"],["no","Norwegian","Norsk"],["nr","Southern Ndebele","isiNdebele"],["nv","Navajo","Diné bizaad"],["ny","Chichewa","chiCheŵa"],["oc","Occitan","occitan"],["oj","Ojibwe","ᐊᓂᔑᓈᐯᒧᐎᓐ"],["om","Oromo","Afaan Oromoo"],["or","Oriya","ଓଡ଼ିଆ"],["os","Ossetian","ирон æвзаг"],["pa","Punjabi","ਪੰਜਾਬੀ"],["pi","Pāli","पाऴि"],["pl","Polish","Polski"],["ps","Pashto","پښتو"],["pt","Portuguese","Português"],["qu","Quechua","Runa Simi"],["rm","Romansh","rumantsch grischun"],["rn","Kirundi","Ikirundi"],["ro","Romanian","Română"],["ru","Russian","Русский"],["rw","Kinyarwanda","Ikinyarwanda"],["sa","Sanskrit","संस्कृतम्"],["sc","Sardinian","sardu"],["sd","Sindhi","सिन्धी"],["se","Northern Sami","Davvisámegiella"],["sg","Sango","yângâ tî sängö"],["si","Sinhala","සිංහල"],["sk","Slovak","slovenčina"],["sl","Slovenian","slovenščina"],["sn","Shona","chiShona"],["so","Somali","Soomaaliga"],["sq","Albanian","Shqip"],["sr","Serbian","српски језик"],["ss","Swati","SiSwati"],["st","Southern Sotho","Sesotho"],["su","Sundanese","Basa Sunda"],["sv","Swedish","Svenska"],["sw","Swahili","Kiswahili"],["ta","Tamil","தமிழ்"],["te","Telugu","తెలుగు"],["tg","Tajik","тоҷикӣ"],["th","Thai","ไทย"],["ti","Tigrinya","ትግርኛ"],["tk","Turkmen","Türkmen"],["tl","Tagalog","Tagalog"],["tn","Tswana","Setswana"],["to","Tonga","faka Tonga"],["tr","Turkish","Türkçe"],["ts","Tsonga","Xitsonga"],["tt","Tatar","татар теле"],["tw","Twi","Twi"],["ty","Tahitian","Reo Tahiti"],["ug","Uyghur","ئۇيغۇرچە‎"],["uk","Ukrainian","Українська"],["ur","Urdu","اردو"],["uz","Uzbek","Ўзбек"],["ve","Venda","Tshivenḓa"],["vi","Vietnamese","Tiếng Việt"],["vo","Volapük","Volapük"],["wa","Walloon","walon"],["wo","Wolof","Wollof"],["xh","Xhosa","isiXhosa"],["yi","Yiddish","ייִדיש"],["yo","Yoruba","Yorùbá"],["za","Zhuang","Saɯ cueŋƅ"],["zh","Chinese","中文"],["zu","Zulu","isiZulu"],["zh-CN","Chinese (China)","简体中文"],["zh-HK","Chinese (Hong Kong)","繁體中文（香港）"],["zh-TW","Chinese (Taiwan)","繁體中文（臺灣）"],["zh-YUE","Cantonese","廣東話"],["ast","Asturian","Asturianu"],["chr","Cherokee","ᏣᎳᎩ ᎦᏬᏂᎯᏍᏗ"],["ckb","Sorani (Kurdish)","سۆرانی"],["cnr","Montenegrin","crnogorski"],["csb","Kashubian","Kaszëbsczi"],["gsw","Swiss German","Schwiizertütsch"],["jbo","Lojban","la .lojban."],["kab","Kabyle","Taqbaylit"],["ldn","Láadan","Láadan"],["lfn","Lingua Franca Nova","lingua franca nova"],["moh","Mohawk","Kanienʼkéha"],["nds","Low German","Plattdüütsch"],["pdc","Pennsylvania Dutch","Pennsilfaani-Deitsch"],["sco","Scots","Scots"],["sma","Southern Sami","Åarjelsaemien Gïele"],["smj","Lule Sami","Julevsámegiella"],["szl","Silesian","ślůnsko godka"],["tok","Toki Pona","toki pona"],["vai","Vai","ꕙꔤ"],["xal","Kalmyk","Хальмг келн"],["zba","Balaibalan","باليبلن"],["zgh","Standard Moroccan Tamazight","ⵜⴰⵎⴰⵣⵉⵖⵜ"]],ka=new Intl.Segmenter;function Wi(f){if(f==="")return 0;let o=0;for(const d of ka.segment(f))o++;return o}const Ea="(((?:[^A-Za-z0-9@＠$#＃\\uFFFE\\uFEFF\\uFFFF]|[\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069]|^))((https?:\\/\\/)((?:(?:(?:[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/](?:[_-]|[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/])*)?[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/]\\.)*(?:(?:[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/](?:-|[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/])*)?[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/]\\.)(?:(?:(?:삼성|닷컴|닷넷|香格里拉|餐厅|食品|飞利浦|電訊盈科|集团|通販|购物|谷歌|诺基亚|联通|网络|网站|网店|网址|组织机构|移动|珠宝|点看|游戏|淡马锡|机构|書籍|时尚|新闻|政府|政务|招聘|手表|手机|我爱你|慈善|微博|广东|工行|家電|娱乐|天主教|大拿|大众汽车|在线|嘉里大酒店|嘉里|商标|商店|商城|公益|公司|八卦|健康|信息|佛山|企业|中文网|中信|世界|ポイント|ファッション|セール|ストア|コム|グーグル|クラウド|みんな|คอม|संगठन|नेट|कॉम|همراه|موقع|موبايلي|كوم|كاثوليك|عرب|شبكة|بيتك|بازار|العليان|ارامكو|اتصالات|ابوظبي|קום|сайт|рус|орг|онлайн|москва|ком|католик|дети|zuerich|zone|zippo|zip|zero|zara|zappos|yun|youtube|you|yokohama|yoga|yodobashi|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|voyage|voto|voting|vote|volvo|volkswagen|vodka|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vet|versicherung|vermögensberatung|vermögensberater|verisign|ventures|vegas|vanguard|vana|vacations|ups|uol|uno|university|unicom|uconnect|ubs|ubank|tvs|tushu|tunes|tui|tube|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|tmall|tkmaxx|tjx|tjmaxx|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|tci|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|systems|symantec|sydney|swiss|swiftcover|swatch|suzuki|surgery|surf|support|supply|supplies|sucks|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|srt|srl|spreadbetting|spot|sport|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|sncf|smile|smart|sling|skype|sky|skin|ski|site|singles|sina|silk|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|search|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sbs|sbi|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|ryukyu|rwe|run|ruhr|rugby|rsvp|room|rogers|rodeo|rocks|rocher|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|raid|radio|racing|qvc|quest|quebec|qpon|pwc|pub|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|post|porn|politie|poker|pohl|pnc|plus|plumbing|playstation|play|place|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|phd|pharmacy|pfizer|pet|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|pamperedchef|page|ovh|ott|otsuka|osaka|origins|orientexpress|organic|org|orange|oracle|open|ooo|onyourside|online|onl|ong|one|omega|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nyc|ntt|nrw|nra|nowtv|nowruz|now|norton|northwesternmutual|nokia|nissay|nissan|ninja|nikon|nike|nico|nhk|ngo|nfl|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|nba|navy|natura|nationwide|name|nagoya|nadex|nab|mutuelle|mutual|museum|mtr|mtpc|mtn|msd|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|montblanc|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mma|mls|mlb|mitsubishi|mit|mint|mini|mil|microsoft|miami|metlife|merckmsd|meo|menu|men|memorial|meme|melbourne|meet|media|med|mckinsey|mcdonalds|mcd|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|macys|luxury|luxe|lupin|lundbeck|ltda|ltd|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|llp|llc|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|kyoto|kuokgroup|kred|krd|kpn|kpmg|kosher|komatsu|koeln|kiwi|kitchen|kindle|kinder|kim|kia|kfh|kerryproperties|kerrylogistics|kerryhotels|kddi|kaufen|juniper|juegos|jprs|jpmorgan|joy|jot|joburg|jobs|jnj|jmp|jll|jlc|jio|jewelry|jetzt|jeep|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|istanbul|ist|ismaili|iselect|irish|ipiranga|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|immobilien|immo|imdb|imamat|ikano|iinet|ifm|ieee|icu|ice|icbc|ibm|hyundai|hyatt|hughes|htc|hsbc|how|house|hotmail|hotels|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hkt|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|guru|guitars|guide|guge|gucci|guardian|group|grocery|gripe|green|gratis|graphics|grainger|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gmx|gmo|gmbh|gmail|globo|global|gle|glass|glade|giving|gives|gifts|gift|ggee|george|genting|gent|gea|gdn|gbiz|gay|garden|gap|games|game|gallup|gallo|gallery|gal|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fly|flsmidth|flowers|florist|flir|flights|flickr|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|etisalat|esurance|estate|esq|erni|ericsson|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|education|edu|edeka|eco|eat|earth|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|doosan|domains|doha|dog|dodge|doctor|docs|dnp|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cyou|cymru|cuisinella|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cpa|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|church|chrysler|chrome|christmas|chloe|chintai|cheap|chat|chase|charity|channel|chanel|cfd|cfa|cern|ceo|center|ceb|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|bzh|buzz|buy|business|builders|build|bugatti|budapest|brussels|brother|broker|broadway|bridgestone|bradesco|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bnpparibas|bnl|bmw|bms|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|biz|bio|bingo|bing|bike|bid|bible|bharti|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|bcn|bcg|bbva|bbt|bbc|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|azure|axa|aws|avianca|autos|auto|author|auspost|audio|audible|audi|auction|attorney|athleta|associates|asia|asda|arte|art|arpa|army|archi|aramco|arab|aquarelle|apple|app|apartments|aol|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|akdn|airtel|airforce|airbus|aigo|aig|agency|agakhan|africa|afl|afamilycompany|aetna|aero|aeg|adult|ads|adac|actor|active|aco|accountants|accountant|accenture|academy|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa|onion)(?=[^0-9a-zA-Z@+-]|$))|(?:(?:한국|香港|澳門|新加坡|台灣|台湾|中國|中国|გე|ລາວ|ไทย|ලංකා|ഭാരതം|ಭಾರತ|భారత్|சிங்கப்பூர்|இலங்கை|இந்தியா|ଭାରତ|ભારત|ਭਾਰਤ|ভাৰত|ভারত|বাংলা|भारोत|भारतम्|भारत|ڀارت|پاکستان|موريتانيا|مليسيا|مصر|قطر|فلسطين|عمان|عراق|سورية|سودان|تونس|بھارت|بارت|ایران|امارات|المغرب|السعودية|الجزائر|البحرين|الاردن|հայ|қаз|укр|срб|рф|мон|мкд|ею|бел|бг|ευ|ελ|zw|zm|za|yt|ye|ws|wf|vu|vn|vi|vg|ve|vc|va|uz|uy|us|um|uk|ug|ua|tz|tw|tv|tt|tr|tp|to|tn|tm|tl|tk|tj|th|tg|tf|td|tc|sz|sy|sx|sv|su|st|ss|sr|so|sn|sm|sl|sk|sj|si|sh|sg|se|sd|sc|sb|sa|rw|ru|rs|ro|re|qa|py|pw|pt|ps|pr|pn|pm|pl|pk|ph|pg|pf|pe|pa|om|nz|nu|nr|np|no|nl|ni|ng|nf|ne|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|mn|mm|ml|mk|mh|mg|mf|me|md|mc|ma|ly|lv|lu|lt|ls|lr|lk|li|lc|lb|la|kz|ky|kw|kr|kp|kn|km|ki|kh|kg|ke|jp|jo|jm|je|it|is|ir|iq|io|in|im|il|ie|id|hu|ht|hr|hn|hm|hk|gy|gw|gu|gt|gs|gr|gq|gp|gn|gm|gl|gi|gh|gg|gf|ge|gd|gb|ga|fr|fo|fm|fk|fj|fi|eu|et|es|er|eh|eg|ee|ec|dz|do|dm|dk|dj|de|cz|cy|cx|cw|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|bz|by|bw|bv|bt|bs|br|bq|bo|bn|bm|bl|bj|bi|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ar|aq|ao|an|am|al|ai|ag|af|ae|ad|ac)(?=[^0-9a-zA-Z@+-]|$))|(?:xn--[\\-0-9a-z]+))))(?::([0-9]+))?(\\/(?:(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*(?:\\((?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+|(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*\\([a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*))\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*)*[\\+\\-a-z\\u0400-\\u04FF0-9=_#\\/\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]|(?:\\((?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+|(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*\\([a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*))\\)))|(?:@[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\/))*)?(\\?[a-z0-9!?\\*'@\\(\\);:&=\\+\\$\\/%#\\[\\]\\-_\\.,~|]*[a-z0-9\\-_&=#\\/])?))",Aa="gi",Vi={source:Ea,flags:Aa},mr=new RegExp(Vi.source,Vi.flags),Sa=/iPad|iPhone|iPod/.test(navigator.userAgent)&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function Gi({hidden:f,disabled:o=!1,supportedMimeTypes:d,setMediaAttachments:g}){const v=Sa?d:d?.filter(A=>!/^image\//i.test(A));return r("input",{type:"file",hidden:f,accept:v?.join(","),capture:"environment",disabled:o,onChange:A=>{const k=A.target.files;if(!k)return;const x=Array.from(k)[0];x&&(g(I=>[...I,{file:x,type:x.type,size:x.size,url:URL.createObjectURL(x),id:null,description:null}]),A.target.value=null)}})}const Yi="capture"in document.createElement("input");function Ca({maxCharacters:f=500,hidden:o}){const g=ur(Le).composerCharacterCount,v=f-g;return o?r("span",{class:"char-counter",hidden:!0}):r("span",{class:"char-counter",title:`${v}/${f}`,style:{"--percentage":g/f*100},children:[r("meter",{class:`${v<=-10?"explode":v<=0?"danger":v<=20?"warning":""}`,value:g,max:f}),r("span",{class:"counter",children:v})]})}class Fa{constructor(o,d,{tabInsertsSuggestions:g,defaultFirstOption:v}={}){this.input=o,this.list=d,this.tabInsertsSuggestions=g??!0,this.defaultFirstOption=v??!1,this.isComposing=!1,d.id||(d.id=`combobox-${Math.random().toString().slice(2,6)}`),this.ctrlBindings=!!navigator.userAgent.match(/Macintosh/),this.keyboardEventHandler=A=>Ta(A,this),this.compositionEventHandler=A=>Ia(A,this),this.inputHandler=this.clearSelection.bind(this),o.setAttribute("role","combobox"),o.setAttribute("aria-controls",d.id),o.setAttribute("aria-expanded","false"),o.setAttribute("aria-autocomplete","list"),o.setAttribute("aria-haspopup","listbox")}destroy(){this.clearSelection(),this.stop(),this.input.removeAttribute("role"),this.input.removeAttribute("aria-controls"),this.input.removeAttribute("aria-expanded"),this.input.removeAttribute("aria-autocomplete"),this.input.removeAttribute("aria-haspopup")}start(){this.input.setAttribute("aria-expanded","true"),this.input.addEventListener("compositionstart",this.compositionEventHandler),this.input.addEventListener("compositionend",this.compositionEventHandler),this.input.addEventListener("input",this.inputHandler),this.input.addEventListener("keydown",this.keyboardEventHandler),this.list.addEventListener("click",Xi),this.indicateDefaultOption()}stop(){this.clearSelection(),this.input.setAttribute("aria-expanded","false"),this.input.removeEventListener("compositionstart",this.compositionEventHandler),this.input.removeEventListener("compositionend",this.compositionEventHandler),this.input.removeEventListener("input",this.inputHandler),this.input.removeEventListener("keydown",this.keyboardEventHandler),this.list.removeEventListener("click",Xi)}indicateDefaultOption(){var o;this.defaultFirstOption&&((o=Array.from(this.list.querySelectorAll('[role="option"]:not([aria-disabled="true"])')).filter(si)[0])===null||o===void 0||o.setAttribute("data-combobox-option-default","true"))}navigate(o=1){const d=Array.from(this.list.querySelectorAll('[aria-selected="true"]')).filter(si)[0],g=Array.from(this.list.querySelectorAll('[role="option"]')).filter(si),v=g.indexOf(d);if(v===g.length-1&&o===1||v===0&&o===-1){this.clearSelection(),this.input.focus();return}let A=o===1?0:g.length-1;if(d&&v>=0){const x=v+o;x>=0&&x<g.length&&(A=x)}const k=g[A];if(k)for(const x of g)x.removeAttribute("data-combobox-option-default"),k===x?(this.input.setAttribute("aria-activedescendant",k.id),k.setAttribute("aria-selected","true"),_a(this.list,k)):x.removeAttribute("aria-selected")}clearSelection(){this.input.removeAttribute("aria-activedescendant");for(const o of this.list.querySelectorAll('[aria-selected="true"]'))o.removeAttribute("aria-selected");this.indicateDefaultOption()}}function Ta(f,o){if(!(f.shiftKey||f.metaKey||f.altKey)&&!(!o.ctrlBindings&&f.ctrlKey)&&!o.isComposing)switch(f.key){case"Enter":Zi(o.input,o.list)&&f.preventDefault();break;case"Tab":o.tabInsertsSuggestions&&Zi(o.input,o.list)&&f.preventDefault();break;case"Escape":o.clearSelection();break;case"ArrowDown":o.navigate(1),f.preventDefault();break;case"ArrowUp":o.navigate(-1),f.preventDefault();break;case"n":o.ctrlBindings&&f.ctrlKey&&(o.navigate(1),f.preventDefault());break;case"p":o.ctrlBindings&&f.ctrlKey&&(o.navigate(-1),f.preventDefault());break;default:if(f.ctrlKey)break;o.clearSelection()}}function Xi(f){if(!(f.target instanceof Element))return;const o=f.target.closest('[role="option"]');o&&o.getAttribute("aria-disabled")!=="true"&&La(o)}function Zi(f,o){const d=o.querySelector('[aria-selected="true"], [data-combobox-option-default="true"]');return d?(d.getAttribute("aria-disabled")==="true"||d.click(),!0):!1}function La(f){f.dispatchEvent(new CustomEvent("combobox-commit",{bubbles:!0}))}function si(f){return!f.hidden&&!(f instanceof HTMLInputElement&&f.type==="hidden")&&(f.offsetWidth>0||f.offsetHeight>0)}function Ia(f,o){o.isComposing=f.type==="compositionstart",document.getElementById(o.input.getAttribute("aria-controls")||"")&&o.clearSelection()}function _a(f,o){za(f,o)||(f.scrollTop=o.offsetTop)}function za(f,o){const d=f.scrollTop,g=d+f.clientHeight,v=o.offsetTop,A=v+o.clientHeight;return v>=d&&A<=g}const Pa=/\s|\(|\[/;function Ma(f,o,d,{multiWord:g,lookBackIndex:v,lastMatchPosition:A}={multiWord:!1,lookBackIndex:0,lastMatchPosition:null}){let k=f.lastIndexOf(o,d-1);if(k===-1||k<v)return;if(g){if(A!=null){if(A===k)return;k=A-o.length}if(f[k+1]===" "&&d>=k+o.length+1||f.lastIndexOf(`
`,d-1)>k||f.lastIndexOf(".",d-1)>k)return}else if(f.lastIndexOf(" ",d-1)>k)return;const x=f[k-1];return x&&!Pa.test(x)?void 0:{text:f.substring(k+o.length,d),position:k+o.length}}class Oa extends Event{constructor(){super("update")}}const ui=new WeakMap;class gi extends EventTarget{#t=new MutationObserver(()=>this.#f());#r=new ResizeObserver(()=>this.#d());#a;#n=document.createElement("div");#e=document.createElement("div");static for(o){let d=ui.get(o);return d||(d=new gi(o),ui.set(o,d)),d}constructor(o){super(),this.#a=new WeakRef(o),this.#n.style.position="absolute",this.#n.style.pointerEvents="none",this.#n.setAttribute("aria-hidden","true"),this.#n.appendChild(this.#e),this.#e.style.pointerEvents="none",this.#e.style.userSelect="none",this.#e.style.overflow="hidden",this.#e.style.display="block",this.#e.style.visibility="hidden",o instanceof HTMLTextAreaElement?(this.#e.style.whiteSpace="pre-wrap",this.#e.style.wordWrap="break-word"):(this.#e.style.whiteSpace="nowrap",this.#e.style.display="table-cell",this.#e.style.verticalAlign="middle"),o.after(this.#n),this.#f(),this.#h(),this.#t.observe(o,{attributeFilter:["style","dir"]}),this.#r.observe(o),document.addEventListener("scroll",this.#s,{capture:!0}),window.addEventListener("resize",this.#s,{capture:!0}),o.addEventListener("input",this.#m,{capture:!0})}get element(){return this.#e}forceUpdate(){this.#f(),this.#h()}disconnect(){this.#n?.remove(),this.#t.disconnect(),this.#r.disconnect(),document.removeEventListener("scroll",this.#s,{capture:!0}),window.removeEventListener("resize",this.#s,{capture:!0});const o=this.#o;o&&(o.removeEventListener("input",this.#m,{capture:!0}),ui.delete(o))}get#o(){return this.#a?.deref()}#i(o){const d=this.#o;return d?o(d):this.disconnect()}#u=0;#c=0;#p(){this.#i(o=>{const d=window.getComputedStyle(o);this.#e.style.height=d.height,this.#e.style.width=d.width,o.clientHeight!==this.#e.clientHeight&&(this.#e.style.height=`calc(${d.height} + ${o.clientHeight-this.#e.clientHeight}px)`),o.clientWidth!==this.#e.clientWidth&&(this.#e.style.width=`calc(${d.width} + ${o.clientWidth-this.#e.clientWidth}px)`);const g=o.getBoundingClientRect(),v=this.#e.getBoundingClientRect();this.#u=this.#u+g.left-v.left,this.#c=this.#c+g.top-v.top,this.#e.style.transform=`translate(${this.#u}px, ${this.#c}px)`,this.#e.scrollTop=o.scrollTop,this.#e.scrollLeft=o.scrollLeft,this.dispatchEvent(new Oa)})}#l=!1;#d(){this.#l||(this.#l=!0,requestAnimationFrame(()=>{this.#p(),this.#l=!1}))}#f(){this.#i(o=>{const d=window.getComputedStyle(o);for(const g of Ra)this.#e.style[g]=d[g];this.#d()})}#h(){this.#i(o=>{this.#e.textContent=o.value,this.#p()})}#m=()=>this.#h();#s=o=>{this.#i(d=>{(o.target===document||o.target===window||o.target instanceof Node&&o.target.contains(d))&&this.#d()})}}const Ra=["direction","writingMode","unicodeBidi","textOrientation","boxSizing","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];class Rn{#t;#r;#a;constructor(o,d=0,g=d){this.#t=o,this.#r=d,this.#a=g}static fromSelection(o){const{selectionStart:d,selectionEnd:g}=o;return new Rn(o,d??void 0,g??void 0)}get collapsed(){return this.startOffset===this.endOffset}get commonAncestorContainer(){return this.#t}get endContainer(){return this.#t}get startContainer(){return this.#t}get startOffset(){return this.#r}get endOffset(){return this.#a}setStartOffset(o){this.#r=this.#o(o)}setEndOffset(o){this.#a=this.#o(o)}collapse(o=!1){o?this.setEndOffset(this.startOffset):this.setStartOffset(this.endOffset)}cloneContents(){return this.#i().cloneContents()}cloneRange(){return new Rn(this.#t,this.startOffset,this.endOffset)}getBoundingClientRect(){return this.#i().getBoundingClientRect()}getClientRects(){return this.#i().getClientRects()}toString(){return this.#i().toString()}getStyleClone(){return this.#n}get#n(){return gi.for(this.#t)}get#e(){return this.#n}#o(o){return Math.max(0,Math.min(o,this.#t.value.length))}#i(){const o=document.createRange(),d=this.#e.element.childNodes[0];return d&&(o.setStart(d,this.startOffset),o.setEnd(d,this.endOffset)),o}}const Pn=new WeakMap;let Ba=class{constructor(o,d){this.expander=o,this.input=d,this.combobox=null,this.menu=null,this.match=null,this.justPasted=!1,this.lookBackIndex=0,this.oninput=this.onInput.bind(this),this.onpaste=this.onPaste.bind(this),this.onkeydown=this.onKeydown.bind(this),this.oncommit=this.onCommit.bind(this),this.onmousedown=this.onMousedown.bind(this),this.onblur=this.onBlur.bind(this),this.interactingWithList=!1,d.addEventListener("paste",this.onpaste),d.addEventListener("input",this.oninput),d.addEventListener("keydown",this.onkeydown),d.addEventListener("blur",this.onblur)}destroy(){this.input.removeEventListener("paste",this.onpaste),this.input.removeEventListener("input",this.oninput),this.input.removeEventListener("keydown",this.onkeydown),this.input.removeEventListener("blur",this.onblur)}dismissMenu(){this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex)}activate(o,d){var g,v;this.input!==document.activeElement&&this.input!==((v=(g=document.activeElement)===null||g===void 0?void 0:g.shadowRoot)===null||v===void 0?void 0:v.activeElement)||(this.deactivate(),this.menu=d,d.id||(d.id=`text-expander-${Math.floor(Math.random()*1e5).toString()}`),this.expander.append(d),this.combobox=new Fa(this.input,d),this.expander.dispatchEvent(new Event("text-expander-activate")),this.positionMenu(d,o.position),this.combobox.start(),d.addEventListener("combobox-commit",this.oncommit),d.addEventListener("mousedown",this.onmousedown),this.combobox.navigate(1))}positionMenu(o,d){const g=new Rn(this.input,d).getBoundingClientRect(),v={left:g.left,top:g.top+g.height},A=o.getBoundingClientRect(),k={left:v.left-A.left,top:v.top-A.top};if(k.left!==0||k.top!==0){const x=getComputedStyle(o);o.style.left=x.left?`calc(${x.left} + ${k.left}px)`:`${k.left}px`,o.style.top=x.top?`calc(${x.top} + ${k.top}px)`:`${k.top}px`}}deactivate(){const o=this.menu;return!o||!this.combobox?!1:(this.expander.dispatchEvent(new Event("text-expander-deactivate")),this.menu=null,o.removeEventListener("combobox-commit",this.oncommit),o.removeEventListener("mousedown",this.onmousedown),this.combobox.destroy(),this.combobox=null,o.remove(),!0)}onCommit({target:o}){var d;const g=o;if(!(g instanceof HTMLElement)||!this.combobox)return;const v=this.match;if(!v)return;const A=this.input.value.substring(0,v.position-v.key.length),k=this.input.value.substring(v.position+v.text.length),x={item:g,key:v.key,value:null,continue:!1};if(!this.expander.dispatchEvent(new CustomEvent("text-expander-value",{cancelable:!0,detail:x}))||!x.value)return;let S=(d=this.expander.getAttribute("suffix"))!==null&&d!==void 0?d:" ";x.continue&&(S="");const T=`${x.value}${S}`;this.input.value=A+T+k;const ce=A.length+T.length;this.deactivate(),this.input.focus({preventScroll:!0}),this.input.selectionStart=ce,this.input.selectionEnd=ce,x.continue||(this.lookBackIndex=ce,this.match=null),this.expander.dispatchEvent(new CustomEvent("text-expander-committed",{cancelable:!1,detail:{input:this.input}}))}onBlur(){if(this.interactingWithList){this.interactingWithList=!1;return}this.deactivate()}onPaste(){this.justPasted=!0}async onInput(){if(this.justPasted){this.justPasted=!1;return}const o=this.findMatch();if(o){this.match=o;const d=await this.notifyProviders(o);if(!this.match)return;d?this.activate(o,d):this.deactivate()}else this.match=null,this.deactivate()}findMatch(){const o=this.input.selectionEnd||0,d=this.input.value;o<=this.lookBackIndex&&(this.lookBackIndex=o-1);for(const{key:g,multiWord:v}of this.expander.keys){const A=Ma(d,g,o,{multiWord:v,lookBackIndex:this.lookBackIndex,lastMatchPosition:this.match?this.match.position:null});if(A)return{text:A.text,key:g,position:A.position}}}async notifyProviders(o){const d=[],g=I=>d.push(I),v=new CustomEvent("text-expander-change",{cancelable:!0,detail:{provide:g,text:o.text,key:o.key}});return this.expander.dispatchEvent(v)?(await Promise.all(d)).filter(I=>I.matched).map(I=>I.fragment)[0]:void 0}onMousedown(){this.interactingWithList=!0}onKeydown(o){o.key==="Escape"&&(this.match=null,this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex,o.stopImmediatePropagation(),o.preventDefault()))}};class Qi extends HTMLElement{get keys(){const o=this.getAttribute("keys"),d=o?o.split(" "):[],g=this.getAttribute("multiword"),v=g?g.split(" "):[],A=v.length===0&&this.hasAttribute("multiword");return d.map(k=>({key:k,multiWord:A||v.includes(k)}))}set keys(o){this.setAttribute("keys",o)}connectedCallback(){const o=this.querySelector('input[type="text"], textarea');if(!(o instanceof HTMLInputElement||o instanceof HTMLTextAreaElement))return;const d=new Ba(this,o);Pn.set(this,d)}disconnectedCallback(){const o=Pn.get(this);o&&(o.destroy(),Pn.delete(this))}dismiss(){const o=Pn.get(this);o&&o.dismissMenu()}}window.customElements.get("text-expander")||(window.TextExpanderElement=Qi,window.customElements.define("text-expander",Qi));async function Ua(f,o){const g=(await o.v1.customEmojis.list()).filter(A=>A.visibleInPicker),v=new aa(g,{keys:["shortcode"],findAllMatches:!0});return[g,v]}const gr=qr(Ua,{matchesArg:(f,o)=>f.instance===o.instance,maxAge:30*60*1e3}),gt=document.createElement("ul");gt.role="listbox";gt.className="text-expander-menu";const Da=16,Na=new IntersectionObserver(f=>{f.forEach(o=>{if(o.isIntersecting){const{left:d,width:g}=o.boundingClientRect,{innerWidth:v}=window;if(d+g>v){const A=oa()?"right":"left";gt.style[A]=v-g-Da+"px"}}})});Na.observe(gt);function pt(f){return f.replace(/[&<>"']/g,function(o){return"&#"+o.charCodeAt(0)+";"})}function ja({onTrigger:f=null,...o},d){const{_:g}=vt(),v=ue(),{masto:A,instance:k}=pi(),x=ue(),I=ue(""),S=ue(!1);return Wr(d,()=>({setStyle:T=>{v.current&&Object.assign(v.current.style,T)},activated:()=>S.current})),Se(()=>{x.current||gr(k,A).then(([,T])=>{x.current=T}).catch(T=>{})},[k,A]),Se(()=>{const T=v.current;if(!T)return;const ce=R=>{const{key:$,provide:fe,text:C}=R.detail;if(I.current=C,C===""){fe(Promise.resolve({matched:!1}));return}if($===":"){const ye=!!f,le=x.current?.search(C,{limit:5});let ve="";le?.forEach(({item:B})=>{const{shortcode:H,url:ae}=B;ve+=`
            <li role="option" data-value="${pt(H)}">
              <img src="${pt(ae)}" width="16" height="16" alt="" loading="lazy" />
              ${pt(H)}
            </li>`}),ye&&(ve+=`<li role="option" data-value="" data-more="${C}">More…</li>`),gt.innerHTML=ve,fe(Promise.resolve({matched:(le?.length||0)>0,fragment:gt}));return}const Q={"@":"accounts","＠":"accounts","#":"hashtags","＃":"hashtags"}[$];if(Q){fe(new Promise(async ye=>{try{let le;if(Q==="accounts")le=await A.v1.accounts.search.list({q:C,limit:5,resolve:!1});else{const H=await A.v2.search.list({type:Q,q:C,limit:5});le=H[Q]||H}if(C!==I.current)return;const ve=le;let B="";ve.forEach(H=>{const{name:ae,avatarStatic:be,displayName:Oe,username:Be,acct:ze,emojis:he,history:He,roles:Je,url:Ue}=H,Ke=sa(Oe,he),Y=Vr(Ue);if(ze)B+=`
                    <li role="option" data-value="${pt(ze)}">
                      <span class="avatar">
                        <img src="${pt(be)}" width="16" height="16" alt="" loading="lazy" />
                      </span>
                      <span>
                        <b>${Ke||Be}</b>
                        <br><span class="bidi-isolate">@${pt(ze)}</span>
                        ${Je?.map(xe=>` <span class="tag collapsed">
                            ${xe.name}
                            ${!!Y&&`<span class="more-insignificant">
                                ${Y}
                              </span>`}
                          </span>`)||""}
                      </span>
                    </li>
                  `;else{const xe=He?.reduce?.((Ee,qe)=>Ee+ +qe.uses,0);B+=`
                    <li role="option" data-value="${pt(ae)}">
                      <span class="grow">#<b>${pt(ae)}</b></span>
                      ${xe?`<span class="count">${ua(xe)}</span>`:""}
                    </li>
                  `}}),Q==="accounts"&&(B+=`<li role="option" data-value="" data-more="${C}">${g({id:"24misb"})}</li>`),gt.innerHTML=B,ye({matched:ve.length>0,fragment:gt})}catch{ye({matched:!1})}}));return}fe(Promise.resolve({matched:!1}))},P=R=>{const{key:$,item:fe}=R.detail,{value:C,more:Q}=fe.dataset;$===":"?(R.detail.value=C?`:${C}:`:"​",Q&&(R.detail.continue=!0,setTimeout(()=>{f?.({name:"custom-emojis",defaultSearchTerm:Q})},300))):$==="@"?(R.detail.value=C?`@${C}`:"​",Q&&(R.detail.continue=!0,setTimeout(()=>{f?.({name:"mention",defaultSearchTerm:Q})},300))):R.detail.value=`${$}${C}`},N=R=>{const{input:$}=R.detail;if($){const fe=new Event("input",{bubbles:!0});$.dispatchEvent(fe)}},z=()=>{S.current=!0},D=()=>{S.current=!1};return T.addEventListener("text-expander-change",ce),T.addEventListener("text-expander-value",P),T.addEventListener("text-expander-committed",N),T.addEventListener("text-expander-activate",z),T.addEventListener("text-expander-deactivate",D),()=>{T.removeEventListener("text-expander-change",ce),T.removeEventListener("text-expander-value",P),T.removeEventListener("text-expander-committed",N),T.removeEventListener("text-expander-activate",z),T.removeEventListener("text-expander-deactivate",D)}},[x.current,f,g,A]),r("text-expander",{ref:v,...o})}const vi=cr(ja),vr={300:Ct(5,"minute"),1800:Ct(30,"minute"),3600:Ct(1,"hour"),21600:Ct(6,"hour"),86400:Ct(1,"day"),259200:Ct(3,"day"),604800:Ct(1,"week")};function $a({lang:f,poll:o,disabled:d,onInput:g=()=>{},maxOptions:v,maxExpiration:A,minExpiration:k,maxCharactersPerOption:x}){const{_:I}=vt(),{options:S,expiresIn:T,multiple:ce}=o;return r("div",{class:`poll ${ce?"multiple":""}`,children:[r("div",{class:"poll-choices",children:S.map((P,N)=>r("div",{class:"poll-choice",children:[r(vi,{keys:":",class:"poll-field-container",children:r("input",{required:!0,type:"text",value:P,disabled:d,maxlength:x,placeholder:I({id:"LDUSXg",values:{0:N+1}}),lang:f,spellCheck:"true",autocomplete:"off",dir:"auto","data-allow-custom-emoji":"true",onInput:z=>{const{value:D}=z.target;S[N]=D,g(o)}})}),r("button",{type:"button",class:"plain4 poll-button",disabled:d||S.length<=1,onClick:()=>{S.splice(N,1),g(o)},title:I({id:"t/YqKh"}),children:"−"})]},N))}),r("div",{class:"poll-toolbar",children:[r("button",{type:"button",class:"plain2 poll-button",disabled:d||S.length>=v,onClick:()=>{S.push(""),g(o)},title:I({id:"m16xKo"}),children:"+"})," ",r("div",{class:"poll-config",children:[r("label",{class:"multiple-choices",children:[r("input",{type:"checkbox",checked:ce,disabled:d,onChange:P=>{const{checked:N}=P.target;o.multiple=N,g(o)}})," ",r(ie,{id:"zytZXj"})]}),r("label",{class:"expires-in",children:[r(ie,{id:"lkz6PL"})," ",r("select",{value:T,disabled:d,onChange:P=>{const{value:N}=P.target;o.expiresIn=N,g(o)},children:Object.entries(vr).filter(([P])=>P>=k&&P<=A).map(([P,N])=>r("option",{value:P,children:N()},P))})]}),r("div",{class:"spacer"}),r("button",{type:"button",class:"light danger small",disabled:d,onClick:()=>{g(null)},children:r(ie,{id:"CDpQAX"})})]})]})]})}const Ha=/[a-z0-9_]+([a-z0-9_.-]+[a-z0-9_]+)?/i,Ka=new RegExp(`(^|[^=\\/\\w])([@＠]${Ha.source}(?:@[\\p{L}\\w.-]+[\\w]+)?)`,"uig"),qa=new RegExp("(^|[^=\\/\\w])([#＃][\\p{L}\\p{N}_]+([\\p{L}\\p{N}_.]+[\\p{L}\\p{N}_]+)?)(?![\\/\\w])","iug"),Wa="[a-zA-Z0-9_]{2,}",Va=new RegExp(`(^|[^=\\/\\w])(:${Wa}:)(?=[^A-Za-z0-9_:]|$)`,"g"),Ga=new Intl.Segmenter;function Ya(f,{maxCharacters:o=1/0}){const{composerCharacterCount:d}=Le;if(d>o){let g="",v="";const A=Ga.segment(f);for(const{segment:k,index:x}of A)x<o?g+=k:v+=k;return v&&(v='<mark class="compose-highlight-exceeded">'+ai(v)+"</mark>"),ai(g)+v}return ai(f).replace(mr,'$2<mark class="compose-highlight-url">$3</mark>').replace(Ka,'$1<mark class="compose-highlight-mention">$2</mark>').replace(qa,'$1<mark class="compose-highlight-hashtag">$2</mark>').replace(Va,'$1<mark class="compose-highlight-emoji-shortcode">$2</mark>')}function Ji(f){if(!f)return;const{value:o,offsetHeight:d,scrollHeight:g,clientHeight:v}=f;if(d<window.innerHeight){const A=d-v,k=o?g+A+"px":null;f.style.height=k}}const Xa=async f=>{if(Hi){const g=await Hi.detect(f);if(g?.length)return g.slice(0,2).map(v=>v.detectedLanguage)}const{detectAll:o}=await Gr(async()=>{const{detectAll:g}=await import("./tinyld.light.node-D9KYf3Y3.js");return{detectAll:g}},[],import.meta.url),d=o(f);return d?.length?d.slice(0,2).map(g=>g.lang):null},Za=cr((f,o)=>{const[d,g]=ne(o.current?.value||""),{maxCharacters:v,onTrigger:A=null,...k}=f,x=ue();fr({ref:o,onResize:()=>{if(x.current&&o.current){const{height:P}=o.current.getBoundingClientRect();P&&x.current.setStyle({minHeight:P+"px"})}}});const I=ue(0),S=ue(),T=ca(P=>{if(!S.current)return;if(I.current>3){S.current.innerHTML="",S.current=null,T?.cancel?.();return}let N,z;I.current<=3&&(N=Date.now()),S.current.innerHTML=Ya(P,{maxCharacters:v})+`
`,I.current<=3&&(z=Date.now()),N&&z&&z-N>50&&I.current++},500),ce=Un(()=>{const P=S.current?.cloneNode(!0);if(!P)return;P.querySelectorAll("mark").forEach(z=>{z.remove()});const N=P.innerText?.trim();N&&(async()=>{const z=await Xa(N);z?.length&&A?.({name:"auto-detect-language",languages:z})})()},2e3);return r(vi,{ref:x,keys:"@ ＠ : # ＃",class:"compose-field-container",onTrigger:A,children:[r("textarea",{class:"compose-field",autoCapitalize:"sentences",autoComplete:"on",autoCorrect:"on",spellCheck:"true",dir:"auto",rows:"6",cols:"50",...k,ref:o,name:"status",value:d,onKeyDown:P=>{const{key:N,target:z}=P,D=x.current?.activated();if(N==="Enter"&&!(P.ctrlKey||P.metaKey||D)&&!P.isComposing)try{const{value:R,selectionStart:$}=z,C=R.slice(0,$).split(`
`).slice(-1)[0];if(C&&/^\s*(-|\d+\.)\s/.test(C)){const[Q,ye,le,ve,B]=C.match(/^(\s*)(-|\d+\.)(\s+)(.+)?/)||[];if(B){P.preventDefault();const[H]=le.match(/\d+/)||[],ae=H?`${+H+1}.`:"-",be=`
${ye}${ae}${ve}`;z.setRangeText(be,$,$);const Oe=$+be.length;z.setSelectionRange(Oe,Oe)}else{const H=$-C.length;z.setRangeText("",H,$)}Ji(z),z.dispatchEvent(new Event("input"))}}catch{}S.current&&(S.current.scrollTop=z.scrollTop)},onInput:P=>{const{target:N}=P,z=N.value;g(z),Ji(N),f.onInput?.(P),T(z),ce()},onScroll:P=>{if(S.current){const{scrollTop:N}=P.target;S.current.scrollTop=N}},onPaste:P=>{try{const N=P.clipboardData.getData("text").trim();N&&A?.({name:"pasted-link",url:N})}catch{}}}),r("div",{ref:S,class:"compose-highlight","aria-hidden":"true"})]})}),hi=100,sn=1,er=2,tr=.5,br=lr(({emoji:f,onClick:o,showCode:d})=>{const g=v=>{const k=v.currentTarget.closest("main");if(k){const x=k.getBoundingClientRect(),I=v.currentTarget.getBoundingClientRect(),S=v.currentTarget.classList;I.left<x.left+88?(S.add("edge-left"),S.remove("edge-right")):I.right>x.right-88?(S.add("edge-right"),S.remove("edge-left")):S.remove("edge-left","edge-right")}};return r("button",{type:"button",className:"plain4",onClick:o,"data-title":d?void 0:f.shortcode,onPointerEnter:g,onFocus:g,children:[r("picture",{children:[!!f.staticUrl&&r("source",{srcSet:f.staticUrl,media:"(prefers-reduced-motion: reduce)"}),r("img",{className:"shortcode-emoji",src:f.url||f.staticUrl,alt:f.shortcode,width:"24",height:"24",loading:"lazy",decoding:"async"})]}),d&&r(jt,{children:[" ",r("code",{children:f.shortcode})]})]})}),Qa=lr(({emojis:f,onSelect:o})=>{const{i18n:d}=vt(),[g,v]=ne(hi),A=f.length>g;return r("section",{children:[f.slice(0,g).map(k=>r(br,{emoji:k,onClick:()=>{o(`:${k.shortcode}:`)}},k.shortcode)),A&&r("button",{type:"button",class:"plain small",onClick:()=>v(g+hi),children:r(ie,{id:"iAB71E",values:{0:d.number(f.length-g)}})})]})}),un="composer-customEmojiSize";function Ja({masto:f,instance:o,onClose:d=()=>{},onSelect:g=()=>{},defaultSearchTerm:v}){const{_:A}=vt(),[k,x]=ne("default"),I=ue([]),[S,T]=ne([]),ce=Nt(()=>nt.account.get("recentlyUsedCustomEmojis")||[]),P=ue();Se(()=>{x("loading"),(async()=>{try{const[B,H]=await gr(o,f);P.current=H,T(B),x("default")}catch{x("error")}})()},[]);const N=Nt(()=>{const B={"--recent--":ce.filter(ae=>S.find(be=>be.shortcode===ae.shortcode))},H=[];return S.forEach(ae=>{if(I.current?.push?.(ae),!ae.category){H.push(ae);return}B[ae.category]||(B[ae.category]=[]),B[ae.category].push(ae)}),H.length&&(B["--others--"]=H),B},[S]),z=ue(),[D,R]=ne(null),[$,fe]=ne(nt.local.get(un)||sn),C=_n(()=>{const B=Math.max(sn,$-tr);fe(B),B===sn?nt.local.del(un):nt.local.set(un,B)},[$]),Q=_n(()=>{const B=Math.min(er,$+tr);fe(B),B===sn?nt.local.del(un):nt.local.set(un,B)},[$]),ye=_n(B=>{const{value:H}=B.target;if(H){const ae=P.current?.search(H,{limit:hi});R(ae.map(be=>be.item)),z.current?.scrollTo?.(0,0)}else R(null)},[S]);Se(()=>{v&&S?.length&&ye({target:{value:v}})},[v,ye,S]);const le=_n(B=>{g?.(B),d?.(),queueMicrotask(()=>{let H=nt.account.get("recentlyUsedCustomEmojis")||[];const ae=H.findIndex(be=>be.shortcode===B.shortcode);ae!==-1?(H.splice(ae,1),H.unshift(B)):(H.unshift(B),H=H.filter(be=>I.current?.find?.(Oe=>Oe.shortcode===be.shortcode)),H=H.slice(0,10)),nt.account.set("recentlyUsedCustomEmojis",H)})},[g]),ve=ue();return Se(()=>{ve.current&&(ve.current.focus(),ve.current.value&&(ve.current.selectionStart=ve.current.value.length,ve.current.selectionEnd=ve.current.value.length))},[]),r("div",{id:"custom-emojis-sheet",class:"sheet",style:{"--custom-emoji-size":$},children:[!!d&&r("button",{type:"button",class:"sheet-close",onClick:d,children:r(ee,{icon:"x",alt:A({id:"yz7wBu"})})}),r("header",{children:[r("div",{children:[r("b",{children:r(ie,{id:"8i6Ueo"})})," ",k==="loading"?r(Bn,{}):r("small",{class:"insignificant",children:[" • ",o]})]}),r("form",{onSubmit:B=>{B.preventDefault();const H=D[0];H&&le(`:${H.shortcode}:`)},children:r("input",{ref:ve,type:"search",placeholder:A({id:"EarrCe"}),onInput:ye,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellCheck:"false",dir:"auto",defaultValue:v||""})})]}),r("main",{ref:z,children:[D!==null?r("ul",{class:"custom-emojis-matches custom-emojis-list",children:D.map(B=>r("li",{class:"custom-emojis-match",children:r(br,{emoji:B,onClick:()=>{le(`:${B.shortcode}:`)},showCode:!0})},B.shortcode))}):r("div",{class:"custom-emojis-list",children:[k==="error"&&r("div",{class:"ui-state",children:r("p",{children:r(ie,{id:"Kzwsg2"})})}),k==="default"&&Object.entries(N).map(([B,H])=>!!H?.length&&r("div",{class:"section-container",children:[r("div",{class:"section-header",children:{"--recent--":A({id:"uabU9X"}),"--others--":A({id:"NuKR0h"})}[B]||B}),r(Qa,{emojis:H,onSelect:le})]}))]}),r("div",{class:"size-range",children:[r("button",{type:"button",class:"plain4",onClick:C,disabled:$<=sn,children:r(ee,{icon:"zoom-out",size:"l",alt:A({id:"FjkaiT"})})}),r("button",{type:"button",class:"plain4",onClick:Q,disabled:$>=er,children:r(ee,{icon:"zoom-in",size:"l",alt:A({id:"AWOSPo"})})})]})]})]})}function nr({hidden:f,supportedMimeTypes:o,maxMediaAttachments:d,mediaAttachments:g,disabled:v=!1,setMediaAttachments:A}){return r("input",{type:"file",hidden:f,accept:o?.join(","),multiple:d===void 0||d-g>=2,disabled:v,onChange:k=>{const x=k.target.files;if(!x)return;const I=Array.from(x).map(S=>({file:S,type:S.type,size:S.size,url:URL.createObjectURL(S),id:null,description:null}));g.length+I.length>d?alert(cn._({id:"ctFhjs",values:{maxMediaAttachments:d}})):A(S=>S.concat(I)),k.target.value=""}})}const eo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.0'%20viewBox='0%200%20641%20223'%3e%3cpath%20fill='%23aaa'%20d='M86%20214c-9-1-17-4-24-8l-6-3-5-5-5-4-4-6-4-6-3-8-2-8v-27l2-9%203-9%204-6%204-6%205-5%205-5%207-3%206-4%207-2%207-2%2012-1h12l7%201%208%202%207%204%207%203%205%205%205%204-10%2010-10%209-4-3-10-5-5-1H88l-5%202-6%203-3%204-4%204-2%205-2%206v6l-1%207%201%207%202%207%203%205%202%204%204%203%204%203%205%202%206%202h9l10-1%205-2%206-3v-16H91v-27h59v54l-1%203-2%203-5%204-4%204-5%203-5%202-8%202-8%202-10%201H92l-6-1zm266-62V91h34v46h44V91h34v121h-34v-46h-44v46h-34v-61zm-182-1V90h34v121h-34v-60zm59-1V90h35l36%201%205%202c3%200%208%202%2010%204l5%202%204%205%205%204%203%207%203%207%201%2013v13l-4%206-3%207-4%204-5%205-5%202-5%203-6%202-5%201-18%201h-18v32h-34v-61zm67-2%203-2%202-4%202-5v-5l-2-4-2-4-3-2-3-3h-30v31h30l3-2zm226%2039v-24l-8-12-18-28a1751%201751%200%200%200-20-31v-2h39l7%2012%2012%2021%206%209%2013-21%2013-21h38v2l-41%2061-7%2010v48h-34v-24zM109%2066l-4-1-5-5-5-4-1-5-3-9v-5l1-5c2-7%203-10%208-15l4-4%207-2%207-2h7l6%201%205%202%205%202%203%204%204%203%202%206%202%205v13l-2%205-2%206-4%204-3%203-5%202-4%202-9%201h-9l-5-2zm22-11%204-2%203-4%202-5V34l-2-4-2-4-3-2-4-3-5-1h-6l-4%202-5%202-2%204-3%205-1%203v4l1%205%202%205%202%202%205%203%204%202h10l4-2zM37%2039V11h33l3%201%203%202%204%203%203%203%201%205%201%204v5l-1%204-3%204-3%205-4%201-3%202-11%201H49v16H37V39zm31%200%203-2%201-2%201-2v-4l-1-3-3-2-2-2H49v18h15l4-1zm107%2025a512%20512%200%200%200-19-53h14l4%2014%206%2019%201%204%201-1%207-19%205-17h9l6%2019%207%2018v-1l2-6%205-17%204-13h14v1l-4%2012-16%2041v2h-5l-5-1-6-15-6-15-1%201-3%207-6%2015-2%208h-11l-1-3zm74-25V11h42v11h-29v2l-1%205v4h29v11h-28v11h2l15%201h13v11h-43V39zm55%200V11h33l5%203%205%202%202%204%202%205v10l-2%203-1%204-5%203-5%203%205%205%208%2010%203%204h-14l-7-9-8-10h-9v19h-12V39zm33-3%202-3v-6l-3-3-2-3h-18v16h1v1h17l2-2zm26%203V11h42v11h-29l-1%206v5h29v11h-28v5l-1%205%201%201v1h30v11h-43V39zm54%200V11h17l18%201%204%202%205%203%202%204%203%204%202%206%201%206v5c-1%206-3%2012-6%2015l-3%204-5%203-5%202-17%201h-16V39zm33%2014%205-5%202-3v-6l-1-6-1-3-1-3-4-3-3-2h-5l-6-1-3%201h-3v34h9l8-1%203-2zm50-14V11h34l5%202%204%202%202%203%202%203v9l-2%202-3%204-1%201%203%203%203%204%201%203%201%204-1%204-1%204-3%203-3%203-5%201-5%201h-31V39zm34%2015%202-1v-6l-2-2-2-2h-20v13h20l2-2zm-3-22%204-2v-6l-2-1-2-2h-19v12h16l4-1zm42%2024V45l-6-9-11-17-5-8h15l4%208%207%2011%202%203%207-11%207-11h14l-11%2016-11%2017v23h-12V56z'/%3e%3c/svg%3e",to={BASE_URL:"./",DEV:!1,MODE:"production",PHANPY_CLIENT_NAME:"Blaede Phanpy",PHANPY_DEFAULT_INSTANCE:"mastodon.blaede.family",PHANPY_DEFAULT_INSTANCE_REGISTRATION_URL:"https://mastodon.blaede.family/auth/sign_up",PHANPY_GIPHY_API_KEY:"48JGsrSS1XE5w4nWe9c9hqxPbsfRWR0e",PHANPY_LINGVA_INSTANCES:"lingva.phanpy.social lingva.lunar.icu lingva.garudalinux.org translate.plausibility.cloud",PHANPY_PRIVACY_POLICY_URL:"https://mastodon.blaede.family/privacy-policy",PHANPY_TRANSLANG_INSTANCES:"translang.phanpy.social",PHANPY_WEBSITE:"https://phanpy.blaede.family",PROD:!0,SSR:!1,VITE_APP_ENV:"production"},{PHANPY_GIPHY_API_KEY:no}=to,ci=20;function io({onClose:f=()=>{},onSelect:o=()=>{}}){const{i18n:d,_:g}=vt(),[v,A]=ne("default"),[k,x]=ne([]),I=ue(null),S=ue(null),T=ue(0),ce=ue(null);function P({offset:z}){S.current?.value&&(A("loading"),ce.current?.scrollTo?.({top:0,left:0,behavior:"smooth"}),(async()=>{try{const D={api_key:no,q:S.current.value,rating:"g",limit:ci,bundle:"messaging_non_clips",offset:z,lang:d.locale||"en"},R=await fetch("https://api.giphy.com/v1/gifs/search?"+new URLSearchParams(D),{referrerPolicy:"no-referrer"}).then($=>$.json());T.current=R.pagination?.offset||0,x(R),A("results")}catch{A("error")}})())}Se(()=>{S.current?.focus()},[]);const N=Un(()=>{P({offset:0})},1e3);return r("div",{id:"gif-picker-sheet",class:"sheet",children:[!!f&&r("button",{type:"button",class:"sheet-close",onClick:f,children:r(ee,{icon:"x",alt:g({id:"yz7wBu"})})}),r("header",{children:r("form",{ref:I,onSubmit:z=>{z.preventDefault(),P({offset:0})},children:[r("input",{ref:S,type:"search",name:"q",placeholder:g({id:"wxlF9B"}),required:!0,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellCheck:"false",dir:"auto",onInput:N}),r("input",{type:"image",class:"powered-button",src:eo,width:"86",height:"30",alt:g({id:"c1Q/eU"})})]})}),r("main",{ref:ce,class:v==="loading"?"loading":"",children:[v==="default"&&r("div",{class:"ui-state",children:r("p",{class:"insignificant",children:r(ie,{id:"9KEidY"})})}),v==="loading"&&!k?.data?.length&&r("div",{class:"ui-state",children:r(Bn,{abrupt:!0})}),k?.data?.length>0?r(jt,{children:[r("ul",{children:k.data.map(z=>{const{id:D,images:R,title:$,alt_text:fe}=z,{fixed_height_small:C,fixed_height_downsampled:Q,fixed_height:ye,original:le}=R,ve=C?.url?C:Q?.url?Q:ye;let{url:B,webp:H,width:ae,height:be}=ve;+be>100&&(ae=ae/be*100,be=100);const Oe=URL.parse(B),Be=Oe.origin+Oe.pathname;let ze;if(H){const he=URL.parse(H);ze=he.origin+he.pathname}return r("li",{children:r("button",{type:"button",onClick:()=>{const{mp4:he,url:He}=le,Je=he||He,Ue=URL.parse(Je),Ke=Ue.origin+Ue.pathname;f(),o({url:Ke,type:he?"video/mp4":"image/gif",alt_text:fe||$})},children:r("figure",{style:{"--figure-width":ae+"px"},children:[r("picture",{children:[ze&&r("source",{srcset:ze,type:"image/webp"}),r("img",{src:Be,width:ae,height:be,loading:"lazy",decoding:"async",alt:fe,referrerpolicy:"no-referrer",onLoad:he=>{he.target.style.backgroundColor="transparent"}})]}),r("figcaption",{children:fe||$})]})})},D)})}),r("p",{class:"pagination",children:[k.pagination?.offset>0&&r("button",{type:"button",class:"light small",disabled:v==="loading",onClick:()=>{P({offset:k.pagination?.offset-ci})},children:[r(ee,{icon:"chevron-left"}),r("span",{children:r(ie,{id:"DHhJ7s"})})]}),r("span",{}),k.pagination?.offset+k.pagination?.count<k.pagination?.total_count&&r("button",{type:"button",class:"light small",disabled:v==="loading",onClick:()=>{P({offset:k.pagination?.offset+ci})},children:[r("span",{children:r(ie,{id:"hXzOVo"})})," ",r(ee,{icon:"chevron-right"})]})]})]}):v==="results"&&r("div",{class:"ui-state",children:r("p",{children:"No results"})}),v==="error"&&r("div",{class:"ui-state",children:r("p",{children:r(ie,{id:"PbFw9n"})})})]})]})}var ln={exports:{}};const ro={},ao=Object.freeze(Object.defineProperty({__proto__:null,default:ro},Symbol.toStringTag,{value:"Module"})),li=Yr(ao);var oo=ln.exports,ir;function so(){return ir||(ir=1,function(f,o){(function(d,g){f.exports=g()})(typeof self<"u"?self:oo,function(){return function(){"use strict";var d={d:function(e,t){for(var n in t)d.o(t,n)&&!d.o(e,n)&&Object.defineProperty(e,n,{enumerable:1,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:1})}},g={};function v(e,t,n){for(var a=[],s=0;s<n&&t+s<e.byteLength;s++)a.push(e.getUint8(t+s));return k(a)}function A(e,t){for(var n=[],a=0;t+a<e.byteLength;){var s=e.getUint8(t+a);if(s===0)break;n.push(s),a++}return k(n)}function k(e){return e.map(function(t){return String.fromCharCode(t)}).join("")}function x(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}d.r(g),d.d(g,{default:function(){return $r},errors:function(){return Hr},load:function(){return Ui},loadView:function(){return ei}});var I=void 0;function S(e){return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(e)}function T(e){var t=function(n){if(S(n)!="object"||!n)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var s=a.call(n,"string");if(S(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return n+""}(e);return S(t)=="symbol"?t:t+""}var ce=function(){return e=function n(a){if(function(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")}(this,n),function(s){return S(s)!=="object"||s.length===void 0||s.readUInt8===void 0||s.readUInt16LE===void 0||s.readUInt16BE===void 0||s.readUInt32LE===void 0||s.readUInt32BE===void 0||s.readInt32LE===void 0||s.readInt32BE===void 0}(a))throw Error("DataView: Passed buffer type is unsupported.");this.buffer=a,this.byteLength=this.buffer.length},(t=[{key:"getUint8",value:function(n){return this.buffer.readUInt8(n)}},{key:"getUint16",value:function(n,a){return a?this.buffer.readUInt16LE(n):this.buffer.readUInt16BE(n)}},{key:"getUint32",value:function(n,a){return a?this.buffer.readUInt32LE(n):this.buffer.readUInt32BE(n)}},{key:"getInt32",value:function(n,a){return a?this.buffer.readInt32LE(n):this.buffer.readInt32BE(n)}}])&&function(n,a){for(var s=0;s<a.length;s++){var u=a[s];u.enumerable=u.enumerable||0,u.configurable=1,"value"in u&&(u.writable=1),Object.defineProperty(n,T(u.key),u)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:0}),e;var e,t}();function P(e){return e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600}var N=2,z=65496,D=2,R=4,$=2,fe=10,C=18,Q=33,ye=79,le=65472,ve=65474,B=65476,H=65499,ae=65501,be=65498,Oe=65504,Be=65505,ze=65517,he=65519,He=65534,Je=65535,Ue="Exif",Ke="http://ns.adobe.com/xap/1.0/\0",Y="http://ns.adobe.com/xmp/extension/\0",xe="Photoshop 3.0";function Ee(e,t){var n=Ue.length;return e.getUint16(t)===Be&&v(e,t+R,n)===Ue&&e.getUint8(t+R+n)===0}function qe(e,t){return e.getUint16(t)===Be&&function(n,a){var s=Ke.length;return v(n,a+R,s)===Ke}(e,t)}function De(e,t){return e.getUint16(t)===Be&&function(n,a){var s=Y.length;return v(n,a+R,s)===Y}(e,t)}function Ye(e,t){return{dataOffset:e+Q,length:t-(Q-$)}}function Ne(e,t){return{dataOffset:e+ye,length:t-(ye-$)}}function te(e,t){var n=xe.length;return e.getUint16(t)===ze&&v(e,t+R,n)===xe&&e.getUint8(t+R+n)===0}function de(e,t){var n=e.getUint16(t);return n>=Oe&&n<=he||n===He||n===le||n===ve||n===B||n===H||n===ae||n===be}function we(e,t){return e.getUint16(t)===Je}var oe=`PNG\r

`,Fe=4,Te=4,X=0,Ce=Fe,re=Fe+Te,it="XML:com.adobe.xmp\0",We="tEXt",Ve="iTXt",rt="zTXt",ct="pHYs",$t="tIME",Ht="eXIf";function fn(e,t){return v(e,t+Ce,Te)===Ve&&v(e,t+re,it.length)===it}function hn(e,t,n){var a=v(e,t+Ce,Te);return a===We||a===Ve||a===rt&&n}function Ie(e,t){return v(e,t+Ce,Te)===Ht}function Pe(e,t){var n=[ct,$t],a=v(e,t+Ce,Te);return n.includes(a)}function Dn(e,t){t+=re+it.length+1+1;for(var n=0;n<2&&t<e.byteLength;)e.getUint8(t)===0&&n++,t++;if(!(n<2))return t}function Nn(e,t,n,a,s,u,c,h){if(h===void 0)return[];for(var p=[],b=n.items,y=0;y<h;y++){var l={extents:[]};l.itemId=et(e,b,t),b+=a.item.itemId,l.constructionMethod=t===1||t===2?15&e.getUint16(b):void 0,b+=a.item.constructionMethod,l.dataReferenceIndex=e.getUint16(b),b+=a.item.dataReferenceIndex,l.baseOffset=bt(e,b,a.item.baseOffset),b+=a.item.baseOffset,l.extentCount=e.getUint16(b),b+=a.item.extentCount;for(var E=0;E<l.extentCount;E++){var F={};F.extentIndex=Xe(e,t,b,c),b+=a.item.extent.extentIndex,F.extentOffset=bt(e,b,s),b+=a.item.extent.extentOffset,F.extentLength=bt(e,b,u),b+=a.item.extent.extentLength,l.extents.push(F)}p.push(l)}return p}function et(e,t,n){return n<2?e.getUint16(t):n===2?e.getUint32(t):void 0}function Xe(e,t,n,a){if((t===1||t===2)&&a>0)return bt(e,n,a)}function bt(e,t,n){return n===4?e.getUint32(t):n===8?(console.warn("This file uses an 8-bit offset which is currently not supported by ExifReader. Contact the maintainer to get it fixed."),function(a,s){return a.getUint32(s+4)}(e,t)):0}var yt=1165519206,lt=1835625829;function at(e,t){var n=function(h,p){var b=h.getUint32(p);return function(y){return y===0}(b)?{length:h.byteLength-p,contentOffset:p+4+4}:function(y){return y===1}(b)&&function(y,l){return y.getUint32(l+8)===0}(h,p)?{length:h.getUint32(p+12),contentOffset:p+4+4+8}:{length:b,contentOffset:p+4+4}}(e,t),a=n.length,s=n.contentOffset;if(!(a<8)){var u=e.getUint32(t+4);if(u===1718909296)return function(h,p,b){return{type:"ftyp",majorBrand:v(h,p,4),length:b}}(e,s,a);if(u===1768977008)return function(h,p,b,y){return{type:"iprp",subBoxes:xt(h,b,y-(b-p)),length:y}}(e,t,s,a);if(u===1768973167)return function(h,p,b,y){return{type:"ipco",properties:xt(h,b,y-(b-p)),length:y}}(e,t,s,a);if(u===1668246642)return function(h,p,b){return{type:"colr",icc:pn(h,p),length:b}}(e,s,a);var c=e.getUint8(s);return u===1835365473?function(h,p,b,y){return{type:"meta",subBoxes:xt(h,b+3,y-(b+3-p)),length:y}}(e,t,s+1,a):u===1768714083?function(h,p,b,y){var l=function(se,pe){var ge={item:{dataReferenceIndex:2,extentCount:2,extent:{}}};se<2?(ge.itemCount=2,ge.item.itemId=2):se===2&&(ge.itemCount=4,ge.item.itemId=4),ge.item.constructionMethod=se===1||se===2?2:0;var Ae={offsetSize:pe,lengthSize:pe,baseOffsetSize:pe+1,indexSize:pe+1};return Ae.itemCount=pe+2,Ae.items=Ae.itemCount+ge.itemCount,Ae.item={itemId:0},Ae.item.constructionMethod=Ae.item.itemId+ge.item.itemId,Ae.item.dataReferenceIndex=Ae.item.constructionMethod+ge.item.constructionMethod,{offsets:Ae,sizes:ge}}(p,b+3),E=l.offsets,F=l.sizes,O=h.getUint8(E.offsetSize)>>4;F.item.extent.extentOffset=O;var K=15&h.getUint8(E.lengthSize);F.item.extent.extentLength=K;var W=h.getUint8(E.baseOffsetSize)>>4;F.item.baseOffset=W;var G=function(se,pe,ge){if(ge===1||ge===2)return 15&se.getUint8(pe)}(h,E.indexSize,p);F.item.extent.extentIndex=G!==void 0?G:0;var ke=function(se,pe,ge){return ge<2?se.getUint16(pe):ge===2?se.getUint32(pe):void 0}(h,E.itemCount,p);return{type:"iloc",items:Nn(h,p,E,F,O,K,G,ke),length:y}}(e,c,s+1,a):u===1768517222?function(h,p,b,y,l){var E=function(O,K){var W={entryCount:K+3},G={};return G.entryCount=O===0?2:4,W.itemInfos=W.entryCount+G.entryCount,{offsets:W}}(b,y),F=E.offsets;return{type:"iinf",itemInfos:xt(h,F.itemInfos,l-(F.itemInfos-p)),length:l}}(e,t,c,s+1,a):u===1768842853?function(h,p,b,y,l){y+=3;var E={type:"infe",length:l};return b!==0&&b!==1||(E.itemId=h.getUint16(y),y+=2,E.itemProtectionIndex=h.getUint16(y),y+=2,E.itemName=A(h,y),y+=E.itemName.length+1),b>=2&&(b===2?(E.itemId=h.getUint16(y),y+=2):b===3&&(E.itemId=h.getUint32(y),y+=4),E.itemProtectionIndex=h.getUint16(y),y+=2,E.itemType=h.getUint32(y),y+=4,E.itemName=A(h,y),y+=E.itemName.length+1,E.itemType===lt?(E.contentType=A(h,y),p+l>(y+=E.contentType.length+1)&&(E.contentEncoding=A(h,y),y+=E.contentEncoding.length+1)):E.itemType===1970432288&&(E.itemUri=A(h,y),y+=E.itemUri.length+1)),E}(e,t,c,s+1,a):{type:void 0,length:a}}}function dt(e,t){return e.subBoxes.find(function(n){return n.type==="iloc"}).items.find(function(n){return n.itemId===t})}function pn(e,t){var n=v(e,t,4);if(n==="prof"||n==="rICC")return{offset:t+4,length:e.getUint32(t+4),chunkNumber:1,chunksTotal:1}}function xt(e,t,n){for(var a=[yt,lt],s=[],u=t;u<t+n;){var c=at(e,u);if(c===void 0)break;c.type===void 0||c.itemType!==void 0&&a.indexOf(c.itemType)===-1||s.push(c),u+=c.length}return s}var Kt=0,Tt="<?xpacket begin",qt={parseAppMarkers:function(e,t){if(function(n){return!!n&&n.byteLength>=N&&n.getUint16(0)===z}(e))return wt(function(n){for(var a,s,u,c,h=D;h+R+5<=n.byteLength;){if(Ee(n,h))a=n.getUint16(h+$),s=h+fe;else if(qe(n,h))c||(c=[]),a=n.getUint16(h+$),c.push(Ye(h,a));else if(De(n,h))c||(c=[]),a=n.getUint16(h+$),c.push(Ne(h,a));else if(te(n,h))a=n.getUint16(h+$),u=h+C;else{if(!de(n,h)){if(we(n,h)){h++;continue}break}a=n.getUint16(h+$)}h+=$+a}return{hasAppMarkers:h>D,fileDataOffset:void 0,jfifDataOffset:void 0,tiffHeaderOffset:s,iptcDataOffset:u,xmpChunks:c,iccChunks:void 0,mpfDataOffset:void 0}}(e),"jpeg","JPEG");if(function(n){return!!n&&v(n,0,oe.length)===oe}(e))return wt(function(n,a){for(var s={hasAppMarkers:0},u=oe.length;u+Fe+Te<=n.byteLength;){if(fn(n,u)){var c=Dn(n,u);c!==void 0&&(s.hasAppMarkers=1,s.xmpChunks=[{dataOffset:c,length:n.getUint32(u+X)-(c-(u+re))}])}else if(hn(n,u,a)){s.hasAppMarkers=1;var h=v(n,u+Ce,Te);s.pngTextChunks||(s.pngTextChunks=[]),s.pngTextChunks.push({length:n.getUint32(u+X),type:h,offset:u+re})}else Ie(n,u)?(s.hasAppMarkers=1,s.tiffHeaderOffset=u+re):Pe(n,u)&&(s.hasAppMarkers=1,s.pngChunkOffsets||(s.pngChunkOffsets=[]),s.pngChunkOffsets.push(u+X));u+=n.getUint32(u+X)+Fe+Te+4}return s}(e,t),"png","PNG");if(function(n){if(!n)return 0;try{var a=at(n,0);return a&&["heic","heix","hevc","hevx","heim","heis","hevm","hevs","mif1"].indexOf(a.majorBrand)!==-1}catch{return 0}}(e))return wt(function(n){return function(a){var s={},u=function(c){for(var h=0;h+4+4<=c.byteLength;){var p=at(c,h);if(p===void 0)break;if(p.type==="meta")return p;h+=p.length}}(a);return u?(s.tiffHeaderOffset=function(c,h){try{var p=function(y){return y.subBoxes.find(function(l){return l.type==="iinf"}).itemInfos.find(function(l){return l.itemType===yt})}(h).itemId,b=dt(h,p);return function(y,l){return l+4+y.getUint32(l)}(c,b.baseOffset+b.extents[0].extentOffset)}catch{return}}(a,u),s.xmpChunks=function(c){try{var h=function(y){return y.subBoxes.find(function(l){return l.type==="iinf"}).itemInfos.find(function(l){return l.itemType===lt&&l.contentType==="application/rdf+xml"})}(c).itemId,p=dt(c,h),b=dt(c,h).extents[0];return[{dataOffset:p.baseOffset+b.extentOffset,length:b.extentLength}]}catch{return}}(u),s.hasAppMarkers=s.tiffHeaderOffset!==void 0||s.xmpChunks!==void 0||s.iccChunks!==void 0,s):{hasAppMarkers:0}}(n)}(e),"heic","HEIC");if(function(n){return!!n&&v(n,0,4)==="RIFF"&&v(n,8,4)==="WEBP"}(e))return wt(function(n){for(var a,s,u,c=12,h=0;c+8<n.byteLength;){var p=v(n,c,4),b=n.getUint32(c+4,1);p==="EXIF"?(h=1,a=v(n,c+8,6)==="Exif\0\0"?c+8+6:c+8):p==="XMP "?(h=1,s=[{dataOffset:c+8,length:b}]):p==="VP8X"&&(h=1,u=c+8),c+=8+(b%2==0?b:b+1)}return{hasAppMarkers:h,tiffHeaderOffset:a,xmpChunks:s,iccChunks:void 0,vp8xChunkOffset:u}}(e),"webp","WebP");if(function(n){return!!n&&v(n,Kt,Tt.length)===Tt}(e))return wt(function(n){var a=[];return a.push({dataOffset:Kt,length:n.byteLength}),{xmpChunks:a}}(e),"xml","XML");throw Error("Invalid image format")}};function wt(e,t,n){return x({},e,{fileType:{value:t,description:n}})}var kt=18761,Lt=kt,It={270:"ImageDescription",700:"ApplicationNotes",33723:"IPTC-NAA",34665:"Exif IFD Pointer"};function ft(e){return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(e)}function Ze(e,t,n){return(t=function(a){var s=function(u){if(ft(u)!="object"||!u)return u;var c=u[Symbol.toPrimitive];if(c!==void 0){var h=c.call(u,"string");if(ft(h)!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return u+""}(a);return ft(s)=="symbol"?s:s+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:1,configurable:1,writable:1}):e[t]=n,e}var _t=x({},It,{}),Wt="exif",zt="interoperability",Pt="pentax",Me=Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze({},"0th",_t),"1st",It),Wt,_t),"gps",{}),zt,{}),"mpf",{}),"canon",{}),Pt,{}),mn={1:1,2:1,3:2,4:4,5:8,7:1,9:4,10:8,13:4},ht={BYTE:1,ASCII:2,SHORT:3,LONG:4,RATIONAL:5,UNDEFINED:7,SLONG:9,SRATIONAL:10,IFD:13},U={getAsciiValue:function(e){return e.map(function(t){return String.fromCharCode(t)})},getByteAt:gn,getAsciiAt:function(e,t){return e.getUint8(t)},getShortAt:function(e,t,n){return e.getUint16(t,n===Lt)},getLongAt:Mt,getRationalAt:function(e,t,n){return[Mt(e,t,n),Mt(e,t+4,n)]},getUndefinedAt:function(e,t){return gn(e,t)},getSlongAt:Vt,getSrationalAt:function(e,t,n){return[Vt(e,t,n),Vt(e,t+4,n)]},getIfdPointerAt:function(e,t,n){return Mt(e,t,n)},typeSizes:mn,tagTypes:ht,getTypeSize:function(e){if(ht[e]===void 0)throw Error("No such type found.");return mn[ht[e]]}};function gn(e,t){return e.getUint8(t)}function Mt(e,t,n){return e.getUint32(t,n===Lt)}function Vt(e,t,n){return e.getInt32(t,n===Lt)}var vn={1:U.getByteAt,2:U.getAsciiAt,3:U.getShortAt,4:U.getLongAt,5:U.getRationalAt,7:U.getUndefinedAt,9:U.getSlongAt,10:U.getSrationalAt,13:U.getIfdPointerAt};function Ot(e,t,n,a,s,u){var c=U.getTypeSize("SHORT"),h={},p=function(l,E,F){return E+U.getTypeSize("SHORT")<=l.byteLength?U.getShortAt(l,E,F):0}(e,a,s);a+=c;for(var b=0;b<p&&!(a+12>e.byteLength);b++){var y=tt(e,t,n,a,s,u);y!==void 0&&(h[y.name]={id:y.id,value:y.value,description:y.description},(y.name==="MakerNote"||t===Pt&&y.name==="LevelInfo")&&(h[y.name].__offset=y.__offset)),a+=12}return h}function tt(e,t,n,a,s,u){var c,h,p=U.getTypeSize("SHORT"),b=p+U.getTypeSize("SHORT"),y=b+U.getTypeSize("LONG"),l=U.getShortAt(e,a,s),E=U.getShortAt(e,a+p,s),F=U.getLongAt(e,a+b,s);if(U.typeSizes[E]!==void 0&&(u||Me[t][l]!==void 0)){c=function(W,G){return U.typeSizes[W]*G<=U.getTypeSize("LONG")}(E,F)?Gt(e,h=a+y,E,F,s):function(W,G,ke,se,pe){return G+ke+U.typeSizes[se]*pe<=W.byteLength}(e,n,h=U.getLongAt(e,a+y,s),E,F)?Gt(e,n+h,E,F,s,l===33723):"<faulty value>",E===U.tagTypes.ASCII&&(c=function(W){try{return W.map(function(G){return decodeURIComponent(escape(G))})}catch{return W}}(c=function(W){for(var G=[],ke=0,se=0;se<W.length;se++)W[se]!=="\0"?(G[ke]===void 0&&(G[ke]=""),G[ke]+=W[se]):ke++;return G}(c)));var O="undefined-".concat(l),K=c;if(Me[t][l]!==void 0)if(Me[t][l].name!==void 0&&Me[t][l].description!==void 0){O=Me[t][l].name;try{K=Me[t][l].description(c)}catch{K=Yt(c)}}else E===U.tagTypes.RATIONAL||E===U.tagTypes.SRATIONAL?(O=Me[t][l],K=""+c[0]/c[1]):(O=Me[t][l],K=Yt(c));return{id:l,name:O,value:c,description:K,__offset:h}}}function Gt(e,t,n,a,s){var u=[];arguments.length>5&&arguments[5]!==void 0&&arguments[5]&&(a*=U.typeSizes[n],n=U.tagTypes.BYTE);for(var c=0;c<a;c++)u.push(vn[n](e,t,s)),t+=U.typeSizes[n];return n===U.tagTypes.ASCII?u=U.getAsciiValue(u):u.length===1&&(u=u[0]),u}function Yt(e){return e instanceof Array?e.join(", "):e}var Xt="Exif IFD Pointer",Zt="GPS Info IFD Pointer",Qt="Interoperability IFD Pointer",bn={read:function(e,t,n){var a=function(u,c){if(u.getUint16(c)===kt)return kt;if(u.getUint16(c)===19789)return 19789;throw Error("Illegal byte order value. Faulty image.")}(e,t),s=function(u,c,h,p){return Ot(u,"0th",c,function(b,y,l){return y+U.getLongAt(b,y+4,l)}(u,c,h),h,p)}(e,t,a,n);return{tags:s=yn(s=$n(s=jn(s,e,t,a,n),e,t,a,n),e,t,a,n),byteOrder:a}}};function jn(e,t,n,a,s){return e[Xt]!==void 0?x(e,Ot(t,Wt,n,n+e[Xt].value,a,s)):e}function $n(e,t,n,a,s){return e[Zt]!==void 0?x(e,Ot(t,"gps",n,n+e[Zt].value,a,s)):e}function yn(e,t,n,a,s){return e[Qt]!==void 0?x(e,Ot(t,zt,n,n+e[Qt].value,a,s)):e}var je={iptc:{632:"Caption/Abstract"}},xn=function(e,t){var n=function(){if(typeof TextDecoder<"u")return TextDecoder}();if(typeof n<"u"&&e!==void 0)try{return new n(e).decode(t instanceof DataView?t.buffer:Uint8Array.from(t))}catch{}return function(a){try{return decodeURIComponent(escape(a))}catch{return a}}(t.map(function(a){return String.fromCharCode(a)}).join(""))},wn={read:function(e,t,n){try{if(Array.isArray(e))return Jt(new DataView(Uint8Array.from(e).buffer),{size:e.length},0,n);var a=function(s,u){for(;u+12<=s.byteLength;){var c=Hn(s,u);if(kn(c))return{naaBlock:c,dataOffset:u+c.headerSize};u+=c.headerSize+c.size+En(c)}throw Error("No IPTC NAA resource block.")}(e,t);return Jt(e,a.naaBlock,a.dataOffset,n)}catch{return{}}}};function Hn(e,t){if(e.getUint32(t,0)!==943868237)throw Error("Not an IPTC resource block.");var n=e.getUint8(t+4+2),a=(n%2==0?n+1:n)+1;return{headerSize:6+a+4,type:e.getUint16(t+4),size:e.getUint32(t+4+2+a)}}function kn(e){return e.type===1028}function En(e){return e.size%2!=0?1:0}function Jt(e,t,n,a){for(var s={},u=void 0,c=n+t.size;n<c&&n<e.byteLength;){var h=m(e,n,s,u,a),p=h.tag,b=h.tagSize;if(p===null)break;p&&("encoding"in p&&(u=p.encoding),s[p.name]===void 0||p.repeatable===void 0?s[p.name]={id:p.id,value:p.value,description:p.description}:(s[p.name]instanceof Array||(s[p.name]=[{id:s[p.name].id,value:s[p.name].value,description:s[p.name].description}]),s[p.name].push({id:p.id,value:p.value,description:p.description}))),n+=5+b}return s}function m(e,t,n,a,s){if(function(b,y){return b.getUint8(y)!==28}(e,t))return{tag:null,tagSize:0};var u=e.getUint16(t+1),c=e.getUint16(t+3);if(!s&&!je.iptc[u])return{tag:void 0,tagSize:c};var h=function(b,y,l){for(var E=[],F=0;F<l;F++)E.push(b.getUint8(y+F));return E}(e,t+5,c),p={id:u,name:w(je.iptc[u],u,h),value:h,description:_(je.iptc[u],h,n,a)};return function(b){return je.iptc[b]&&je.iptc[b].repeatable}(u)&&(p.repeatable=1),function(b){return je.iptc[b]&&je.iptc[b].encoding_name!==void 0}(u)&&(p.encoding=je.iptc[u].encoding_name(h)),{tag:p,tagSize:c}}function w(e,t,n){return e?function(a){return typeof a=="string"}(e)?e:function(a){return typeof a.name=="function"}(e)?e.name(n):e.name:"undefined-".concat(t)}function _(e,t,n,a){if(function(s){return s&&s.description!==void 0}(e))try{return e.description(t,n)}catch{}return function(s,u){return s&&u instanceof Array}(e,t)?xn(a,t):t}var L=function(e){return Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},q=function(e){return"f/".concat(Number(e[0]/e[1]).toFixed(1))},V=function(e){return e[0]/e[1]+" mm"},j=function(e){var t=Math.pow(2,e[0]/e[1]);return t<=1?"".concat(Math.round(1/t)):"1/".concat(Math.round(t))},J=function(e){return""+Math.round(e[0]/e[1])},Z=function(e){return""+Math.round(e[0]/e[1])};function Ge(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var me={"tiff:Orientation":function(e){return e==="1"?"Horizontal (normal)":e==="2"?"Mirror horizontal":e==="3"?"Rotate 180":e==="4"?"Mirror vertical":e==="5"?"Mirror horizontal and rotate 270 CW":e==="6"?"Rotate 90 CW":e==="7"?"Mirror horizontal and rotate 90 CW":e==="8"?"Rotate 270 CW":e},"tiff:ResolutionUnit":function(e){return function(t){return t===2?"inches":t===3?"centimeters":"Unknown"}(parseInt(e,10))},"tiff:XResolution":function(e){return _e(J,e)},"tiff:YResolution":function(e){return _e(Z,e)},"exif:ApertureValue":function(e){return _e(L,e)},"exif:GPSLatitude":en,"exif:GPSLongitude":en,"exif:FNumber":function(e){return _e(q,e)},"exif:FocalLength":function(e){return _e(V,e)},"exif:FocalPlaneResolutionUnit":function(e){return function(t){return t===2?"inches":t===3?"centimeters":t===4?"millimeters":"Unknown"}(parseInt(e,10))},"exif:ColorSpace":function(e){return function(t){return t===1?"sRGB":t===65535?"Uncalibrated":"Unknown"}(function(t){return t.substring(0,2)==="0x"?parseInt(t.substring(2),16):parseInt(t,10)}(e))},"exif:ComponentsConfiguration":function(e,t){return/^\d, \d, \d, \d$/.test(t)?function(n){return n.map(function(a){return a===49?"Y":a===50?"Cb":a===51?"Cr":a===52?"R":a===53?"G":a===54?"B":void 0}).join("")}(t.split(", ").map(function(n){return n.charCodeAt(0)})):t},"exif:Contrast":function(e){return function(t){return t===0?"Normal":t===1?"Soft":t===2?"Hard":"Unknown"}(parseInt(e,10))},"exif:CustomRendered":function(e){return function(t){return t===0?"Normal process":t===1?"Custom process":"Unknown"}(parseInt(e,10))},"exif:ExposureMode":function(e){return function(t){return t===0?"Auto exposure":t===1?"Manual exposure":t===2?"Auto bracket":"Unknown"}(parseInt(e,10))},"exif:ExposureProgram":function(e){return function(t){return t===0?"Undefined":t===1?"Manual":t===2?"Normal program":t===3?"Aperture priority":t===4?"Shutter priority":t===5?"Creative program":t===6?"Action program":t===7?"Portrait mode":t===8?"Landscape mode":t===9?"Bulb":"Unknown"}(parseInt(e,10))},"exif:ExposureTime":function(e){return $e(e)?function(t){if(t[0]/t[1]>.25){var n=t[0]/t[1];return Number.isInteger(n)?""+n:n.toFixed(1)}return t[0]!==0?"1/".concat(Math.round(t[1]/t[0])):"0/".concat(t[1])}(e.split("/").map(function(t){return parseInt(t,10)})):e},"exif:MeteringMode":function(e){return function(t){return t===1?"Average":t===2?"CenterWeightedAverage":t===3?"Spot":t===4?"MultiSpot":t===5?"Pattern":t===6?"Partial":t===255?"Other":"Unknown"}(parseInt(e,10))},"exif:Saturation":function(e){return function(t){return t===0?"Normal":t===1?"Low saturation":t===2?"High saturation":"Unknown"}(parseInt(e,10))},"exif:SceneCaptureType":function(e){return function(t){return t===0?"Standard":t===1?"Landscape":t===2?"Portrait":t===3?"Night scene":"Unknown"}(parseInt(e,10))},"exif:Sharpness":function(e){return function(t){return t===0?"Normal":t===1?"Soft":t===2?"Hard":"Unknown"}(parseInt(e,10))},"exif:ShutterSpeedValue":function(e){return _e(j,e)},"exif:WhiteBalance":function(e){return function(t){return t===0?"Auto white balance":t===1?"Manual white balance":"Unknown"}(parseInt(e,10))}};function _e(e,t){return $e(t)?e(t.split("/")):t}function $e(e){return/^-?\d+\/-?\d+$/.test(e)}function en(e){var t,n=function(p){if(Array.isArray(p))return p}(t=e.split(","))||function(p){var b=p==null?null:typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(b!=null){var y,l,E,F,O=[],K=1,W=0;try{for(E=(b=b.call(p)).next,!1;!(K=(y=E.call(b)).done)&&(O.push(y.value),O.length!==2);K=1);}catch(G){W=1,l=G}finally{try{if(!K&&b.return!=null&&(F=b.return(),Object(F)!==F))return}finally{if(W)throw l}}return O}}(t)||function(p){if(p){if(typeof p=="string")return Ge(p,2);var b={}.toString.call(p).slice(8,-1);return b==="Object"&&p.constructor&&(b=p.constructor.name),b==="Map"||b==="Set"?Array.from(p):b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?Ge(p,2):void 0}}(t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(),a=n[0],s=n[1];if(a!==void 0&&s!==void 0){var u=parseFloat(a),c=parseFloat(s),h=s.charAt(s.length-1);if(!Number.isNaN(u)&&!Number.isNaN(c))return""+(u+c/60)+h}return e}var Qe={xmp:"http://ns.adobe.com/xap/1.0/",tiff:"http://ns.adobe.com/tiff/1.0/",exif:"http://ns.adobe.com/exif/1.0/",dc:"http://purl.org/dc/elements/1.1/",xmpMM:"http://ns.adobe.com/xap/1.0/mm/",stEvt:"http://ns.adobe.com/xap/1.0/sType/ResourceEvent#",stRef:"http://ns.adobe.com/xap/1.0/sType/ResourceRef#",photoshop:"http://ns.adobe.com/photoshop/1.0/"};function Et(e){return Et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(e)}function An(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function tn(e){var t=typeof Map=="function"?new Map:void 0;return tn=function(n){if(n===null||!function(s){try{return Function.toString.call(s).indexOf("[native code]")!==-1}catch{return typeof s=="function"}}(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(n))return t.get(n);t.set(n,a)}function a(){return function(s,u,c){if(nn())return Reflect.construct.apply(null,arguments);var h=[null];h.push.apply(h,u);var p=new(s.bind.apply(s,h));return c&&ot(p,c.prototype),p}(n,arguments,rn(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:0,writable:1,configurable:1}}),ot(a,n)},tn(e)}function nn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nn=function(){return!!e})()}function ot(e,t){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ot(e,t)}function rn(e){return rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rn(e)}var yr={read:function(e,t,n){var a={};if(typeof e=="string")return Sn(a,e,n),a;var s,u=(s=function(y,l){if(l.length===0)return[];var E=[Kn(y,l.slice(0,1))];return l.length>1&&E.push(Kn(y,l.slice(1))),E}(e,t),function(y){if(Array.isArray(y))return y}(s)||function(y){var l=y==null?null:typeof Symbol<"u"&&y[Symbol.iterator]||y["@@iterator"];if(l!=null){var E,F,O,K,W=[],G=1,ke=0;try{for(O=(l=l.call(y)).next,!1;!(G=(E=O.call(l)).done)&&(W.push(E.value),W.length!==2);G=1);}catch(se){ke=1,F=se}finally{try{if(!G&&l.return!=null&&(K=l.return(),Object(K)!==K))return}finally{if(ke)throw F}}return W}}(s)||function(y){if(y){if(typeof y=="string")return An(y,2);var l={}.toString.call(y).slice(8,-1);return l==="Object"&&y.constructor&&(l=y.constructor.name),l==="Map"||l==="Set"?Array.from(y):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?An(y,2):void 0}}(s)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),c=u[0],h=u[1],p=Sn(a,c,n);if(h){var b=Sn(a,h,n);p||b||(delete a._raw,Sn(a,Kn(e,t),n))}return a}},xr=function(e){function t(a){var s;return function(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")}(this,t),(s=function(u,c,h){return c=rn(c),function(p,b){if(b&&(Et(b)=="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}(p)}(u,nn()?Reflect.construct(c,h||[],rn(u).constructor):c.apply(u,h))}(this,t,[a])).name="ParseError",s}return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(s&&s.prototype,{constructor:{value:a,writable:1,configurable:1}}),Object.defineProperty(a,"prototype",{writable:0}),s&&ot(a,s)}(t,e),Object.defineProperty(n=t,"prototype",{writable:0}),n;var n}(tn(Error));function Kn(e,t){for(var n=t.reduce(function(p,b){return p+b.length},0),a=new Uint8Array(n),s=0,u=0;u<t.length;u++){var c=t[u],h=e.buffer.slice(c.dataOffset,c.dataOffset+c.length);a.set(new Uint8Array(h),s),s+=c.length}return new DataView(a.buffer)}function Sn(e,t,n){try{var a=function(c,h){var p=function(y){if(y)return y;if(typeof DOMParser<"u")return new DOMParser;try{var l=require("@xmldom/xmldom");return new l.DOMParser({onError:l.onErrorStopParsing})}catch{return}}(h);if(!p)throw console.warn("Warning: DOMParser is not available. It is needed to be able to parse XMP tags."),Error();var b=typeof c=="string"?c:v(c,0,c.byteLength);return{doc:bi(p,b.replace(/^.+(<\?xpacket begin)/,"$1").replace(/(<\?xpacket end=".*"\?>).+$/,"$1")),raw:b}}(t,n),s=a.doc,u=a.raw;return e._raw=(e._raw||"")+u,x(e,wi(xi(yi(s),1))),1}catch{return 0}}function bi(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;try{var a=e.parseFromString(t,"application/xml"),s=a.getElementsByTagName("parsererror");if(s.length>0)throw new xr(s[0].textContent);return a}catch(u){if(u.name==="ParseError"&&function(c){for(var h=["prefix is non-null and namespace is null","prefix not bound to a namespace","prefix inte bundet till en namnrymd",/Namespace prefix .+ is not defined/],p=0;p<h.length;p++)if(RegExp(h[p]).test(c.message))return 1;return 0}(u)&&!n)return bi(e,function(c){var h=c.match(/<([A-Za-z_][A-Za-z0-9._-]*)([^>]*)>/);if(!h)return c;var p=h[1],b=function(l){for(var E,F=[],O=/xmlns:([\w-]+)=["'][^"']+["']/g;(E=O.exec(l))!==null;)F.indexOf(E[1])===-1&&F.push(E[1]);return F}(c),y=function(l){for(var E,F=[],O=/\b([A-Za-z_][A-Za-z0-9._-]*):[A-Za-z_][A-Za-z0-9._-]*\b/g;(E=O.exec(l))!==null;){var K=E[1];K!=="xmlns"&&K!=="xml"&&F.indexOf(K)===-1&&F.push(K)}return F}(c).filter(function(l){return b.indexOf(l)===-1});return y.length===0?c:function(l,E,F){var O=RegExp("<"+E+"([^>]*)>");return l.replace(O,"<"+E+"$1"+F+">")}(c,p,function(l){for(var E=[],F=0;F<l.length;F++){var O=l[F],K=Qe[O]||"http://fallback.namespace/"+O;E.push(" xmlns:"+O+'="'+K+'"')}return E.join("")}(y))}(t),1);throw u}}function yi(e){for(var t=0;t<e.childNodes.length;t++){if(e.childNodes[t].tagName==="x:xmpmeta")return yi(e.childNodes[t]);if(e.childNodes[t].tagName==="rdf:RDF")return e.childNodes[t]}throw Error()}function xi(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=function(s){for(var u=[],c=0;c<s.childNodes.length;c++)u.push(s.childNodes[c]);return u}(e);return(t=a).length===1&&t[0].nodeName==="#text"?n?{}:function(s){return s.nodeValue}(a[0]):function(s){var u={};return s.forEach(function(c){if(function(p){return p.nodeName&&p.nodeName!=="#text"}(c)){var h=function(p){return{attributes:wr(p),value:xi(p)}}(c);u[c.nodeName]!==void 0?(Array.isArray(u[c.nodeName])||(u[c.nodeName]=[u[c.nodeName]]),u[c.nodeName].push(h)):u[c.nodeName]=h}}),u}(a)}function wr(e){for(var t={},n=0;n<e.attributes.length;n++)t[e.attributes[n].nodeName]=decodeURIComponent(escape(e.attributes[n].value));return t}function wi(e){var t={};if(typeof e=="string")return e;for(var n in e){var a=e[n];Array.isArray(a)||(a=[a]),a.forEach(function(s){x(t,qn(s.attributes)),Et(s.value)==="object"&&x(t,ki(s.value))})}return t}function qn(e){var t={};for(var n in e)try{kr(n)&&(t[Fn(n)]={value:e[n],attributes:{},description:st(e[n],n)})}catch{}return t}function kr(e){return e!=="rdf:parseType"&&!Cn(e)}function Cn(e){return e.split(":")[0]==="xmlns"}function Fn(e){return/^MicrosoftPhoto(_\d+_)?:Rating$/i.test(e)?"RatingPercent":e.split(":")[1]}function st(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(Array.isArray(e)){var n=function(a){return a.map(function(s){return s.value!==void 0?st(s.value):st(s)}).join(", ")}(e);return t&&typeof me[t]=="function"?me[t](e,n):n}if(Et(e)==="object")return function(a){var s=[];for(var u in a)s.push("".concat(Er(u),": ").concat(st(a[u].value)));return s.join("; ")}(e);try{return t&&typeof me[t]=="function"?me[t](e):decodeURIComponent(escape(e))}catch{return e}}function Er(e){return e==="CiAdrCity"?"CreatorCity":e==="CiAdrCtry"?"CreatorCountry":e==="CiAdrExtadr"?"CreatorAddress":e==="CiAdrPcode"?"CreatorPostalCode":e==="CiAdrRegion"?"CreatorRegion":e==="CiEmailWork"?"CreatorWorkEmail":e==="CiTelWork"?"CreatorWorkPhone":e==="CiUrlWork"?"CreatorWorkUrl":e}function ki(e){var t={};for(var n in e)try{Cn(n)||(t[Fn(n)]=Ar(e[n],n))}catch{}return t}function Ar(e,t){return function(n){return Array.isArray(n)}(e)?function(n,a){return Wn(n[n.length-1],a)}(e,t):function(n){return n.attributes["rdf:parseType"]==="Resource"&&typeof n.value=="string"&&n.value.trim()===""}(e)?{value:"",attributes:{},description:""}:Ei(e)?Ai(e,t):Si(e)?Ci(e,t):Fi(e)?Ti(e,t):function(n){return Li(n.value)!==void 0}(e)?function(n,a){var s=Li(n.value).value["rdf:li"],u=an(n),c=[];return s===void 0?s=[]:Array.isArray(s)||(s=[s]),s.forEach(function(h){c.push(function(p){return Ei(p)?Ai(p):Si(p)?Ci(p).value:Fi(p)?Ti(p).value:Wn(p)}(h))}),{value:c,attributes:u,description:st(c,a)}}(e,t):Wn(e,t)}function Ei(e){return e.attributes["rdf:parseType"]==="Resource"&&e.value["rdf:value"]!==void 0||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]!==void 0}function Ai(e,t){var n=an(e);e.value["rdf:Description"]!==void 0&&(e=e.value["rdf:Description"]),x(n,an(e),function(s){var u={};for(var c in s.value)c==="rdf:value"||Cn(c)||(u[Fn(c)]=s.value[c].value);return u}(e));var a=function(s){return Ii(s.value["rdf:value"])||s.value["rdf:value"].value}(e);return{value:a,attributes:n,description:st(a,t)}}function an(e){var t={};for(var n in e.attributes)n==="rdf:parseType"||n==="rdf:resource"||Cn(n)||(t[Fn(n)]=e.attributes[n]);return t}function Si(e){return e.attributes["rdf:parseType"]==="Resource"||e.value["rdf:Description"]!==void 0&&e.value["rdf:Description"].value["rdf:value"]===void 0}function Ci(e,t){var n={value:{},attributes:{}};return e.value["rdf:Description"]!==void 0&&(x(n.value,qn(e.value["rdf:Description"].attributes)),x(n.attributes,an(e)),e=e.value["rdf:Description"]),x(n.value,ki(e.value)),n.description=st(n.value,t),n}function Fi(e){return Object.keys(e.value).length===0&&e.attributes["xml:lang"]===void 0&&e.attributes["rdf:resource"]===void 0}function Ti(e,t){var n=qn(e.attributes);return{value:n,attributes:{},description:st(n,t)}}function Li(e){return e["rdf:Bag"]||e["rdf:Seq"]||e["rdf:Alt"]}function Wn(e,t){var n=Ii(e)||wi(e.value);return{value:n,attributes:an(e),description:st(n,t)}}function Ii(e){return e.attributes&&e.attributes["rdf:resource"]}function on(e){return on=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},on(e)}var Sr={read:function(e,t,n,a){for(var s={},u=[],c=0;c<t.length;c++){var h=t[c],p=Lr(e,h.offset,h.length,h.type,n);if(p instanceof Promise)u.push(p.then(function(E){var F,O,K,W=E.name,G=E.value,ke=E.description;try{if(Pi(W,G))return{__exif:bn.read(Oi(G),Tr,a).tags};if(Mi(W,G))return{__iptc:wn.read(Oi(G),0,a)};if(W&&!Pi(W,G)&&!Mi(W,G))return F={},K={value:G,description:ke},(O=function(se){var pe=function(ge){if(on(ge)!="object"||!ge)return ge;var Ae=ge[Symbol.toPrimitive];if(Ae!==void 0){var St=Ae.call(ge,"string");if(on(St)!="object")return St;throw new TypeError("@@toPrimitive must return a primitive value.")}return ge+""}(se);return on(pe)=="symbol"?pe:pe+""}(O=W))in F?Object.defineProperty(F,O,{value:K,enumerable:1,configurable:1,writable:1}):F[O]=K,F}catch{}return{}}));else{var b=p.name,y=p.value,l=p.description;b&&(s[b]={value:y,description:l})}}return{readTags:s,readTagsPromise:u.length>0?Promise.all(u):void 0}}},Vn="STATE_KEYWORD",Gn="STATE_COMPRESSION",Yn="STATE_LANG",_i="STATE_TRANSLATED_KEYWORD",Xn="STATE_TEXT",Cr=1,Fr=1,Tr=6;function Lr(e,t,n,a,s){for(var u,c=[],h=[],p=[],b=Vn,y=I,l=0;l<n&&t+l<e.byteLength;l++)if(b!==Gn){if(b===Xn){u=new DataView(e.buffer.slice(t+l,t+n));break}var E=e.getUint8(t+l);E===0?b=zi(a,b):b===Vn?c.push(E):b===Yn?h.push(E):b===_i&&p.push(E)}else y=Ir({type:a,dataView:e,offset:t+l}),a===Ve&&(l+=Cr),b=zi(a,b);if(y!==I&&!s)return{};var F=function(O,K,W){var G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"string";if(K===0&&typeof DecompressionStream=="function"){var ke=new DecompressionStream("deflate"),se=new Blob([O]).stream().pipeThrough(ke);return G==="dataview"?new Response(se).arrayBuffer().then(function(pe){return new DataView(pe)}):new Response(se).arrayBuffer().then(function(pe){return new TextDecoder(W).decode(pe)})}return K!==void 0?Promise.reject("Unknown compression method ".concat(K,".")):O}(u,y,function(O){return O===We||O===rt?"latin1":"utf-8"}(a));return F instanceof Promise?F.then(function(O){return Zn(O,a,h,c)}).catch(function(){return Zn("<text using unknown compression>".split(""),a,h,c)}):Zn(F,a,h,c)}function Ir(e){var t=e.type,n=e.dataView,a=e.offset;if(t===Ve){if(n.getUint8(a)===Fr)return n.getUint8(a+1)}else if(t===rt)return n.getUint8(a);return I}function zi(e,t){return t===Vn&&[Ve,rt].includes(e)?Gn:t===Gn?e===Ve?Yn:Xn:t===Yn?_i:Xn}function Zn(e,t,n,a){var s=function(u){return u instanceof DataView?v(u,0,u.byteLength):u}(e);return{name:_r(t,n,a),value:s,description:t===Ve?zr(e):s}}function _r(e,t,n){var a=k(n);if(e===We||t.length===0)return a;var s=k(t);return"".concat(a," (").concat(s,")")}function zr(e){return xn("UTF-8",e)}function Pi(e,t){return e.toLowerCase()==="raw profile type exif"&&t.substring(1,5)==="exif"}function Mi(e,t){return e.toLowerCase()==="raw profile type iptc"&&t.substring(1,5)==="iptc"}function Oi(e){return function(t){for(var n=new DataView(new ArrayBuffer(t.length/2)),a=0;a<t.length;a+=2)n.setUint8(a/2,parseInt(t.substring(a,a+2),16));return n}(e.match(/\n(exif|iptc)\n\s*\d+\n([\s\S]*)$/)[2].replace(/\n/g,""))}var Pr={read:function(e,t){for(var n={},a=0;a<t.length;a++){var s=U.getLongAt(e,t[a]+X),u=v(e,t[a]+Ce,Te);u===ct?(n["Pixels Per Unit X"]=Mr(e,t[a],s),n["Pixels Per Unit Y"]=Or(e,t[a],s),n["Pixel Units"]=Rr(e,t[a],s)):u===$t&&(n["Modify Date"]=Br(e,t[a],s))}return n}};function Mr(e,t,n){if(Tn(e,t,n,0,4)){var a=U.getLongAt(e,t+re+0);return{value:a,description:""+a}}}function Or(e,t,n){if(Tn(e,t,n,4,4)){var a=U.getLongAt(e,t+re+4);return{value:a,description:""+a}}}function Rr(e,t,n){if(Tn(e,t,n,8,1)){var a=U.getByteAt(e,t+re+8);return{value:a,description:a===1?"meters":"Unknown"}}}function Br(e,t,n){if(Tn(e,t,n,0,7)){var a=U.getShortAt(e,t+re),s=U.getByteAt(e,t+re+2),u=U.getByteAt(e,t+re+3),c=U.getByteAt(e,t+re+4),h=U.getByteAt(e,t+re+5),p=U.getByteAt(e,t+re+6);return{value:[a,s,u,c,h,p],description:"".concat(Rt(a,4),"-").concat(Rt(s,2),"-").concat(Rt(u,2)," ").concat(Rt(c,2),":").concat(Rt(h,2),":").concat(Rt(p,2))}}}function Tn(e,t,n,a,s){return a+s<=n&&t+re+a+s<=e.byteLength}function Rt(e,t){return"".concat("0".repeat(t-(""+e).length)).concat(e)}var Ur={read:function(e,t){var n={},a=U.getByteAt(e,t);return n.Alpha=function(s){var u=16&s;return{value:u?1:0,description:u?"Yes":"No"}}(a),n.Animation=function(s){var u=2&s;return{value:u?1:0,description:u?"Yes":"No"}}(a),n.ImageWidth=Ri(e,t+Dr),n.ImageHeight=Ri(e,t+Nr),n}},Dr=4,Nr=7;function Ri(e,t){var n=U.getByteAt(e,t)+256*U.getByteAt(e,t+1)+65536*U.getByteAt(e,t+2)+1;return{value:n,description:n+"px"}}var jr={get:function(e,t){var n,a={},s=0,u=At(e,"exif","FocalLength",t),c=At(e,"exif","FocalPlaneXResolution",t),h=At(e,"exif","FocalPlaneYResolution",t),p=At(e,"exif","FocalPlaneResolutionUnit",t),b=At(e,"file","Image Width",t),y=At(e,"file","Image Height",t),l=At(e,"exif","FocalLengthIn35mmFilm",t)||function(O,K,W,G,ke,se){if(O&&K&&W&&G&&ke&&se)try{var pe;switch(W){case 2:pe=25.4;break;case 3:pe=10;break;case 4:pe=1;break;default:return}var ge=O[0]/O[1]*pe,Ae=ke/(K[0]/K[1]*pe),St=Math.sqrt(Math.pow(G/ge,2)+Math.pow(Ae,2));return se[0]/se[1]*(43.27/St)}catch{}}(c,h,p,b,y,u);l&&(a.FocalLength35efl={value:l,description:(n=l,n===0?"Unknown":n+" mm")},s=1);var E=function(O,K){if(O&&K)try{var W=K/(O[0]/O[1]);return{value:W,description:W.toFixed(1)}}catch{}}(u,l);E&&(a.ScaleFactorTo35mmEquivalent=E,s=1);var F=function(O){if(O)try{var K=2*Math.atan(36/(2*O))*(180/Math.PI);return{value:K,description:K.toFixed(1)+" deg"}}catch{}}(l);if(F&&(a.FieldOfView=F,s=1),s)return a}};function At(e,t,n,a){return a&&e[t]&&e[t][n]?e[t][n].value:!a&&e[n]?e[n].value:void 0}function Bi(e){this.name="MetadataMissingError",this.message=e||"No Exif data",this.stack=Error().stack}Bi.prototype=Error();var Qn={MetadataMissingError:Bi},$r={load:Ui,loadView:ei,errors:Qn},Hr=Qn;function Ui(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(a){return typeof a=="string"}(e)?(n.async=1,function(a,s){return/^\w+:\/\//.test(a)?typeof fetch<"u"?function(u){var c=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).length,h={method:"GET"};return Number.isInteger(c)&&c>=0&&(h.headers={range:"bytes=0-".concat(c-1)}),fetch(u,h).then(function(p){return p.arrayBuffer()})}(a,s):function(u){var c=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).length;return new Promise(function(h,p){var b={};Number.isInteger(c)&&c>=0&&(b.headers={range:"bytes=0-".concat(c-1)});var y=function(l){return/^https:\/\//.test(l),li.get}(u);y(u,b,function(l){if(l.statusCode>=200&&l.statusCode<=299){var E=[];l.on("data",function(F){return E.push(Buffer.from(F))}),l.on("error",function(F){return p(F)}),l.on("end",function(){return h(Buffer.concat(E))})}else p("Could not fetch file: ".concat(l.statusCode," ").concat(l.statusMessage)),l.resume()}).on("error",function(l){return p(l)})})}(a,s):function(u){return/^data:[^;,]*(;base64)?,/.test(u)}(a)?Promise.resolve(function(u){var c=u.substring(u.indexOf(",")+1);if(u.indexOf(";base64")!==-1)return typeof atob<"u"?Uint8Array.from(atob(c),function(p){return p.charCodeAt(0)}).buffer:typeof Buffer>"u"?void 0:typeof Buffer.from<"u"?Buffer.from(c,"base64"):new Buffer(c,"base64");var h=decodeURIComponent(c);return typeof Buffer<"u"?typeof Buffer.from<"u"?Buffer.from(h):new Buffer(h):Uint8Array.from(h,function(p){return p.charCodeAt(0)}).buffer}(a)):function(u){var c=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).length;return new Promise(function(h,p){var b=function(){try{return li}catch{return}}();b.open(u,function(y,l){y?p(y):b.stat(u,function(E,F){if(E)p(E);else{var O=Math.min(F.size,c!==void 0?c:F.size),K=Buffer.alloc(O),W={buffer:K,length:O};b.read(l,W,function(G){G?p(G):b.close(l,function(ke){ke&&console.warn("Could not close file ".concat(u,":"),ke),h(K)})})}})})})}(a,s)}(e,n).then(function(a){return Jn(a,n)})):function(a){return typeof File<"u"&&a instanceof File}(e)?(n.async=1,(t=e,new Promise(function(a,s){var u=new FileReader;u.onload=function(c){return a(c.target.result)},u.onerror=function(){return s(u.error)},u.readAsArrayBuffer(t)})).then(function(a){return Jn(a,n)})):Jn(e,n)}function Jn(e,t){return function(n){try{return Buffer.isBuffer(n)}catch{return 0}}(e)&&(e=new Uint8Array(e).buffer),ei(function(n){try{return new DataView(n)}catch{return new ce(n)}}(e),t)}function ei(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{expanded:0,async:0,includeUnknown:0,domParser:void 0},n=t.expanded,a=n===void 0?0:n,s=t.async,u=s===void 0?0:s,c=t.includeUnknown,h=c===void 0?0:c,p=t.domParser,b=p===void 0?void 0:p,y=0,l={},E=[],F=qt.parseAppMarkers(e,u),O=F.fileType,K=(F.fileDataOffset,F.jfifDataOffset,F.tiffHeaderOffset),W=F.iptcDataOffset,G=F.xmpChunks,ke=(F.iccChunks,F.mpfDataOffset,F.pngHeaderOffset,F.pngTextChunks),se=F.pngChunkOffsets,pe=F.vp8xChunkOffset;if(F.gifHeaderOffset,function(M){return M!==void 0}(K)){y=1;var ge=bn.read(e,K,h),Ae=ge.tags;ge.byteOrder,Ae.Thumbnail&&(l.Thumbnail=Ae.Thumbnail,delete Ae.Thumbnail),a?(l.exif=Ae,function(M){if(M.exif){if(M.exif.GPSLatitude&&M.exif.GPSLatitudeRef)try{M.gps=M.gps||{},M.gps.Latitude=P(M.exif.GPSLatitude.value),M.exif.GPSLatitudeRef.value.join("")==="S"&&(M.gps.Latitude=-M.gps.Latitude)}catch{}if(M.exif.GPSLongitude&&M.exif.GPSLongitudeRef)try{M.gps=M.gps||{},M.gps.Longitude=P(M.exif.GPSLongitude.value),M.exif.GPSLongitudeRef.value.join("")==="W"&&(M.gps.Longitude=-M.gps.Longitude)}catch{}if(M.exif.GPSAltitude&&M.exif.GPSAltitudeRef)try{M.gps=M.gps||{},M.gps.Altitude=M.exif.GPSAltitude.value[0]/M.exif.GPSAltitude.value[1],M.exif.GPSAltitudeRef.value===1&&(M.gps.Altitude=-M.gps.Altitude)}catch{}}}(l)):l=x({},l,Ae),Ae.MakerNote&&delete Ae.MakerNote.__offset}if(function(M){return M!==void 0}(W)){y=1;var St=wn.read(e,W,h);a?l.iptc=St:l=x({},l,St)}if(function(M){return Array.isArray(M)&&M.length>0}(G)){y=1;var Ln=yr.read(e,G,b);a?l.xmp=Ln:(delete Ln._raw,l=x({},l,Ln))}if(function(M){return M!==void 0}(ke)){y=1;var Di=Sr.read(e,ke,u,h),Kr=Di.readTags,Ni=Di.readTagsPromise;ji(Kr),Ni&&E.push(Ni.then(function(M){return M.forEach(ji)}))}if(function(M){return M!==void 0}(se)){y=1;var ti=Pr.read(e,se);a?l.png=l.png?x({},l.png,ti):ti:l=x({},l,ti)}if(function(M){return M!==void 0}(pe)){y=1;var ni=Ur.read(e,pe);a?l.riff=l.riff?x({},l.riff,ni):ni:l=x({},l,ni)}var ii=jr.get(l,a);if(ii&&(a?l.composite=ii:l=x({},l,ii)),delete l.Thumbnail,O&&(a?(l.file||(l.file={}),l.file.FileType=O):l.FileType=O,y=1),!y)throw new Qn.MetadataMissingError;return u?Promise.all(E).then(function(){return l}):l;function ji(M){if(a){for(var Bt=0,$i=["exif","iptc"];Bt<$i.length;Bt++){var ri=$i[Bt],In="__".concat(ri);M[In]&&(l[ri]=l[ri]?x({},l.exif,M[In]):M[In],delete M[In])}l.png=l.png?x({},l.png,M):M,l.pngText=l.pngText?x({},l.png,M):M}else delete(l=x({},l,M.__exif?M.__exif:{},M.__iptc?M.__iptc:{},M)).__exif,delete l.__iptc}}return g}()})}(ln,ln.exports)),ln.exports}var uo=so();const co=Xr(uo),lo=["Caption/Abstract","Description","ImageDescription"];async function fo(f){if(!f||!f.type?.startsWith?.("image/"))return null;try{const o=await co.load(f);for(const d of lo)if(o[d]?.description)return o[d].description.trim();return null}catch{return null}}const ho={BASE_URL:"./",DEV:!1,MODE:"production",PHANPY_CLIENT_NAME:"Blaede Phanpy",PHANPY_DEFAULT_INSTANCE:"mastodon.blaede.family",PHANPY_DEFAULT_INSTANCE_REGISTRATION_URL:"https://mastodon.blaede.family/auth/sign_up",PHANPY_GIPHY_API_KEY:"48JGsrSS1XE5w4nWe9c9hqxPbsfRWR0e",PHANPY_LINGVA_INSTANCES:"lingva.phanpy.social lingva.lunar.icu lingva.garudalinux.org translate.plausibility.cloud",PHANPY_PRIVACY_POLICY_URL:"https://mastodon.blaede.family/privacy-policy",PHANPY_TRANSLANG_INSTANCES:"translang.phanpy.social",PHANPY_WEBSITE:"https://phanpy.blaede.family",PROD:!0,SSR:!1,VITE_APP_ENV:"production"},{PHANPY_IMG_ALT_API_URL:di}=ho;function rr(f,o,d,g){const v=Math.sqrt(o/f),A=Math.floor(d*v),k=Math.floor(g*v);return{newWidth:A,newHeight:k}}function po({attachment:f,disabled:o,lang:d,supportedMimeTypes:g,descriptionLimit:v=1500,onDescriptionChange:A=()=>{},onRemove:k=()=>{}}){const{i18n:x,_:I}=vt(),[S,T]=ne("default"),ce=Dt("@mastodon")||Dt("@gotosocial/edit-media-attributes"),{type:P,id:N,file:z}=f,D=Nt(()=>z?URL.createObjectURL(z):f.url,[z,f.url]),R=!!z?.size,$=R?dr():{},{mediaAttachments:{imageSizeLimit:fe,imageMatrixLimit:C,videoSizeLimit:Q,videoMatrixLimit:ye,videoFrameRateLimit:le}={}}=$||{},[ve,B]=ne(()=>R?P.startsWith("image")&&fe&&z.size>fe?{type:"imageSizeLimit",details:{imageSize:z.size,imageSizeLimit:fe}}:P.startsWith("video")&&Q&&z.size>Q?{type:"videoSizeLimit",details:{videoSize:z.size,videoSizeLimit:Q}}:null:null),[H,ae]=ne({});Se(()=>{!R||!C||H?.matrix>C&&B({type:"imageMatrixLimit",details:{imageMatrix:H?.matrix,imageMatrixLimit:C,width:H?.width,height:H?.height}})},[H,C,R]);const[be,Oe]=ne({});Se(()=>{!R||!ye||be?.matrix>ye&&B({type:"videoMatrixLimit",details:{videoMatrix:be?.matrix,videoMatrixLimit:ye,width:be?.width,height:be?.height}})},[be,ye,R]);const[Be,ze]=ne(f.description);Se(()=>{if(!z||!P.startsWith("image/")||N||f.description)return;let te=!1;return(async()=>{T("loading");try{const de=await fo(z);!te&&de&&ze(de)}catch{}finally{te||T("default")}})(),()=>{te=!0}},[]);let[he,He]=P.split("/");const Je=new Set,Ue={};g?.length&&g.forEach(te=>{const[de,we]=te.split("/");Ue[we]=de,Je.add(de)}),He&&!Je.has(he)&&Ue[He]&&(he=Ue[He]);const Ke=Un(A,250);Se(()=>{Ke(Be)},[Be,Ke]);const[Y,xe]=ne(!1),Ee=ue(null);Se(()=>{let te;return Y&&Ee.current&&(te=setTimeout(()=>{Ee.current.focus()},100)),()=>{clearTimeout(te)}},[Y]);const qe=r(jt,{children:N&&!ce?r("div",{class:"media-desc",children:[r("span",{class:"tag",children:r(ie,{id:"3wG7HI"})}),r("p",{title:Be,children:f.description||r("i",{children:"No description"})})]}):r("textarea",{ref:Ee,value:Be||"",lang:d,placeholder:{image:I({id:"Lh8B0N"}),video:I({id:"mN4S+e"}),gifv:I({id:"mN4S+e"}),audio:I({id:"ieZytw"})}[he],autoCapitalize:"sentences",autoComplete:"on",autoCorrect:"on",spellCheck:"true",dir:"auto",disabled:o||S==="loading",class:S==="loading"?"loading":"",maxlength:v,onInput:te=>{const{value:de}=te.target;ze(de)}})}),De=ue(null);Se(()=>()=>{De.current?.hideToast?.()},[]);const Ye=ue(null),Ne=te=>{const{type:de,details:we}=te;switch(de){case"imageSizeLimit":{const{imageSize:oe,imageSizeLimit:Fe}=we;return I({id:"d83/LB",values:{0:zn(oe),1:zn(Fe)}})}case"imageMatrixLimit":{const{imageMatrix:oe,imageMatrixLimit:Fe,width:Te,height:X}=we,{newWidth:Ce,newHeight:re}=rr(oe,Fe,Te,X);return I({id:"DuvOX/",values:{0:x.number(Te),1:x.number(X),2:x.number(Ce),3:x.number(re)}})}case"videoSizeLimit":{const{videoSize:oe,videoSizeLimit:Fe}=we;return I({id:"d83/LB",values:{0:zn(oe),1:zn(Fe)}})}case"videoMatrixLimit":{const{videoMatrix:oe,videoMatrixLimit:Fe,width:Te,height:X}=we,{newWidth:Ce,newHeight:re}=rr(oe,Fe,Te,X);return I({id:"DuvOX/",values:{0:x.number(Te),1:x.number(X),2:x.number(Ce),3:x.number(re)}})}case"videoFrameRateLimit":return I({id:"S1fBwy"})}};return r(jt,{children:[r("div",{class:"media-attachment",children:[r("div",{class:"media-preview",tabIndex:"0",onClick:()=>{xe(!0)},children:he==="image"?r("img",{src:D,alt:"",onLoad:te=>{if(!R)return;const{naturalWidth:de,naturalHeight:we}=te.target;ae({matrix:de*we,width:de,height:we})}}):he==="video"||he==="gifv"?r("video",{src:D+"#t=0.1",playsinline:!0,muted:!0,disablePictureInPicture:!0,preload:"metadata",onLoadedMetadata:te=>{if(!R)return;const{videoWidth:de,videoHeight:we}=te.target;de&&we&&Oe({matrix:de*we,width:de,height:we})}}):he==="audio"?r("audio",{src:D,controls:!0}):null}),qe,r("div",{class:"media-aside",children:[r("button",{type:"button",class:"plain close-button",disabled:o,onClick:k,children:r(ee,{icon:"x",alt:I({id:"t/YqKh"})})}),!!ve&&r("button",{type:"button",class:"media-error",title:Ne(ve),onClick:()=>{Ye.current&&Ye.current.hideToast(),Ye.current=mt({text:Ne(ve),duration:1e4})},children:r(ee,{icon:"alert",alt:I({id:"SlfejT"})})})]})]}),Y&&r(Mn,{onClose:()=>{xe(!1)},children:r("div",{id:"media-sheet",class:"sheet sheet-max",children:[r("button",{type:"button",class:"sheet-close",onClick:()=>{xe(!1)},children:r(ee,{icon:"x",alt:I({id:"yz7wBu"})})}),r("header",{children:r("h2",{children:{image:I({id:"oMslIB"}),video:I({id:"WZw+zB"}),gifv:I({id:"WZw+zB"}),audio:I({id:"KMtgtM"})}[he]})}),r("main",{tabIndex:"-1",children:[r("div",{class:"media-preview",children:he==="image"?r("img",{src:D,alt:""}):he==="video"||he==="gifv"?r("video",{src:D,playsinline:!0,controls:!0}):he==="audio"?r("audio",{src:D,controls:!0}):null}),r("div",{class:"media-form",children:[qe,r("footer",{children:[he==="image"&&/^(png|jpe?g|gif|webp)$/i.test(He)&&!!Le.settings.mediaAltGenerator&&!!di&&r(hr,{portal:{target:document.body},containerProps:{style:{zIndex:1001}},align:"center",position:"anchor",overflow:"auto",menuButton:r("button",{type:"button",class:"plain",children:r(ee,{icon:"more",size:"l",alt:I({id:"2FYpfJ"})})}),children:[r(ut,{disabled:S==="loading",onClick:()=>{T("loading"),De.current=mt({text:I({id:"8zsp51"}),duration:-1}),async function(){try{const te=new FormData;te.append("image",z);const de=await fetch(di,{method:"POST",body:te}).then(we=>we.json());if(de.error)throw new Error(de.error);ze(de.description)}catch(te){mt(te.message?I({id:"wy0Iwj",values:{0:te.message}}):I({id:"xhYfVj"}))}finally{T("default"),De.current?.hideToast?.()}}()},children:[r(ee,{icon:"sparkles2"}),d&&d!=="en"?r("small",{children:[r(ie,{id:"o5sTJw"}),r("br",{}),"(English)"]}):r("span",{children:r(ie,{id:"o5sTJw"})})]}),!!d&&d!=="en"&&r(ut,{disabled:S==="loading",onClick:()=>{T("loading"),De.current=mt({text:I({id:"8zsp51"}),duration:-1}),async function(){try{const te=new FormData;te.append("image",z);const de=`?lang=${d}`,we=await fetch(di+de,{method:"POST",body:te}).then(oe=>oe.json());if(we.error)throw new Error(we.error);ze(we.description)}catch(te){mt(I({id:"eNTGfp",values:{0:te?.message?`: ${te.message}`:""}}))}finally{T("default"),De.current?.hideToast?.()}}()},children:[r(ee,{icon:"sparkles2"}),r("small",{children:[r(ie,{id:"o5sTJw"}),r("br",{}),r(ie,{id:"m+pAEQ",values:{0:fi(d)},components:{0:r("span",{class:"more-insignificant"})}})]})]})]}),r("button",{type:"button",class:"light block",onClick:()=>{xe(!1)},disabled:S==="loading",children:r(ie,{id:"DPfwMq"})})]})]})]})]})})]})}function mo({onClose:f=()=>{},onSelect:o=()=>{},defaultSearchTerm:d}){const{_:g}=vt(),{masto:v}=pi(),[A,k]=ne("default"),[x,I]=ne([]),[S,T]=ne({}),[ce,P]=ne(0),N=async C=>{if(!C?.length)return;const Q=await la(C,S);Q&&T({...S,...Q})},z=C=>{C&&(k("loading"),(async()=>{try{const Q=await v.v1.accounts.search.list({q:C,limit:40,resolve:!1});I(Q),N(Q),k("default")}catch{k("error")}})())},D=Un(z,1e3);Se(()=>{z()},[z]);const R=ue();Se(()=>{R.current&&(R.current.focus(),R.current.value&&(R.current.selectionStart=R.current.value.length,R.current.selectionEnd=R.current.value.length))},[]),Se(()=>{d&&z(d)},[d]);const $=C=>{const Q=C.acct;o(Q),f()};dn("enter",()=>{const C=x[ce];C&&$(C)},{preventDefault:!0,enableOnFormTags:["input"],useKey:!0,ignoreEventWhen:C=>C.metaKey||C.ctrlKey||C.altKey||C.shiftKey});const fe=ue();return dn("down",()=>{ce<x.length-1?P(ce+1):P(0),setTimeout(()=>{const C=fe.current.querySelector(".selected");C&&C.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},1)},{preventDefault:!0,enableOnFormTags:["input"],useKey:!0,ignoreEventWhen:C=>C.metaKey||C.ctrlKey||C.altKey||C.shiftKey}),dn("up",()=>{ce>0?P(ce-1):P(x.length-1),setTimeout(()=>{const C=fe.current.querySelector(".selected");C&&C.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},1)},{preventDefault:!0,enableOnFormTags:["input"],useKey:!0,ignoreEventWhen:C=>C.metaKey||C.ctrlKey||C.altKey||C.shiftKey}),r("div",{id:"mention-sheet",class:"sheet",children:[!!f&&r("button",{type:"button",class:"sheet-close",onClick:f,children:r(ee,{icon:"x",alt:g({id:"yz7wBu"})})}),r("header",{children:r("form",{onSubmit:C=>{C.preventDefault(),D.flush?.()},children:r("input",{ref:R,required:!0,type:"search",class:"block",placeholder:g({id:"eH1bqp"}),onInput:C=>{const{value:Q}=C.target;D(Q)},autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellCheck:"false",dir:"auto",defaultValue:d||""})})}),r("main",{children:x?.length>0?r("ul",{ref:fe,class:`accounts-list ${A==="loading"?"loading":""}`,children:x.map((C,Q)=>{const ye=S[C.id];return r("li",{class:Q===ce?"selected":"",children:[r(pr,{avatarSize:"xxl",account:C,relationship:ye,showStats:!0,showActivity:!0}),r("button",{type:"button",class:"plain2",onClick:()=>{$(C)},children:r(ee,{icon:"plus",size:"xl",alt:g({id:"m16xKo"})})})]},C.id)})}):A==="loading"?r("div",{class:"ui-state",children:r(Bn,{abrupt:!0})}):A==="error"?r("div",{class:"ui-state",children:r("p",{children:r(ie,{id:"AThL/k"})})}):null})]})}function go({quoteSuggestion:f,hasCurrentQuoteStatus:o,onAccept:d,onCancel:g}){return f?r("div",{class:"quote-suggestion",children:[r("div",{class:"quote-suggestion-header",children:[r("b",{children:r(ie,{id:"UefSZg"})}),r("div",{class:"quote-suggestion-url",children:f.url})]}),r("div",{class:"quote-status",children:r(On,{status:f.status,instance:f.instance,size:"s",readOnly:!0})}),r("div",{class:"quote-suggestion-actions",children:[r("span",{class:"spacer"}),r("button",{type:"button",class:"plain",onClick:g,children:o?r(ie,{id:"dEgA5A"}):r(ie,{id:"nc+Oa+"})}),r("button",{type:"button",class:"plain6",onClick:d,children:o?r(ie,{id:"UYZxOy"}):r(ie,{id:"vuFeUI"})})]})]}):null}const vo=mi.reduce((f,o)=>{const[d,g,v]=o;return f[d]={common:g,native:v},f},{}),bo=Object.keys(vr),ar=24*60*60,or=f=>{if(!f)return ar;const o=(Date.parse(f)-Date.now())/1e3;return bo.find(d=>d>=o)||ar},Ft=Zr([da(),...navigator.languages],mi.map(f=>f[0]),"en"),yo=/(^|[^\/\w])[@＠](([a-z0-9_]+)@[a-z0-9\.\-]+[a-z0-9]+)/gi,xo="$2xxxxxxxxxxxxxxxxxxxxxxx";function wo(f){return f.replace(mr,xo).replace(yo,"$1@$3")}const ko=Qr(f=>new Intl.ListFormat(f||void 0)),Re={camera:{id:"TbrCz2"},media:{id:"MfJ43d"},customEmoji:{id:"ggiJLM"},gif:{id:"Fm6c4W"},poll:{id:"cZJ92q"},sensitive:{id:"x/s2/O"},scheduledPost:{id:"sX3iLV"}},Eo=Math.max(10*60*1e3,fa);function Ao(f,o){if(!o||o.includes(f))return!0;const[d,g]=f.split("/"),v={};return o.forEach(A=>{const[k,x]=A.split("/");v[x]=k}),!!v[g]}function Lo({onClose:f,replyToStatus:o,replyMode:d="all",editStatus:g,draftStatus:v,quoteStatus:A,standalone:k,hasOpener:x}){const{i18n:I,_:S,_:T}=vt(),ce=ha(I.locale),P=ko(I.locale),{masto:N,instance:z}=pi(),[D,R]=ne("default"),$=ue(v?.uid||pa()),fe=Nt(Jr,[]),C=fe.info,Q=dr(),{statuses:{maxCharacters:ye,maxMediaAttachments:le,charactersReservedPerUrl:ve}={},mediaAttachments:{supportedMimeTypes:B,imageSizeLimit:H,imageMatrixLimit:ae,videoSizeLimit:be,videoMatrixLimit:Oe,videoFrameRateLimit:Be,descriptionLimit:ze}={},polls:{maxOptions:he,maxCharactersPerOption:He,maxExpiration:Je,minExpiration:Ue}={}}=Q||{},Ke=B?.filter(m=>/^(image|video)/i.test(m)),Y=ue(),xe=ue(),[Ee,qe]=ne("public"),[De,Ye]=ne("public"),[Ne,te]=ne(!1),[de,we]=ne(!1),[oe,Fe]=ne(nt.session.get("currentLanguage")||Ft),Te=ue(oe),[X,Ce]=ne([]),[re,it]=ne(null),[We,Ve]=ne(null),[rt,ct]=ne(null),[$t,Ht]=ne(A),[fn,hn]=ne(!1),Ie=ea(),Pe=fn?null:$t||A,Dn=m=>{if(!Ut())return!1;const{visibility:w,quoteApproval:_,account:L}=m,q=C&&C.id===L.id,V=["public","unlisted"].includes(w),j=q&&w==="private",J=_?.currentUser==="automatic"&&(V||j),Z=_?.currentUser==="manual"&&(V||j);return!V&&!q?!1:J?!0:!!Z},Nn=async m=>{if(Ut()){if(X.length>0||re||g||Ee==="direct")return;try{const w=await ta(z,m);if(w?.id){const _=Le.statuses[`${w.instance}/${w.id}`];if(_&&Dn(_)){if(Pe?.id===_.id)return;ct({status:_,instance:w.instance,url:w.originalURL})}}}catch{}}},et=()=>{Y.current&&Y.current.dispatchEvent(new Event("input"))},Xe=m=>{setTimeout(()=>{Y.current&&(m!==void 0&&Y.current.setSelectionRange(m,m),Y.current?.focus())},300)},bt=({targetElement:m,text:w})=>{if(!m)return;const{selectionStart:_,selectionEnd:L,value:q}=m;let V=q.slice(0,_);V=V.replace(/\u200B$/,"");const j=V?/[\s\t\n\r]$/.test(V)?"":" ":"",J=q.slice(L),Z=/^[\s\t\n\r]/.test(J)?"":" ",Ge=V+j+w+Z+J;m.value=Ge,m.selectionStart=m.selectionEnd=L+w.length+Z.length,m.focus(),m.dispatchEvent(new Event("input"))},yt=ue(null),lt=ue(null),at=()=>{setTimeout(()=>{yt.current&&yt.current.focus()},0)},dt=ue(null);Se(()=>{const m=_=>{dt.current.classList.toggle("focused",_.type==="focusin");const L=_.target;L.hasAttribute("data-allow-custom-emoji")&&(lt.current=L),["INPUT","BUTTON","SELECT","TEXTAREA"].includes(L.tagName)&&(yt.current=L)},w=dt.current;return w&&(w.addEventListener("focusin",m),w.addEventListener("focusout",m)),()=>{w&&(w.removeEventListener("focusin",m),w.removeEventListener("focusout",m))}},[]),Se(()=>{if(o){const{spoilerText:m,visibility:w,language:_,sensitive:L}=o;m&&xe.current&&(xe.current.value=m);const V=[...new Set([o.account.acct,...o.mentions.map(j=>j.acct)])].filter(j=>j!==C.acct);if(V.length>0){const j=`@${o.account.acct}`,J=V.filter(Z=>Z!==o.account.acct).map(Z=>`@${Z}`);if(d==="author-only")Y.current.value=`${j} `,et(),Xe();else if(d==="author-first")if(J.length>0){Y.current.value=`${j} 

${J.join(" ")}`,et();const Z=j.length+1;Xe(Z)}else Y.current.value=`${j} `,et(),Xe();else Y.current.value=`${V.map(Z=>`@${Z}`).join(" ")} `,et(),Xe()}qe(w==="public"&&Ie["posting:default:visibility"]?Ie["posting:default:visibility"].toLowerCase():w),Fe(_||Ie["posting:default:language"]?.toLowerCase()||Ft),te(!!m)}else if(g){const{visibility:m,language:w,sensitive:_,poll:L,mediaAttachments:q,quoteApproval:V}=g,j=!!L?.options&&{...L,options:L.options.map(J=>J?.title||J),expiresIn:L?.expiresIn||or(L.expiresAt)};R("loading"),(async()=>{try{const J=await N.v1.statuses.$select(g.id).source.fetch(),{text:Z,spoilerText:Ge}=J;if(Y.current.value=Z,Y.current.dataset.source=Z,et(),Xe(),xe.current.value=Ge,qe(m),Fe(w||Ie["posting:default:language"]?.toLowerCase()||Ft),Ut()){const me=ma(V);Ye(me)}te(_),j&&it(j),Ce(q),R("default")}catch(J){alert(J?.reason||J),R("error")}})()}else if(Xe(),Ie["posting:default:visibility"]&&qe(Ie["posting:default:visibility"].toLowerCase()),Ie["posting:default:language"]&&Fe(Ie["posting:default:language"].toLowerCase()),Ie["posting:default:sensitive"]&&te(!!Ie["posting:default:sensitive"]),Ie["posting:default:quote_policy"]){let m=Ie["posting:default:quote_policy"].toLowerCase();if(Ie["posting:default:visibility"]){const w=Ie["posting:default:visibility"].toLowerCase();(w==="private"||w==="direct")&&(m="nobody")}Ye(m)}if(v){const{status:m,spoilerText:w,visibility:_,language:L,sensitive:q,sensitiveMedia:V,poll:j,mediaAttachments:J,scheduledAt:Z,quoteApprovalPolicy:Ge}=v,me=!!j?.options&&{...j,options:j.options.map($e=>$e?.title||$e),expiresIn:j?.expiresIn||or(j.expiresAt)};Y.current.value=m,et();const _e=/^\n|\s/.test(m)?0:void 0;Xe(_e),w&&(xe.current.value=w),_&&qe(_),Fe(L||Ie["posting:default:language"]?.toLowerCase()||Ft),V!==null&&we(V),q!==null&&te(q),me&&it(me),J&&Ce(J),Z&&Ve(Z),Ge&&Ye(Ge)}},[v,g,o,d]);const pn=ur(Le);Se(()=>{pn.composerState.minimized||Xe()},[pn.composerState.minimized]);const xt=ue(),Kt=T({id:"hR9gtK"}),Tt=()=>{const{value:m,dataset:w}=Y.current;if(D==="loading")return!1;const _=(m||"").trim().replace(new RegExp("^\\p{White_Space}+|\\p{White_Space}+$","gu"),""),L=X.length>0;if(!_&&!L||X.length>0&&X.every(Z=>Z.id))return!0;const V=o?.account.id===C.id,j=o&&m.trim()===`@${o.account.acct}`;return!!(!V&&j||m===w?.source)},qt=()=>Tt()?!0:confirm(Kt);Se(()=>{const m=w=>{Tt()||(w.preventDefault(),w.returnValue=Kt)};return window.addEventListener("beforeunload",m,{capture:!0}),()=>window.removeEventListener("beforeunload",m,{capture:!0})},[]);const wt=()=>{const{value:m}=Y.current,{value:w}=xe.current;return Wi(wo(m))+Wi(w)},kt=()=>{const m=wt();Le.composerCharacterCount=m};Se(kt,[]);const Lt=window.CloseWatcher,It=ue(!1);dn("esc",()=>{It.current=!0},{enabled:!Lt,enableOnFormTags:!0,useKey:!0,ignoreEventWhen:m=>m.metaKey||m.ctrlKey||m.altKey||m.shiftKey}),dn("esc",()=>{!k&&It.current&&qt()&&f(),It.current=!1},{enabled:!Lt,enableOnFormTags:!0,keyup:!0,ignoreEventWhen:m=>{const w=document.querySelectorAll("#modal-container > *"),_=!!w,L=w.length===1&&w[0].querySelector("#compose-container");return _&&!L||m.metaKey||m.ctrlKey||m.altKey||m.shiftKey},useKey:!0}),ga(()=>{!k&&qt()&&f()},[]);const ft=ue({}),Ze=()=>`${na()}#${$.current}`,_t=()=>{if(g||Le.composerState.minimized)return;const m=Ze(),w={key:m,replyTo:o?{id:o.id,account:{id:o.account.id,username:o.account.username,acct:o.account.acct}}:null,draftStatus:{uid:$.current,status:Y.current.value,spoilerText:xe.current.value,visibility:Ee,language:oe,sensitive:Ne,sensitiveMedia:de,poll:re,mediaAttachments:X,scheduledAt:We,quoteApprovalPolicy:De},quote:Pe?.id?{id:Pe.id}:null};!ia(w,ft.current)&&!Tt()&&(Ki.drafts.set(m,{...w,state:"unsaved",updatedAt:Date.now()}).then(()=>{}).catch(_=>{}),ft.current=structuredClone(w))};va(_t,5e3),Se(()=>(_t(),()=>{Ki.drafts.del(Ze())}),[]),Se(()=>{const m=_=>{if(document.querySelector(".sheet"))return;const{items:L}=_.clipboardData||_.dataTransfer,q=[],V=[];for(let j=0;j<L.length;j++){const J=L[j];if(J.kind==="file"){const Z=J.getAsFile();Ao(Z.type,B)?q.push(Z):V.push(Z)}}if(V.length>0&&alert(cn._({id:"rpXAF6",values:{0:V.length,1:V[0].name,2:P.format(V.map(j=>j.name))}})),q.length>0&&X.length>=le){alert(cn._({id:"ctFhjs",values:{maxMediaAttachments:le}}));return}if(q.length>0){_.preventDefault(),_.stopPropagation();let j=q;if(le!==void 0){const Z=le-X.length;if(j=j.slice(0,Z),j.length<=0){alert(cn._({id:"ctFhjs",values:{maxMediaAttachments:le}}));return}}const J=j.map(Z=>({file:Z,type:Z.type,size:Z.size,url:URL.createObjectURL(Z),id:null,description:null}));Ce([...X,...J])}};window.addEventListener("paste",m);const w=_=>{_.dataTransfer.items.length>0&&(_.preventDefault(),_.stopPropagation())};return window.addEventListener("dragover",w),window.addEventListener("drop",m),()=>{window.removeEventListener("paste",m),window.removeEventListener("dragover",w),window.removeEventListener("drop",m)}},[X]);const[Wt,zt]=ne(!1),[Pt,Me]=ne(!1),[mn,ht]=ne(!1),[U,gn]=ne(null),[Mt,Vt]=Nt(()=>{const m=[],w=[],{contentTranslationHideLanguages:_=[]}=Le.settings;return mi.forEach(L=>{const[q]=L;q===oe||q===Te.current||q===Ft||_.includes(q)||U?.length&&U.includes(q)?m.push(L):w.push(L)}),m.sort(([L,q],[V,j])=>L===oe?-1:V===oe?1:q.localeCompare(j)),w.sort(([L,q],[V,j])=>q.localeCompare(j)),[m,w]},[oe,U]),vn=Nt(()=>!!o?.createdAt&&Math.floor((Date.now()-Date.parse(o.createdAt))/(1e3*60*60*24*30)),[o]),Ot=()=>{_t(),Le.composerState.minimized=!0},tt=D==="loading"||le!==void 0&&X.length>=le||!!re,Gt=D==="loading"||!!Ne,Yt=()=>{te(!0),setTimeout(()=>{xe.current?.focus()},0)},Xt=he==null||he>1,Zt=D==="loading"||!!re||!!X.length,Qt=()=>{it({options:["",""],expiresIn:24*60*60,multiple:!1}),setTimeout(()=>{dt.current?.querySelector('.poll-choice input[type="text"]')?.focus()},0)},bn=oe!==Te.current||U?.length&&!U.includes(oe),jn=Ee!=="public",$n=De!=="public",yn=Ee==="private"||Ee==="direct",je=ue(),[xn,wn]=ne(!0),Hn=42;fr({ref:je,box:"border-box",onResize:({width:m})=>{const{scrollWidth:w}=je.current,_=w>m,L=m<Hn*4;wn(L||_),je.current.hidden=L}});const kn=!g,En=D==="loading"||!!We,Jt=()=>{const m=new Date(Date.now()+Eo);Ve(m)};return r("div",{id:"compose-container-outer",ref:dt,children:[r("div",{id:"compose-container",tabIndex:-1,class:k?"standalone":"",children:[r("div",{class:"compose-top",children:[C?.avatarStatic&&r(pr,{account:C,accountInstance:fe.instanceURL,hideDisplayName:!0,useAvatarStatic:!0}),k?x&&r("button",{type:"button",class:"light pop-button",disabled:D==="loading",onClick:()=>{if(!window.opener){alert(T({id:"qiPXgY"}));return}if(window.opener.__STATES__.showCompose){if(window.opener.__STATES__.composerState?.publishing){alert(T({id:"Z2l5Bt"}));return}let m=T({id:"AB/GtR"});if(!confirm(m))return}f({fn:()=>{const m={editStatus:g,replyToStatus:o,replyMode:d,draftStatus:{uid:$.current,status:Y.current.value,spoilerText:xe.current.value,visibility:Ee,language:oe,sensitive:Ne,sensitiveMedia:de,poll:re,mediaAttachments:X,scheduledAt:We},quoteStatus:Pe};window.opener.__COMPOSE__=m,window.opener.__STATES__.showCompose?(window.opener.__STATES__.showCompose=!1,setTimeout(()=>{window.opener.__STATES__.showCompose=!0},10)):window.opener.__STATES__.showCompose=!0,window.opener.__STATES__.composerState.minimized&&(window.opener.__STATES__.composerState.minimized=!1)}})},children:r(ee,{icon:"popin",alt:T({id:"/5ZKeE"})})}):r("span",{class:"compose-controls",children:[r("button",{type:"button",class:"plain4 pop-button",disabled:D==="loading",onClick:()=>{ba({editStatus:g,replyToStatus:o,draftStatus:{uid:$.current,status:Y.current.value,spoilerText:xe.current.value,visibility:Ee,language:oe,sensitive:Ne,poll:re,mediaAttachments:X,scheduledAt:We},quoteStatus:Pe})&&f()},children:r(ee,{icon:"popout",alt:T({id:"JsU2En"})})}),r("button",{type:"button",class:"plain4 min-button",onClick:Ot,children:r(ee,{icon:"minimize",alt:T({id:"3TSz9S"})})})," ",r("button",{type:"button",class:"plain4 close-button",disabled:D==="loading",onClick:()=>{qt()&&f()},children:r(ee,{icon:"x",alt:T({id:"yz7wBu"})})})]})]}),!!o&&r("details",{class:"status-preview",open:!0,children:[r(On,{status:o,size:"s",previewMode:!0}),r("summary",{class:"status-preview-legend reply-to",children:vn>0?r(ie,{id:"Q1Huya",values:{0:o.account.acct||o.account.username,1:ce.format(-vn,"month")},components:{0:r("strong",{})}}):r(ie,{id:"dwLCPZ",values:{0:o.account.acct||o.account.username}})})]}),!!g&&r("details",{class:"status-preview",children:[r(On,{status:g,size:"s",previewMode:!0}),r("summary",{class:"status-preview-legend",children:r(ie,{id:"wKtOLH"})})]}),r("form",{ref:xt,class:`form-visibility-${Ee}`,style:{pointerEvents:D==="loading"?"none":"auto",opacity:D==="loading"?.5:1},onClick:()=>{setTimeout(()=>{document.activeElement||yt.current?.focus?.()},10)},onKeyDown:m=>{m.key==="Enter"&&(m.ctrlKey||m.metaKey)&&xt.current.dispatchEvent(new Event("submit",{cancelable:!0}))},onSubmit:m=>{m.preventDefault();const w=new FormData(m.target),_=Object.fromEntries(w.entries());let{status:L,visibility:q,sensitive:V,sensitiveMedia:j,spoilerText:J,scheduledAt:Z,quoteApprovalPolicy:Ge}=_;if(V=V==="on",j=j==="on",Z=Z?new Date(Z).toISOString():void 0,re){if(re.options.length<2){alert(T({id:"zhrMYj"}));return}if(re.options.some(me=>me==="")){alert(T({id:"uNVxXX"}));return}}X.length>0&&X.some(_e=>!_e.description?.trim?.())&&!confirm(T({id:"MQYucx"}))||(J=V&&J||void 0,L=L===""?void 0:L,Le.composerState.publishing=!0,R("loading"),(async()=>{try{if(X.length>0){const $e=X.map(Qe=>{const{file:Et,description:An,id:tn}=Qe;if(tn)return Qe;{const nn=sr({file:Et,description:An});return N.v2.media.create(nn).then(ot=>(ot.id&&(Qe.id=ot.id),ot))}}),en=await Promise.allSettled($e);if(en.some(Qe=>Qe.status==="rejected"||!Qe.value?.id)){Le.composerState.publishing=!1,Le.composerState.publishingError=!0,R("error"),en.forEach(Qe=>{Qe.status==="rejected"&&alert(Qe.reason||T({id:"eIiurD",values:{i}}))});return}}let me={status:L,spoiler_text:J,language:oe,sensitive:V||j,poll:re,media_ids:X.map($e=>$e.id)};g?(Ut()&&(me.quote_approval_policy=Ge),(Dt("@mastodon")||Dt("@gotosocial/edit-media-attributes"))&&(me.media_attributes=X.map($e=>({id:$e.id,description:$e.description})))):(Ut()&&Pe?.id&&(me.quoted_status_id=Pe.id,me.quote_approval_policy=Ge),me.visibility=q,me.in_reply_to_id=o?.id||void 0,me.scheduled_at=Z),me=sr(me);let _e;if(g)_e=await N.v1.statuses.$select(g.id).update(me),ra(_e,z,{skipThreading:!0});else try{_e=await N.v1.statuses.create(me,{requestInit:{headers:{"Idempotency-Key":$.current}}})}catch{_e=await N.v1.statuses.create(me)}Le.composerState.minimized=!1,Le.composerState.publishing=!1,R("default"),f({type:g?"edit":o?"reply":"post",newStatus:_e,instance:z,scheduledAt:Z})}catch(me){Le.composerState.publishing=!1,Le.composerState.publishingError=!0,alert(me?.reason||me),R("error")}})())},children:[r("div",{children:[r("div",{class:`compose-cw-container ${Ne?"":"collapsed"}`,children:[r("input",{type:"hidden",name:"sensitive",value:Ne?"on":"off"}),r(vi,{keys:":",class:"spoiler-text-field-container",onTrigger:m=>{m?.name==="custom-emojis"&&Me({targetElement:xe,defaultSearchTerm:m?.defaultSearchTerm||null})},children:r("input",{ref:xe,type:"text",name:"spoilerText",placeholder:T({id:"gnKo7f"}),"data-allow-custom-emoji":"true",disabled:D==="loading",class:"spoiler-text-field",lang:oe,spellCheck:"true",autocomplete:"off",dir:"auto",onInput:()=>{kt()}})}),r("button",{type:"button",class:"close-button plain4 small",onClick:()=>{te(!1),Y.current.focus()},children:r(ee,{icon:"x",alt:T({id:"dEgA5A"})})})]}),r(Za,{ref:Y,"data-allow-custom-emoji":"true",placeholder:T(o?{id:"Sjj+EN"}:g?{id:"qzVesX"}:re?{id:"/fY1js"}:{id:"owpNF1"}),required:X?.length===0,disabled:D==="loading",lang:oe,onInput:()=>{kt()},maxCharacters:ye,onTrigger:m=>{m?.name==="custom-emojis"?Me({targetElement:lt,defaultSearchTerm:m?.defaultSearchTerm||null}):m?.name==="mention"?zt({defaultSearchTerm:m?.defaultSearchTerm||null}):m?.name==="auto-detect-language"&&m?.languages?gn(m.languages):m?.name==="pasted-link"&&m?.url&&Nn(m.url)}})]}),X?.length>0&&r("div",{class:"media-attachments",children:[X.map((m,w)=>{const{id:_,file:L}=m,q=L?.size+L?.type+L?.name;return r(po,{attachment:m,disabled:D==="loading",lang:oe,supportedMimeTypes:B,descriptionLimit:ze,onDescriptionChange:V=>{Ce(j=>{const J=[...j];return J[w]={...J[w],description:V},J})},onRemove:()=>{Ce(V=>V.filter((j,J)=>J!==w))}},_||q||w)}),r("label",{class:"media-sensitive",children:[r("input",{name:"sensitiveMedia",type:"checkbox",checked:de,disabled:D==="loading",onChange:m=>{const w=m.target.checked;we(w)}})," ",r("span",{children:r(ie,{id:"jER18a"})})," ",r(ee,{icon:`eye-${de?"close":"open"}`})]})]}),!!re&&r($a,{lang:oe,maxOptions:he,maxExpiration:Je,minExpiration:Ue,maxCharactersPerOption:He,poll:re,disabled:D==="loading",onInput:m=>{if(m){const w={...m};it(w)}else it(null),at()}}),!!Pe?.id&&r("div",{class:"quote-status",children:r(On,{status:Pe,instance:z,size:"s",readOnly:!0})}),We&&r("div",{class:"toolbar scheduled-at",children:[r("span",{children:[r("label",{children:r(ie,{id:"GKuKcZ",components:{0:r(ya,{scheduledAt:We,setScheduledAt:Ve})}})})," ",r("small",{class:"tag insignificant",children:xa()})]}),r("button",{type:"button",class:"plain4 close-button small",onClick:()=>{Ve(null),at()},children:r(ee,{icon:"x",alt:T({id:"dEgA5A"})})})]}),r(go,{quoteSuggestion:rt,hasCurrentQuoteStatus:!!Pe?.id,onAccept:()=>{const{status:m}=rt,w=Y.current?.value||"",_=Y.current?.selectionStart||0,L=w.lastIndexOf(rt.url,_),q=w.slice(0,L)+w.slice(L+rt.url.length);Y.current&&(Y.current.value=q,Y.current.dispatchEvent(new Event("input"))),!!Pe?.id?(ct(null),Ht(m)):document.startViewTransition?document.startViewTransition(()=>{ct(null),Ht(m)}):(ct(null),Ht(m)),Xe()},onCancel:()=>ct(null)}),r("div",{class:"toolbar compose-footer",children:[r("span",{class:"add-toolbar-button-group spacer",children:[xn&&r(hr,{portal:{target:document.body},containerProps:{style:{zIndex:1001}},menuButton:({open:m})=>r("button",{type:"button",class:`toolbar-button add-button ${m?"active":""}`,children:r(ee,{icon:"plus",title:T({id:"m16xKo"})})}),children:[Yi&&r(ut,{disabled:tt,className:"compose-menu-add-media",children:[r("label",{class:"compose-menu-add-media-field",children:r(Gi,{hidden:!0,supportedMimeTypes:Ke,disabled:tt,setMediaAttachments:Ce})}),r(ee,{icon:"camera"})," ",r("span",{children:S(Re.camera)})]}),r(ut,{disabled:tt,className:"compose-menu-add-media",children:[r("label",{class:"compose-menu-add-media-field",children:r(nr,{hidden:!0,supportedMimeTypes:B,maxMediaAttachments:le,mediaAttachments:X,disabled:tt,setMediaAttachments:Ce})}),r(ee,{icon:"media"})," ",r("span",{children:S(Re.media)})]}),r(ut,{disabled:Gt,onClick:Yt,children:[r(ee,{icon:`eye-${Ne?"close":"open"}`})," ",r("span",{children:S(Re.sensitive)})]}),Xt&&r(ut,{disabled:Zt,onClick:Qt,children:[r(ee,{icon:"poll"})," ",r("span",{children:S(Re.poll)})]}),r(qi,{}),r(ut,{onClick:()=>{Me({targetElement:lt})},children:[r(ee,{icon:"emoji2"})," ",r("span",{children:S(Re.customEmoji)})]}),!!Le.settings.composerGIFPicker&&r(ut,{disabled:tt,onClick:()=>{ht(!0)},children:[r("span",{class:"icon icon-gif",role:"img"}),r("span",{children:S(Re.gif)})]}),kn&&r(jt,{children:[r(qi,{}),r(ut,{disabled:En,onClick:Jt,children:[r(ee,{icon:"schedule"})," ",r("span",{children:S(Re.scheduledPost)})]})]})]}),r("span",{class:"add-sub-toolbar-button-group",ref:je,hidden:!0,children:[Yi&&r("label",{class:"toolbar-button",children:[r(Gi,{supportedMimeTypes:Ke,mediaAttachments:X,disabled:tt,setMediaAttachments:Ce}),r(ee,{icon:"camera",alt:S(Re.camera)})]}),r("label",{class:"toolbar-button",children:[r(nr,{supportedMimeTypes:B,maxMediaAttachments:le,mediaAttachments:X,disabled:tt,setMediaAttachments:Ce}),r(ee,{icon:"media",alt:S(Re.media)})]}),r("button",{type:"button",class:"toolbar-button",disabled:Gt,onClick:Yt,children:r(ee,{icon:`eye-${Ne?"close":"open"}`,alt:S(Re.sensitive)})}),Xt&&r("button",{type:"button",class:"toolbar-button",disabled:Zt,onClick:Qt,children:r(ee,{icon:"poll",alt:S(Re.poll)})}),r("div",{class:"toolbar-divider"}),r("button",{type:"button",class:"toolbar-button",disabled:D==="loading",onClick:()=>{Me({targetElement:lt})},children:r(ee,{icon:"emoji2",alt:S(Re.customEmoji)})}),!!Le.settings.composerGIFPicker&&r("button",{type:"button",class:"toolbar-button gif-picker-button",disabled:tt,onClick:()=>{ht(!0)},children:r("span",{class:"icon icon-gif","aria-label":S(Re.gif)})}),kn&&r(jt,{children:[r("div",{class:"toolbar-divider"}),r("button",{type:"button",class:`toolbar-button ${We?"highlight":""}`,disabled:En,onClick:Jt,children:r(ee,{icon:"schedule",alt:S(Re.scheduledPost)})})]})]})]}),D==="loading"?r(Bn,{abrupt:!0}):r(Ca,{maxCharacters:ye,hidden:D==="loading"}),Ut()&&r("label",{class:`toolbar-button ${$n?"highlight":""}`,children:[r(ee,{icon:"quote2",alt:"Quote settings"}),De==="followers"&&r(ee,{icon:"group",class:"insignificant"}),De==="nobody"&&r(ee,{icon:"block",class:"insignificant"}),r("select",{name:"quoteApprovalPolicy",value:De,onChange:m=>{Ye(m.target.value)},disabled:D==="loading",dir:"auto",children:[r("option",{value:"public",disabled:yn,children:r(ie,{id:"hDWXuG"})}),r("option",{value:"followers",disabled:yn,children:r(ie,{id:"9Ko+Xp"})}),r("option",{value:"nobody",children:r(ie,{id:"+bAQ3S"})})]})]}),r("label",{class:`toolbar-button ${jn?"highlight":""}`,title:S(oi[Ee]),children:[Ee==="public"||Ee==="direct"?r(ee,{icon:wa[Ee],alt:S(oi[Ee])}):r("span",{class:"icon-text",children:S(oi[Ee])}),r("select",{name:"visibility",value:Ee,onChange:m=>{if(qe(m.target.value),(m.target.value==="private"||m.target.value==="direct")&&Ye("nobody"),m.target.value==="direct"&&Pe?.id){const w=Pe.url;if(w){const _=Y.current.value;_.includes(w)||(Y.current.value=_+(_?`
`:"")+w,et())}hn(!0),mt(T({id:"Z/Vnvj"}))}else if(m.target.value!=="direct"&&fn){const w=($t||A)?.url;if(w&&Y.current){const _=Y.current.value,L=_.indexOf(w);if(L!==-1){let q=_.slice(0,L)+_.slice(L+w.length);q=q.replace(/\n+$/,""),Y.current.value=q,et()}}hn(!1)}},disabled:D==="loading"||!!g,dir:"auto",children:[r("option",{value:"public",children:r(ie,{id:"7d1a0d"})}),(Dt("@pleroma/local-visibility-post")||Dt("@akkoma/local-visibility-post"))&&r("option",{value:"local",children:r(ie,{id:"d5zxa4"})}),r("option",{value:"unlisted",children:r(ie,{id:"pPYeIN"})}),r("option",{value:"private",children:r(ie,{id:"x5LEuB"})}),r("option",{value:"direct",children:r(ie,{id:"IV4QaU"})})]})]})," ",r("label",{class:`toolbar-button ${bn?"highlight":""}`,children:[r("span",{class:"icon-text",children:vo[oe]?.native}),r("select",{name:"language",value:oe,onChange:m=>{const{value:w}=m.target;Fe(w||Ft),nt.session.set("currentLanguage",w||Ft)},disabled:D==="loading",dir:"auto",children:[Mt.map(([m,w,_])=>{const L=fi({code:m,fallback:w});return r("option",{value:m,children:L!==_?`${_} - ${L}`:L},m)}),r("hr",{}),Vt.map(([m,w,_])=>{const L=fi({code:m,fallback:w});return r("option",{value:m,children:L!==_?`${_} - ${L}`:L},m)})]})]})," ",r("button",{type:"submit",disabled:D==="loading",children:T(We?{id:"gmB6oO"}:o?{id:"ImOQa9"}:g?{id:"EkH9pt"}:{id:"GMe2XV"})})]})]})]}),Wt&&r(Mn,{onClose:()=>{zt(!1),at()},children:r(mo,{masto:N,instance:z,onClose:()=>{zt(!1)},defaultSearchTerm:Wt?.defaultSearchTerm,onSelect:m=>{const w=Y.current;w&&bt({targetElement:w,text:"@"+m})}})}),Pt&&r(Mn,{onClose:()=>{Me(!1),at()},children:r(Ja,{masto:N,instance:z,onClose:()=>{Me(!1)},defaultSearchTerm:Pt?.defaultSearchTerm,onSelect:m=>{const w=Pt?.targetElement?.current||Y.current;w&&bt({targetElement:w,text:m})}})}),mn&&r(Mn,{onClose:()=>{ht(!1),at()},children:r(io,{onClose:()=>ht(!1),onSelect:({url:m,type:w,alt_text:_})=>{if(X.length>=le){alert(cn._({id:"ctFhjs",values:{maxMediaAttachments:le}}));return}(async()=>{let L;try{L=mt({text:T({id:"/Cw4Tx"}),duration:-1});const q=await fetch(m,{referrerPolicy:"no-referrer"}).then(J=>J.blob()),V=new File([q],w==="video/mp4"?"video.mp4":"image.gif",{type:w}),j=[...X,{file:V,type:w,size:V.size,id:null,description:_||""}];Ce(j),L?.hideToast?.()}catch{L?.hideToast?.(),mt(T({id:"VKDnAx"}))}})()}})})]})}function sr(f){for(let o in f)(f[o]===null||f[o]===void 0)&&delete f[o];return f}export{Lo as default};
//# sourceMappingURL=compose-DWCfk6Fp.js.map
