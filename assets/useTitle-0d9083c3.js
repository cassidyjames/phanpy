import{N as _a,O as ka,G as wa,P as xa,Q as Ea,z as Vn,f as La,_ as te,p as ue,h as W,o as e,x as $t,u as Ke,U as Ta,j as Un,e as Aa,c as Ae,V as Ca,S as Fa,M as Hn,k as K,W as ct,X as $a,Y as Ia,Z as Sa,$ as Da,a0 as Ra,a1 as Kn,E as Pa,a2 as Ma,a3 as Oa,a4 as za,a5 as Na,a6 as Ba,a7 as ja,a8 as Va,a9 as Ua,aa as Ha,ab as Ka,g as qa,T as qn,ac as Wa,F as Re,y as Qt,ad as kn,v as Ga,a as dt,t as Ja,d as Ut,J as Wn,C as Ya,ae as Za,I as Xa,af as Qa,ag as eo,ah as wn,ai as to,q as no,B as xn}from"./vendor-d00568ff.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();const ao="modulepreload",oo=function(t,n){return new URL(t,n).href},En={},k=function(n,a,s){if(!a||a.length===0)return n();const o=document.getElementsByTagName("link");return Promise.all(a.map(r=>{if(r=oo(r,s),r in En)return;En[r]=!0;const c=r.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(!!s)for(let u=o.length-1;u>=0;u--){const g=o[u];if(g.href===r&&(!c||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${l}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":ao,c||(f.as="script",f.crossOrigin=""),f.href=r,document.head.appendChild(f),c)return new Promise((u,g)=>{f.addEventListener("load",u),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>n()).catch(r=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=r,window.dispatchEvent(c),!c.defaultPrevented)throw r})};function Gn(t){const n=O.local.getJSON("accounts")||[];return n.find(a=>a.info.id===t)||n[0]}function io(t){return(O.local.getJSON("accounts")||[]).find(a=>a.accessToken===t)}function It(){window.__IGNORE_GET_ACCOUNT_ERROR__;const t=O.session.get("currentAccount");return Gn(t)}function xt(){const t=It(),{instanceURL:n,info:{id:a}}=t;return`${a}@${n}`}function ro(t){const n=O.local.getJSON("accounts")||[],a=n.find(s=>s.info.id===t.info.id);a?(a.info=t.info,a.instanceURL=t.instanceURL,a.accessToken=t.accessToken,a.vapidKey=t.vapidKey):n.push(t),O.local.setJSON("accounts",n),O.session.set("currentAccount",t.info.id)}function Ti(t){const n=O.local.getJSON("accounts")||[],a=n.find(s=>s.info.id===t.id);a&&(a.info.displayName!==t.displayName||a.info.avatar!==t.avatar||a.info.avatar_static!==t.avatar_static)&&(a.info={...a.info,...t},O.local.setJSON("accounts",n))}let Ht=null;function Jn(){if(Ht)return Ht;try{const t=It(),n=O.local.getJSON("instances"),a=t.instanceURL.toLowerCase();return Ht=n[a]}catch(t){return alert(`Failed to load instance configuration. Please try again.

${t}`),O.local.del("instances"),location.reload(),{}}}function so(t){const{configuration:n,maxMediaAttachments:a,maxTootChars:s,pleroma:o,pollLimits:r}=t,c=(n==null?void 0:n.statuses)||{};a&&(c.maxMediaAttachments??(c.maxMediaAttachments=a)),s&&(c.maxCharacters??(c.maxCharacters=s));const l=(n==null?void 0:n.polls)||{};return r&&(l.maxCharactersPerOption??(l.maxCharactersPerOption=r.maxOptionChars),l.maxExpiration??(l.maxExpiration=r.maxExpiration),l.maxOptions??(l.maxOptions=r.maxOptions),l.minExpiration??(l.minExpiration=r.minExpiration)),{...n,statuses:c,polls:l}}function co(){const t=Jn();return so(t)}const ze={get:t=>{try{return localStorage.getItem(t)}catch{return null}},getJSON:t=>{try{return JSON.parse(ze.get(t))}catch{return null}},set:(t,n)=>{try{return localStorage.setItem(t,n)}catch{return null}},setJSON:(t,n)=>{try{return ze.set(t,JSON.stringify(n))}catch{return null}},del:t=>{try{return localStorage.removeItem(t)}catch{return null}}},en={get:t=>{try{return sessionStorage.getItem(t)}catch{return null}},getJSON:t=>{try{return JSON.parse(en.get(t))}catch{return null}},set:(t,n)=>{try{return sessionStorage.setItem(t,n)}catch{return null}},setJSON:(t,n)=>{try{return en.set(t,JSON.stringify(n))}catch{return null}},del:t=>{try{return sessionStorage.removeItem(t)}catch{return null}}},lo={get:t=>{try{return ze.getJSON(t)[xt()]}catch{return null}},set:(t,n)=>{try{const a=ze.getJSON(t)||{};return a[xt()]=n,ze.setJSON(t,a)}catch{return null}},del:t=>{try{const n=ze.getJSON(t)||{};return delete n[xt()],ze.setJSON(t,n)}catch{return null}}},O={local:ze,session:en,account:lo},Et="mastodon.social",Tt={},$e={};window.__ACCOUNT_APIS__=$e;let le;function Ve({instance:t,accessToken:n}){/^https?:\/\//.test(t)&&(t=t.replace(/^https?:\/\//,"").replace(/\/+$/,"").toLowerCase());const a=t?`https://${t}`:`https://${Et}`,o={masto:_a({url:a,accessToken:n,timeout:3e4}),instance:t,accessToken:n};return Tt[t]=o,$e[t]||($e[t]={}),n&&($e[t][n]=o),o}async function Ai(t,n){const{masto:a,accessToken:s}=t;let o;try{o=await a.v2.instance.fetch()}catch{}if(!o)try{o=await a.v1.instance.fetch()}catch{}if(!o)return;const{uri:r,urls:{streamingApi:c}={},domain:l,configuration:{urls:{streaming:h}={}}={}}=o,f=O.local.getJSON("instances")||{};if((r||l)&&(f[(l||r).replace(/^https?:\/\//,"").replace(/\/+$/,"").toLowerCase()]=o),n&&(f[n.toLowerCase()]=o),O.local.setJSON("instances",f),"WebSocket"in window&&(c||h)){const g=ka({streamingApiUrl:h||c,accessToken:s,implementation:WebSocket});t.streaming=g}}async function Ci(t,n,a,s){const{masto:o}=t,r=await o.v1.accounts.verifyCredentials();O.session.set("currentAccount",r.id),ro({info:r,instanceURL:n.toLowerCase(),accessToken:a,vapidKey:s})}async function Fi(t){try{const{masto:n}=t,a=await n.v1.preferences.fetch();O.account.set("preferences",a)}catch{}}function Be({instance:t,accessToken:n,accountID:a,account:s}={}){var h,f,u,g;if(t&&(t=t.toLowerCase().trim()),t&&n){const d=((h=$e[t])==null?void 0:h[n])||Ve({instance:t,accessToken:n}),{masto:v,streaming:y}=d;return{masto:v,streaming:y,client:d,authenticated:!0,instance:t}}if(n)for(const d in $e)if($e[d][n]){const v=$e[d][n],{masto:y,streaming:p}=v;return{masto:y,streaming:p,client:v,authenticated:!0,instance:d}}else{const v=io(n);if(v){const y=v.accessToken,p=v.instanceURL.toLowerCase().trim(),b=Ve({instance:p,accessToken:y}),{masto:w,streaming:T}=b;return{masto:w,streaming:T,client:b,authenticated:!0,instance:p}}else throw new Error("Access token not found")}if(s||a)if(s=s||Gn(a),s){const d=s.accessToken,v=s.instanceURL.toLowerCase().trim(),y=((f=$e[v])==null?void 0:f[d])||Ve({instance:v,accessToken:d}),{masto:p,streaming:b}=y;return{masto:p,streaming:b,client:y,authenticated:!0,instance:v}}else throw new Error(`Account ${a} not found`);const o=It();if(t){if((le==null?void 0:le.instance)===t)return{masto:le.masto,streaming:le.streaming,client:le,authenticated:!0,instance:t};if((o==null?void 0:o.instanceURL)===t){const{accessToken:b}=o;return le=((u=$e[t])==null?void 0:u[b])||Ve({instance:t,accessToken:b}),{masto:le.masto,streaming:le.streaming,client:le,authenticated:!0,instance:t}}const d=Tt[t]||Ve({instance:t}),{masto:v,streaming:y,accessToken:p}=d;return{masto:v,streaming:y,client:d,authenticated:!!p,instance:t}}if(le)return{masto:le.masto,streaming:le.streaming,client:le,authenticated:!0,instance:le.instance};if(o){const{accessToken:d,instanceURL:v}=o;return le=((g=$e[v])==null?void 0:g[d])||Ve({instance:v,accessToken:d}),{masto:le.masto,streaming:le.streaming,client:le,authenticated:!0,instance:v}}const r=Tt[Et]||Ve({instance:Et}),{masto:c,streaming:l}=r;return{masto:c,streaming:l,client:r,authenticated:!1,instance:Et}}window.__API__={currentAccountApi:le,apis:Tt,accountApis:$e};window._showToast=Te;function Te(t){typeof t=="string"&&(t={text:t});const{onClick:n,delay:a,...s}=t,o=wa({className:`${n||t.destination?"shiny-pill":""}`,gravity:"bottom",position:"center",...s,onClick:()=>{n==null||n(o)}});a?setTimeout(()=>{o.showToast()},a):o.showToast()}function Qe(t,n={}){return xa(t,{...n,maxSize:100})}function St(t,n={}){return Qe(t,{isPromise:!0,...n})}const A=Ea({appVersion:{},prevLocation:null,currentLocation:null,statuses:{},statusThreadNumber:{},home:[],homeNew:[],homeLast:null,homeLastFetchTime:null,notifications:[],notificationsLast:null,notificationsNew:[],notificationsShowNew:!1,notificationsLastFetchTime:null,reloadStatusPage:0,reloadGenericAccounts:{id:null,counter:0},spoilers:{},scrollPositions:{},unfurledLinks:{},statusQuotes:{},accounts:{},routeNotification:null,showCompose:!1,showSettings:!1,showAccount:!1,showAccounts:!1,showDrafts:!1,showMediaModal:!1,showShortcutsSettings:!1,showKeyboardShortcutsHelp:!1,showGenericAccounts:!1,showMediaAlt:!1,shortcuts:[],settings:{autoRefresh:!1,shortcutsViewMode:null,shortcutsColumnsMode:!1,boostsCarousel:!0,contentTranslation:!0,contentTranslationTargetLanguage:null,contentTranslationHideLanguages:[],contentTranslationAutoInline:!1,cloakMode:!1}});function $i(){A.notificationsLast=O.account.get("notificationsLast")||null,A.shortcuts=O.account.get("shortcuts")??[],A.settings.autoRefresh=O.account.get("settings-autoRefresh")??!1,A.settings.shortcutsViewMode=O.account.get("settings-shortcutsViewMode")??null,A.settings.shortcutsColumnsMode=O.account.get("settings-shortcutsColumnsMode")??!1,A.settings.boostsCarousel=O.account.get("settings-boostsCarousel")??!0,A.settings.contentTranslation=O.account.get("settings-contentTranslation")??!0,A.settings.contentTranslationTargetLanguage=O.account.get("settings-contentTranslationTargetLanguage")||null,A.settings.contentTranslationHideLanguages=O.account.get("settings-contentTranslationHideLanguages")||[],A.settings.contentTranslationAutoInline=O.account.get("settings-contentTranslationAutoInline")??!1,A.settings.cloakMode=O.account.get("settings-cloakMode")??!1}Vn(A,"notificationsLast",t=>{O.account.set("notificationsLast",A.notificationsLast)});La(A,t=>{for(const[n,a,s,o]of t)a.join(".")==="settings.autoRefresh"&&O.account.set("settings-autoRefresh",!!s),a.join(".")==="settings.boostsCarousel"&&O.account.set("settings-boostsCarousel",!!s),a.join(".")==="settings.shortcutsColumnsMode"&&O.account.set("settings-shortcutsColumnsMode",!!s),a.join(".")==="settings.shortcutsViewMode"&&O.account.set("settings-shortcutsViewMode",s),a.join(".")==="settings.contentTranslation"&&O.account.set("settings-contentTranslation",!!s),a.join(".")==="settings.contentTranslationAutoInline"&&O.account.set("settings-contentTranslationAutoInline",!!s),a.join(".")==="settings.contentTranslationTargetLanguage"&&O.account.set("settings-contentTranslationTargetLanguage",s),/^settings\.contentTranslationHideLanguages/i.test(a.join("."))&&O.account.set("settings-contentTranslationHideLanguages",A.settings.contentTranslationHideLanguages),(a==null?void 0:a[0])==="shortcuts"&&O.account.set("shortcuts",A.shortcuts),a.join(".")==="settings.cloakMode"&&O.account.set("settings-cloakMode",!!s)});function je(t,n){if(t)return n?`${n}/${t}`:t}function Yn(t,n){if(n){const a=je(t,n);return A.statuses[a]}return A.statuses[t]}function Fe(t,n,a){typeof n=="object"&&(a=n,n=null);const{override:s,skipThreading:o}=Object.assign({override:!0,skipThreading:!1},a);if(!t)return;const r=Yn(t.id,n);if(!s&&r)return;const c=je(t.id,n);if(r!=null&&r._pinned&&(t._pinned=r._pinned),r!=null&&r._filtered&&(t._filtered=r._filtered),A.statuses[c]=t,t.reblog){const l=je(t.reblog.id,n);A.statuses[l]=t.reblog}o||requestAnimationFrame(()=>{Ln(t,n),t.reblog&&Ln(t.reblog,n)})}function Ln(t,n){const{masto:a,instance:s}=Be({instance:n});let o=0;async function r(c,l=0){const{inReplyToId:h,inReplyToAccountId:f}=c;if(!h||f!==c.account.id)return[c];if(h&&f!==c.account.id)throw"Not a thread";const u=je(h,s);let g=A.statuses[u];if(!g){if(o++>3)throw"Too many fetches for thread";await new Promise(d=>setTimeout(d,500*o)),g=await uo(h,a),Fe(g,s,{skipThreading:!0})}return[...await r(g,++l),c]}return r(t).then(c=>{c.length>1&&c.forEach((l,h)=>{const f=je(l.id,s);A.statusThreadNumber[f]=h+1})}).catch(c=>{})}const uo=St((t,n)=>n.v1.statuses.$select(t).fetch());function mo(t,n,a,s){const o=te(t);ue(()=>{o.current=t},[t,a]),ue(()=>{!s||n===null||n===!1||o.current()},[s]),ue(()=>{if(n===null||n===!1)return;const c=setInterval(()=>o.current(),n);return()=>clearInterval(c)},[n])}function ho(t){const n=new URL("/compose/",window.location),{width:a,height:s}=window.screen,o=Math.max(0,(a-600)/2),r=Math.max(0,(s-450)/2),c=Math.min(a,600),l=Math.min(s,450),h=(t==null?void 0:t.uid)||Math.random(),f=window.open(n,"compose"+h,`width=${c},height=${l},left=${o},top=${r}`);return f&&(f.__COMPOSE__=t),f}const po={s:12,m:16,l:20,xl:24,xxl:32},fo={x:()=>k(()=>import("./icons/close-line-1e607fd7.js"),[],import.meta.url),heart:()=>k(()=>import("./icons/heart-line-58c847a5.js"),[],import.meta.url),bookmark:()=>k(()=>import("./icons/bookmark-line-6b313284.js"),[],import.meta.url),"check-circle":()=>k(()=>import("./icons/check-circle-line-482cc23b.js"),[],import.meta.url),"x-circle":()=>k(()=>import("./icons/close-circle-line-f70541d9.js"),[],import.meta.url),transfer:()=>k(()=>import("./icons/transfer-4-line-b7cbb98b.js"),[],import.meta.url),rocket:()=>k(()=>import("./icons/rocket-line-101de3ec.js"),[],import.meta.url),"arrow-left":()=>k(()=>import("./icons/arrow-left-line-0feb3aa8.js"),[],import.meta.url),"arrow-right":()=>k(()=>import("./icons/arrow-right-line-694dabc1.js"),[],import.meta.url),"arrow-up":()=>k(()=>import("./icons/arrow-up-line-95e379ea.js"),[],import.meta.url),"arrow-down":()=>k(()=>import("./icons/arrow-down-line-bb178ce2.js"),[],import.meta.url),earth:()=>k(()=>import("./icons/earth-line-5c4df1e5.js"),[],import.meta.url),lock:()=>k(()=>import("./icons/lock-line-d71022d2.js"),[],import.meta.url),unlock:()=>k(()=>import("./icons/unlock-line-cacd9f81.js"),[],import.meta.url),"eye-close":()=>k(()=>import("./icons/eye-close-line-da2db2a8.js"),[],import.meta.url),"eye-open":()=>k(()=>import("./icons/eye-2-line-64371d08.js"),[],import.meta.url),message:()=>k(()=>import("./icons/mail-line-655a57c1.js"),[],import.meta.url),comment:()=>k(()=>import("./icons/chat-3-line-51ad6e95.js"),[],import.meta.url),home:()=>k(()=>import("./icons/home-3-line-8018e019.js"),[],import.meta.url),notification:()=>k(()=>import("./icons/notification-line-6483301e.js"),[],import.meta.url),follow:()=>k(()=>import("./icons/user-follow-line-d4adf471.js"),[],import.meta.url),"follow-add":()=>k(()=>import("./icons/user-add-line-b53e9c05.js"),[],import.meta.url),poll:[()=>k(()=>import("./icons/chart-bar-line-ca6f21fb.js"),[],import.meta.url),"90deg"],pencil:()=>k(()=>import("./icons/pencil-line-7c3f3024.js"),[],import.meta.url),quill:()=>k(()=>import("./icons/quill-pen-line-992093b1.js"),[],import.meta.url),at:()=>k(()=>import("./icons/at-line-b5f1b18e.js"),[],import.meta.url),attachment:()=>k(()=>import("./icons/attachment-line-ebd7ec47.js"),[],import.meta.url),upload:()=>k(()=>import("./icons/upload-3-line-e7582c69.js"),[],import.meta.url),gear:()=>k(()=>import("./icons/settings-3-line-c7b6c1ed.js"),[],import.meta.url),more:()=>k(()=>import("./icons/more-3-line-9beec198.js"),[],import.meta.url),external:()=>k(()=>import("./icons/external-link-line-e805d30b.js"),[],import.meta.url),popout:()=>k(()=>import("./icons/external-link-line-e805d30b.js"),[],import.meta.url),popin:[()=>k(()=>import("./icons/external-link-line-e805d30b.js"),[],import.meta.url),"180deg"],plus:()=>k(()=>import("./icons/add-circle-line-0f9ede61.js"),[],import.meta.url),"chevron-left":()=>k(()=>import("./icons/left-line-8c6d4730.js"),[],import.meta.url),"chevron-right":()=>k(()=>import("./icons/right-line-a8ed19bd.js"),[],import.meta.url),"chevron-down":()=>k(()=>import("./icons/down-line-22725d11.js"),[],import.meta.url),reply:[()=>k(()=>import("./icons/share-forward-line-0e1cf661.js"),[],import.meta.url),"180deg","horizontal"],thread:()=>k(()=>import("./icons/route-line-edf25882.js"),[],import.meta.url),group:()=>k(()=>import("./icons/group-line-7fc1ae6f.js"),[],import.meta.url),bot:()=>k(()=>import("./icons/android-2-line-9258188e.js"),[],import.meta.url),menu:()=>k(()=>import("./icons/rows-4-line-b232add2.js"),[],import.meta.url),list:()=>k(()=>import("./icons/list-check-line-d954d344.js"),[],import.meta.url),search:()=>k(()=>import("./icons/search-2-line-91d20a16.js"),[],import.meta.url),hashtag:()=>k(()=>import("./icons/hashtag-line-173f0e0d.js"),[],import.meta.url),info:()=>k(()=>import("./icons/information-line-f740a4d0.js"),[],import.meta.url),shortcut:()=>k(()=>import("./icons/lightning-line-13c40c00.js"),[],import.meta.url),user:()=>k(()=>import("./icons/user-4-line-f6272bc4.js"),[],import.meta.url),following:()=>k(()=>import("./icons/walk-line-f9ac997b.js"),[],import.meta.url),pin:()=>k(()=>import("./icons/pin-line-1614dbce.js"),[],import.meta.url),bus:()=>k(()=>import("./icons/bus-2-line-287f972b.js"),[],import.meta.url),link:()=>k(()=>import("./icons/link-2-line-e03d0a4a.js"),[],import.meta.url),history:()=>k(()=>import("./icons/history-line-fe495dd5.js"),[],import.meta.url),share:()=>k(()=>import("./icons/share-2-line-24701383.js"),[],import.meta.url),sparkles:()=>k(()=>import("./icons/sparkles-line-c135b7ce.js"),[],import.meta.url),exit:()=>k(()=>import("./icons/exit-line-ec340eaf.js"),[],import.meta.url),translate:()=>k(()=>import("./icons/translate-line-2df19669.js"),[],import.meta.url),play:()=>k(()=>import("./icons/play-fill-36970130.js"),[],import.meta.url),trash:()=>k(()=>import("./icons/delete-2-line-682baf55.js"),[],import.meta.url),mute:()=>k(()=>import("./icons/volume-mute-line-9ab0102c.js"),[],import.meta.url),unmute:()=>k(()=>import("./icons/volume-line-9e549d94.js"),[],import.meta.url),block:()=>k(()=>import("./icons/forbid-circle-line-077295c5.js"),[],import.meta.url),unblock:[()=>k(()=>import("./icons/forbid-circle-line-077295c5.js"),[],import.meta.url),"180deg"],flag:()=>k(()=>import("./icons/flag-4-line-a416d7ea.js"),[],import.meta.url),time:()=>k(()=>import("./icons/time-line-78409f27.js"),[],import.meta.url),refresh:()=>k(()=>import("./icons/refresh-2-line-c573bc2e.js"),[],import.meta.url),emoji2:()=>k(()=>import("./icons/emoji-2-line-b853d04a.js"),[],import.meta.url),filter:()=>k(()=>import("./icons/filter-2-line-5c65a22f.js"),[],import.meta.url),chart:()=>k(()=>import("./icons/chart-line-line-e9099084.js"),[],import.meta.url),react:()=>k(()=>import("./icons/react-line-1e209827.js"),[],import.meta.url),layout4:()=>k(()=>import("./icons/layout-4-line-aff02a7f.js"),[],import.meta.url),layout5:()=>k(()=>import("./icons/layout-5-line-29b47e62.js"),[],import.meta.url),announce:()=>k(()=>import("./icons/announcement-line-71e251ef.js"),[],import.meta.url),alert:()=>k(()=>import("./icons/alert-line-d292623f.js"),[],import.meta.url),round:()=>k(()=>import("./icons/round-fill-d5665283.js"),[],import.meta.url),"arrow-up-circle":()=>k(()=>import("./icons/arrow-up-circle-line-92cd8597.js"),[],import.meta.url),"arrow-down-circle":()=>k(()=>import("./icons/arrow-down-circle-line-fb990a65.js"),[],import.meta.url),clipboard:()=>k(()=>import("./icons/clipboard-line-69c6b835.js"),[],import.meta.url),"account-edit":()=>k(()=>import("./icons/user-edit-line-8f150bdb.js"),[],import.meta.url),"account-warning":()=>k(()=>import("./icons/user-warning-line-a67c49de.js"),[],import.meta.url),keyboard:()=>k(()=>import("./icons/keyboard-line-ad6bd154.js"),[],import.meta.url),cloud:()=>k(()=>import("./icons/cloud-line-093593ee.js"),[],import.meta.url),month:()=>k(()=>import("./icons/calendar-month-line-d095d094.js"),[],import.meta.url),media:()=>k(()=>import("./icons/photo-album-line-823e0c12.js"),[],import.meta.url)};function go({icon:t,size:n="m",alt:a,title:s,class:o="",style:r={}}){if(!t)return null;const c=po[n];let l=fo[t],h,f;Array.isArray(l)&&([l,h,f]=l);const[u,g]=W(null);return ue(async()=>{const d=await l();g(d.default)},[l]),e("span",{class:`icon ${o}`,title:s||a,style:{width:`${c}px`,height:`${c}px`,...r},children:u&&e("svg",{width:c,height:c,viewBox:`0 0 ${u.width} ${u.height}`,dangerouslySetInnerHTML:{__html:u.body},style:{transform:`${h?`rotate(${h})`:""} ${f?"scaleX(-1)":""}`}})})}const E=$t(go);const vo=document.getElementById("modal-container");function lt({children:t,onClose:n,onClick:a,class:s}){if(!t)return null;const o=te();ue(()=>{let l=setTimeout(()=>{var f;const h=(f=o.current)==null?void 0:f.querySelector('[tabindex="-1"]');h&&h.focus()},100);return()=>clearTimeout(l)},[]);const r=Ke("esc",()=>{setTimeout(()=>{n==null||n()},0)},{enabled:!!n,keydown:!1,keyup:!0},[n]),c=e("div",{ref:l=>{var h;o.current=l,r.current=((h=l==null?void 0:l.querySelector)==null?void 0:h.call(l,'[tabindex="-1"]'))||l},className:s,onClick:l=>{a==null||a(l),l.target===l.currentTarget&&(n==null||n(l))},tabIndex:"-1",onFocus:l=>{var h,f,u,g;l.target===l.currentTarget&&((g=(u=(f=(h=o.current)==null?void 0:h.querySelector)==null?void 0:f.call(h,'[tabindex="-1"]'))==null?void 0:u.focus)==null||g.call(u))},children:t});return Ta(c,vo)}function Ze({abrupt:t,hidden:n,...a}){return e("span",{...a,class:`loader-container ${t?"abrupt":""} ${n?"hidden":""}`,children:e("span",{class:"loader"})})}const Tn={s:16,m:20,l:24,xl:32,xxl:50,xxxl:64},ot={},it=window.OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas"),Kt=it.getContext("2d",{willReadFrequently:!0});function bo({url:t,size:n,alt:a="",squircle:s,...o}){n=Tn[n]||n||Tn.m;const r=te(),c=/missing\.png$/.test(t);return e("span",{ref:r,class:`avatar ${s?"squircle":""} ${ot[t]?"has-alpha":""}`,style:{width:n,height:n},title:a,...o,children:!!t&&e("img",{src:t,width:n,height:n,alt:a,loading:"lazy",decoding:"async",crossOrigin:ot[t]===void 0&&!c?"anonymous":void 0,onError:l=>{l.target.crossOrigin&&(l.target.crossOrigin=null,l.target.src=t)},onLoad:l=>{if(r.current&&(r.current.dataset.loaded=!0),ot[t]===void 0&&!c)try{const{width:h,height:f}=l.target;it.width!==h&&(it.width=h),it.height!==f&&(it.height=f),Kt.drawImage(l.target,0,0);const u=Kt.getImageData(0,0,h,f),g=u.data.filter((d,v)=>v%4===3&&d<=128).length/(u.data.length/4)>.1;g&&r.current.classList.add("has-alpha"),ot[t]=g,Kt.clearRect(0,0,h,f)}catch{ot[t]=!1}}})})}const We=Qe(bo),mt=Un((t,n)=>{let a;try{a=Aa()}catch{}let s=(location.hash||"").replace(/^#/,"").trim();s===""&&(s="/");const{to:o,...r}=t;if(s&&s!=="/"&&s.includes("?")){const l=new URL(s,location.origin);if(l.searchParams.size){const h=Array.from(l.searchParams.entries()).map(([f,u])=>`${f}=${encodeURIComponent(u)}`).join("&");s=l.pathname+"?"+h}}const c=s===o||decodeURIComponent(s)===o;return e("a",{ref:n,href:`#${o}`,...r,class:`${t.class||""} ${c?"is-active":""}`,onClick:l=>{var h,f,u;(f=(h=l.currentTarget)==null?void 0:h.parentNode)!=null&&f.closest("a")&&l.stopPropagation(),a&&(A.prevLocation=a),(u=t.onClick)==null||u.call(t,l)}})});function qt({subMenu:t=!1,confirm:n=!0,confirmLabel:a,menuItemClassName:s,menuFooter:o,...r}){const{children:c,onClick:l,...h}=r;if(!n)return t?e(Ae,{...r}):l?Ca(c,{onClick:l}):c;const f=t?Fa:Hn,u=te();return e(f,{instanceRef:u,openTrigger:"clickOnly",direction:"bottom",overflow:"auto",gap:-8,shift:8,menuClassName:"menu-emphasized",...h,menuButton:t?void 0:c,label:t?c:void 0,itemProps:{onPointerMove:g=>{var d,v;g.pointerType==="touch"&&((v=(d=u.current)==null?void 0:d.openMenu)==null||v.call(d))},onPointerLeave:g=>{var d,v;g.pointerType==="touch"&&((v=(d=u.current)==null?void 0:d.openMenu)==null||v.call(d))}},children:[e(Ae,{className:s,onClick:l,children:a}),o]})}function ut({text:t,emojis:n}){if(!t)return"";if(!(n!=null&&n.length)||t.indexOf(":")===-1)return t;const a=new RegExp(`:(${n.map(o=>o.shortcode).join("|")}):`,"g");return t.split(a).map(o=>{const r=n.find(c=>c.shortcode===o);if(r){const{url:c,staticUrl:l}=r;return e("picture",{children:[e("source",{srcset:l,media:"(prefers-reduced-motion: reduce)"}),e("img",{src:c,alt:o,class:"shortcode-emoji emoji",width:"16",height:"16",loading:"lazy",decoding:"async"},o)]})}return o})}function yo({account:t,instance:n,showAvatar:a,showAcct:s,short:o,external:r,onClick:c}){var B;const{acct:l,avatar:h,avatarStatic:f,id:u,url:g,displayName:d,emojis:v,bot:y}=t;let{username:p}=t;const[b,w,T]=l.match(/([^@]+)(@.+)/i)||[,l],x=p.toLowerCase().trim(),L=(d||"").toLowerCase().trim(),$=L.replace(/(\:(\w|\+|\-)+\:)(?=|[\!\.\?]|$)/g,"").replace(/\s+/g,""),D=$.replace(/[^a-z0-9]/gi,"");return!o&&(x===L||x===$||x===D||((B=x.localeCompare)==null?void 0:B.call(x,$,"en",{sensitivity:"base"}))===0)&&(p=null),e("a",{class:`name-text ${s?"show-acct":""} ${o?"short":""}`,href:g,target:r?"_blank":null,title:`${d?`${d} `:""}@${l}`,onClick:U=>{if(!r){if(U.preventDefault(),U.stopPropagation(),c)return c(U);A.showAccount={account:t,instance:n}}},children:[a&&e(K,{children:[e(We,{url:f||h,squircle:y})," "]}),d&&!o?e(K,{children:[e("b",{children:e(ut,{text:d,emojis:v})}),!s&&p&&e(K,{children:[" ",e("i",{children:["@",p]})]})]}):o?e("i",{children:p}):e("b",{children:p}),s&&e(K,{children:[e("br",{}),e("i",{children:["@",w,e("span",{class:"ib",children:T})]})]})]})}const rt=$t(yo);ct.extend($a);ct.extend(Ia);ct.extend(Sa);const _o=new Intl.DateTimeFormat;function At({datetime:t,format:n}){if(!t)return null;const a=ct(t),[s,o]=W("");return ue(()=>{let r,c;const l=()=>{c=requestAnimationFrame(()=>{let h;if(n==="micro"){const f=ct();f.diff(a,"day")<=1||f.year()===a.year()?h=a.twitter():h=_o.format(a.toDate())}else h=a.fromNow();o(h),r=setTimeout(l,3e4)})};return c=requestAnimationFrame(l),()=>{clearTimeout(r),cancelAnimationFrame(c)}},[a]),e("time",{datetime:a.toISOString(),title:a.format("LLLL"),children:s})}const ko=[{code:"af",name:"Afrikaans"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bho",name:"Bhojpuri"},{code:"bs",name:"Bosnian"},{code:"bg",name:"Bulgarian"},{code:"ca",name:"Catalan"},{code:"ceb",name:"Cebuano"},{code:"ny",name:"Chichewa"},{code:"zh",name:"Chinese"},{code:"zh_HANT",name:"Chinese (Traditional)"},{code:"co",name:"Corsican"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Dhivehi"},{code:"doi",name:"Dogri"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"tl",name:"Filipino"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"fy",name:"Frisian"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek"},{code:"gn",name:"Guarani"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian Creole"},{code:"ha",name:"Hausa"},{code:"haw",name:"Hawaiian"},{code:"iw",name:"Hebrew"},{code:"hi",name:"Hindi"},{code:"hmn",name:"Hmong"},{code:"hu",name:"Hungarian"},{code:"is",name:"Icelandic"},{code:"ig",name:"Igbo"},{code:"ilo",name:"Ilocano"},{code:"id",name:"Indonesian"},{code:"ga",name:"Irish"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"jw",name:"Javanese"},{code:"kn",name:"Kannada"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"rw",name:"Kinyarwanda"},{code:"gom",name:"Konkani"},{code:"ko",name:"Korean"},{code:"kri",name:"Krio"},{code:"ku",name:"Kurdish (Kurmanji)"},{code:"ckb",name:"Kurdish (Sorani)"},{code:"ky",name:"Kyrgyz"},{code:"lo",name:"Lao"},{code:"la",name:"Latin"},{code:"lv",name:"Latvian"},{code:"ln",name:"Lingala"},{code:"lt",name:"Lithuanian"},{code:"lg",name:"Luganda"},{code:"lb",name:"Luxembourgish"},{code:"mk",name:"Macedonian"},{code:"mai",name:"Maithili"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"Maori"},{code:"mr",name:"Marathi"},{code:"mni-Mtei",name:"Meiteilon (Manipuri)"},{code:"lus",name:"Mizo"},{code:"mn",name:"Mongolian"},{code:"my",name:"Myanmar (Burmese)"},{code:"ne",name:"Nepali"},{code:"no",name:"Norwegian"},{code:"or",name:"Odia (Oriya)"},{code:"om",name:"Oromo"},{code:"ps",name:"Pashto"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"pa",name:"Punjabi"},{code:"qu",name:"Quechua"},{code:"ro",name:"Romanian"},{code:"ru",name:"Russian"},{code:"sm",name:"Samoan"},{code:"sa",name:"Sanskrit"},{code:"gd",name:"Scots Gaelic"},{code:"nso",name:"Sepedi"},{code:"sr",name:"Serbian"},{code:"st",name:"Sesotho"},{code:"sn",name:"Shona"},{code:"sd",name:"Sindhi"},{code:"si",name:"Sinhala"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovenian"},{code:"so",name:"Somali"},{code:"es",name:"Spanish"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"sv",name:"Swedish"},{code:"tg",name:"Tajik"},{code:"ta",name:"Tamil"},{code:"tt",name:"Tatar"},{code:"te",name:"Telugu"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"ts",name:"Tsonga"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"},{code:"ak",name:"Twi"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"ug",name:"Uyghur"},{code:"uz",name:"Uzbek"},{code:"vi",name:"Vietnamese"},{code:"cy",name:"Welsh"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"zu",name:"Zulu"}];function wo(...t){try{return Da(...t)}catch{return t[2]||!1}}const Ct=Qe(wo),xo=[new Intl.DateTimeFormat().resolvedOptions().locale,...navigator.languages];function Zn(t=!1){if(t){const{contentTranslationTargetLanguage:n}=A.settings;if(n)return n}return Ct(xo,ko.map(n=>n.code.replace("_","-")),"en")}function Wt(t){try{return new Intl.DisplayNames(navigator.languages,{type:"language"}).of(t)}catch{return null}}function an(t,n=[]){return t?(!n.length||t.indexOf(":")===-1||n.forEach(a=>{const{shortcode:s,staticUrl:o,url:r}=a;t=t.replace(new RegExp(`:${s}:`,"g"),`<picture><source srcset="${o}" media="(prefers-reduced-motion: reduce)"></source><img class="shortcode-emoji emoji" src="${r}" alt=":${s}:" width="16" height="16" loading="lazy" decoding="async" /></picture>`)}),t):""}const Je=document.createElement("div"),Eo=["u-url","mention","hashtag"];function Lo(t,n={}){const{emojis:a,postEnhanceDOM:s=()=>{}}=n;let o=t;const r=document.createElement("div");r.innerHTML=o;const c=/<a/i.test(o),l=o.indexOf("```")!==-1;if(c&&(Array.from(r.querySelectorAll('a:not([target="_blank"])')).forEach(g=>{g.setAttribute("target","_blank")}),Array.from(r.querySelectorAll("a[class]")).forEach(g=>{Array.from(g.classList).forEach(d=>{Eo.includes(d)||g.classList.remove(d)})})),c&&Array.from(r.querySelectorAll("a[href]")).forEach(u=>{/^https?:\/\//i.test(u.textContent.trim())&&u.classList.add("has-url-text")}),c){const f=Array.from(r.querySelectorAll("a[href]")),u=[];f.forEach(g=>{const d=g.innerText.trim(),v=g.querySelector("*");if(/^@[^@]+(@[^@]+)?$/g.test(d)){const[y,p,b]=d.split("@");v||(!u.find(([w])=>w===p)||u.find(([w,T])=>w===p&&T===b)?(g.innerHTML=`@<span>${p}</span>`,u.push([p,b])):g.innerHTML=`@<span>${p}@${b}</span>`),g.classList.add("mention")}/^#[^#]+$/g.test(d)&&(v||(g.innerHTML=`#<span>${d.slice(1)}</span>`),g.classList.add("mention","hashtag"))})}let h;if(o.indexOf(":")!==-1&&(h=Gt(r),h.forEach(f=>{let u=f.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");a&&(u=an(u,a)),Je.innerHTML=u;const g=Array.from(Je.childNodes);f.replaceWith(...g)})),l&&Array.from(r.querySelectorAll("p")).filter(u=>/^```[^]+```$/g.test(u.innerText.trim())).forEach(u=>{const g=document.createElement("pre");u.querySelectorAll("br").forEach(d=>d.replaceWith(`
`)),g.innerHTML=`<code>${u.innerHTML.trim()}</code>`,u.replaceWith(g)}),l&&Array.from(r.querySelectorAll("p")).filter(g=>/^```/g.test(g.innerText)).forEach(g=>{const d=[g];let v=!1,y=g;for(;y.nextElementSibling;){const p=y.nextElementSibling;if(p&&p.tagName==="P")if(/```$/g.test(p.innerText)){d.push(p),v=!0;break}else d.push(p);else break;y=p}if(v){const p=document.createElement("pre");d.forEach(w=>{w.querySelectorAll("br").forEach(T=>T.replaceWith(`
`))});const b=d.map(w=>w.innerHTML).join(`

`);p.innerHTML=`<code tabindex="0">${b}</code>`,g.replaceWith(p),d.forEach(w=>w.remove())}}),o.indexOf("`")!==-1&&(h=Gt(r),h.forEach(f=>{let u=f.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");/`[^`]+`/g.test(u)&&(u=u.replaceAll(/(`[^]+?`)/g,"<code>$1</code>")),Je.innerHTML=u;const g=Array.from(Je.childNodes);f.replaceWith(...g)})),/twitter\.com/i.test(o)&&(h=Gt(r,{rejectFilter:["A"]}),h.forEach(f=>{let u=f.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");/@[a-zA-Z0-9_]+@twitter\.com/g.test(u)&&(u=u.replaceAll(/(@([a-zA-Z0-9_]+)@twitter\.com)/g,'<a href="https://twitter.com/$2" rel="nofollow noopener noreferrer" target="_blank">$1</a>')),Je.innerHTML=u;const g=Array.from(Je.childNodes);f.replaceWith(...g)})),o.indexOf("#")!==-1){let f=null;const u=Array.from(r.querySelectorAll("p")).filter((g,d)=>{let v=0;for(let y=0;y<g.childNodes.length;y++){const p=g.childNodes[y];if(p.nodeType===Node.TEXT_NODE){if(p.textContent.trim()!=="")return!1}else if(p.tagName!=="BR")if(p.tagName==="A"){const b=p.textContent.trim();if(!b||!b.startsWith("#"))return!1;v++}else return!1}if(v>3||v>1&&f&&d===f+1)return f=d,!0});u!=null&&u.length&&u.forEach(g=>{g.classList.add("hashtag-stuffing"),g.title=g.innerText})}return s&&s(r),o=r.innerHTML,o}const tn=Qe(Lo),To=["STYLE","IMG","VIDEO","AUDIO","AREA","MAP","TRACK","EMBED","IFRAME","OBJECT","PICTURE","PORTAL","SOURCE","SVG","MATH","CANVAS","NOSCRIPT","SCRIPT","INPUT","OPTION","TEXTAREA","SLOT","TEMPLATE"],Ao=Object.fromEntries(To.map(t=>[t,!0]));function Gt(t,n={}){const a=[],s=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode(r){return Ao[r.parentNode.nodeName]||n.rejectFilter&&n.rejectFilter.includes(r.parentNode.nodeName)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},!1);let o;for(;o=s.nextNode();)a.push(o);return a}const Jt=document.createElement("div");function Co(t){return t?(Jt.innerHTML=t.replace(/<\/p>/g,`</p>

`).replace(/<\/li>/g,`</li>
`),Jt.querySelectorAll("br").forEach(n=>{n.replaceWith(`
`)}),Jt.innerText.replace(/[\r\n]{3,}/g,`

`).trim()):""}const nn=Qe(Co);function Fo(t){const{mentions:n=[],instance:a,previewMode:s,statusURL:o}=t||{};return r=>{var u,g;let{target:c}=r;if(c=c.closest("a"),!c||r.metaKey||r.ctrlKey||r.shiftKey||r.altKey||r.which===2)return;const l=(u=c.previousSibling)==null?void 0:u.textContent,h=l==null?void 0:l.endsWith("@"),f=c.innerText.startsWith("@");if(c.classList.contains("u-url")&&f||h&&!f){const d=(c.querySelector("span")||c).innerText.trim(),v=d.replace(/^@/,""),y=c.getAttribute("href"),p=n.find(b=>b.username===v||b.acct===v||b.url===y);if(p)r.preventDefault(),r.stopPropagation(),A.showAccount={account:p.acct,instance:a};else if(!/^http/i.test(d)){r.preventDefault(),r.stopPropagation();const b=c.getAttribute("href");A.showAccount={account:b,instance:a}}}else if(!s){const d=l==null?void 0:l.endsWith("#");if(c.classList.contains("hashtag")||d){r.preventDefault(),r.stopPropagation();const v=c.innerText.replace(/^#/,"").trim(),y=a?`#/${a}/t/${v}`:`#/t/${v}`;location.hash=y}else(g=A.unfurledLinks[c.href])!=null&&g.url&&o!==c.href&&(r.preventDefault(),r.stopPropagation(),A.prevLocation={pathname:location.hash.replace(/^#/,"")},location.hash=`#${A.unfurledLinks[c.href].url}`)}}}const{locale:$o}=new Intl.DateTimeFormat().resolvedOptions();function Ft(t,{hideTime:n,formatOpts:a}={}){t instanceof Date||(t=new Date(t));const s=new Date().getFullYear();return Intl.DateTimeFormat($o,{year:t.getFullYear()===s?void 0:"numeric",month:"short",day:"numeric",hour:n?void 0:"numeric",minute:n?void 0:"numeric",...a}).format(t)}const{locale:Io}=Intl.NumberFormat().resolvedOptions(),qe=Intl.NumberFormat(Io,{notation:"compact"}).format;function Xn({skeleton:t,account:n,avatarSize:a="xl",instance:s,external:o,internal:r,onClick:c,showActivity:l=!1,showStats:h=!1,accountInstance:f,hideDisplayName:u=!1}){if(t)return e("div",{class:"account-block skeleton",children:[e(We,{size:a}),e("span",{children:[e("b",{children:"████████"}),e("br",{}),e("span",{class:"account-block-acct",children:"@██████"})]})]});const{id:g,acct:d,avatar:v,avatarStatic:y,displayName:p,username:b,emojis:w,url:T,statusesCount:x,lastStatusAt:L,bot:$,fields:D,note:B,group:U}=n;let[G,z,H]=d.match(/([^@]+)(@.+)/i)||[,d];f&&(H=`@${f}`);const R=D==null?void 0:D.find(ne=>!!ne.verifiedAt&&!!ne.value);return e("a",{class:"account-block",href:T,target:o?"_blank":null,title:`@${d}`,onClick:ne=>{if(!o){if(ne.preventDefault(),c)return c(ne);r?location.hash=`/${s}/a/${g}`:A.showAccount={account:n,instance:s}}},children:[e(We,{url:v,size:a,squircle:$}),e("span",{children:[!u&&e(K,{children:[p?e("b",{children:e(ut,{text:p,emojis:w})}):e("b",{children:b}),e("br",{})]}),e("span",{class:"account-block-acct",children:["@",z,e("wbr",{}),H]}),l&&e(K,{children:[e("br",{}),e("small",{class:"last-status-at insignificant",children:["Posts: ",x,!!L&&e(K,{children:[" ","· Last posted:"," ",Ft(L,{hideTime:!0})]})]})]}),h&&e("div",{class:"account-block-stats",children:[e("div",{class:"short-desc",dangerouslySetInnerHTML:{__html:tn(B,{emojis:w})}}),$&&e(K,{children:e("span",{class:"tag",children:[e(E,{icon:"bot"})," Automated"]})}),!!U&&e(K,{children:e("span",{class:"tag",children:[e(E,{icon:"group"})," Group"]})}),!!R&&e("span",{class:"verified-field ib",children:[e(E,{icon:"check-circle",size:"s"})," ",e("span",{dangerouslySetInnerHTML:{__html:tn(R.value,{emojis:w})}})]})]})]})]})}const So={"@mastodon/edit-media-attributes":">=4.1","@mastodon/list-exclusive":">=4.2"},Yt={};function Qn(t){try{const{version:n,domain:a}=Jn(),s=`${a}-${t}`;if(Yt[s])return Yt[s];const o=So[t];return o?Yt[s]=Ra.satisfies(n,o,{includePrerelease:!0,loose:!0}):!1}catch{return!1}}const Do=[{code:"auto",name:"Detect"},{code:"af",name:"Afrikaans"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bho",name:"Bhojpuri"},{code:"bs",name:"Bosnian"},{code:"bg",name:"Bulgarian"},{code:"ca",name:"Catalan"},{code:"ceb",name:"Cebuano"},{code:"ny",name:"Chichewa"},{code:"zh",name:"Chinese"},{code:"co",name:"Corsican"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Dhivehi"},{code:"doi",name:"Dogri"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"tl",name:"Filipino"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"fy",name:"Frisian"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek"},{code:"gn",name:"Guarani"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian Creole"},{code:"ha",name:"Hausa"},{code:"haw",name:"Hawaiian"},{code:"iw",name:"Hebrew"},{code:"hi",name:"Hindi"},{code:"hmn",name:"Hmong"},{code:"hu",name:"Hungarian"},{code:"is",name:"Icelandic"},{code:"ig",name:"Igbo"},{code:"ilo",name:"Ilocano"},{code:"id",name:"Indonesian"},{code:"ga",name:"Irish"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"jw",name:"Javanese"},{code:"kn",name:"Kannada"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"rw",name:"Kinyarwanda"},{code:"gom",name:"Konkani"},{code:"ko",name:"Korean"},{code:"kri",name:"Krio"},{code:"ku",name:"Kurdish (Kurmanji)"},{code:"ckb",name:"Kurdish (Sorani)"},{code:"ky",name:"Kyrgyz"},{code:"lo",name:"Lao"},{code:"la",name:"Latin"},{code:"lv",name:"Latvian"},{code:"ln",name:"Lingala"},{code:"lt",name:"Lithuanian"},{code:"lg",name:"Luganda"},{code:"lb",name:"Luxembourgish"},{code:"mk",name:"Macedonian"},{code:"mai",name:"Maithili"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"Maori"},{code:"mr",name:"Marathi"},{code:"mni-Mtei",name:"Meiteilon (Manipuri)"},{code:"lus",name:"Mizo"},{code:"mn",name:"Mongolian"},{code:"my",name:"Myanmar (Burmese)"},{code:"ne",name:"Nepali"},{code:"no",name:"Norwegian"},{code:"or",name:"Odia (Oriya)"},{code:"om",name:"Oromo"},{code:"ps",name:"Pashto"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"pa",name:"Punjabi"},{code:"qu",name:"Quechua"},{code:"ro",name:"Romanian"},{code:"ru",name:"Russian"},{code:"sm",name:"Samoan"},{code:"sa",name:"Sanskrit"},{code:"gd",name:"Scots Gaelic"},{code:"nso",name:"Sepedi"},{code:"sr",name:"Serbian"},{code:"st",name:"Sesotho"},{code:"sn",name:"Shona"},{code:"sd",name:"Sindhi"},{code:"si",name:"Sinhala"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovenian"},{code:"so",name:"Somali"},{code:"es",name:"Spanish"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"sv",name:"Swedish"},{code:"tg",name:"Tajik"},{code:"ta",name:"Tamil"},{code:"tt",name:"Tatar"},{code:"te",name:"Telugu"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"ts",name:"Tsonga"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"},{code:"ak",name:"Twi"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"ug",name:"Uyghur"},{code:"uz",name:"Uzbek"},{code:"vi",name:"Vietnamese"},{code:"cy",name:"Welsh"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"zu",name:"Zulu"}],Ro=Kn({limit:1,interval:2e3}),An=["lingva.lunar.icu","lingva.garudalinux.org","translate.plausibility.cloud"];let Zt=0;function Po(t,n,a){return Pa(()=>{let o=An[Zt];return fetch(`https://${o}/api/v1/${n}/${a}/${encodeURIComponent(t)}`).then(r=>{if(!r.ok)throw new Error(r.statusText);return r.json()}).then(r=>{var c;return{provider:"lingva",content:r.translation,detectedSourceLanguage:(c=r.info)==null?void 0:c.detectedSource,info:r.info}})},{retries:3,onFailedAttempt:o=>{Zt=(Zt+1)%An.length}})}const ea=1e3*60*60,ta=St(Po,{maxAge:ea}),Mo=St(Ro(ta),{maxAge:ea});function Oo({forceTranslate:t,sourceLanguage:n,onTranslate:a,text:s="",mini:o}){const r=Zn(!0),[c,l]=W("default"),[h,f]=W(null),[u,g]=W(null),[d,v]=W(null),y=te(),p=n?Wt(n):null,b=Wt(r),w=te("auto");a||(a=o?Mo:ta);const T=async()=>{var x,L;l("loading");try{const{content:$,detectedSourceLanguage:D,provider:B,error:U,...G}=await a(s,w.current,r);if($){if(D){const z=Wt(D);v(z)}if(B==="lingva"){const z=(L=(x=G==null?void 0:G.info)==null?void 0:x.pronunciation)==null?void 0:L.query;z&&f(z)}g($),l("default"),!o&&$.trim()!==s.trim()&&(y.current.open=!0,y.current.scrollIntoView({behavior:"smooth",block:"nearest"}))}else l("error")}catch{l("error")}};return ue(()=>{t&&T()},[t]),o?u&&u.trim()!==s.trim()&&d!==b?e("div",{class:"shazam-container",children:e("div",{class:"shazam-container-inner",children:e("div",{class:"status-translation-block-mini",children:[e(E,{icon:"translate",alt:`Auto-translated from ${p}`}),e("output",{lang:r,dir:"auto",title:h||"",children:u})]})})}):null:e("div",{class:"status-translation-block",onClick:x=>{x.preventDefault()},children:e("details",{ref:y,children:[e("summary",{children:e("button",{type:"button",onClick:async x=>{x.preventDefault(),x.stopPropagation(),y.current.open=!y.current.open,c!=="loading"&&(u||T())},children:[e(E,{icon:"translate"})," ",e("span",{children:c==="loading"?"Translating…":n&&p&&!d?`Translate from ${p}`:"Translate"})]})}),e("div",{class:"translated-block",children:[e("div",{class:"translation-info insignificant",children:[e("select",{class:"translated-source-select",disabled:c==="loading",onChange:x=>{w.current=x.target.value,T()},children:Do.map(x=>e("option",{value:x.code,children:x.code==="auto"?`Auto (${d??"…"})`:x.name}))})," ",e("span",{children:["→ ",b]}),e(Ze,{abrupt:!0,hidden:c!=="loading"})]}),c==="error"?e("p",{class:"ui-state",children:"Failed to translate"}):!!u&&e(K,{children:[e("output",{class:"translated-content",lang:r,dir:"auto",children:u}),!!h&&e("output",{class:"translated-pronunciation-content",tabIndex:-1,onClick:x=>{x.target.classList.toggle("expand")},children:h})]})]})]})})}const on=[["aa","Afar","Afaraf"],["ab","Abkhaz","аҧсуа бызшәа"],["ae","Avestan","avesta"],["af","Afrikaans","Afrikaans"],["ak","Akan","Akan"],["am","Amharic","አማርኛ"],["an","Aragonese","aragonés"],["ar","Arabic","اللغة العربية"],["as","Assamese","অসমীয়া"],["av","Avaric","авар мацӀ"],["ay","Aymara","aymar aru"],["az","Azerbaijani","azərbaycan dili"],["ba","Bashkir","башҡорт теле"],["be","Belarusian","беларуская мова"],["bg","Bulgarian","български език"],["bh","Bihari","भोजपुरी"],["bi","Bislama","Bislama"],["bm","Bambara","bamanankan"],["bn","Bengali","বাংলা"],["bo","Tibetan","བོད་ཡིག"],["br","Breton","brezhoneg"],["bs","Bosnian","bosanski jezik"],["ca","Catalan","Català"],["ce","Chechen","нохчийн мотт"],["ch","Chamorro","Chamoru"],["co","Corsican","corsu"],["cr","Cree","ᓀᐦᐃᔭᐍᐏᐣ"],["cs","Czech","čeština"],["cu","Old Church Slavonic","ѩзыкъ словѣньскъ"],["cv","Chuvash","чӑваш чӗлхи"],["cy","Welsh","Cymraeg"],["da","Danish","dansk"],["de","German","Deutsch"],["dv","Divehi","Dhivehi"],["dz","Dzongkha","རྫོང་ཁ"],["ee","Ewe","Eʋegbe"],["el","Greek","Ελληνικά"],["en","English","English"],["eo","Esperanto","Esperanto"],["es","Spanish","Español"],["et","Estonian","eesti"],["eu","Basque","euskara"],["fa","Persian","فارسی"],["ff","Fula","Fulfulde"],["fi","Finnish","suomi"],["fj","Fijian","Vakaviti"],["fo","Faroese","føroyskt"],["fr","French","Français"],["fy","Western Frisian","Frysk"],["ga","Irish","Gaeilge"],["gd","Scottish Gaelic","Gàidhlig"],["gl","Galician","galego"],["gu","Gujarati","ગુજરાતી"],["gv","Manx","Gaelg"],["ha","Hausa","هَوُسَ"],["he","Hebrew","עברית"],["hi","Hindi","हिन्दी"],["ho","Hiri Motu","Hiri Motu"],["hr","Croatian","Hrvatski"],["ht","Haitian","Kreyòl ayisyen"],["hu","Hungarian","magyar"],["hy","Armenian","Հայերեն"],["hz","Herero","Otjiherero"],["ia","Interlingua","Interlingua"],["id","Indonesian","Bahasa Indonesia"],["ie","Interlingue","Interlingue"],["ig","Igbo","Asụsụ Igbo"],["ii","Nuosu","ꆈꌠ꒿ Nuosuhxop"],["ik","Inupiaq","Iñupiaq"],["io","Ido","Ido"],["is","Icelandic","Íslenska"],["it","Italian","Italiano"],["iu","Inuktitut","ᐃᓄᒃᑎᑐᑦ"],["ja","Japanese","日本語"],["jv","Javanese","basa Jawa"],["ka","Georgian","ქართული"],["kg","Kongo","Kikongo"],["ki","Kikuyu","Gĩkũyũ"],["kj","Kwanyama","Kuanyama"],["kk","Kazakh","қазақ тілі"],["kl","Kalaallisut","kalaallisut"],["km","Khmer","ខេមរភាសា"],["kn","Kannada","ಕನ್ನಡ"],["ko","Korean","한국어"],["kr","Kanuri","Kanuri"],["ks","Kashmiri","कश्मीरी"],["ku","Kurmanji (Kurdish)","Kurmancî"],["kv","Komi","коми кыв"],["kw","Cornish","Kernewek"],["ky","Kyrgyz","Кыргызча"],["la","Latin","latine"],["lb","Luxembourgish","Lëtzebuergesch"],["lg","Ganda","Luganda"],["li","Limburgish","Limburgs"],["ln","Lingala","Lingála"],["lo","Lao","ລາວ"],["lt","Lithuanian","lietuvių kalba"],["lu","Luba-Katanga","Tshiluba"],["lv","Latvian","latviešu valoda"],["mg","Malagasy","fiteny malagasy"],["mh","Marshallese","Kajin M̧ajeļ"],["mi","Māori","te reo Māori"],["mk","Macedonian","македонски јазик"],["ml","Malayalam","മലയാളം"],["mn","Mongolian","Монгол хэл"],["mr","Marathi","मराठी"],["ms","Malay","Bahasa Melayu"],["mt","Maltese","Malti"],["my","Burmese","ဗမာစာ"],["na","Nauru","Ekakairũ Naoero"],["nb","Norwegian Bokmål","Norsk bokmål"],["nd","Northern Ndebele","isiNdebele"],["ne","Nepali","नेपाली"],["ng","Ndonga","Owambo"],["nl","Dutch","Nederlands"],["nn","Norwegian Nynorsk","Norsk Nynorsk"],["no","Norwegian","Norsk"],["nr","Southern Ndebele","isiNdebele"],["nv","Navajo","Diné bizaad"],["ny","Chichewa","chiCheŵa"],["oc","Occitan","occitan"],["oj","Ojibwe","ᐊᓂᔑᓈᐯᒧᐎᓐ"],["om","Oromo","Afaan Oromoo"],["or","Oriya","ଓଡ଼ିଆ"],["os","Ossetian","ирон æвзаг"],["pa","Panjabi","ਪੰਜਾਬੀ"],["pi","Pāli","पाऴि"],["pl","Polish","Polski"],["ps","Pashto","پښتو"],["pt","Portuguese","Português"],["qu","Quechua","Runa Simi"],["rm","Romansh","rumantsch grischun"],["rn","Kirundi","Ikirundi"],["ro","Romanian","Română"],["ru","Russian","Русский"],["rw","Kinyarwanda","Ikinyarwanda"],["sa","Sanskrit","संस्कृतम्"],["sc","Sardinian","sardu"],["sd","Sindhi","सिन्धी"],["se","Northern Sami","Davvisámegiella"],["sg","Sango","yângâ tî sängö"],["si","Sinhala","සිංහල"],["sk","Slovak","slovenčina"],["sl","Slovenian","slovenščina"],["sn","Shona","chiShona"],["so","Somali","Soomaaliga"],["sq","Albanian","Shqip"],["sr","Serbian","српски језик"],["ss","Swati","SiSwati"],["st","Southern Sotho","Sesotho"],["su","Sundanese","Basa Sunda"],["sv","Swedish","Svenska"],["sw","Swahili","Kiswahili"],["ta","Tamil","தமிழ்"],["te","Telugu","తెలుగు"],["tg","Tajik","тоҷикӣ"],["th","Thai","ไทย"],["ti","Tigrinya","ትግርኛ"],["tk","Turkmen","Türkmen"],["tl","Tagalog","Wikang Tagalog"],["tn","Tswana","Setswana"],["to","Tonga","faka Tonga"],["tr","Turkish","Türkçe"],["ts","Tsonga","Xitsonga"],["tt","Tatar","татар теле"],["tw","Twi","Twi"],["ty","Tahitian","Reo Tahiti"],["ug","Uyghur","ئۇيغۇرچە‎"],["uk","Ukrainian","Українська"],["ur","Urdu","اردو"],["uz","Uzbek","Ўзбек"],["ve","Venda","Tshivenḓa"],["vi","Vietnamese","Tiếng Việt"],["vo","Volapük","Volapük"],["wa","Walloon","walon"],["wo","Wolof","Wollof"],["xh","Xhosa","isiXhosa"],["yi","Yiddish","ייִדיש"],["yo","Yoruba","Yorùbá"],["za","Zhuang","Saɯ cueŋƅ"],["zh","Chinese","中文"],["zu","Zulu","isiZulu"],["zh-CN","Chinese (China)","简体中文"],["zh-HK","Chinese (Hong Kong)","繁體中文（香港）"],["zh-TW","Chinese (Taiwan)","繁體中文（臺灣）"],["zh-YUE","Cantonese","廣東話"],["ast","Asturian","Asturianu"],["chr","Cherokee","ᏣᎳᎩ ᎦᏬᏂᎯᏍᏗ"],["ckb","Sorani (Kurdish)","سۆرانی"],["cnr","Montenegrin","crnogorski"],["jbo","Lojban","la .lojban."],["kab","Kabyle","Taqbaylit"],["kmr","Kurmanji (Kurdish)","Kurmancî"],["ldn","Láadan","Láadan"],["lfn","Lingua Franca Nova","lingua franca nova"],["sco","Scots","Scots"],["sma","Southern Sami","Åarjelsaemien Gïele"],["smj","Lule Sami","Julevsámegiella"],["szl","Silesian","ślůnsko godka"],["tok","Toki Pona","toki pona"],["xal","Kalmyk","Хальмг келн"],["zba","Balaibalan","باليبلن"],["zgh","Standard Moroccan Tamazight","ⵜⴰⵎⴰⵣⵉⵖⵜ"]],zo="(((?:[^A-Za-z0-9@＠$#＃\\uFFFE\\uFEFF\\uFFFF]|[\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069]|^))((https?:\\/\\/)((?:(?:(?:[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/](?:[_-]|[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/])*)?[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/]\\.)*(?:(?:[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/](?:-|[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/])*)?[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/]\\.)(?:(?:(?:삼성|닷컴|닷넷|香格里拉|餐厅|食品|飞利浦|電訊盈科|集团|通販|购物|谷歌|诺基亚|联通|网络|网站|网店|网址|组织机构|移动|珠宝|点看|游戏|淡马锡|机构|書籍|时尚|新闻|政府|政务|招聘|手表|手机|我爱你|慈善|微博|广东|工行|家電|娱乐|天主教|大拿|大众汽车|在线|嘉里大酒店|嘉里|商标|商店|商城|公益|公司|八卦|健康|信息|佛山|企业|中文网|中信|世界|ポイント|ファッション|セール|ストア|コム|グーグル|クラウド|みんな|คอม|संगठन|नेट|कॉम|همراه|موقع|موبايلي|كوم|كاثوليك|عرب|شبكة|بيتك|بازار|العليان|ارامكو|اتصالات|ابوظبي|קום|сайт|рус|орг|онлайн|москва|ком|католик|дети|zuerich|zone|zippo|zip|zero|zara|zappos|yun|youtube|you|yokohama|yoga|yodobashi|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|voyage|voto|voting|vote|volvo|volkswagen|vodka|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vet|versicherung|vermögensberatung|vermögensberater|verisign|ventures|vegas|vanguard|vana|vacations|ups|uol|uno|university|unicom|uconnect|ubs|ubank|tvs|tushu|tunes|tui|tube|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|tmall|tkmaxx|tjx|tjmaxx|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|tci|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|systems|symantec|sydney|swiss|swiftcover|swatch|suzuki|surgery|surf|support|supply|supplies|sucks|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|srt|srl|spreadbetting|spot|sport|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|sncf|smile|smart|sling|skype|sky|skin|ski|site|singles|sina|silk|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|search|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sbs|sbi|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|ryukyu|rwe|run|ruhr|rugby|rsvp|room|rogers|rodeo|rocks|rocher|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|raid|radio|racing|qvc|quest|quebec|qpon|pwc|pub|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|post|porn|politie|poker|pohl|pnc|plus|plumbing|playstation|play|place|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|phd|pharmacy|pfizer|pet|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|pamperedchef|page|ovh|ott|otsuka|osaka|origins|orientexpress|organic|org|orange|oracle|open|ooo|onyourside|online|onl|ong|one|omega|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nyc|ntt|nrw|nra|nowtv|nowruz|now|norton|northwesternmutual|nokia|nissay|nissan|ninja|nikon|nike|nico|nhk|ngo|nfl|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|nba|navy|natura|nationwide|name|nagoya|nadex|nab|mutuelle|mutual|museum|mtr|mtpc|mtn|msd|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|montblanc|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mma|mls|mlb|mitsubishi|mit|mint|mini|mil|microsoft|miami|metlife|merckmsd|meo|menu|men|memorial|meme|melbourne|meet|media|med|mckinsey|mcdonalds|mcd|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|macys|luxury|luxe|lupin|lundbeck|ltda|ltd|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|llp|llc|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|kyoto|kuokgroup|kred|krd|kpn|kpmg|kosher|komatsu|koeln|kiwi|kitchen|kindle|kinder|kim|kia|kfh|kerryproperties|kerrylogistics|kerryhotels|kddi|kaufen|juniper|juegos|jprs|jpmorgan|joy|jot|joburg|jobs|jnj|jmp|jll|jlc|jio|jewelry|jetzt|jeep|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|istanbul|ist|ismaili|iselect|irish|ipiranga|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|immobilien|immo|imdb|imamat|ikano|iinet|ifm|ieee|icu|ice|icbc|ibm|hyundai|hyatt|hughes|htc|hsbc|how|house|hotmail|hotels|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hkt|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|guru|guitars|guide|guge|gucci|guardian|group|grocery|gripe|green|gratis|graphics|grainger|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gmx|gmo|gmbh|gmail|globo|global|gle|glass|glade|giving|gives|gifts|gift|ggee|george|genting|gent|gea|gdn|gbiz|gay|garden|gap|games|game|gallup|gallo|gallery|gal|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fly|flsmidth|flowers|florist|flir|flights|flickr|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|etisalat|esurance|estate|esq|erni|ericsson|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|education|edu|edeka|eco|eat|earth|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|doosan|domains|doha|dog|dodge|doctor|docs|dnp|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cyou|cymru|cuisinella|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cpa|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|church|chrysler|chrome|christmas|chloe|chintai|cheap|chat|chase|charity|channel|chanel|cfd|cfa|cern|ceo|center|ceb|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|bzh|buzz|buy|business|builders|build|bugatti|budapest|brussels|brother|broker|broadway|bridgestone|bradesco|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bnpparibas|bnl|bmw|bms|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|biz|bio|bingo|bing|bike|bid|bible|bharti|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|bcn|bcg|bbva|bbt|bbc|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|azure|axa|aws|avianca|autos|auto|author|auspost|audio|audible|audi|auction|attorney|athleta|associates|asia|asda|arte|art|arpa|army|archi|aramco|arab|aquarelle|apple|app|apartments|aol|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|akdn|airtel|airforce|airbus|aigo|aig|agency|agakhan|africa|afl|afamilycompany|aetna|aero|aeg|adult|ads|adac|actor|active|aco|accountants|accountant|accenture|academy|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa|onion)(?=[^0-9a-zA-Z@+-]|$))|(?:(?:한국|香港|澳門|新加坡|台灣|台湾|中國|中国|გე|ລາວ|ไทย|ලංකා|ഭാരതം|ಭಾರತ|భారత్|சிங்கப்பூர்|இலங்கை|இந்தியா|ଭାରତ|ભારત|ਭਾਰਤ|ভাৰত|ভারত|বাংলা|भारोत|भारतम्|भारत|ڀارت|پاکستان|موريتانيا|مليسيا|مصر|قطر|فلسطين|عمان|عراق|سورية|سودان|تونس|بھارت|بارت|ایران|امارات|المغرب|السعودية|الجزائر|البحرين|الاردن|հայ|қаз|укр|срб|рф|мон|мкд|ею|бел|бг|ευ|ελ|zw|zm|za|yt|ye|ws|wf|vu|vn|vi|vg|ve|vc|va|uz|uy|us|um|uk|ug|ua|tz|tw|tv|tt|tr|tp|to|tn|tm|tl|tk|tj|th|tg|tf|td|tc|sz|sy|sx|sv|su|st|ss|sr|so|sn|sm|sl|sk|sj|si|sh|sg|se|sd|sc|sb|sa|rw|ru|rs|ro|re|qa|py|pw|pt|ps|pr|pn|pm|pl|pk|ph|pg|pf|pe|pa|om|nz|nu|nr|np|no|nl|ni|ng|nf|ne|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|mn|mm|ml|mk|mh|mg|mf|me|md|mc|ma|ly|lv|lu|lt|ls|lr|lk|li|lc|lb|la|kz|ky|kw|kr|kp|kn|km|ki|kh|kg|ke|jp|jo|jm|je|it|is|ir|iq|io|in|im|il|ie|id|hu|ht|hr|hn|hm|hk|gy|gw|gu|gt|gs|gr|gq|gp|gn|gm|gl|gi|gh|gg|gf|ge|gd|gb|ga|fr|fo|fm|fk|fj|fi|eu|et|es|er|eh|eg|ee|ec|dz|do|dm|dk|dj|de|cz|cy|cx|cw|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|bz|by|bw|bv|bt|bs|br|bq|bo|bn|bm|bl|bj|bi|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ar|aq|ao|an|am|al|ai|ag|af|ae|ad|ac)(?=[^0-9a-zA-Z@+-]|$))|(?:xn--[\\-0-9a-z]+))))(?::([0-9]+))?(\\/(?:(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*(?:\\((?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+|(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*\\([a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*))\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*)*[\\+\\-a-z\\u0400-\\u04FF0-9=_#\\/\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]|(?:\\((?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+|(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*\\([a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*))\\)))|(?:@[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\/))*)?(\\?[a-z0-9!?\\*'@\\(\\);:&=\\+\\$\\/%#\\[\\]\\-_\\.,~|]*[a-z0-9\\-_&=#\\/])?))",No="gi",Cn={source:zo,flags:No},Ue=Ma("drafts-db","drafts-store"),Bo={set:(t,n)=>Oa(t,n,Ue),get:t=>za(t,Ue),getMany:t=>Na(t,Ue),del:t=>Ba(t,Ue),delMany:t=>ja(t,Ue),clear:()=>Va(Ue),keys:()=>Ua(Ue)},Fn={drafts:Bo},Ye={public:"earth",unlisted:"group",private:"lock",direct:"message"};function jo({poll:t,lang:n,readOnly:a,refresh:s=()=>{},votePoll:o=()=>{}}){const[r,c]=W("default"),{expired:l,expiresAt:h,id:f,multiple:u,options:g,ownVotes:d,voted:v,votersCount:y,votesCount:p,emojis:b}=t,w=!!h&&new Date(h),T=y||p;let x=0;T<=1e3?x=0:T<=1e4?x=1:T<=1e5&&(x=2);const[L,$]=W(!1),D=g.every(B=>B.votesCount!==null);return e("div",{lang:n,dir:"auto",class:`poll ${a?"read-only":""} ${r==="loading"?"loading":""}`,children:[L&&D||v||l?e(K,{children:[e("div",{class:"poll-options",children:g.map((B,U)=>{const{title:G,votesCount:z}=B,H=T?(z/T*100).toFixed(x):0,R=z>0&&z===Math.max(...g.map(ne=>ne.votesCount));return e("div",{class:`poll-option poll-result ${R?"poll-option-leading":""}`,style:{"--percentage":`${H}%`},children:[e("div",{class:"poll-option-title",children:[e("span",{children:e(ut,{text:G,emojis:b})}),v&&d.includes(U)&&e(K,{children:[" ",e(E,{icon:"check-circle"})]})]}),e("div",{class:"poll-option-votes",title:`${z} vote${z===1?"":"s"}`,children:[H,"%"]})]},`${U}-${G}-${z}`)})}),!l&&!v&&e("button",{class:"poll-vote-button plain2",disabled:r==="loading",onClick:B=>{B.preventDefault(),$(!1)},children:[e(E,{icon:"arrow-left",size:"s"})," Hide results"]})]}):e("form",{onSubmit:async B=>{B.preventDefault();const U=B.target,G=new FormData(U),z=[];G.forEach((H,R)=>{R==="poll"&&z.push(H)}),z.length&&(c("loading"),await o(z),c("default"))},children:[e("div",{class:"poll-options",children:g.map((B,U)=>{const{title:G}=B;return e("div",{class:"poll-option",children:e("label",{class:"poll-label",children:[e("input",{type:u?"checkbox":"radio",name:"poll",value:U,disabled:r==="loading",readOnly:a}),e("span",{class:"poll-option-title",children:e(ut,{text:G,emojis:b})})]})})})}),!a&&e("button",{class:"poll-vote-button",type:"submit",disabled:r==="loading",children:"Vote"})]}),e("p",{class:"poll-meta",children:[!l&&!a&&e("button",{type:"button",class:"plain small",disabled:r==="loading",style:{marginLeft:-8},onClick:B=>{B.preventDefault(),c("loading"),(async()=>(await s(),c("default")))()},title:"Refresh",children:e(E,{icon:"refresh",alt:"Refresh"})}),!v&&!l&&!a&&D&&e("button",{type:"button",class:"plain small",disabled:r==="loading",onClick:B=>{B.preventDefault(),$(!L)},title:L?"Hide results":"Show results",children:[e(E,{icon:L?"eye-open":"eye-close",alt:L?"Hide results":"Show results"})," "]}),!l&&!a&&" ",e("span",{title:p,children:qe(p)})," vote",p===1?"":"s",!!y&&y!==p&&e(K,{children:[" ","• ",e("span",{title:y,children:qe(y)})," ","voter",y===1?"":"s"]})," ","• ",l?"Ended":"Ending"," ",!!w&&e(At,{datetime:w})]})," "]})}const $n=document.createElement("div");function In(t){return t?($n.innerHTML=t,$n.innerText.length):0}function na(t){const{pathname:n}=new URL(t);return/^\/.*\/\d+$/i.test(n)||/^\/@[^/]+\/(statuses|posts)\/\w+\/?$/i.test(n)||/^\/notes\/[a-z0-9]+$/i.test(n)||/^\/(notice|objects)\/[a-z0-9-]+$/i.test(n)}const Vo=document.documentElement,kt=getComputedStyle(Vo),Uo=8;let aa=[0,0,0,0];function oa(){const t=kt.getPropertyValue("--sai-top"),n=kt.getPropertyValue("--sai-right"),a=kt.getPropertyValue("--sai-bottom"),s=kt.getPropertyValue("--sai-left");aa=[Math.max(0,parseInt(t,10)),Math.max(0,parseInt(n,10)),Math.max(0,parseInt(a,10)),Math.max(0,parseInt(s,10))]}requestAnimationFrame(oa);function Ho(t=[]){return aa.map((a,s)=>(a||Uo)+(t[s]||0)).join(" ")}CSS.supports("top: env(safe-area-inset-top)")&&window.addEventListener("resize",oa,{passive:!0});function Ko(t){const{spoilerText:n,content:a,poll:s,mediaAttachments:o}=t;let r="";return n!=null&&n.trim()?r+=n:r+=nn(a),r=r.trim(),s&&(r+=" 📊"),o!=null&&o.length&&(r+=" "+o.map(c=>({image:"🖼️",gifv:"🎞️",video:"📹",audio:"🎵",unknown:""})[c.type]||"").join("")),r}function Lt({className:t="truncated"}={}){const n=te(),a=Ha(({height:s})=>{if(n.current){const{scrollHeight:o}=n.current;let r=o>s;if(r){const{height:c,maxHeight:l}=getComputedStyle(n.current),h=parseInt(l||c,10);r=o>h}n.current.classList.toggle(t,r)}},300);return Ka({ref:n,box:"border-box",onResize:a}),n}const qo=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Wo="ALT",Xt=t=>{const{alt:n,lang:a,index:s,...o}=t;return!n||!n.trim()?null:e("button",{type:"button",class:"alt-badge clickable",...o,onClick:r=>{r.stopPropagation(),r.preventDefault(),A.showMediaAlt={alt:n,lang:a}},title:"Media description",children:[Wo,!!s&&e("sup",{children:s})]})},Go=140,ia=Qe(t=>t!=null&&t.length?t.length>Go||/[\n\r].*[\n\r]/.test(t.trim()):!1);function Jo({class:t="",media:n,to:a,lang:s,showOriginal:o,autoAnimate:r,showCaption:c,altIndex:l,onClick:h=()=>{}}){const{blurhash:f,description:u,meta:g,previewRemoteUrl:d,previewUrl:v,remoteUrl:y,url:p,type:b}=n,{original:w={},small:T,focus:x}=g||{},L=o?w==null?void 0:w.width:T==null?void 0:T.width,$=o?w==null?void 0:w.height:T==null?void 0:T.height,D=o?p:v||p,B=o?y:d||y,U=L>=$?"landscape":"portrait",G=f?qa(f):null,z=te();let H;if(x){const Z=(x.x+1)/2*100,q=(1-x.y)/2*100;H=`${Z.toFixed(0)}% ${q.toFixed(0)}%`}const R=te(),ne=qn(({x:Z,y:q,scale:be})=>{const{current:ge}=R;if(ge){const me=Wa({x:Z,y:q,scale:be});be===1?ge.style.removeProperty("transform"):ge.style.setProperty("transform",me),ge.closest(".media-zoom").style.touchAction=be<=1.01?"pan-x":""}},[]),[xe,ae]=W(!1),N={enabled:xe,draggableUnZoomed:!1,inertiaFriction:.9,doubleTapZoomOutOnMaxScale:!0,containerProps:{className:"media-zoom",style:{overflow:"visible"}},onUpdate:ne},J=Re(()=>a?Z=>e(mt,{to:a,...Z}):"div",[a]),X=b==="unknown"&&/\.(mp4|m4a|m4p|m4b|m4r|m4v|mov|webm)$/i.test(B),ke=b==="image"||b==="unknown"&&v&&!X,M=te(),[ye,oe]=W(!1);Qt(()=>{if(!ke||!o||!M.current)return;const{offsetWidth:Z,offsetHeight:q}=M.current,be=L<Z&&$<q;be&&oe(be)},[L,$]);const de=window.innerHeight*(U==="portrait"?.45:.33),fe=U==="portrait"?0:160,Ee={"--average-color":G&&`rgb(${G.join(",")})`},ce=L&&$?{"--width":`${L}px`,"--height":`${$}px`,"--aspectWidth":`${L/$*Math.max(fe,de)}px`,aspectRatio:`${L} / ${$}`,...Ee}:{...Ee},pe=ia(u),Q=!!c&&!o&&!!u&&!pe,Le=Q?Z=>{const{children:q,...be}=Z;return e("figure",{...be,children:[q,e("figcaption",{class:"media-caption",lang:s,dir:"auto",onClick:ge=>{ge.preventDefault(),ge.stopPropagation(),A.showMediaAlt={alt:u,lang:s}},children:u})]})}:K;if(ke)return N.containerProps.style.display="inherit",Qt(()=>{qo&&o&&(async()=>{try{await fetch(D,{mode:"no-cors"}),R.current.src=D}catch{}})()},[D]),e(Le,{children:e(J,{ref:M,class:`media media-image ${t}`,onClick:h,"data-orientation":U,"data-has-alt":!Q,style:o?{backgroundImage:`url(${v})`,backgroundSize:ye?`${L}px ${$}px`:void 0,...Ee}:ce,children:o?e(kn,{...N,children:e("img",{ref:R,src:D,alt:u,width:L,height:$,"data-orientation":U,loading:"eager",decoding:"sync",onLoad:Z=>{Z.target.closest(".media-image").style.backgroundImage="",Z.target.closest(".media-zoom").style.display="",ae(!0)},onError:Z=>{const{src:q}=Z.target;q===D&&(Z.target.src=B)}})}):e(K,{children:[e("img",{src:D,alt:Q?"":u,width:L,height:$,"data-orientation":U,loading:"lazy",style:{backgroundColor:G&&`rgb(${G.join(",")})`,backgroundPosition:H||"center","--anim-duration":`${Math.min(Math.max(Math.max(L,$)/100,5),120)}s`},onLoad:Z=>{Z.target.closest(".media-image").style.backgroundImage="",Z.target.dataset.loaded=!0},onError:Z=>{const{src:q}=Z.target;q===D&&(Z.target.src=B)}}),!Q&&e(Xt,{alt:u,lang:s,index:l})]})})});if(b==="gifv"||b==="video"||X){const Z=w.duration<31,q=b==="gifv"&&Z,be=w.duration<61,ge=Rn(w.duration),me=!o&&!r&&q,_e=!o&&r&&q,we=`
    <video
      src="${p}"
      poster="${v}"
      width="${L}"
      height="${$}"
      data-orientation="${U}"
      preload="auto"
      autoplay
      muted="${q}"
      ${q?"":"controls"}
      playsinline
      loop="${be}"
      ${q?'ondblclick="this.paused ? this.play() : this.pause()"':""}
    ></video>
  `;return e(Le,{children:e(J,{class:`media ${t} media-${q?"gif":"video"} ${_e?"media-contain":""}`,"data-orientation":U,"data-formatted-duration":o?void 0:ge,"data-label":q&&!o&&!_e?"GIF":"","data-has-alt":!Q,style:!o&&ce,onClick:re=>{if(me)try{z.current.pause()}catch{}h(re)},onMouseEnter:()=>{if(me)try{z.current.play()}catch{}},onMouseLeave:()=>{if(me)try{z.current.pause()}catch{}},onFocus:()=>{if(me)try{z.current.play()}catch{}},onBlur:()=>{if(me)try{z.current.pause()}catch{}},children:[o||_e?q&&o?e(kn,{...N,enabled:!0,children:e("div",{ref:R,dangerouslySetInnerHTML:{__html:we}})}):e("div",{class:"video-container",dangerouslySetInnerHTML:{__html:we}}):q?e("video",{ref:z,src:p,poster:v,width:L,height:$,"data-orientation":U,preload:"auto",playsinline:!0,loop:!0,muted:!0}):e(K,{children:[e("img",{src:v,alt:Q?"":u,width:L,height:$,"data-orientation":U,loading:"lazy"}),e("div",{class:"media-play",children:e(E,{icon:"play",size:"xl"})})]}),!o&&!Q&&e(Xt,{alt:u,lang:s,index:l})]})})}else if(b==="audio"){const Z=Rn(w.duration);return e(Le,{children:e(J,{class:`media media-audio ${t}`,"data-formatted-duration":o?void 0:Z,"data-has-alt":!Q,onClick:h,style:!o&&ce,children:[o?e("audio",{src:y||p,preload:"none",controls:!0,autoplay:!0}):v?e("img",{src:v,alt:Q?"":u,width:L,height:$,"data-orientation":U,loading:"lazy"}):null,!o&&e(K,{children:[e("div",{class:"media-play",children:e(E,{icon:"play",size:"xl"})}),!Q&&e(Xt,{alt:u,lang:s,index:l})]})]})})}}function Sn(t){return e(Ga,{children:({ref:n,closeMenu:a})=>e(mt,{...t,ref:n,onClick:({detail:s})=>a(s===0?"Enter":void 0)})})}const Yo=140,Zo=Kn({limit:1,interval:1e3});function Xo(t,n){return n.v1.accounts.$select(t).fetch()}const Qo=St(Xo),st={public:"Public",unlisted:"Unlisted",private:"Followers only",direct:"Private mention"};function Xe({statusID:t,status:n,instance:a,withinContext:s,size:o="m",skeleton:r,readOnly:c,contentTextWeight:l,enableTranslate:h,forceTranslate:f,previewMode:u,allowFilters:g,onMediaClick:d,quoted:v,onStatusLinkClick:y=()=>{}}){var bn,yn,_n;if(r)return e("div",{class:"status skeleton",children:[e(We,{size:"xxl"}),e("div",{class:"container",children:[e("div",{class:"meta",children:"███ ████████"}),e("div",{class:"content-container",children:e("div",{class:"content",children:e("p",{children:"████ ████████"})})})]})]});const{masto:p,instance:b,authenticated:w}=Be({instance:a}),{instance:T}=Be(),x=b===T;let L=je(t,b);const $=dt(A);if(n||(n=$.statuses[L]||$.statuses[t],L=je(n==null?void 0:n.id,b)),!n)return null;const{account:{acct:D,avatar:B,avatarStatic:U,id:G,url:z,displayName:H,username:R,emojis:ne,bot:xe,group:ae},id:N,repliesCount:J,reblogged:X,reblogsCount:ke,favourited:M,favouritesCount:ye,bookmarked:oe,poll:de,muted:fe,sensitive:Ee,spoilerText:ce,visibility:pe,language:Q,editedAt:Le,filtered:Z,card:q,createdAt:be,inReplyToId:ge,inReplyToAccountId:me,content:_e,mentions:we,mediaAttachments:re,reblog:Ie,uri:rn,url:Se,emojis:Ge,_deleted:_,_pinned:C,_filtered:S}=n,F=m=>{m.shiftKey};if(g&&o!=="l"&&S)return e(si,{status:n,filterInfo:S,instance:b,containerProps:{onMouseEnter:F}});const Y=new Date(be),j=new Date(Le),P=Re(()=>O.session.get("currentAccount"),[]),V=Re(()=>P&&P===G,[G,P]);let ie=we==null?void 0:we.find(m=>m.id===me);!ie&&me===N&&(ie={url:z,username:R,displayName:H});const[ve,Pe]=W(ie);if(!s&&!ve&&me){const m=A.accounts[me];m?Pe(m):Qo(me,p).then(I=>{Pe(I),A.accounts[I.id]=I}).catch(I=>{})}const Ce=me===P||(we==null?void 0:we.find(m=>m.id===P)),Me=Re(()=>!!(O.account.get("preferences")||{})["reading:expand:spoilers"],[]),De=u||Me||!!$.spoilers[N]||!1;if(Ie)return ae?e("div",{class:"status-group",onMouseEnter:F,children:[e("div",{class:"status-pre-meta",children:[e(E,{icon:"group",size:"l",alt:"Group"})," ",e(rt,{account:n.account,instance:b,showAvatar:!0})]}),e(Xe,{status:t?null:Ie,statusID:t?Ie.id:null,instance:b,size:o,contentTextWeight:l})]}):e("div",{class:"status-reblog",onMouseEnter:F,children:[e("div",{class:"status-pre-meta",children:[e(E,{icon:"rocket",size:"l"})," ",e(rt,{account:n.account,instance:b,showAvatar:!0})," ",e("span",{children:"boosted"})]}),e(Xe,{status:t?null:Ie,statusID:t?Ie.id:null,instance:b,size:o,contentTextWeight:l})]});const se=o==="l",[et,tt]=W(f),sn=Zn(!0),ca=$.settings.contentTranslationHideLanguages||[],{contentTranslation:Dt,contentTranslationAutoInline:cn}=$.settings;Dt||(h=!1);const ln=Re(()=>{if(!Dt||!cn||c||s&&!se||u||ce||Ee||de||q||re!=null&&re.length)return!1;const m=In(_e);return m>0&&m<=Yo},[Dt,cn,c,s,se,u,ce,Ee,de,q,re,_e]),[Rt,ht]=W(!1),[la,Pt]=W(!1),ua=Lt(),da=Lt(),ma=Lt(),un="Read more →",pt=te(null),nt="Sorry, your current logged-in instance can't interact with this post from another instance.",dn=qn(()=>Math.max(Math.round((ce.length+In(_e))/140)||1,1),[ce,_e]),mn=Ft(Y),hn=Le&&Ft(j);let at=w&&pe!=="direct"&&pe!=="private";pe==="private"&&V&&(at=!0);const Mt=()=>{if(!x||!w)return alert(nt);A.showCompose={replyToStatus:n}},Ot=Re(()=>re.some(m=>{var I,ee;return!((ee=(I=m.description)==null?void 0:I.trim)!=null&&ee.call(I))}),[re]),xi=async()=>{if(!x||!w)return alert(nt),!1;try{if(!X){let m="Boost this post?";if(Ot&&(m+=`

⚠️ Some media have no descriptions.`),!confirm(m))return!1}if(A.statuses[L]={...n,reblogged:!X,reblogsCount:ke+(X?-1:1)},X){const m=await p.v1.statuses.$select(N).unreblog();return Fe(m,b),!0}else{const m=await p.v1.statuses.$select(N).reblog();return Fe(m,b),!0}}catch{return A.statuses[L]=n,!1}},zt=async()=>{if(!x||!w)return alert(nt),!1;try{if(A.statuses[L]={...n,reblogged:!X,reblogsCount:ke+(X?-1:1)},X){const m=await p.v1.statuses.$select(N).unreblog();return Fe(m,b),!0}else{const m=await p.v1.statuses.$select(N).reblog();return Fe(m,b),!0}}catch{return A.statuses[L]=n,!1}},Nt=async()=>{if(!x||!w)return alert(nt);try{if(A.statuses[L]={...n,favourited:!M,favouritesCount:ye+(M?-1:1)},M){const m=await p.v1.statuses.$select(N).unfavourite();Fe(m,b)}else{const m=await p.v1.statuses.$select(N).favourite();Fe(m,b)}}catch{A.statuses[L]=n}},Bt=async()=>{if(!x||!w)return alert(nt);try{if(A.statuses[L]={...n,bookmarked:!oe},oe){const m=await p.v1.statuses.$select(N).unbookmark();Fe(m,b)}else{const m=await p.v1.statuses.$select(N).bookmark();Fe(m,b)}}catch{A.statuses[L]=n}},pn=!!Q&&Q!==sn&&!Ct([Q],[sn])&&!ca.find(m=>Q===m||Ct([Q],[m])),Ei=te(),fn=e(K,{children:[!se&&e(K,{children:[e(Ja,{children:[e("span",{class:"ib",children:[e(E,{icon:Ye[pe],size:"s"})," ",e("span",{children:st[pe]})]})," ",e("span",{class:"ib",children:[J>0&&e("span",{children:[e(E,{icon:"reply",alt:"Replies",size:"s"})," ",e("span",{children:qe(J)})]})," ",ke>0&&e("span",{children:[e(E,{icon:"rocket",alt:"Boosts",size:"s"})," ",e("span",{children:qe(ke)})]})," ",ye>0&&e("span",{children:[e(E,{icon:"heart",alt:"Likes",size:"s"})," ",e("span",{children:qe(ye)})]})]}),e("br",{}),mn]}),e(Sn,{to:b?`/${b}/s/${N}`:`/s/${N}`,onClick:m=>{y(m,n)},children:[e(E,{icon:"arrow-right"}),e("span",{children:["View post by @",R||D]})]})]}),!!Le&&e(Ae,{onClick:()=>{ht(N)},children:[e(E,{icon:"history"}),e("span",{children:["Show Edit History",e("br",{}),e("small",{class:"more-insignificant",children:["Edited: ",hn]})]})]}),(!se||!!Le)&&e(Ut,{}),se&&e(Ae,{onClick:()=>Pt(!0),children:[e(E,{icon:"react"}),e("span",{children:["Boosted/Liked by",e("span",{class:"more-insignificant",children:"…"})]})]}),!se&&x&&e(K,{children:[e("div",{class:"menu-horizontal",children:[e(qt,{subMenu:!0,confirmLabel:e(K,{children:[e(E,{icon:"rocket"}),e("span",{children:X?"Unboost?":"Boost to everyone?"})]}),menuFooter:Ot&&!X&&e("div",{class:"footer",children:[e(E,{icon:"alert"}),"Some media have no descriptions."]}),disabled:!at,onClick:async()=>{try{const m=await zt();!se&&m&&Te(X?`Unboosted @${R||D}'s post`:`Boosted @${R||D}'s post`)}catch{}},children:[e(E,{icon:"rocket",style:{color:X&&"var(--reblog-color)"}}),e("span",{children:X?"Unboost":"Boost…"})]}),e(Ae,{onClick:()=>{try{Nt(),se||Te(M?`Unliked @${R||D}'s post`:`Liked @${R||D}'s post`)}catch{}},children:[e(E,{icon:"heart",style:{color:M&&"var(--favourite-color)"}}),e("span",{children:M?"Unlike":"Like"})]})]}),e("div",{class:"menu-horizontal",children:[e(Ae,{onClick:Mt,children:[e(E,{icon:"reply"}),e("span",{children:"Reply"})]}),e(Ae,{onClick:()=>{try{Bt(),se||Te(oe?`Unbookmarked @${R||D}'s post`:`Bookmarked @${R||D}'s post`)}catch{}},children:[e(E,{icon:"bookmark",style:{color:oe&&"var(--link-color)"}}),e("span",{children:oe?"Unbookmark":"Bookmark"})]})]})]}),h?e(Ae,{disabled:et,onClick:()=>{tt(!0)},children:[e(E,{icon:"translate"}),e("span",{children:"Translate"})]}):(!Q||pn)&&e(Sn,{to:`${b?`/${b}`:""}/s/${N}?translate=1`,children:[e(E,{icon:"translate"}),e("span",{children:"Translate"})]}),(!se&&x||h)&&e(Ut,{}),e(Ae,{href:Se,target:"_blank",children:[e(E,{icon:"external"}),e("small",{class:"menu-double-lines",children:ri(Se)})]}),e("div",{class:"menu-horizontal",children:[e(Ae,{onClick:()=>{try{navigator.clipboard.writeText(Se),Te("Link copied")}catch{Te("Unable to copy link")}},children:[e(E,{icon:"link"}),e("span",{children:"Copy"})]}),(navigator==null?void 0:navigator.share)&&((bn=navigator==null?void 0:navigator.canShare)==null?void 0:bn.call(navigator,{url:Se}))&&e(Ae,{onClick:()=>{try{navigator.share({url:Se})}catch{alert("Sharing doesn't seem to work.")}},children:[e(E,{icon:"share"}),e("span",{children:"Share…"})]})]}),(V||Ce)&&e(Ut,{}),(V||Ce)&&e(Ae,{onClick:async()=>{try{const m=await p.v1.statuses.$select(N)[fe?"unmute":"mute"]();Fe(m,b),Te(fe?"Conversation unmuted":"Conversation muted")}catch{Te(fe?"Unable to unmute conversation":"Unable to mute conversation")}},children:fe?e(K,{children:[e(E,{icon:"unmute"}),e("span",{children:"Unmute conversation"})]}):e(K,{children:[e(E,{icon:"mute"}),e("span",{children:"Mute conversation"})]})}),V&&e("div",{class:"menu-horizontal",children:[e(Ae,{onClick:()=>{A.showCompose={editStatus:n}},children:[e(E,{icon:"pencil"}),e("span",{children:"Edit"})]}),se&&e(qt,{subMenu:!0,confirmLabel:e(K,{children:[e(E,{icon:"trash"}),e("span",{children:"Delete this post?"})]}),menuItemClassName:"danger",onClick:()=>{(async()=>{try{await p.v1.statuses.$select(N).remove();const m=Yn(N,b);m._deleted=!0,Te("Deleted")}catch{Te("Unable to delete")}})()},children:[e(E,{icon:"trash"}),e("span",{children:"Delete…"})]})]})]}),gn=te(),[vn,ft]=W(!1),[gt,jt]=W({}),ha=window.ontouchstart!==void 0&&/iPad|iPhone|iPod/.test(navigator.userAgent),pa=Wn(ha?m=>{var _t;if(m.pointerType==="mouse")return;const{clientX:I,clientY:ee}=((_t=m.touches)==null?void 0:_t[0])||m,he=m.target.closest("a");he&&/^https?:\/\//.test(he.getAttribute("href"))||(m.preventDefault(),jt({anchorPoint:{x:I,y:ee},direction:"right"}),ft(!0))}:null,{threshold:600,captureEvent:!0,detect:"touch",cancelOnMovement:2}),Vt=o!=="l"&&!u&&!_&&!v,vt=!c&&!u,fa=Ke("r",Mt,{enabled:vt}),ga=Ke("f, l",()=>{try{Nt(),se||Te(M?`Unliked @${R||D}'s post`:`Liked @${R||D}'s post`)}catch{}},{enabled:vt}),va=Ke("d",()=>{try{Bt(),se||Te(oe?`Unbookmarked @${R||D}'s post`:`Bookmarked @${R||D}'s post`)}catch{}},{enabled:vt}),ba=Ke("shift+b",()=>{(async()=>{try{const m=await zt();!se&&m&&Te(X?`Unboosted @${R||D}'s post`:`Boosted @${R||D}'s post`)}catch{}})()},{enabled:vt&&at}),bt=re.slice(0,se?void 0:4),yt=re.length>1&&bt.some(m=>!!m.description&&!ia(m.description)),ya=Re(()=>{if(!yt)return null;const m=[];return bt.forEach((I,ee)=>{if(!I.description)return;const he=m.findIndex(_t=>_t.media.description===I.description);he===-1?m.push({media:I,indices:[ee]}):m[he].indices.push(ee)}),m.map(({media:I,indices:ee})=>e("div",{"data-caption-index":ee.map(he=>he+1).join(" "),onClick:he=>{he.preventDefault(),he.stopPropagation(),A.showMediaAlt={alt:I.description,lang:Q}},title:I.description,children:[e("sup",{children:ee.map(he=>he+1).join(" ")})," ",I.description]},I.id))},[yt,bt,Q]);return e("article",{ref:m=>{var ee;pt.current=m;const I=((ee=m==null?void 0:m.closest)==null?void 0:ee.call(m,".timeline-item, .timeline-item-alt, .status-link, .status-focus"))||m;fa.current=I,ga.current=I,va.current=I,ba.current=I},tabindex:"-1",class:`status ${!s&&ge&&ve?"status-reply-to":""} visibility-${pe} ${C?"status-pinned":""} ${{s:"small",m:"medium",l:"large"}[o]} ${_?"status-deleted":""} ${v?"status-card":""}`,onMouseEnter:F,onContextMenu:m=>{if(!Vt||m.metaKey)return;const I=m.target.closest("a");I&&/^https?:\/\//.test(I.getAttribute("href"))||(m.preventDefault(),jt({anchorPoint:{x:m.clientX,y:m.clientY},direction:"right"}),ft(!0))},...Vt?pa():{},children:[Vt&&e(Ya,{ref:gn,state:vn?"open":void 0,...gt,onClose:m=>{var I,ee,he;ft(!1),(m==null?void 0:m.reason)==="click"&&((he=(ee=(I=pt.current)==null?void 0:I.closest("[tabindex]"))==null?void 0:ee.focus)==null||he.call(ee))},portal:{target:document.body},containerProps:{style:{zIndex:1001},onClick:()=>{var m,I;(I=(m=gn.current)==null?void 0:m.closeMenu)==null||I.call(m)}},overflow:"auto",boundingBoxPadding:Ho(),unmountOnClose:!0,children:fn}),o!=="l"&&e("div",{class:"status-badge",children:[X&&e(E,{class:"reblog",icon:"rocket",size:"s"}),M&&e(E,{class:"favourite",icon:"heart",size:"s"}),oe&&e(E,{class:"bookmark",icon:"bookmark",size:"s"}),C&&e(E,{class:"pin",icon:"pin",size:"s"})]}),o!=="s"&&e("a",{href:z,tabindex:"-1",title:`@${D}`,onClick:m=>{m.preventDefault(),m.stopPropagation(),A.showAccount={account:n.account,instance:b}},children:e(We,{url:U||B,size:"xxl",squircle:xe})}),e("div",{class:"container",children:[e("div",{class:"meta",children:[e("span",{class:"meta-name",children:e(rt,{account:n.account,instance:b,showAvatar:o==="s",showAcct:se})})," ",o!=="l"&&(_?e("span",{class:"status-deleted-tag",children:"Deleted"}):Se&&!u&&!v?e(mt,{to:b?`/${b}/s/${N}`:`/s/${N}`,onClick:m=>{m.metaKey||m.ctrlKey||m.shiftKey||m.altKey||m.which===2||(m.preventDefault(),m.stopPropagation(),y==null||y(m,n),jt({anchorRef:{current:m.currentTarget},align:"end",direction:"bottom",gap:4}),ft(!0))},class:`time ${vn&&(gt!=null&&gt.anchorRef)?"is-open":""}`,children:[e(E,{icon:Ye[pe],alt:st[pe],size:"s"})," ",e(At,{datetime:Y,format:"micro"})]}):e("span",{class:"time",children:[e(E,{icon:Ye[pe],alt:st[pe],size:"s"})," ",e(At,{datetime:Y,format:"micro"})]}))]}),pe==="direct"&&e(K,{children:[e("div",{class:"status-direct-badge",children:"Private mention"})," "]}),!s&&e(K,{children:ge&&me===((yn=n.account)==null?void 0:yn.id)||$.statusThreadNumber[L]?e("div",{class:"status-thread-badge",children:[e(E,{icon:"thread",size:"s"}),"Thread",$.statusThreadNumber[L]?` ${$.statusThreadNumber[L]}/X`:""]}):!!ge&&!!ve&&(!!ce||!we.find(m=>m.id===me))&&e("div",{class:"status-reply-badge",children:[e(E,{icon:"reply"})," ",e(rt,{account:ve,instance:b,short:!0})]})}),e("div",{class:`content-container ${ce||Ee?"has-spoiler":""} ${De?"show-spoiler":""}`,"data-content-text-weight":l?dn():null,style:(se||l)&&{"--content-text-weight":dn()},children:[!!ce&&e(K,{children:[e("div",{class:"content spoiler-content",lang:Q,dir:"auto",ref:ua,"data-read-more":un,children:e("p",{children:e(ut,{text:ce,emojis:Ge})})}),e("button",{class:`light spoiler ${De?"spoiling":""}`,type:"button",disabled:Me,onClick:m=>{m.preventDefault(),m.stopPropagation(),De?delete A.spoilers[N]:A.spoilers[N]=!0},children:[e(E,{icon:De?"eye-open":"eye-close"})," ",Me?"Content warning":De?"Show less":"Show more"]})]}),e("div",{class:"content",ref:da,"data-read-more":un,children:[e("div",{lang:Q,dir:"auto",class:"inner-content",onClick:Fo({mentions:we,instance:b,previewMode:u,statusURL:Se}),dangerouslySetInnerHTML:{__html:tn(_e,{emojis:Ge,postEnhanceDOM:m=>{m.querySelectorAll('a.u-url[target="_blank"]').forEach(I=>{/http/i.test(I.innerText.trim())||I.removeAttribute("target")}),!u&&Array.from(m.querySelectorAll("a[href]:not(.u-url):not(.mention):not(.hashtag)")).filter(I=>{const ee=I.href;return!(ee===n.url||ee===n.uri)&&na(ee)}).forEach((I,ee)=>{ra(T,I.href).then(he=>{he&&(I.removeAttribute("target"),L&&(Array.isArray(A.statusQuotes[L])||(A.statusQuotes[L]=[]),A.statusQuotes[L][ee]||A.statusQuotes[L].splice(ee,0,he)))})})}})}}),e(ci,{id:N,instance:b,level:v})]}),!!de&&e(jo,{lang:Q,poll:de,readOnly:c||!x||!w,onUpdate:m=>{A.statuses[L].poll=m},refresh:()=>p.v1.polls.$select(de.id).fetch().then(m=>{A.statuses[L].poll=m}).catch(m=>{}),votePoll:m=>p.v1.polls.$select(de.id).votes.create({choices:m}).then(I=>{A.statuses[L].poll=I}).catch(I=>{})}),((h||ln)&&!!_e.trim()&&!!nn(an(_e,Ge))&&pn||et)&&e(Oo,{forceTranslate:et||ln,mini:!se&&!s,sourceLanguage:Q,text:(ce?`${ce}

`:"")+nn(_e)+((_n=de==null?void 0:de.options)!=null&&_n.length?`

Poll:
${de.options.map(m=>`- ${m.title}${m.votesCount>=0?` (${m.votesCount})`:""}`).join(`
`)}`:"")}),!ce&&Ee&&!!re.length&&e("button",{class:`plain spoiler ${De?"spoiling":""}`,type:"button",onClick:m=>{m.preventDefault(),m.stopPropagation(),De?delete A.spoilers[N]:A.spoilers[N]=!0},children:[e(E,{icon:De?"eye-open":"eye-close"})," Sensitive content"]}),!!re.length&&e(ei,{lang:Q,enabled:yt,captionChildren:ya,children:e("div",{ref:ma,class:`media-container media-eq${re.length} ${re.length>2?"media-gt2":""} ${re.length>4?"media-gt4":""}`,children:bt.map((m,I)=>e(Jo,{media:m,autoAnimate:se,showCaption:re.length===1,lang:Q,altIndex:yt&&!!m.description&&I+1,to:`/${b}/s/${N}?${s?"media":"media-only"}=${I+1}`,onClick:d?ee=>{d(ee,I,m,n)}:void 0},m.id))})}),!!q&&(q==null?void 0:q.url)!==n.url&&(q==null?void 0:q.url)!==n.uri&&/^https/i.test(q==null?void 0:q.url)&&!Ee&&!ce&&!de&&!re.length&&!$.statusQuotes[L]&&e(ti,{card:q,instance:T})]}),se&&e(K,{children:[e("div",{class:"extra-meta",children:_?e("span",{class:"status-deleted-tag",children:"Deleted"}):e(K,{children:[e(E,{icon:Ye[pe],alt:st[pe]})," ",e("a",{href:Se,target:"_blank",rel:"noopener noreferrer",children:e("time",{class:"created",datetime:Y.toISOString(),children:mn})}),Le&&e(K,{children:[" ","• ",e(E,{icon:"pencil",alt:"Edited"})," ",e("time",{class:"edited",datetime:j.toISOString(),onClick:()=>{ht(N)},children:hn})]})]})}),e("div",{class:`actions ${_?"disabled":""}`,children:[e("div",{class:"action has-count",children:e(wt,{title:"Reply",alt:"Comments",class:"reply-button",icon:"comment",count:J,onClick:Mt})}),e(qt,{disabled:!at,onClick:zt,confirmLabel:e(K,{children:[e(E,{icon:"rocket"}),e("span",{children:X?"Unboost?":"Boost to everyone?"})]}),menuFooter:Ot&&!X&&e("div",{class:"footer",children:[e(E,{icon:"alert"}),"Some media have no descriptions."]}),children:e("div",{class:"action has-count",children:e(wt,{checked:X,title:["Boost","Unboost"],alt:["Boost","Boosted"],class:"reblog-button",icon:"rocket",count:ke,disabled:!at})})}),e("div",{class:"action has-count",children:e(wt,{checked:M,title:["Like","Unlike"],alt:["Like","Liked"],class:"favourite-button",icon:"heart",count:ye,onClick:Nt})}),e("div",{class:"action",children:e(wt,{checked:oe,title:["Bookmark","Unbookmark"],alt:["Bookmark","Bookmarked"],class:"bookmark-button",icon:"bookmark",onClick:Bt})}),e(Hn,{portal:{target:document.querySelector(".status-deck")||document.body},align:"end",gap:4,overflow:"auto",viewScroll:"close",boundingBoxPadding:"8 8 8 8",menuButton:e("div",{class:"action",children:e("button",{type:"button",title:"More",class:"plain more-button",children:e(E,{icon:"more",size:"l",alt:"More"})})}),children:fn})]})]})]}),!!Rt&&e(lt,{onClick:m=>{var I;m.target===m.currentTarget&&(ht(!1),(I=pt.current)==null||I.focus())},children:e(ni,{statusID:Rt,instance:b,fetchStatusHistory:()=>p.v1.statuses.$select(Rt).history.list(),onClose:()=>{var m;ht(!1),(m=pt.current)==null||m.focus()}})}),la&&e(lt,{class:"light",onClick:m=>{m.target===m.currentTarget&&Pt(!1)},children:e(ai,{statusID:N,instance:b,onClose:()=>Pt(!1)})})]})}function ei(t){const{enabled:n,children:a,lang:s,captionChildren:o}=t;return!n||!o?a:e("figure",{class:"media-figure-multiple",children:[a,e("figcaption",{lang:s,dir:"auto",children:o})]})}function ti({card:t,instance:n}){var G;const a=dt(A),{blurhash:s,title:o,description:r,html:c,providerName:l,providerUrl:h,authorName:f,authorUrl:u,width:g,height:d,image:v,imageDescription:y,url:p,type:b,embedUrl:w,language:T,publishedAt:x}=t,L=o||l||f,D=g/d>=1.2?"large":"",[B,U]=W(null);if(ue(()=>{L&&v&&na(p)&&ra(n,p).then(z=>{if(!z)return;const{id:H,url:R}=z;U("#"+R)})},[L,v]),a.unfurledLinks[p])return null;if(L&&(v||b==="photo"&&s)){const z=new URL(p).hostname.replace(/^www\./,"");let H;if(!v){const xe=Za(s,44,44),ae=document.createElement("canvas");ae.width=44,ae.height=44;const N=ae.getContext("2d"),J=N.createImageData(44,44);J.data.set(xe),N.putImageData(J,0,0),H=ae.toDataURL()}return e("a",{href:B||p,target:B?null:"_blank",rel:"nofollow noopener noreferrer",class:`card link ${H?"":D}`,lang:T,dir:"auto",children:[e("div",{class:"card-image",children:e("img",{src:v||H,width:g,height:d,loading:"lazy",alt:y||"",onError:R=>{try{R.target.style.display="none"}catch{}}})}),e("div",{class:"meta-container",children:[e("p",{class:"meta domain",dir:"auto",children:z}),e("p",{class:"title",dir:"auto",children:o}),e("p",{class:"meta",dir:"auto",children:r||l||f})]})]})}else{if(b==="photo")return e("a",{href:p,target:"_blank",rel:"nofollow noopener noreferrer",class:"card photo",children:e("img",{src:w,width:g,height:d,alt:o||r,loading:"lazy",style:{height:"auto",aspectRatio:`${g}/${d}`}})});if(b==="video"){if(/youtube/i.test(l)){const z=(G=p.match(/watch\?v=([^&]+)/))==null?void 0:G[1];if(z)return e("lite-youtube",{videoid:z,nocookie:!0})}return e("div",{class:"card video",style:{aspectRatio:`${g}/${d}`},dangerouslySetInnerHTML:{__html:c}})}else if(L&&!v){const z=new URL(p).hostname.replace(/^www\./,"");return e("a",{href:B||p,target:B?null:"_blank",rel:"nofollow noopener noreferrer",class:"card link no-image",lang:T,children:e("div",{class:"meta-container",children:[e("p",{class:"meta domain",children:[e(E,{icon:"link",size:"s"})," ",e("span",{children:z})]}),e("p",{class:"title",children:o}),e("p",{class:"meta",children:r||l||f})]})})}}}function ni({statusID:t,instance:n,fetchStatusHistory:a=()=>{},onClose:s}){const[o,r]=W("default"),[c,l]=W([]);return ue(()=>{r("loading"),(async()=>{try{const h=await a();l(h),r("default")}catch{r("error")}})()},[]),e("div",{id:"edit-history",class:"sheet",children:[!!s&&e("button",{type:"button",class:"sheet-close",onClick:s,children:e(E,{icon:"x"})}),e("header",{children:[e("h2",{children:"Edit History"}),o==="error"&&e("p",{children:"Failed to load history"}),o==="loading"&&e("p",{children:[e(Ze,{abrupt:!0})," Loading…"]})]}),e("main",{tabIndex:"-1",children:c.length>0&&e("ol",{children:c.map(h=>{const{createdAt:f}=h,u=new Date(f);return e("li",{class:"history-item",children:[e("h3",{children:e("time",{children:Ft(u,{formatOpts:{weekday:"short",second:"numeric"}})})}),e(Xe,{status:h,instance:n,size:"s",withinContext:!0,readOnly:!0,previewMode:!0})]},f)})})})]})}const Dn=80;function ai({statusID:t,instance:n,onClose:a}){const{masto:s}=Be({instance:n}),[o,r]=W("default"),[c,l]=W([]),[h,f]=W(!1),u=te(),g=te();async function d(v){f(!1),r("loading"),(async()=>{var y,p,b,w;try{v&&(u.current=s.v1.statuses.$select(t).rebloggedBy.list({limit:Dn}),g.current=s.v1.statuses.$select(t).favouritedBy.list({limit:Dn}));const[{value:T},{value:x}]=await Promise.allSettled([u.current.next(),g.current.next()]);if((y=T.value)!=null&&y.length||(p=x.value)!=null&&p.length){if((b=T.value)!=null&&b.length)for(const L of T.value){const $=c.find(D=>D.id===L.id);$?$._types.push("reblog"):c.push({...L,_types:["reblog"]})}if((w=x.value)!=null&&w.length)for(const L of x.value){const $=c.find(D=>D.id===L.id);$?$._types.push("favourite"):c.push({...L,_types:["favourite"]})}l(c),f(!T.done||!x.done)}else f(!1);r("default")}catch{r("error")}})()}return ue(()=>{d(!0)},[]),e("div",{id:"reactions-container",class:"sheet",children:[!!a&&e("button",{type:"button",class:"sheet-close",onClick:a,children:e(E,{icon:"x"})}),e("header",{children:e("h2",{children:"Boosted/Liked by…"})}),e("main",{children:c.length>0?e(K,{children:[e("ul",{class:"reactions-list",children:c.map(v=>{const{_types:y}=v;return e("li",{children:[e("div",{class:"reactions-block",children:y.map(p=>e(E,{icon:{reblog:"rocket",favourite:"heart"}[p],class:`${p}-icon`}))}),e(Xn,{account:v,instance:n})]},v.id+y)})}),o==="default"?h?e(Xa,{onChange:v=>{v&&d()},children:e("button",{type:"button",class:"plain block",onClick:()=>d(),children:"Show more…"})}):e("p",{class:"ui-state insignificant",children:"The end."}):o==="loading"&&e("p",{class:"ui-state",children:e(Ze,{abrupt:!0})})]}):o==="loading"?e("p",{class:"ui-state",children:e(Ze,{abrupt:!0})}):o==="error"?e("p",{class:"ui-state",children:"Unable to load accounts"}):e("p",{class:"ui-state insignificant",children:"No one yet."})})]})}function wt({checked:t,count:n,class:a,title:s,alt:o,icon:r,onClick:c,...l}){typeof s=="string"&&(s=[s,s]),typeof o=="string"&&(o=[o,o]);const[h,f]=W(s[0]||""),[u,g]=W(o[0]||"");return ue(()=>{t?(f(s[1]||""),g(o[1]||"")):(f(s[0]||""),g(o[0]||""))},[t,s,o]),e("button",{type:"button",title:h,class:`plain ${a} ${t?"checked":""}`,onClick:d=>{c&&(d.preventDefault(),d.stopPropagation(),c(d))},...l,children:[e(E,{icon:r,size:"l",alt:u}),!!n&&e(K,{children:[" ",e("small",{title:n,children:qe(n)})]})]})}function Rn(t){if(!t)return;let n=Math.floor(t/3600),a=Math.floor(t%3600/60),s=Math.round(t%60);return n===0?`${a}:${s.toString().padStart(2,"0")}`:`${n}:${a.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}const oi=/(twitter|github)\.com/i,Pn={};function ii(t,n){var p;const a=Qa(A);if(oi.test(n)||Pn[n])return;if(new RegExp(t+"/").test((p=a.unfurledLinks[n])==null?void 0:p.url))return Promise.resolve(a.unfurledLinks[n]);let o,r=n;/\/\/elk\.[^\/]+\/[^.]+\.[^.]+/i.test(r)&&(r=r.replace(/elk\.[^\/]+\//i,""));const c=new URL(r),l=c.hostname,h=c.pathname,u=/\/@([^@\/]+)@?([^\/]+)?\/(\d+)$/i.exec(h);if(u){const b=u[3],{masto:w}=Be({instance:l});o=w.v1.statuses.$select(b).fetch().then(T=>{if(T!=null&&T.id)return{status:T,instance:l};throw new Error("No results")})}const{masto:g}=Be({instance:t}),d=g.v2.search.fetch({q:n,type:"statuses",resolve:!0,limit:1}).then(b=>{if(b.statuses.length>0)return{status:b.statuses[0],instance:t};throw new Error("No results")});function v(b){const{status:w,instance:T}=b,{id:x}=w,L=`/${T}/s/${x}`,$={id:x,instance:T,url:L};return A.unfurledLinks[n]=$,Fe(w,T,{skipThreading:!0}),$}function y(b){Pn[n]=!0}return o?Promise.any([o,d]).then(v).catch(y):d.then(v).catch(y)}function ri(t){if(!t)return;const n=new URL(t),{host:a,pathname:s}=n,o=s.replace(/\/$/,""),[r,c,l]=o.match(/\/(@[^\/]+)\/(.*)/)||[];return e(K,{children:[a,c?e(K,{children:["/",c,e("wbr",{}),e("span",{class:"more-insignificant",children:["/",l]})]}):e("span",{class:"more-insignificant",children:o})]})}const ra=Zo(ii);function si({status:t,filterInfo:n,instance:a,containerProps:s={}}){const{account:{avatar:o,avatarStatic:r,bot:c,group:l},createdAt:h,visibility:f,reblog:u}=t,g=!!u,d=(n==null?void 0:n.titlesStr)||"",v=new Date(h),y=Ko(t.reblog||t),[p,b]=W(!1),w=Wn(()=>{b(!0)},{threshold:600,captureEvent:!0,detect:"touch",cancelOnMovement:2}),T=Lt();return e("div",{class:g?l?"status-group":"status-reblog":"",...s,title:y,onContextMenu:x=>{x.preventDefault(),b(!0)},...w(),children:[e("article",{class:"status filtered",tabindex:"-1",children:[e("b",{class:"status-filtered-badge clickable badge-meta",title:d,onClick:x=>{x.preventDefault(),b(!0)},children:[e("span",{children:"Filtered"}),e("span",{children:d})]})," ",e(We,{url:r||o,squircle:c}),e("span",{class:"status-filtered-info",children:[e("span",{class:"status-filtered-info-1",children:[e(rt,{account:t.account,instance:a})," ",e(E,{icon:Ye[f],alt:st[f],size:"s"})," ",g?"boosted":e(At,{datetime:v,format:"micro"})]}),e("span",{class:"status-filtered-info-2",children:[g&&e(K,{children:[e(We,{url:u.account.avatarStatic||u.account.avatar,squircle:c})," "]}),y]})]})]}),!!p&&e(lt,{class:"light",onClick:x=>{x.target===x.currentTarget&&b(!1)},children:e("div",{id:"filtered-status-peek",class:"sheet",children:[e("button",{type:"button",class:"sheet-close",onClick:()=>b(!1),children:e(E,{icon:"x"})}),e("header",{children:[e("b",{class:"status-filtered-badge",children:"Filtered"})," ",d]}),e("main",{tabIndex:"-1",children:e(mt,{ref:T,class:"status-link",to:`/${a}/s/${t.id}`,onClick:()=>{b(!1)},"data-read-more":"Read more →",children:e(Xe,{status:t,instance:a,size:"s",readOnly:!0})})})]})})]})}const ci=$t(({id:t,instance:n,level:a=0})=>{if(!t||!n)return;const s=dt(A),o=je(t,n),r=s.statusQuotes[o],c=r==null?void 0:r.filter((l,h,f)=>f.findIndex(u=>u.url===l.url)===h);if(c!=null&&c.length&&!(a>2))return c.map(l=>e(mt,{to:`${l.instance?`/${l.instance}`:""}/s/${l.id}`,class:"status-card-link","data-read-more":"Read more →",children:e(Xe,{statusID:l.id,instance:l.instance,size:"s",quoted:a+1})},l.instance+l.id))}),Mn=$t(Xe),li=on.reduce((t,n)=>{const[a,s,o]=n;return t[a]={common:s,native:o},t},{}),sa={"5 minutes":5*60,"30 minutes":30*60,"1 hour":60*60,"6 hours":6*60*60,"12 hours":12*60*60,"1 day":24*60*60,"3 days":3*24*60*60,"7 days":7*24*60*60},ui=Object.values(sa),On=24*60*60,zn=t=>{if(!t)return On;const n=(new Date(t).getTime()-Date.now())/1e3;return ui.find(a=>a>=n)||On},Ne=document.createElement("ul");Ne.role="listbox";Ne.className="text-expander-menu";const di=16,mi=new IntersectionObserver(t=>{t.forEach(n=>{if(n.isIntersecting){const{left:a,width:s}=n.boundingClientRect,{innerWidth:o}=window;a+s>o&&(Ne.style.left=o-s-di+"px")}})});mi.observe(Ne);const He=Ct([new Intl.DateTimeFormat().resolvedOptions().locale,...navigator.languages],on.map(t=>t[0]),"en"),hi=new RegExp(Cn.source,Cn.flags),pi=/(^|[^\/\w])@(([a-z0-9_]+)@[a-z0-9\.\-]+[a-z0-9]+)/gi,fi="$2xxxxxxxxxxxxxxxxxxxxxxx";function gi(t){return t.replace(hi,fi).replace(pi,"$1@$3")}function Ii({onClose:t,replyToStatus:n,editStatus:a,draftStatus:s,standalone:o,hasOpener:r}){var Ge;const{masto:c,instance:l}=Be(),[h,f]=W("default"),u=te((s==null?void 0:s.uid)||eo()),g=It(),d=g.info,v=co(),{statuses:{maxCharacters:y,maxMediaAttachments:p,charactersReservedPerUrl:b}={},mediaAttachments:{supportedMimeTypes:w=[],imageSizeLimit:T,imageMatrixLimit:x,videoSizeLimit:L,videoMatrixLimit:$,videoFrameRateLimit:D}={},polls:{maxOptions:B,maxCharactersPerOption:U,maxExpiration:G,minExpiration:z}={}}=v||{},H=te(),R=te(),[ne,xe]=W("public"),[ae,N]=W(!1),[J,X]=W(O.session.get("currentLanguage")||He),ke=te(J),[M,ye]=W([]),[oe,de]=W(null),fe=O.account.get("preferences")||{},Ee=()=>{H.current&&H.current.dispatchEvent(new Event("input"))},ce=()=>{setTimeout(()=>{var _;(_=H.current)==null||_.focus()},300)};ue(()=>{if(n){const{spoilerText:_,visibility:C,language:S,sensitive:F}=n;_&&R.current&&(R.current.value=_);const j=[...new Set([n.account.acct,...n.mentions.map(P=>P.acct)])].filter(P=>P!==d.acct);j.length>0&&(H.current.value=`${j.map(P=>`@${P}`).join(" ")} `,Ee()),ce(),xe(C==="public"&&fe["posting:default:visibility"]?fe["posting:default:visibility"]:C),X(S||fe.postingDefaultLanguage||He),N(F&&!!_)}else if(a){const{visibility:_,language:C,sensitive:S,poll:F,mediaAttachments:Y}=a,j=!!(F!=null&&F.options)&&{...F,options:F.options.map(P=>(P==null?void 0:P.title)||P),expiresIn:(F==null?void 0:F.expiresIn)||zn(F.expiresAt)};f("loading"),(async()=>{try{const P=await c.v1.statuses.$select(a.id).source.fetch(),{text:V,spoilerText:ie}=P;H.current.value=V,H.current.dataset.source=V,Ee(),ce(),R.current.value=ie,xe(_),X(C||presf.postingDefaultLanguage||He),N(S),de(j),ye(Y),f("default")}catch(P){alert((P==null?void 0:P.reason)||P),f("error")}})()}else ce(),fe["posting:default:visibility"]&&xe(fe["posting:default:visibility"]),fe["posting:default:language"]&&X(fe["posting:default:language"]),fe["posting:default:sensitive"]&&N(fe["posting:default:sensitive"]);if(s){const{status:_,spoilerText:C,visibility:S,language:F,sensitive:Y,poll:j,mediaAttachments:P}=s,V=!!(j!=null&&j.options)&&{...j,options:j.options.map(ie=>(ie==null?void 0:ie.title)||ie),expiresIn:(j==null?void 0:j.expiresIn)||zn(j.expiresAt)};H.current.value=_,Ee(),ce(),C&&(R.current.value=C),S&&xe(S),X(F||fe.postingDefaultLanguage||He),Y!==null&&N(Y),V&&de(V),P&&ye(P)}},[s,a,n]);const pe=te(),Q="You have unsaved changes. Discard this post?",Le=()=>{const{value:_,dataset:C}=H.current;if(h==="loading")return!1;const S=M.length>0;if(!_&&!S||M.length>0&&M.every(V=>V.id))return!0;const Y=(n==null?void 0:n.account.id)===d.id,j=n&&_.trim()===`@${n.account.acct}`;return!!(!Y&&j||_===(C==null?void 0:C.source))},Z=()=>Le()?!0:confirm(Q);ue(()=>{const _=C=>{Le()||(C.preventDefault(),C.returnValue=Q)};return window.addEventListener("beforeunload",_,{capture:!0}),()=>window.removeEventListener("beforeunload",_,{capture:!0})},[]);const q=()=>{const{value:_}=H.current,{value:C}=R.current;return wn(gi(_))+wn(C)},be=()=>{const _=q();A.composerCharacterCount=_};ue(be,[]);const ge=te(!1);Ke("esc",()=>{ge.current=!0},{enableOnFormTags:!0}),Ke("esc",()=>{!o&&ge.current&&Z()&&t(),ge.current=!1},{enableOnFormTags:!0,keyup:!0,ignoreEventWhen:_=>{const C=document.querySelectorAll("#modal-container > *"),S=!!C,F=C.length===1&&C[0].querySelector("#compose-container");return S&&!F}});const me=te({}),_e=()=>`${xt()}#${u.current}`,we=()=>{if(a)return;const _=_e(),C={key:_,replyTo:n?{id:n.id,account:{id:n.account.id,username:n.account.username,acct:n.account.acct}}:null,draftStatus:{uid:u.current,status:H.current.value,spoilerText:R.current.value,visibility:ne,language:J,sensitive:ae,poll:oe,mediaAttachments:M}};!to(C,me.current)&&!Le()&&(Fn.drafts.set(_,{...C,state:"unsaved",updatedAt:Date.now()}).then(()=>{}).catch(S=>{}),me.current=structuredClone(C))};mo(we,5e3),ue(()=>(we(),()=>{Fn.drafts.del(_e())}),[]),ue(()=>{const _=S=>{const{items:F}=S.clipboardData||S.dataTransfer,Y=[];for(let j=0;j<F.length;j++){const P=F[j];if(P.kind==="file"){const V=P.getAsFile();V&&w.includes(V.type)&&Y.push(V)}}if(Y.length>0&&M.length>=p){alert(`You can only attach up to ${p} files.`);return}if(Y.length>0){S.preventDefault(),S.stopPropagation();const j=p-M.length,P=Y.slice(0,j);if(P.length<=0){alert(`You can only attach up to ${p} files.`);return}const V=P.map(ie=>({file:ie,type:ie.type,size:ie.size,url:URL.createObjectURL(ie),id:null,description:null}));ye([...M,...V])}};window.addEventListener("paste",_);const C=S=>{S.dataTransfer.items.length>0&&(S.preventDefault(),S.stopPropagation())};return window.addEventListener("dragover",C),window.addEventListener("drop",_),()=>{window.removeEventListener("paste",_),window.removeEventListener("dragover",C),window.removeEventListener("drop",_)}},[M]);const[re,Ie]=W(!1),[rn,Se]=Re(()=>{const _=[],C=[],{contentTranslationHideLanguages:S=[]}=A.settings;return on.forEach(F=>{const[Y]=F;Y===J||Y===ke.current||Y===He||S.includes(Y)?_.push(F):C.push(F)}),_.sort(([F,Y],[j,P])=>F===J?-1:j===J?1:Y.localeCompare(P)),C.sort(([F,Y],[j,P])=>Y.localeCompare(P)),[_,C]},[J]);return e("div",{id:"compose-container-outer",children:[e("div",{id:"compose-container",class:o?"standalone":"",children:[e("div",{class:"compose-top",children:[(d==null?void 0:d.avatarStatic)&&e(Xn,{account:d,accountInstance:g.instanceURL,hideDisplayName:!0}),o?r&&e("button",{type:"button",class:"light pop-button",disabled:h==="loading",onClick:()=>{if(!window.opener){alert("Looks like you closed the parent window.");return}window.opener.__STATES__.showCompose&&!confirm("Looks like you already have a compose field open in the parent window. Popping in this window will discard the changes you made in the parent window. Continue?")||t({fn:()=>{const _={editStatus:a,replyToStatus:n,draftStatus:{uid:u.current,status:H.current.value,spoilerText:R.current.value,visibility:ne,language:J,sensitive:ae,poll:oe,mediaAttachments:M}};window.opener.__COMPOSE__=_,window.opener.__STATES__.showCompose=!0}})},children:e(E,{icon:"popin",alt:"Pop in"})}):e("span",{children:[e("button",{type:"button",class:"light pop-button",disabled:h==="loading",onClick:()=>{if(!ho({editStatus:a,replyToStatus:n,draftStatus:{uid:u.current,status:H.current.value,spoilerText:R.current.value,visibility:ne,language:J,sensitive:ae,poll:oe,mediaAttachments:M}})){alert("Looks like your browser is blocking popups.");return}t()},children:e(E,{icon:"popout",alt:"Pop out"})})," ",e("button",{type:"button",class:"light close-button",disabled:h==="loading",onClick:()=>{Z()&&t()},children:e(E,{icon:"x"})})]})]}),!!n&&e("div",{class:"status-preview",children:[e(Mn,{status:n,size:"s",previewMode:!0}),e("div",{class:"status-preview-legend reply-to",children:["Replying to @",n.account.acct||n.account.username,"’s post"]})]}),!!a&&e("div",{class:"status-preview",children:[e(Mn,{status:a,size:"s",previewMode:!0}),e("div",{class:"status-preview-legend",children:"Editing source post"})]}),e("form",{ref:pe,class:`form-visibility-${ne}`,style:{pointerEvents:h==="loading"?"none":"auto",opacity:h==="loading"?.5:1},onKeyDown:_=>{_.key==="Enter"&&(_.ctrlKey||_.metaKey)&&pe.current.dispatchEvent(new Event("submit",{cancelable:!0}))},onSubmit:_=>{_.preventDefault();const C=new FormData(_.target),S=Object.fromEntries(C.entries());let{status:F,visibility:Y,sensitive:j,spoilerText:P}=S;if(j=j==="on",oe){if(oe.options.length<2){alert("Poll must have at least 2 options");return}if(oe.options.some(V=>V==="")){alert("Some poll choices are empty");return}}M.length>0&&M.some(ie=>{var ve,Pe;return!((Pe=(ve=ie.description)==null?void 0:ve.trim)!=null&&Pe.call(ve))})&&!confirm("Some media have no descriptions. Continue?")||(P=j&&P||void 0,F=F===""?void 0:F,f("loading"),(async()=>{try{if(M.length>0){const ve=M.map(Ce=>{const{file:Me,description:De,id:se}=Ce;if(se)return Ce;{const et=Bn({file:Me,description:De});return c.v2.media.create(et).then(tt=>(tt.id&&(Ce.id=tt.id),tt))}}),Pe=await Promise.allSettled(ve);if(Pe.some(Ce=>{var Me;return Ce.status==="rejected"||!((Me=Ce.value)!=null&&Me.id)})){f("error"),Pe.forEach(Ce=>{Ce.status==="rejected"&&alert(Ce.reason||`Attachment #${i} failed`)});return}}let V={status:F,spoiler_text:P,language:J,sensitive:j,poll:oe,media_ids:M.map(ve=>ve.id)};a&&Qn("@mastodon/edit-media-attributes")?V.media_attributes=M.map(ve=>({id:ve.id,description:ve.description})):a||(V.visibility=Y,V.in_reply_to_id=(n==null?void 0:n.id)||void 0),V=Bn(V);let ie;if(a)ie=await c.v1.statuses.$select(a.id).update(V),Fe(ie,l,{skipThreading:!0});else try{ie=await c.v1.statuses.create(V,{idempotencyKey:u.current})}catch{ie=await c.v1.statuses.create(V)}f("default"),t({type:a?"edit":n?"reply":"post",newStatus:ie,instance:l})}catch(V){alert((V==null?void 0:V.reason)||V),f("error")}})())},children:[e("div",{class:"toolbar stretch",children:[e("input",{ref:R,type:"text",name:"spoilerText",placeholder:"Content warning",disabled:h==="loading",class:"spoiler-text-field",lang:J,spellCheck:"true",dir:"auto",style:{opacity:ae?1:0,pointerEvents:ae?"auto":"none"},onInput:()=>{be()}}),e("label",{class:`toolbar-button ${ae?"highlight":""}`,title:"Content warning or sensitive media",children:[e("input",{name:"sensitive",type:"checkbox",checked:ae,disabled:h==="loading",onChange:_=>{var S,F;const C=_.target.checked;N(C),C?(S=R.current)==null||S.focus():(F=H.current)==null||F.focus()}}),e(E,{icon:`eye-${ae?"close":"open"}`})]})," ",e("label",{class:`toolbar-button ${ne!=="public"&&!ae?"show-field":""} ${ne!=="public"?"highlight":""}`,title:`Visibility: ${ne}`,children:[e(E,{icon:Ye[ne],alt:ne}),e("select",{name:"visibility",value:ne,onChange:_=>{xe(_.target.value)},disabled:h==="loading"||!!a,children:[e("option",{value:"public",children:["Public ",e(E,{icon:"earth"})]}),e("option",{value:"unlisted",children:"Unlisted"}),e("option",{value:"private",children:"Followers only"}),e("option",{value:"direct",children:"Private mention"})]})]})," "]}),e(vi,{ref:H,placeholder:n?"Post your reply":a?"Edit your post":"What are you doing?",required:(M==null?void 0:M.length)===0,disabled:h==="loading",lang:J,onInput:()=>{be()},maxCharacters:y,performSearch:_=>{const{type:C,q:S,limit:F}=_;return C==="accounts"?c.v1.accounts.search.list({q:S,limit:F,resolve:!1}):c.v2.search.fetch(_)}}),(M==null?void 0:M.length)>0&&e("div",{class:"media-attachments",children:[M.map((_,C)=>{const{id:S,file:F}=_,Y=(F==null?void 0:F.size)+(F==null?void 0:F.type)+(F==null?void 0:F.name);return e(yi,{attachment:_,disabled:h==="loading",lang:J,onDescriptionChange:j=>{ye(P=>{const V=[...P];return V[C].description=j,V})},onRemove:()=>{ye(j=>j.filter((P,V)=>V!==C))}},S||Y||C)}),e("label",{class:"media-sensitive",children:[e("input",{name:"sensitive",type:"checkbox",checked:ae,disabled:h==="loading",onChange:_=>{const C=_.target.checked;N(C)}})," ",e("span",{children:"Mark media as sensitive"})," ",e(E,{icon:`eye-${ae?"close":"open"}`})]})]}),!!oe&&e(_i,{lang:J,maxOptions:B,maxExpiration:G,minExpiration:z,maxCharactersPerOption:U,poll:oe,disabled:h==="loading",onInput:_=>{if(_){const C={..._};de(C)}else de(null)}}),e("div",{class:"toolbar wrap",style:{justifyContent:"flex-end"},children:[e("span",{children:[e("label",{class:"toolbar-button",children:[e("input",{type:"file",accept:w.join(","),multiple:M.length<p-1,disabled:h==="loading"||M.length>=p||!!oe,onChange:_=>{const C=_.target.files;if(!C)return;const S=Array.from(C).map(F=>({file:F,type:F.type,size:F.size,url:URL.createObjectURL(F),id:null,description:null}));M.length+S.length>p?alert(`You can only attach up to ${p} files.`):ye(F=>F.concat(S)),_.target.value=""}}),e(E,{icon:"attachment"})]})," ",e("button",{type:"button",class:"toolbar-button",disabled:h==="loading"||!!oe||!!M.length,onClick:()=>{de({options:["",""],expiresIn:24*60*60,multiple:!1})},children:e(E,{icon:"poll",alt:"Add poll"})})," ",e("button",{type:"button",class:"toolbar-button",disabled:h==="loading",onClick:()=>{Ie(!0)},children:e(E,{icon:"emoji2"})})]}),e("div",{class:"spacer"}),h==="loading"?e(Ze,{abrupt:!0}):e(bi,{maxCharacters:y,hidden:h==="loading"}),e("label",{class:`toolbar-button ${J!==ke.current?"highlight":""}`,children:[e("span",{class:"icon-text",children:(Ge=li[J])==null?void 0:Ge.native}),e("select",{name:"language",value:J,onChange:_=>{const{value:C}=_.target;X(C||He),O.session.set("currentLanguage",C||He)},disabled:h==="loading",children:[rn.map(([_,C,S])=>e("option",{value:_,children:[C," (",S,")"]},_)),e("hr",{}),Se.map(([_,C,S])=>e("option",{value:_,children:[C," (",S,")"]},_))]})]})," ",e("button",{type:"submit",class:"large",disabled:h==="loading",children:n?"Reply":a?"Update":"Post"})]})]})]}),re&&e(lt,{class:"light",onClick:_=>{_.target===_.currentTarget&&Ie(!1)},children:e(wi,{masto:c,instance:l,onClose:()=>{Ie(!1)},onSelect:_=>{const C=` ${_} `,S=H.current;if(!S)return;const{selectionStart:F,selectionEnd:Y}=S,j=S.value,P=j.slice(0,F)+C+j.slice(Y);S.value=P,S.selectionStart=S.selectionEnd=Y+C.length,S.focus(),S.dispatchEvent(new Event("input"))}})})]})}function Nn(t){if(!t)return;const{value:n,offsetHeight:a,scrollHeight:s,clientHeight:o}=t;if(a<window.innerHeight){const r=a-o;t.style.height=n?s+r+"px":null}}const vi=Un((t,n)=>{var d;const{masto:a}=Be(),[s,o]=W(((d=n.current)==null?void 0:d.value)||""),{maxCharacters:r,performSearch:c=()=>{},...l}=t,h=dt(A),f=te();ue(()=>{(async()=>{try{const v=await a.v1.customEmojis.list();f.current=v}catch{}})()},[]);const u=te(),g=te("");return ue(()=>{let v,y,p;return u.current&&(v=b=>{const{key:w,provide:T,text:x}=b.detail;if(g.current=x,x===""){T(Promise.resolve({matched:!1}));return}if(w===":"){const $=ki(f.current,x);let D="";$.forEach(B=>{const{shortcode:U,url:G}=B;D+=`
                <li role="option" data-value="${Oe(U)}">
                <img src="${Oe(G)}" width="16" height="16" alt="" loading="lazy" /> 
                :${Oe(U)}:
              </li>`}),Ne.innerHTML=D,T(Promise.resolve({matched:$.length>0,fragment:Ne}));return}const L={"@":"accounts","#":"hashtags"}[w];T(new Promise($=>{c({type:L,q:x,limit:5}).then(B=>{if(x!==g.current)return;const U=B[L]||B;let G="";U.forEach(z=>{var ke;const{name:H,avatarStatic:R,displayName:ne,username:xe,acct:ae,emojis:N,history:J}=z,X=an(ne,N);if(ae)G+=`
                    <li role="option" data-value="${Oe(ae)}">
                      <span class="avatar">
                        <img src="${Oe(R)}" width="16" height="16" alt="" loading="lazy" />
                      </span>
                      <span>
                        <b>${X||xe}</b>
                        <br>@${Oe(ae)}
                      </span>
                    </li>
                  `;else{const M=(ke=J==null?void 0:J.reduce)==null?void 0:ke.call(J,(ye,oe)=>ye+ +oe.uses,0);G+=`
                    <li role="option" data-value="${Oe(H)}">
                      <span class="grow">#<b>${Oe(H)}</b></span>
                      ${M?`<span class="count">${qe(M)}</span>`:""}
                    </li>
                  `}Ne.innerHTML=G}),$({matched:U.length>0,fragment:Ne})})}))},u.current.addEventListener("text-expander-change",v),y=b=>{const{key:w,item:T}=b.detail;w===":"?b.detail.value=`:${T.dataset.value}:`:b.detail.value=`${w}${T.dataset.value}`},u.current.addEventListener("text-expander-value",y),p=b=>{const{input:w}=b.detail;o(w.value)},u.current.addEventListener("text-expander-committed",p)),()=>{u.current&&(u.current.removeEventListener("text-expander-change",v),u.current.removeEventListener("text-expander-value",y),u.current.removeEventListener("text-expander-committed",p))}},[]),e("text-expander",{ref:u,keys:"@ # :",children:e("textarea",{autoCapitalize:"sentences",autoComplete:"on",autoCorrect:"on",spellCheck:"true",dir:"auto",rows:"6",cols:"50",...l,ref:n,name:"status",value:s,onKeyDown:v=>{const{key:y,target:p}=v;if(y==="Enter")try{const{value:b,selectionStart:w}=p,x=b.slice(0,w).split(`
`).slice(-1)[0];if(x&&/^\s*(-|\d+\.)\s/.test(x)){const[L,$,D,B,U]=x.match(/^(\s*)(-|\d+\.)(\s+)(.+)?/)||[];if(U){v.preventDefault();const[G]=D.match(/\d+/)||[],z=G?`${+G+1}.`:"-",H=`
${$}${z}${B}`;p.setRangeText(H,w,w);const R=w+H.length;p.setSelectionRange(R,R)}else{const G=w-x.length;p.setRangeText("",G,w)}Nn(p)}}catch{}},onInput:v=>{var p;const{target:y}=v;o(y.value),Nn(y),(p=t.onInput)==null||p.call(t,v)},style:{width:"100%",height:"4em"}})})});function bi({maxCharacters:t=500,hidden:n}){const s=dt(A).composerCharacterCount,o=t-s;return n?e("meter",{class:"donut",hidden:!0}):e("meter",{class:`donut ${o<=-10?"explode":o<=0?"danger":o<=20?"warning":""}`,value:s,max:t,"data-left":o,title:`${o}/${t}`,style:{"--percentage":s/t*100}})}function yi({attachment:t,disabled:n,lang:a,onDescriptionChange:s=()=>{},onRemove:o=()=>{}}){const r=Qn("@mastodon/edit-media-attributes"),{type:c,id:l,file:h}=t,f=Re(()=>h?URL.createObjectURL(h):t.url,[h,t.url]),[u,g]=W(t.description),d=c.split("/")[0],v=no(s,250),[y,p]=W(!1),b=te(null);ue(()=>{let T;return y&&b.current&&(T=setTimeout(()=>{b.current.focus()},100)),()=>{clearTimeout(T)}},[y]);const w=e(K,{children:l&&!r?e("div",{class:"media-desc",children:[e("span",{class:"tag",children:"Uploaded"}),e("p",{title:u,children:t.description||e("i",{children:"No description"})})]}):e("textarea",{ref:b,value:u||"",lang:a,placeholder:{image:"Image description",video:"Video description",audio:"Audio description"}[d],autoCapitalize:"sentences",autoComplete:"on",autoCorrect:"on",spellCheck:"true",dir:"auto",disabled:n,maxlength:"1500",onInput:T=>{const{value:x}=T.target;g(x),v(x)}})});return e(K,{children:[e("div",{class:"media-attachment",children:[e("div",{class:"media-preview",tabIndex:"0",onClick:()=>{p(!0)},children:d==="image"?e("img",{src:f,alt:""}):d==="video"||d==="gifv"?e("video",{src:f,playsinline:!0,muted:!0}):d==="audio"?e("audio",{src:f,controls:!0}):null}),w,e("div",{class:"media-aside",children:e("button",{type:"button",class:"plain close-button",disabled:n,onClick:o,children:e(E,{icon:"x"})})})]}),y&&e(lt,{class:"light",onClick:T=>{T.target===T.currentTarget&&p(!1)},children:e("div",{id:"media-sheet",class:"sheet sheet-max",children:[e("button",{type:"button",class:"sheet-close",onClick:()=>{p(!1)},children:e(E,{icon:"x"})}),e("header",{children:e("h2",{children:{image:"Edit image description",video:"Edit video description",audio:"Edit audio description"}[d]})}),e("main",{tabIndex:"-1",children:[e("div",{class:"media-preview",children:d==="image"?e("img",{src:f,alt:""}):d==="video"||d==="gifv"?e("video",{src:f,playsinline:!0,controls:!0}):d==="audio"?e("audio",{src:f,controls:!0}):null}),e("div",{class:"media-form",children:[w,e("footer",{children:e("button",{type:"button",class:"light block",onClick:()=>{p(!1)},children:"Done"})})]})]})]})})]})}function _i({lang:t,poll:n,disabled:a,onInput:s=()=>{},maxOptions:o,maxExpiration:r,minExpiration:c,maxCharactersPerOption:l}){const{options:h,expiresIn:f,multiple:u}=n;return e("div",{class:`poll ${u?"multiple":""}`,children:[e("div",{class:"poll-choices",children:h.map((g,d)=>e("div",{class:"poll-choice",children:[e("input",{required:!0,type:"text",value:g,disabled:a,maxlength:l,placeholder:`Choice ${d+1}`,lang:t,spellCheck:"true",dir:"auto",onInput:v=>{const{value:y}=v.target;h[d]=y,s(n)}}),e("button",{type:"button",class:"plain2 poll-button",disabled:a||h.length<=1,onClick:()=>{h.splice(d,1),s(n)},children:e(E,{icon:"x",size:"s"})})]},d))}),e("div",{class:"poll-toolbar",children:[e("button",{type:"button",class:"plain2 poll-button",disabled:a||h.length>=o,onClick:()=>{h.push(""),s(n)},children:"+"})," ",e("label",{class:"multiple-choices",children:[e("input",{type:"checkbox",checked:u,disabled:a,onChange:g=>{const{checked:d}=g.target;n.multiple=d,s(n)}})," ","Multiple choices"]}),e("label",{class:"expires-in",children:["Duration"," ",e("select",{value:f,disabled:a,onChange:g=>{const{value:d}=g.target;n.expiresIn=d,s(n)},children:Object.entries(sa).filter(([g,d])=>d>=c&&d<=r).map(([g,d])=>e("option",{value:d,children:g},d))})]})]}),e("div",{class:"poll-toolbar",children:e("button",{type:"button",class:"plain remove-poll-button",disabled:a,onClick:()=>{s(null)},children:"Remove poll"})})]})}function ki(t,n){return n=n.toLowerCase(),t.sort((a,s)=>{let o=a.shortcode.toLowerCase(),r=s.shortcode.toLowerCase(),c=o.startsWith(n),l=r.startsWith(n),h=o.includes(n),f=r.includes(n);return c&&l?a.length-s.length:c?-1:l?1:h&&f?a.length-s.length:h?-1:f?1:0}).slice(0,5)}function Oe(t){return t.replace(/[&<>"']/g,function(n){return"&#"+n.charCodeAt(0)+";"})}function Bn(t){for(let n in t)(t[n]===null||t[n]===void 0)&&delete t[n];return t}function wi({masto:t,instance:n,onClose:a=()=>{},onSelect:s=()=>{}}){const[o,r]=W("default"),c=te([]),[l,h]=W({}),f=Re(()=>O.account.get("recentlyUsedCustomEmojis")||[]);return ue(()=>{r("loading"),(async()=>{try{const u=await t.v1.customEmojis.list(),g={"--recent--":f.filter(v=>u.find(y=>y.shortcode===v.shortcode))},d=[];u.forEach(v=>{var y,p;if(v.visibleInPicker){if((p=(y=c.current)==null?void 0:y.push)==null||p.call(y,v),!v.category){d.push(v);return}g[v.category]||(g[v.category]=[]),g[v.category].push(v)}}),d.length&&(g["--others--"]=d),h(g),r("default")}catch{r("error")}})()},[]),e("div",{id:"custom-emojis-sheet",class:"sheet",children:[!!a&&e("button",{type:"button",class:"sheet-close",onClick:a,children:e(E,{icon:"x"})}),e("header",{children:[e("b",{children:"Custom emojis"})," ",o==="loading"?e(Ze,{}):e("small",{class:"insignificant",children:[" • ",n]})]}),e("main",{children:e("div",{class:"custom-emojis-list",children:[o==="error"&&e("div",{class:"ui-state",children:e("p",{children:"Error loading custom emojis"})}),o==="default"&&Object.entries(l).map(([u,g])=>!!(g!=null&&g.length)&&e(K,{children:[e("div",{class:"section-header",children:{"--recent--":"Recently used","--others--":"Others"}[u]||u}),e("section",{children:g.map(d=>e("button",{type:"button",class:"plain4",onClick:()=>{a(),requestAnimationFrame(()=>{s(`:${d.shortcode}:`)});let v=O.account.get("recentlyUsedCustomEmojis")||[];const y=v.findIndex(p=>p.shortcode===d.shortcode);y!==-1?(v.splice(y,1),v.unshift(d)):(v.unshift(d),v=v.filter(p=>{var b,w;return(w=(b=c.current)==null?void 0:b.find)==null?void 0:w.call(b,T=>T.shortcode===p.shortcode)}),v=v.slice(0,10)),O.account.set("recentlyUsedCustomEmojis",v)},title:`:${d.shortcode}:`,children:e("picture",{children:[!!d.staticUrl&&e("source",{srcset:d.staticUrl,media:"(prefers-reduced-motion: reduce)"}),e("img",{class:"shortcode-emoji",src:d.url||d.staticUrl,alt:d.shortcode,width:"16",height:"16",loading:"lazy",decoding:"async"})]})},d))})]}))]})})]})}const{VITE_CLIENT_NAME:jn}={VITE_CLIENT_NAME:"Phanpy",VITE_CLIENT_ID:"social.phanpy",VITE_WEBSITE:"https://phanpy.social",VITE_APP_ENV:"production",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};function Si(t,n){function a(){const{currentLocation:s}=A,o=Array.isArray(n);let r=o?n:[];!o&&/:?\w+\?/.test(n)&&(r.push(n.replace(/(:\w+)\?/g,"$1")),r.push(n.replace(/\/?:\w+\?/g,"")));let c=!1;r.length?c=r.some(l=>xn(l,s)):n&&(c=xn(n,s)),c&&(document.title=t?`${t} / ${jn}`:jn)}Qt(()=>{const s=Vn(A,"currentLocation",a);return a(),s},[t,n])}export{k as $,We as A,Sn as B,Ii as C,Lt as D,ut as E,io as F,Ho as G,je as H,E as I,Ko as J,Si as K,mt as L,lt as M,rt as N,Yn as O,Jn as P,Ln as Q,At as R,Mn as S,Oo as T,In as U,fo as V,Ve as W,Ai as X,Ci as Y,$i as Z,Fi as _,Be as a,Fe as b,Te as c,O as d,qt as e,Zn as f,It as g,Qn as h,Xn as i,Fo as j,tn as k,Wt as l,qe as m,Ft as n,ho as o,St as p,Ti as q,Ze as r,A as s,ko as t,mo as u,nn as v,Fn as w,xt as x,Ct as y,Jo as z};
//# sourceMappingURL=useTitle-0d9083c3.js.map
