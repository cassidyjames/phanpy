function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./polyfill-force-tuq4w5if.js","./vendor-jXgWaxgC.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{Q as tt,S as et,V as D,W as nt,X as st,Y as ot,B as Y,s as rt,Z as at,a as E,$ as it,a0 as H,p as ct,_ as ut,D as F,A as lt}from"./vendor-jXgWaxgC.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function K(t){const e=i.local.getJSON("accounts")||[];return t&&e.find(n=>n.info.id===t)||e[0]}function ft(t){return(i.local.getJSON("accounts")||[]).find(n=>n.accessToken===t)}function ht(t){return(i.local.getJSON("accounts")||[]).find(n=>n.instanceURL===t)}const B=window.matchMedia("(display-mode: standalone)");function dt(){try{const t=i.session.get("currentAccount");if(t)return t}catch{}if(B.matches)try{const t=i.local.get("currentAccount");if(t)return t}catch{}return null}function W(t){try{i.session.set("currentAccount",t)}catch{}if(B.matches)try{i.local.set("currentAccount",t)}catch{}}function J(){window.__IGNORE_GET_ACCOUNT_ERROR__;const t=dt();return K(t)}function M(){const t=J(),{instanceURL:e,info:{id:n}}=t;return`${n}@${e}`}function gt(t){const e=i.local.getJSON("accounts")||[],n=e.find(r=>r.info.id===t.info.id);n?(n.info=t.info,n.instanceURL=t.instanceURL,n.accessToken=t.accessToken,n.vapidKey=t.vapidKey):e.push(t),i.local.setJSON("accounts",e),W(t.info.id)}function Mt(t){const e=i.local.getJSON("accounts")||[],n=e.find(r=>r.info.id===t.id);n&&(n.info.displayName!==t.displayName||n.info.avatar!==t.avatar||n.info.avatar_static!==t.avatar_static)&&(n.info={...n.info,...t},i.local.setJSON("accounts",e))}let x=null;function Q(){if(x)return x;try{const t=J(),e=i.local.getJSON("instances"),n=t.instanceURL.toLowerCase();return x=e[n]}catch{return{}}}function mt(t){const{configuration:e,maxMediaAttachments:n,maxTootChars:r,pleroma:o,pollLimits:s}=t,a=(e==null?void 0:e.statuses)||{};n&&(a.maxMediaAttachments??(a.maxMediaAttachments=n)),r&&(a.maxCharacters??(a.maxCharacters=r));const c=(e==null?void 0:e.polls)||{};return s&&(c.maxCharactersPerOption??(c.maxCharactersPerOption=s.maxOptionChars),c.maxExpiration??(c.maxExpiration=s.maxExpiration),c.maxOptions??(c.maxOptions=s.maxOptions),c.minExpiration??(c.minExpiration=s.minExpiration)),{...e,statuses:a,polls:c}}function xt(){const t=Q();return mt(t)}function Ut(){const t=Q();return/pixelfed/i.test(t==null?void 0:t.version)}const P={get:t=>{try{return localStorage.getItem(t)}catch{return null}},getJSON:t=>{try{return JSON.parse(P.get(t))}catch{return null}},set:(t,e)=>{try{return localStorage.setItem(t,e)}catch{return null}},setJSON:(t,e)=>{try{return P.set(t,JSON.stringify(e))}catch{return null}},del:t=>{try{return localStorage.removeItem(t)}catch{return null}}},$={get:t=>{try{return sessionStorage.getItem(t)}catch{return null}},getJSON:t=>{try{return JSON.parse($.get(t))}catch{return null}},set:(t,e)=>{try{return sessionStorage.setItem(t,e)}catch{return null}},setJSON:(t,e)=>{try{return $.set(t,JSON.stringify(e))}catch{return null}},del:t=>{try{return sessionStorage.removeItem(t)}catch{return null}}},pt={get:t=>{try{return P.getJSON(t)[M()]}catch{return null}},set:(t,e)=>{try{const n=P.getJSON(t)||{};return n[M()]=e,P.setJSON(t,n)}catch{return null}},del:t=>{try{const e=P.getJSON(t)||{};return delete e[M()],P.setJSON(t,e)}catch{return null}}},i={local:P,session:$,account:pt},v="mastodon.social",k={},T={};window.__ACCOUNT_APIS__=T;let m;function N({instance:t,accessToken:e}){/^https?:\/\//.test(t)&&(t=t.replace(/^https?:\/\//,"").replace(/\/+$/,"").toLowerCase());const n=t?`https://${t}`:`https://${v}`,o={masto:tt({url:n,accessToken:e,timeout:3e4}),instance:t,accessToken:e};return k[t]=o,T[t]||(T[t]={}),e&&(T[t][e]=o),o}async function $t(t,e){const{masto:n,accessToken:r}=t;let o;try{o=await n.v2.instance.fetch()}catch{}if(!o)try{o=await n.v1.instance.fetch()}catch{}if(!o)return;const{uri:s,urls:{streamingApi:a}={},domain:c,configuration:{urls:{streaming:u}={}}={}}=o,h=i.local.getJSON("instances")||{};if((s||c)&&(h[(c||s).replace(/^https?:\/\//,"").replace(/\/+$/,"").toLowerCase()]=o),e&&(h[e.toLowerCase()]=o),i.local.setJSON("instances",h),"WebSocket"in window&&(a||u)){const A=et({streamingApiUrl:u||a,accessToken:r,implementation:WebSocket});t.streaming=A}}async function Jt(t,e,n,r){const{masto:o}=t,s=await o.v1.accounts.verifyCredentials();W(s.id),gt({info:s,instanceURL:e.toLowerCase(),accessToken:n,vapidKey:r})}async function Ht(t){try{const{masto:e}=t,n=await e.v1.preferences.fetch();i.account.set("preferences",n)}catch{}}function b({instance:t,accessToken:e,accountID:n,account:r}={}){var u,h,L,A,y;if(t&&(t=t.toLowerCase().trim()),t&&e){const d=((u=T[t])==null?void 0:u[e])||N({instance:t,accessToken:e}),{masto:f,streaming:S}=d;return{masto:f,streaming:S,client:d,authenticated:!0,instance:t}}if(e)for(const d in T)if(T[d][e]){const f=T[d][e],{masto:S,streaming:p}=f;return{masto:S,streaming:p,client:f,authenticated:!0,instance:d}}else{const f=ft(e);if(f){const S=f.accessToken,p=f.instanceURL.toLowerCase().trim(),w=N({instance:p,accessToken:S}),{masto:g,streaming:_}=w;return{masto:g,streaming:_,client:w,authenticated:!0,instance:p}}else throw new Error("Access token not found")}if(r||n)if(r=r||K(n),r){const d=r.accessToken,f=r.instanceURL.toLowerCase().trim(),S=((h=T[f])==null?void 0:h[d])||N({instance:f,accessToken:d}),{masto:p,streaming:w}=S;return{masto:p,streaming:w,client:S,authenticated:!0,instance:f}}else throw new Error(`Account ${n} not found`);const o=J();if(t){if((m==null?void 0:m.instance)===t)return{masto:m.masto,streaming:m.streaming,client:m,authenticated:!0,instance:t};if((o==null?void 0:o.instanceURL)===t){const{accessToken:g}=o;return m=((L=T[t])==null?void 0:L[g])||N({instance:t,accessToken:g}),{masto:m.masto,streaming:m.streaming,client:m,authenticated:!0,instance:t}}const d=ht(t);if(d){const g=d.accessToken,_=((A=T[t])==null?void 0:A[g])||N({instance:t,accessToken:g}),{masto:I,streaming:R}=_;return{masto:I,streaming:R,client:_,authenticated:!0,instance:t}}const f=k[t]||N({instance:t}),{masto:S,streaming:p,accessToken:w}=f;return{masto:S,streaming:p,client:f,authenticated:!!w,instance:t}}if(m)return{masto:m.masto,streaming:m.streaming,client:m,authenticated:!0,instance:m.instance};if(o){const{accessToken:d,instanceURL:f}=o;return m=((y=T[f])==null?void 0:y[d])||N({instance:f,accessToken:d}),{masto:m.masto,streaming:m.streaming,client:m,authenticated:!0,instance:f}}const s=k[v]||N({instance:v}),{masto:a,streaming:c}=s;return{masto:a,streaming:c,client:s,authenticated:!1,instance:v}}window.__API__={currentAccountApi:m,apis:k,accountApis:T};function yt(t){try{const{pathname:e,hash:n}=new URL(t);return/^\/.*\/\d+$/i.test(e)||/^\/(@[^/]+|users\/[^/]+)\/(statuses|posts)\/\w+\/?$/i.test(e)||/^\/notes\/[a-z0-9]+$/i.test(e)||/^\/(notice|objects)\/[a-z0-9-]+$/i.test(e)||/#\/[^\/]+\.[^\/]+\/s\/.+/i.test(n)}catch{return!1}}window._moize=D;function wt(t,e={}){return D(t,{...e,maxSize:50,isDeepEqual:!0})}function Lt(t,e={}){return wt(t,{isPromise:!0,...e})}function At(t,e){let n=[],r=!1;function o(){if(n.length===0){r=!1;return}n.shift()(),setTimeout(o,e)}return function(...s){const a=()=>t.apply(this,s);n.push(a),r||(r=!0,setTimeout(o,e))}}const St=nt({limit:1,interval:1e3}),Tt=/(twitter|github)\.com/i,G={};function _t(t,e){var S;const n=st(O);if(Tt.test(e)||G[e])return;if(new RegExp(t+"/").test((S=n.unfurledLinks[e])==null?void 0:S.url))return Promise.resolve(n.unfurledLinks[e]);let o,s=e;/\/\/elk\.[^\/]+\/[^\/]+\.[^\/]+/i.test(s)&&(s=s.replace(/elk\.[^\/]+\//i,"")),/\/\/trunks\.[^\/]+\/status\/[^\/]+\.[^\/]+/i.test(s)&&(s=s.replace(/trunks\.[^\/]+\/status\//i,"")),/\/#\/[^\/]+\.[^\/]+\/s\/.+/i.test(s)&&(s=`https://${s.split("/#/")[1].replace(/\/s\//i,"/@fakeUsername/")}`);let a;try{a=new URL(s)}catch{return}const c=a.hostname,u=a.pathname,L=/\/@([^@\/]+)@?([^\/]+)?\/(\d+)$/i.exec(u);if(L){const p=L[3],{masto:w}=b({instance:c});o=w.v1.statuses.$select(p).fetch().then(g=>{if(g!=null&&g.id)return{status:g,instance:c};throw new Error("No results")})}const{masto:A}=b({instance:t}),y=A.v2.search.fetch({q:s,type:"statuses",resolve:!0,limit:1}).then(p=>{const{statuses:w}=p;if(w.length>0){const g=w.filter(_=>{var I;return!((I=_.content)!=null&&I.toLowerCase().includes(s.toLowerCase()))});if(g.length===1)return{status:g[0],instance:t}}throw new Error("No results")});function d(p){const{status:w,instance:g}=p,{id:_}=w,I=`/${g}/s/${_}`,R={id:_,instance:g,url:I};return O.unfurledLinks[e]=R,z(w,g,{skipThreading:!0}),R}function f(p){G[e]=!0}return o?Promise.race([y,new Promise((w,g)=>setTimeout(g,3e3))]).catch(()=>o.catch(()=>y)).then(d).catch(f):y.then(d).catch(f)}const Nt=St(_t),l=ot({appVersion:{},prevLocation:null,currentLocation:null,statuses:{},statusThreadNumber:{},home:[],homeNew:[],homeLast:null,homeLastFetchTime:null,notifications:[],notificationsLast:null,notificationsNew:[],notificationsShowNew:!1,notificationsLastFetchTime:null,reloadStatusPage:0,reloadGenericAccounts:{id:null,counter:0},spoilers:{},spoilersMedia:{},scrollPositions:{},unfurledLinks:{},statusQuotes:{},statusFollowedTags:{},statusReply:{},accounts:{},routeNotification:null,showCompose:!1,showSettings:!1,showAccount:!1,showAccounts:!1,showDrafts:!1,showMediaModal:!1,showShortcutsSettings:!1,showKeyboardShortcutsHelp:!1,showGenericAccounts:!1,showMediaAlt:!1,showEmbedModal:!1,showReportModal:!1,shortcuts:[],settings:{autoRefresh:!1,shortcutsViewMode:null,shortcutsColumnsMode:!1,boostsCarousel:!0,contentTranslation:!0,contentTranslationTargetLanguage:null,contentTranslationHideLanguages:[],contentTranslationAutoInline:!1,shortcutSettingsCloudImportExport:!1,mediaAltGenerator:!1,composerGIFPicker:!1,cloakMode:!1}}),O=l;function Ft(){l.notificationsLast=i.account.get("notificationsLast")||null,l.shortcuts=i.account.get("shortcuts")??[],l.settings.autoRefresh=i.account.get("settings-autoRefresh")??!1,l.settings.shortcutsViewMode=i.account.get("settings-shortcutsViewMode")??null,i.account.get("settings-shortcutsColumnsMode")&&(l.settings.shortcutsColumnsMode=!0),l.settings.boostsCarousel=i.account.get("settings-boostsCarousel")??!0,l.settings.contentTranslation=i.account.get("settings-contentTranslation")??!0,l.settings.contentTranslationTargetLanguage=i.account.get("settings-contentTranslationTargetLanguage")||null,l.settings.contentTranslationHideLanguages=i.account.get("settings-contentTranslationHideLanguages")||[],l.settings.contentTranslationAutoInline=i.account.get("settings-contentTranslationAutoInline")??!1,l.settings.shortcutSettingsCloudImportExport=i.account.get("settings-shortcutSettingsCloudImportExport")??!1,l.settings.mediaAltGenerator=i.account.get("settings-mediaAltGenerator")??!1,l.settings.composerGIFPicker=i.account.get("settings-composerGIFPicker")??!1,l.settings.cloakMode=i.account.get("settings-cloakMode")??!1}Y(l,"notificationsLast",t=>{i.account.set("notificationsLast",l.notificationsLast)});rt(l,t=>{for(const[e,n,r,o]of t)n.join(".")==="settings.autoRefresh"&&i.account.set("settings-autoRefresh",!!r),n.join(".")==="settings.boostsCarousel"&&i.account.set("settings-boostsCarousel",!!r),n.join(".")==="settings.shortcutsViewMode"&&i.account.set("settings-shortcutsViewMode",r),n.join(".")==="settings.contentTranslation"&&i.account.set("settings-contentTranslation",!!r),n.join(".")==="settings.contentTranslationAutoInline"&&i.account.set("settings-contentTranslationAutoInline",!!r),n.join(".")==="settings.shortcutSettingsCloudImportExport"&&i.account.set("settings-shortcutSettingsCloudImportExport",!!r),n.join(".")==="settings.contentTranslationTargetLanguage"&&i.account.set("settings-contentTranslationTargetLanguage",r),/^settings\.contentTranslationHideLanguages/i.test(n.join("."))&&i.account.set("settings-contentTranslationHideLanguages",l.settings.contentTranslationHideLanguages),n.join(".")==="settings.mediaAltGenerator"&&i.account.set("settings-mediaAltGenerator",!!r),n.join(".")==="settings.composerGIFPicker"&&i.account.set("settings-composerGIFPicker",!!r),(n==null?void 0:n[0])==="shortcuts"&&i.account.set("shortcuts",l.shortcuts),n.join(".")==="settings.cloakMode"&&i.account.set("settings-cloakMode",!!r)});function C(t,e){if(t)return e?`${e}/${t}`:t}function Pt(t,e){if(e){const n=C(t,e);return l.statuses[n]}return l.statuses[t]}function z(t,e,n){typeof e=="object"&&(n=e,e=null);const{override:r=!0,skipThreading:o=!1,skipUnfurling:s=!1}=n||{};if(!t)return;const a=Pt(t.id,e);!r&&a||at(t,a)||(queueMicrotask(()=>{var u,h;const c=C(t.id,e);if(a!=null&&a._pinned&&(t._pinned=a._pinned),l.statuses[c]=t,(u=t.reblog)!=null&&u.id){const L=C(t.reblog.id,e);l.statuses[L]=t.reblog}if((h=t.quote)!=null&&h.id){const L=C(t.quote.id,e);l.statuses[L]=t.quote,l.statusQuotes[c]=[{id:t.quote.id,instance:e}]}}),o||queueMicrotask(()=>{Ct(t.reblog||t,e)}),s||queueMicrotask(()=>{It(t.reblog||t,e)}))}function Et(t,e){const{masto:n,instance:r}=b({instance:e});let o=0;async function s(a,c=0){const{inReplyToId:u,inReplyToAccountId:h}=a;if(!u||h!==a.account.id)return[a];if(u&&h!==a.account.id)throw"Not a thread";const L=C(u,r);let A=l.statuses[L];if(!A){if(o++>3)throw"Too many fetches for thread";await new Promise(y=>setTimeout(y,500*o)),A=await Rt(u,n),z(A,r,{skipThreading:!0})}return[...await s(A,++c),a]}return s(t).then(a=>{a.length>1&&a.forEach((c,u)=>{const h=C(c.id,r);l.statusThreadNumber[h]=u+1})}).catch(a=>{})}const Ct=At(Et,100),q=document.createElement("div");function It(t,e){const{instance:n}=b(),r=t==null?void 0:t.content;if(/<a/i.test(r)){const s=C(t==null?void 0:t.id,e);q.innerHTML=r,[...q.querySelectorAll("a[href]:not(.u-url):not(.mention):not(.hashtag)")].filter(c=>{const u=c.href;return!(u===t.url||u===t.uri)&&yt(u)}).forEach((c,u)=>{Nt(n,c.href).then(h=>{h&&s&&(Array.isArray(l.statusQuotes[s])||(l.statusQuotes[s]=[]),l.statusQuotes[s][u]||l.statusQuotes[s].splice(u,0,h))})})}}const Rt=Lt((t,e)=>e.v1.statuses.$select(t).fetch()),vt="modulepreload",kt=function(t,e){return new URL(t,e).href},j={},X=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.all(n.map(u=>{if(u=kt(u,r),u in j)return;j[u]=!0;const h=u.endsWith(".css"),L=h?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===u&&(!h||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${L}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":vt,h||(y.as="script",y.crossOrigin=""),y.href=u,c&&y.setAttribute("nonce",c),document.head.appendChild(y),h)return new Promise((d,f)=>{y.addEventListener("load",d),y.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${u}`)))})}))}return o.then(()=>e()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})};function U({abrupt:t,hidden:e,...n}){return E("span",{...n,class:`loader-container ${t?"abrupt":""} ${e?"hidden":""}`,children:E("span",{class:"loader"})})}const Z=!it();setTimeout(()=>{queueMicrotask(()=>{Z||X(()=>import("./polyfill-force-tuq4w5if.js").then(t=>t.p),__vite__mapDeps([0,1]),import.meta.url).catch(()=>{})})},1e3);function Gt({children:t}){if(Z)return E(H,{fallback:E(U,{}),children:t});const[e,n]=ct(!1);return ut(()=>{(async()=>(await X(()=>import("./polyfill-force-tuq4w5if.js").then(r=>r.p),__vite__mapDeps([0,1]),import.meta.url),n(!0)))()},[]),e?E(H,{fallback:E(U,{}),children:t}):E(U,{})}var bt={PHANPY_CLIENT_NAME:"Blaede Phanpy",PHANPY_WEBSITE:"https://phanpy.blaede.family",PHANPY_LINGVA_INSTANCES:"lingva.phanpy.social lingva.lunar.icu lingva.garudalinux.org translate.plausibility.cloud",PHANPY_PRIVACY_POLICY_URL:"https://mastodon.blaede.family/privacy-policy",VITE_APP_ENV:"production",PHANPY_DEFAULT_INSTANCE:"mastodon.blaede.family",PHANPY_GIPHY_API_KEY:"48JGsrSS1XE5w4nWe9c9hqxPbsfRWR0e",PHANPY_DEFAULT_INSTANCE_REGISTRATION_URL:"https://mastodon.blaede.family/auth/sign_up",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{PHANPY_CLIENT_NAME:V}=bt;function qt(t,e){function n(){const{currentLocation:r}=O,o=Array.isArray(e);let s=o?e:[];!o&&/:?\w+\?/.test(e)&&(s.push(e.replace(/(:\w+)\?/g,"$1")),s.push(e.replace(/\/?:\w+\?/g,"")));let a=!1;s.length?a=s.some(c=>F(c,r)):e&&(a=F(e,r)),a&&(document.title=t?`${t} / ${V}`:V)}lt(()=>{const r=Y(O,"currentLocation",n);return n(),r},[t,e])}export{Gt as I,U as L,X as _,b as a,z as b,i as c,W as d,J as e,M as f,dt as g,Q as h,C as i,ft as j,Ut as k,qt as l,Pt as m,N as n,$t as o,Lt as p,Jt as q,Ft as r,O as s,Ct as t,Mt as u,Ht as v,wt as w,yt as x,Nt as y,xt as z};
//# sourceMappingURL=useTitle-rMaip4Vl.js.map
