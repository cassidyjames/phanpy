{"version":3,"mappings":"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","names":["_extends","target","i","source","key","reservedModifierKeywords","mappedKeys","mapKey","isHotkeyModifier","parseKeysHookInput","keys","splitKey","parseHotkey","hotkey","combinationKey","description","k","modifiers","singleCharKeys","pushToCurrentlyPressedKeys","removeFromCurrentlyPressedKeys","currentlyPressedKeys","isReadonlyArray","value","isHotkeyPressed","hotkeyArray","maybePreventDefault","preventDefault","isHotkeyEnabled","enabled","isKeyboardEventTriggeredByInput","ev","isHotkeyEnabledOnTag","_ref","enabledOnTags","targetTagName","tag","isScopeActive","activeScopes","scopes","scope","isHotkeyMatchingKeyboardEvent","e","ignoreModifiers","alt","meta","mod","shift","ctrl","pressedKeyUppercase","code","ctrlKey","metaKey","shiftKey","altKey","keyCode","pressedKey","BoundHotkeysProxyProvider","createContext","useBoundHotkeysProxy","useContext","deepEqual","x","y","isEqual","HotkeysContext","useHotkeysContext","useDeepEqualMemo","ref","useRef","stopPropagation","useSafeLayoutEffect","useLayoutEffect","useEffect","useHotkeys","callback","options","dependencies","hasTriggeredRef","_options","_keys","_deps","memoisedCB","useCallback","cbRef","memoisedOptions","_useHotkeysContext","enabledScopes","proxy","listener","isKeyUp","_e$target","rootNode","_hotkey$keys","handleKeyDown","event","handleKeyUp","domNode","root","factory","module","this","global","Toastify","version","divElement","property","avatarElement","closeElement","width","self","getAxisOffsetAValue","xOffset","yOffset","rootElement","elementToInsert","toastElement","topLeftOffsetSize","topRightOffsetSize","offsetSize","allToasts","classUsed","containsClass","height","offset","axis","elem","yourClass","window","_showToast","showToast","props","text","onClick","delay","rest","toast","className","destination","gravity","position","setTimeout","useInterval","fn","deps","immediate","savedCallback","current","id","setInterval","tick","clearInterval","openCompose","opts","url","URL","location","screenWidth","screenHeight","screen","left","Math","max","top","min","winUID","uid","random","newWin","open","__COMPOSE__","alert","isSafari","test","navigator","userAgent","openOSK","fauxEl","document","createElement","style","opacity","body","appendChild","focus","removeChild","ICONS","__vitePreload","heart","bookmark","check-circle","x-circle","transfer","rocket","arrow-left","arrow-right","arrow-up","arrow-down","earth","lock","unlock","eye-close","eye-open","message","comment","comment2","home","notification","follow","follow-add","poll","pencil","quill","at","attachment","upload","gear","more","more2","external","popout","popin","plus","chevron-left","chevron-right","chevron-down","reply","thread","group","bot","menu","list","search","hashtag","info","shortcut","user","following","pin","unpin","bus","link","history","share","sparkles","sparkles2","exit","translate","play","trash","mute","unmute","block","unblock","flag","time","refresh","emoji2","filter","filters","chart","react","layout4","layout5","announce","round","arrow-up-circle","arrow-down-circle","clipboard","account-edit","account-warning","keyboard","cloud","month","media","speak","building","history2","arrows-right","copy","quote","settings","heart-break","user-x","minimize","SIZES","s","m","l","xl","xxl","ICONDATA","SVGICon","moize","rotate","flip","_jsx","viewBox","dangerouslySetInnerHTML","__html","transform","isShallowEqual","maxSize","Object","length","matchesArg","cacheKeyArg","keyArg","icon","Icon","size","title","class","iconSize","iconBlock","warn","Array","iconData","setIconData","useState","currentIcon","iconB","useCloseWatcher","watcher","CloseWatcher","addEventListener","destroy","useCloseWatcher$1","$modalContainer","getElementById","Modal","children","onClose","minimized","modalRef","timer","focusElement","querySelector","clearTimeout","supportsCloseWatcher","escRef","keydown","keyup","$deckContainers","querySelectorAll","page","tabIndex","forEach","$deckContainer","setAttribute","removeAttribute","node","currentTarget","inert","onFocus","isFocusable","getComputedStyle","pointerEvents","console","ReactPropTypesSecret","ReactPropTypesSecret_1","require$$0","emptyFunction","emptyFunctionWithReset","factoryWithThrowingShims","shim","propName","componentName","propFullName","secret","err","getShim","ReactPropTypes","ReactIs","throwOnDirectAccess","propTypesModule","isMenuOpen","state","batchedUpdates","unstable_batchedUpdates","floatEqual","a","b","diff","getTransition","transition","name","safeCall","arg","internalKey","getName","component","mergeProps","targetProp","sourceProp","parsePadding","paddingStr","padding","right","getScrollAncestor","overflow","overflowX","overflowY","commonProps","isDisabled","isHovering","indexOfNode","nodeList","stylePropTypes","oneOfType","string","func","menuPropTypes","object","bool","number","oneOf","rootMenuPropTypes","exact","uncontrolledMenuPropTypes","useBEM","element","useMemo","blockElement","classString","expandedClassName","menuContainerClass","menuClass","menuArrowClass","menuItemClass","menuDividerClass","menuHeaderClass","menuGroupClass","subMenuClass","HoverItemContext","MenuListItemContext","MenuListContext","EventHandlersContext","RadioGroupContext","SettingsContext","Keys","HoverActionTypes","CloseReason","FocusPositions","MenuStateMap","positionAbsolute","roleNone","roleMenuitem","dummyItemProps","MenuContainer","containerRef","containerProps","isOpen","theming","itemTransition","jsx","createSubmenuCtx","count","closeDelay","pending","settled","useItems","menuRef","focusRef","hoverItem","setHoverItem","mutableState","updateItems","item","isMounted","items","index","dispatch","actionType","nextIndex","hoverIndex","sortItems","orderedNodes","newItem","prevItem","getPositionHelpers","menuScroll","boundingBoxPadding","menuRect","containerRect","boundingRect","getLeftOverflow","getRightOverflow","getTopOverflow","getBottomOverflow","leftOverflow","rightOverflow","topOverflow","bottomOverflow","placeArrowVertical","arrowRef","menuY","anchorRect","placeLeftorRight","placeLeftorRightY","placeLeftX","placeRightX","confineHorizontally","confineVertically","arrow","direction","computedDirection","placeArrowHorizontal","menuX","placeToporBottom","placeToporBottomX","placeTopY","placeBottomY","positionMenu","align","gap","positionHelpers","isHorizontal","horizontalOffset","verticalOffset","arrowElt","useIsomorphicLayoutEffect","setRef","instance","useCombinedRef","refA","refB","offScreen","MenuList","ariaLabel","menuClassName","menuStyle","arrowProps","anchorPoint","anchorRef","focusProps","externalRef","parentScrollingRef","setDownOverflow","repositionFlag","captureFocus","endTransition","menuItemFocus","restProps","menuPosition","setMenuPosition","arrowPosition","setArrowPosition","overflowData","setOverflowData","expandedDirection","setExpandedDirection","submenuCtx","reposSubmenu","forceReposSubmenu","useReducer","c","boundingBoxRef","rootMenuRef","rootAnchorRef","scrollNodesRef","reposition","viewScroll","submenuCloseDelay","parentSubmenuCtx","reposFlag","prevOpen","latestMenuSize","latestHandlePosition","openTransition","closeTransition","scrollNodes","onKeyDown","onAnimationEnd","onPointerMove","onPointerLeave","handlePosition","noOverflowCheck","_anchorRef$current","arrowX","arrowY","menuHeight","overflowAmt","prevHeight","anchorScroll","scroll","handleScroll","scrollObservers","o","hasOverflow","parentScroll","resizeObserver","entry","borderBoxSize","inlineSize","blockSize","borderRect","flushSync","observeTarget","alwaysUpdate","setItemFocus","menuElt","itemContext","maxHeight","listContext","overflowStyle","arrowModifiers","_arrowClassName","ControlledMenu","forwardRef","initialMounted","unmountOnClose","transitionTimeout","submenuOpenDelay","portal","onItemClick","eventHandlers","isCheckorRadio","keepOpen","menuList","createPortal","PRE_ENTER","ENTERING","ENTERED","PRE_EXIT","EXITING","EXITED","UNMOUNTED","STATUS","getState","status","startOrEnd","unmounted","getEndStatus","unmountOnExit","getTimeout","timeout","updateState","setState","latestState","timeoutId","onChange","useTransition","enter","preEnter","preExit","initialEntered","mountOnEnter","enterTimeout","exitTimeout","toggle","toEnter","transitState","enterStage","useMenuState","initialOpen","toggleMenu","useMenuStateAndFocus","menuProps","setMenuItemFocus","openMenu","useClick","onToggle","skipOpen","useMenuChange","onMenuChange","Menu","_","_1","menuButton","instanceRef","stateProps","buttonRef","anchorProps","handleClose","button","buttonProps","renderButton","cloneElement","useImperativeHandle","Fragment","withHovering","WrappedComponent","Component","memo","WithHovering","itemRef","useItemEffect","SubMenu","disabled","label","openTrigger","_2","itemProps","parentMenuRef","parentDir","parentOverflow","isParentOpen","isPortal","_openMenu","timerId","stopTimer","args","setHover","delayOpen","onKeyDownOfRoot","handled","externalItemRef","itemClassName","restItemProps","mergedItemProps","getMenuList","container","useItemState","unsetHover","onBlur","keepHover","MenuItem","href","type","checked","restStateProps","radioGroup","isRadio","isCheckBox","isAnchor","isChecked","handleClick","mergedProps","menuItemProps","FocusableItem","renderChildren","MenuDivider","MenuHeader","MenuGroup","takeOverflow","setOverflowStyle","xxxl","alphaCache","canvas","OffscreenCanvas","ctx","getContext","willReadFrequently","imageSmoothingEnabled","Avatar","squircle","avatarRef","isMissing","src","loading","decoding","crossOrigin","undefined","onError","onLoad","dataset","loaded","drawImage","allPixels","getImageData","hasAlpha","data","pixel","classList","add","clearRect","mem","Link","routerLocation","useLocation","hash","replace","trim","to","includes","parsedHash","origin","searchParams","searchParamsStr","from","entries","map","encodeURIComponent","join","pathname","isActive","decodeURIComponent","parentNode","closest","states","prevLocation","useWindowSize","setSize","React.useState","React.useLayoutEffect","handleResize","documentElement","defaultBoundingBoxPadding","safeAreaInsets","getSafeAreaInsets","safeAreaInsetTop","getPropertyValue","safeAreaInsetRight","safeAreaInsetBottom","safeAreaInsetLeft","parseInt","requestAnimationFrame","safeBoundingBoxPadding","paddings","v","CSS","supports","passive","Menu2","_instanceRef","closeMenu","SubMenu2","pointerType","MenuConfirm","subMenu","confirm","confirmLabel","menuItemClassName","menuFooter","menuExtras","_jsxs","CustomEmoji","staticUrl","srcset","EmojiText","emojis","indexOf","regex","RegExp","shortcode","elements","split","word","emoji","find","EmojiText$1","oldProps","newProps","nameCollator","Intl","Collator","sensitivity","NameText","account","showAvatar","showAcct","short","acct","avatar","avatarStatic","displayName","username","acct1","acct2","match","trimmedUsername","toLowerCase","trimmedDisplayName","shortenedDisplayName","shortenedAlphaNumericDisplayName","hideUsername","compare","which","internalURL","showAccount","_Fragment","newAccount","t","n","r","u","f","h","d","$","M","g","D","p","S","w","O","dayjs","extend","dayjsTwitter","localizedFormat","relativeTime","dtf","DateTimeFormat","RelativeTime","datetime","format","renderCount","rerender","date","dateStr","dt","isValid","str","now","year","twitter","toDate","fromNow","toISOString","raf","rafRerender","scheduleRerender","cancelAnimationFrame","_localeMatch","localeMatch","locales","resolvedOptions","locale","languages","localeTargetLanguages","translationTargetLanguages","getTranslateTargetLanguage","fromSettings","contentTranslationTargetLanguage","IntlDN","DisplayNames","_localeCode2Text","of","localeCode2Text","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","baseMinusTMin","floor","stringFromCharCode","error","array","result","mapDomain","domain","parts","labels","encoded","ucs2decode","output","counter","extra","ucs2encode","codePoints","basicToDigit","codePoint","digitToBasic","digit","adapt","delta","numPoints","firstTime","decode","input","inputLength","bias","basic","j","oldi","baseMinusT","out","encode","currentValue","basicLength","handledCPCount","handledCPCountPlusOne","q","qMinusT","toUnicode","toASCII","punycode","emojifyText","fauxDiv","whitelistLinkClasses","_enhanceContent","content","postEnhanceDOM","enhancedContent","dom","innerHTML","hasLink","hasCodeBlock","remove","textContent","shortenLink","links","usernames","innerText","hasChildren","some","push","slice","textNodes","extractTextNodes","html","nodeValue","replaceWith","childNodes","pre","br","nextParagraphs","currentBlock","nextElementSibling","next","tagName","codeText","replaceAll","rejectFilter","prevIndex","hashtagStuffedParagraphs","hashtagCount","nodeType","Node","TEXT_NODE","linkText","startsWith","img","getAttribute","naturalWidth","naturalHeight","setProperty","queueMicrotask","enhanceContent","defaultRejectFilter","defaultRejectFilterMap","fromEntries","nodeName","URL_PREFIX_REGEX","URL_DISPLAY_LENGTH","prefix","displayURL","suffix","cutoff","rejectFilterMap","assign","reduce","acc","cur","walk","createTreeWalker","NodeFilter","SHOW_TEXT","acceptNode","FILTER_REJECT","FILTER_ACCEPT","nextNode","div","getHTMLText","preProcess","el","append","handleContentLinks","mentions","previewMode","statusURL","prevText","previousSibling","textBeforeLinkIsAt","endsWith","textStartsWithAt","contains","targetText","mention","textBeforeLinkIsHash","hashURL","_b","_DateTimeFormat","dateYear","hideTime","formatOpts","currentYear","Date","getFullYear","day","hour","minute","niceDateTime","dtfOpts","NumberFormat","shortenNumber","notation","roundingMode","TOAST_DURATION","showCompose","composerState","duration","semver","validateAndParse","isWildcard","tryParse","forceType","compareStrings","ap","bp","compareSegments","compareVersions","v1","v2","n1","n2","p1","p2","operator","assertValidOperator","res","operatorResMap","allowedOperators","op","satisfies","range","v3","vp","r1","r2","r3","rp","nonZero","containPixelfed","notContainPixelfed","platformFeatures","supportsCache","feature","getCurrentInstance","features","includePrerelease","loose","AccountBlock","skeleton","avatarSize","useAvatarStatic","internal","showActivity","showStats","accountInstance","hideDisplayName","relationship","excludeRelationshipAttrs","statusesCount","lastStatusAt","fields","note","followersCount","createdAt","locked","verifiedField","verifiedAt","excludedRelationship","hasRelationship","followedBy","requested","MenuLink","detail","RetryOperation","timeouts","retry_operation","currentTime","timeoutOps","counts","mainError","mainErrorCount","exports","attempt","obj","methods","method","original","retry","objectToString","isError","errorMessages","isNetworkError","AbortError","decorateErrorWithCounts","attemptNumber","retriesLeft","pRetry","resolve","reject","operation","abortHandler","_a","cleanUp","finalError","__defProp","__defNormalProp","__publicField","observerMap","RootIds","rootId","unsupportedValue","getRootId","optionsToId","createObserver","thresholds","observer","inView","threshold","observe","fallbackInView","bounds","callbacks","isPlainChildren","InView","React.Component","prevProps","rootMargin","trackVisibility","as","triggerOnce","skip","initialInView","React.createElement","useInView","React2.useState","React2.useRef","React2.useEffect","unobserve","entryTarget","previousEntryTarget","TOP","shazamIDs","LazyShazam","hasID","visible","setVisible","visibleStart","setVisibleStart","rect","getBoundingClientRect","bottom","innerHeight","hidden","PHANPY_LINGVA_INSTANCES","import","LINGVA_INSTANCES","throttle","pThrottle","limit","interval","currentLingvaInstance","_lingvaTranslate","fetchCall","fetch","ok","provider","translation","detectedSourceLanguage","detectedSource","retries","onFailedAttempt","log","TRANSLATED_MAX_AGE","lingvaTranslate","pmem","forceTranslate","sourceLanguage","onTranslate","mini","autoDetected","uiState","setUIState","targetLang","setTranslatedContent","pronunciationContent","detailsRef","translatedContent","sourceLangText","targetLangText","apiSourceLang","detectedLangText","setDetectedLang","pronunciation","query","setPronunciationContent","detectedLang","lang","dir","Loader","abrupt","TranslationBlock$1","TranslationBlock","promisifyRequest","request","createStore","dbName","storeName","dbp","txMode","db","defaultGetStoreFunc","defaultGetStore","get","customStore","store","set","getMany","del","delMany","clear","eachCursor","cursor","initDB","val","drafts","catchup","fetchRelationships","accounts","relationshipsMap","masto","api","currentAccount","getCurrentAccountID","uniqueAccountIds","relationships","LiteYTEmbed","shadowDom","nonce","oldVal","newVal","isIntersectionObserver","autoplay","wantsNoCookie","embedTarget","iframeHTML","posterUrlWebp","posterUrlJpeg","kind","linkElem","decode83","start","end","pow","PI","PI2","sRGBToLinear","linearTosRGB","signSqr","fastCos","cos","getBlurHashAverageColor","blurHash","decodeBlurHash","punch","sizeFlag","numX","numY","basis","basisY","colorIndex","pixelIndex","yh","xw","maximumValue","colors","averageColor","bytesPerRow","pixels","addIndentation","splittedHtml","char","level","opened","indented","elTag","newIndented","addIndentation_1","removeEmptyLines","nonFormattedString","mergeAttributesWithElements","markup","splittedMarkup","mergedLines","currentElement","line","toLines","require$$1","prettify","splitted","A","z","U","X","Y","R","G","J","C","L","P","I","T","B","Poll","readOnly","votePoll","expired","expiresAt","multiple","ownVotes","voted","votersCount","votesCount","expiresAtDate","pollVotesCount","roundPrecision","showResults","setShowResults","optionsHaveVoteCounts","every","option","optionVotesCount","percentage","toFixed","isLeading","onSubmit","form","formData","FormData","choices","marginLeft","FilterContext","_isFiltered","filtered","filterContext","appliedFilters","hasContext","context","isHidden","filterAction","action","filterTitles","titles","titlesStr","isFiltered","filteredItem","currentAccountID","isSelf","filterState","filteredItems","htmlContentLength","supportsTTS","speechSynthesis","speaking","cancel","utterance","SpeechSynthesisUtterance","statusPeek","spoilerText","mediaAttachments","image","gifv","video","audio","unknown","F","useResolvedElement","subscriber","refOrElement","lastReportRef","refOrElementRef","cbElementRef","evaluateSubscription","cbElement","extractSize","boxProp","sizeType","useResizeObserver","onResize","onResizeRef","resizeObserverRef","_useState","didUnmount","previous","refCallback","reportedWidth","reportedHeight","newWidth","newHeight","newSize","useTruncated","useThrottledCallback","scrollHeight","truncated","_height","computedHeight","box","visibilityIconsMap","public","unlisted","private","direct","styleRoot","styleChild","styles","isSsr","isTouch","make3dTransformValue","scale","getOffsetBounds","containerDimension","childDimension","centerContained","classnames","other","abs","sqrt","isMac","isDragInteraction","isZoomInteraction","isZoomGesture","wheelEvent","cancelEvent","getDistance","calculateScale","startTouches","endTouches","startDistance","endDistance","isCloseTo","expected","swing","getPointByPageCoordinates","touch","getPageCoordinatesByTouches","touches","sum","getVectorAvg","vectors","clamp","shouldInterceptWheel","getElementSize","offsetWidth","offsetHeight","calculateVelocity","startPoint","endPoint","comparePoints","noup","zeroPoint","PinchZoom","_super","__extends","_this","__assign","createRef","clickEvent","touchEndEvent","touchStartEvent","touchMoveEvent","pageX","pageY","deltaY","deltaMode","scaleDelta","likeTouchEvent","center","dScale","inertiaFriction","inertia","renderFrame","prevOffset","currentCoordinates","prevPoint","newScale","touchCenter","needZoomOut","zoomFactor","startZoomFactor","updateProgress","progress","elWidth","elHeight","minOffsetX","maxOffsetX","_c","minOffsetY","maxOffsetY","__x","__y","animated","startOffset","containerCenter","diffZoomFactor","diffOffset","updateFrame","originalZoomFactor","lastCenter","sanitizedOffset","targetOffset","scaleFactor","offsetLeft","offsetTop","_document","_html","_body","scrollTop","scrollLeft","posTop","posLeft","frameFn","startTime","timeFn","frameTime","xZoomFactor","yZoomFactor","eventName","_i","newInteraction","interaction","fingers","mouseEvent","isEnd","isStart","child","Children","React","any","formatDuration","hours","minutes","seconds","toString","padStart","dataAltLabel","AltBadge","showMediaAlt","MEDIA_CAPTION_LIMIT","MEDIA_CAPTION_LIMIT_LONGER","isMediaCaptionLong","caption","Media","showOriginal","autoAnimate","showCaption","allowLongerCaption","altIndex","blurhash","previewRemoteUrl","previewUrl","remoteUrl","small","mediaURL","remoteMediaURL","hasDimensions","orientation","rgbAverageColor","videoRef","focalPosition","mediaRef","onUpdate","removeProperty","touchAction","pinchZoomEnabled","setPinchZoomEnabled","quickPinchZoomProps","draggableUnZoomed","tapZoomFactor","doubleTapToggleZoom","Parent","remoteMediaURLObj","getURLObj","isVideoMaybe","isAudioMaybe","isImage","parentRef","imageSmallerThanParent","setImageSmallerThanParent","smaller","maxAspectHeight","averageColorStyle","mediaStyles","aspectRatio","longDesc","showInlineDesc","Figure","display","mode","backgroundImage","backgroundSize","QuickPinchZoom","objectPosition","$media","clientWidth","clientHeight","naturalAspectRatio","displayAspectRatio","hasNaturalAspectRatio","hasDuration","shortDuration","isGIF","loopable","formattedDuration","hoverAnimate","autoGIFAnimate","showProgress","gifHTML","pause","onMouseEnter","onMouseLeave","slot","poster","preload","playsinline","loop","controls","muted","onTimeUpdate","disablePictureInPicture","onLoadedMetadata","SHOW_COMMENT_COUNT_LIMIT","INLINE_TRANSLATE_LIMIT","fetchAccount","$select","memFetchAccount","visibilityText","isIOS","ontouchstart","rtf","RelativeTimeFormat","REACTIONS_LIMIT","getPollText","getPostText","PostContent","post","language","oldPost","newPost","SIZE_CLASS","detectLang","detectAll","accuracy","Status","statusID","propInstance","contentTextWeight","enableCommentHint","withinContext","enableTranslate","_forceTranslate","onMediaClick","quoted","onStatusLinkClick","showFollowedTags","allowContextMenu","showActionsBar","showReplyParent","mediaFirst","authenticated","currentInstance","sameInstance","sKey","statusKey","snapStates","useSnapshot","statuses","accountId","accountURL","accountEmojis","repliesCount","reblogged","reblogsCount","favourited","favouritesCount","bookmarked","sensitive","visibility","_language","editedAt","card","inReplyToId","inReplyToAccountId","reblog","uri","tags","_deleted","_pinned","emojiReactions","languageAutoDetected","setLanguageAutoDetected","detected","hasMediaAttachments","filterInfo","debugHover","FilteredStatus","createdAtDate","editedAtDate","inReplyToAccountRef","setInReplyToAccount","inReplyToAccount","account2","catch","mentionSelf","readingExpandSpoilers","showSpoiler","readingExpandMedia","prefs","showSpoilerMedia","FollowedTagsParent","setForceTranslate","statusFollowedTags","StatusParent","contentTranslation","contentTranslationAutoInline","targetLanguage","contentLength","inlineTranslate","isSizeLarge","showEdited","setShowEdited","showEmbed","setShowEmbed","readMoreText","statusRef","spoilerContentRef","contentRef","mediaContainerRef","textWeight","editedDateText","mediaNoDesc","replyToStatus","statusMonthsAgo","boostStatus","unauthInteractionErrorMessage","confirmText","yes","newStatus","saveStatus","favouriteStatus","favouriteStatusNotify","done","bookmarkStatus","bookmarkStatusNotify","contentTranslationHideLanguages","reblogIterator","firstLoad","favouriteIterator","differentLanguage","reblogResults","Promise","favouriteResults","_types","isPinnable","StatusMenuItems","replyStatus","canBoost","confirmBoostStatus","heading","fetchBoostedLikedByAccounts","showReactions","postID","postText","createdDateText","nicePostURL","isPublic","cachedStatus","getStatus","setIsContextMenuOpen","contextMenuProps","bindLongPressContext","useLongPress","showContextMenu","clientX","clientY","setContextMenuProps","isContextMenuOpen","hotkeysEnabled","fRef","dRef","bRef","rRef","xRef","activeStatus","spoilerButton","spoilerMediaButton","displayedMediaAttachments","captionChildren","attachments","indices","showMultipleMediaCaptions","showCommentCount","isThread","StatusCompact","containsQuestion","nodeRef","anchorNode","selection","contextMenuRef","actionsRef","StatusButton","showCommentHint","statusThreadNumber","MediaFirstContainer","spoilers","spoilersMedia","QuoteStatuses","newPoll","pollResponse","polls","then","MultipleMediaFigure","selfReferential","emojiReaction","me","url2","isShortCode","EditedAtModal","moreThanOne","currentIndex","setCurrentIndex","carouselRef","behavior","Card","providerName","providerUrl","authorName","authorUrl","imageDescription","embedUrl","publishedAt","hasText","isLandscape","cardStatusURL","isMastodonLinkMaybe","unfurlMastodonLink","hasIframeHTML","setCardStatusURL","blurhashImage","isPost","putImageData","toDataURL","videoID","videoid","setEditHistory","editHistory2","fetchStatusHistory","editHistory","generateHTMLCode","quotes","contentHTML","sourceMediaURL","previewMediaURL","mediaHTML","sourceMediaURLObj","htmlCode","EmbedModal","setButtonTitle","buttonTitle","iconAlt","urlObj","path","restPath","host","statusReply","srKey","statusPeekText","filterTitleStr","bindLongPressPeek","isReblog","actualStatusID","showPeek","isFollowedTags","setShowPeek","cancelOnMovement","ssKey","statusPeekRef","uniqueQuotes","arr","q2","statusQuotes","restNewProps","shallowEqual","restOldProps","IDX","HEX","len","num","isArray","getTag","INFINITY","baseToString","isString","isNumber","isBoolean","isObjectLike","isObject","isDefined","isBlank","INCORRECT_INDEX_TYPE","LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY","PATTERN_LENGTH_TOO_LARGE","MISSING_KEY_PROPERTY","INVALID_KEY_WEIGHT_VALUE","hasOwn","KeyStore","totalWeight","createKey","keyId","weight","getFn","createKeyPath","createKeyId","deepGet","MatchOptions","BasicOptions","FuzzyOptions","AdvancedOptions","Config","SPACE","norm","mantissa","cache","numTokens","FuseIndex","fieldNormWeight","docs","records","idx","doc","docIndex","record","keyIndex","subRecords","stack","nestedArrIndex","subRecord","createIndex","myIndex","parseIndex","computeScore$1","pattern","currentLocation","expectedLocation","distance","ignoreLocation","proximity","convertMaskToIndices","matchmask","minMatchCharLength","MAX_BITS","patternAlphabet","findAllMatches","includeMatches","patternLen","textLen","currentThreshold","bestLocation","computeMatches","matchMask","score","lastBitArr","finalScore","binMax","mask","binMin","binMid","finish","bitArr","charMatch","createPatternAlphabet","BitapSearch","isCaseSensitive","addChunk","startIndex","remainder","allIndices","totalScore","hasMatches","alphabet","isMatch","BaseMatch","getMatch","exp","matches","ExactMatch","InverseExactMatch","PrefixExactMatch","InversePrefixExactMatch","SuffixExactMatch","InverseSuffixExactMatch","FuzzyMatch","IncludeMatch","searchers","searchersLen","SPACE_RE","OR_TOKEN","parseQuery","results","queryItem","found","searcher","token","MultiMatchSet","ExtendedSearch","numMatches","qLen","pLen","registeredSearchers","register","createSearcher","searcherClass","LogicalOperator","KeyType","isExpression","isPath","isLeaf","convertToExplicit","parse","auto","isQueryPath","computeScore","ignoreFieldNorm","transformMatches","transformScore","includeScore","transformers","transformer","Fuse","predicate","shouldSort","sortFn","expression","evaluate","resultMap","expResults"],"ignoreList":[0,1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,48,56,57,58,59,64,72,73,74,75,79,80,81,82,83,84,87,90,91,92,93,94,95,102,103,106,107,108,109,113,114],"sources":["../../node_modules/react-hotkeys-hook/dist/react-hotkeys-hook.esm.js","../../node_modules/toastify-js/src/toastify.js","../../src/utils/show-toast.js","../../src/utils/useInterval.js","../../src/utils/open-compose.js","../../src/utils/open-osk.jsx","../../src/components/ICONS.jsx","../../src/components/icon.jsx","../../src/utils/useCloseWatcher.js","../../src/components/modal.jsx","../../node_modules/prop-types/lib/ReactPropTypesSecret.js","../../node_modules/prop-types/factoryWithThrowingShims.js","../../node_modules/prop-types/index.js","../../node_modules/@szhsin/react-menu/dist/es/utils/utils.js","../../node_modules/@szhsin/react-menu/dist/es/utils/propTypes.js","../../node_modules/@szhsin/react-menu/dist/es/hooks/useBEM.js","../../node_modules/@szhsin/react-menu/dist/es/utils/constants.js","../../node_modules/@szhsin/react-menu/dist/es/components/MenuContainer.js","../../node_modules/@szhsin/react-menu/dist/es/utils/submenuCtx.js","../../node_modules/@szhsin/react-menu/dist/es/hooks/useItems.js","../../node_modules/@szhsin/react-menu/dist/es/positionUtils/getPositionHelpers.js","../../node_modules/@szhsin/react-menu/dist/es/positionUtils/placeArrowVertical.js","../../node_modules/@szhsin/react-menu/dist/es/positionUtils/placeLeftorRight.js","../../node_modules/@szhsin/react-menu/dist/es/positionUtils/placeArrowHorizontal.js","../../node_modules/@szhsin/react-menu/dist/es/positionUtils/placeToporBottom.js","../../node_modules/@szhsin/react-menu/dist/es/positionUtils/positionMenu.js","../../node_modules/@szhsin/react-menu/dist/es/hooks/useIsomorphicLayoutEffect.js","../../node_modules/@szhsin/react-menu/dist/es/hooks/useCombinedRef.js","../../node_modules/@szhsin/react-menu/dist/es/components/MenuList.js","../../node_modules/@szhsin/react-menu/dist/es/components/ControlledMenu.js","../../node_modules/react-transition-state/dist/es/hooks/utils.js","../../node_modules/react-transition-state/dist/es/hooks/useTransition.js","../../node_modules/@szhsin/react-menu/dist/es/hooks/useMenuState.js","../../node_modules/@szhsin/react-menu/dist/es/hooks/useMenuStateAndFocus.js","../../node_modules/@szhsin/react-menu/dist/es/hooks/useClick.js","../../node_modules/@szhsin/react-menu/dist/es/hooks/useMenuChange.js","../../node_modules/@szhsin/react-menu/dist/es/components/Menu.js","../../node_modules/@szhsin/react-menu/dist/es/utils/withHovering.js","../../node_modules/@szhsin/react-menu/dist/es/hooks/useItemEffect.js","../../node_modules/@szhsin/react-menu/dist/es/components/SubMenu.js","../../node_modules/@szhsin/react-menu/dist/es/hooks/useItemState.js","../../node_modules/@szhsin/react-menu/dist/es/components/MenuItem.js","../../node_modules/@szhsin/react-menu/dist/es/components/FocusableItem.js","../../node_modules/@szhsin/react-menu/dist/es/components/MenuDivider.js","../../node_modules/@szhsin/react-menu/dist/es/components/MenuHeader.js","../../node_modules/@szhsin/react-menu/dist/es/components/MenuGroup.js","../../src/components/avatar.jsx","../../src/components/link.jsx","../../node_modules/@uidotdev/usehooks/index.js","../../src/utils/safe-bounding-box-padding.js","../../src/components/menu2.jsx","../../src/components/submenu2.jsx","../../src/components/menu-confirm.jsx","../../src/components/custom-emoji.jsx","../../src/components/emoji-text.jsx","../../src/components/name-text.jsx","../../node_modules/dayjs/dayjs.min.js","../../node_modules/dayjs-twitter/dist/dayjs-twitter.min.js","../../node_modules/dayjs/plugin/localizedFormat.js","../../node_modules/dayjs/plugin/relativeTime.js","../../src/components/relative-time.jsx","../../src/utils/locale-match.jsx","../../src/utils/get-translate-target-language.jsx","../../src/utils/localeCode2Text.jsx","../../node_modules/punycode/punycode.es6.js","../../src/utils/emojify-text.js","../../src/utils/enhance-content.js","../../src/utils/getHTMLText.jsx","../../src/utils/handle-content-links.js","../../src/utils/nice-date-time.js","../../src/utils/shorten-number.jsx","../../src/utils/show-compose.js","../../node_modules/compare-versions/lib/esm/utils.js","../../node_modules/compare-versions/lib/esm/compareVersions.js","../../node_modules/compare-versions/lib/esm/compare.js","../../node_modules/compare-versions/lib/esm/satisfies.js","../../src/utils/supports.js","../../src/components/account-block.jsx","../../src/components/menu-link.jsx","../../node_modules/retry/lib/retry_operation.js","../../node_modules/retry/lib/retry.js","../../node_modules/retry/index.js","../../node_modules/is-network-error/index.js","../../node_modules/p-retry/index.js","../../node_modules/react-intersection-observer/index.mjs","../../src/components/lazy-shazam.jsx","../../src/components/translation-block.jsx","../../node_modules/idb-keyval/dist/index.js","../../src/utils/db.js","../../src/utils/relationships.js","../../node_modules/@justinribeiro/lite-youtube/lite-youtube.js","../../node_modules/fast-blurhash/index.js","../../node_modules/html-prettify/src/utils/addIndentation.js","../../node_modules/html-prettify/src/utils/toLines.js","../../node_modules/html-prettify/src/index.js","../../node_modules/use-long-press/index.mjs","../../src/components/poll.jsx","../../src/utils/filter-context.js","../../src/utils/filters.jsx","../../src/utils/html-content-length.js","../../src/utils/speech.js","../../src/utils/status-peek.jsx","../../node_modules/use-debounce/dist/index.module.js","../../node_modules/use-resize-observer/dist/bundle.esm.js","../../src/utils/useTruncated.js","../../src/utils/visibility-icons-map.js","../../node_modules/react-quick-pinch-zoom/esm/PinchZoom/styles.css.js","../../node_modules/react-quick-pinch-zoom/esm/utils.js","../../node_modules/react-quick-pinch-zoom/esm/PinchZoom/getOffsetBounds.js","../../node_modules/react-quick-pinch-zoom/esm/PinchZoom/component.js","../../src/utils/format-duration.jsx","../../src/components/media.jsx","../../src/components/status.jsx","../../node_modules/uid/single/index.mjs","../../node_modules/fuse.js/dist/fuse.mjs"],"sourcesContent":["import { useContext, createContext, useState, useCallback, useRef, useLayoutEffect, useEffect } from 'react';\nimport { jsx } from 'react/jsx-runtime';\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nvar reservedModifierKeywords = ['shift', 'alt', 'meta', 'mod', 'ctrl'];\nvar mappedKeys = {\n  esc: 'escape',\n  \"return\": 'enter',\n  '.': 'period',\n  ',': 'comma',\n  '-': 'slash',\n  ' ': 'space',\n  '`': 'backquote',\n  '#': 'backslash',\n  '+': 'bracketright',\n  ShiftLeft: 'shift',\n  ShiftRight: 'shift',\n  AltLeft: 'alt',\n  AltRight: 'alt',\n  MetaLeft: 'meta',\n  MetaRight: 'meta',\n  OSLeft: 'meta',\n  OSRight: 'meta',\n  ControlLeft: 'ctrl',\n  ControlRight: 'ctrl'\n};\nfunction mapKey(key) {\n  return (mappedKeys[key] || key).trim().toLowerCase().replace(/key|digit|numpad|arrow/, '');\n}\nfunction isHotkeyModifier(key) {\n  return reservedModifierKeywords.includes(key);\n}\nfunction parseKeysHookInput(keys, splitKey) {\n  if (splitKey === void 0) {\n    splitKey = ',';\n  }\n  return keys.split(splitKey);\n}\nfunction parseHotkey(hotkey, combinationKey, description) {\n  if (combinationKey === void 0) {\n    combinationKey = '+';\n  }\n  var keys = hotkey.toLocaleLowerCase().split(combinationKey).map(function (k) {\n    return mapKey(k);\n  });\n  var modifiers = {\n    alt: keys.includes('alt'),\n    ctrl: keys.includes('ctrl') || keys.includes('control'),\n    shift: keys.includes('shift'),\n    meta: keys.includes('meta'),\n    mod: keys.includes('mod')\n  };\n  var singleCharKeys = keys.filter(function (k) {\n    return !reservedModifierKeywords.includes(k);\n  });\n  return _extends({}, modifiers, {\n    keys: singleCharKeys,\n    description: description\n  });\n}\n\n(function () {\n  if (typeof document !== 'undefined') {\n    document.addEventListener('keydown', function (e) {\n      if (e.key === undefined) {\n        // Synthetic event (e.g., Chrome autofill).  Ignore.\n        return;\n      }\n      pushToCurrentlyPressedKeys([mapKey(e.key), mapKey(e.code)]);\n    });\n    document.addEventListener('keyup', function (e) {\n      if (e.key === undefined) {\n        // Synthetic event (e.g., Chrome autofill).  Ignore.\n        return;\n      }\n      removeFromCurrentlyPressedKeys([mapKey(e.key), mapKey(e.code)]);\n    });\n  }\n  if (typeof window !== 'undefined') {\n    window.addEventListener('blur', function () {\n      currentlyPressedKeys.clear();\n    });\n  }\n})();\nvar currentlyPressedKeys = /*#__PURE__*/new Set();\n// https://github.com/microsoft/TypeScript/issues/17002\nfunction isReadonlyArray(value) {\n  return Array.isArray(value);\n}\nfunction isHotkeyPressed(key, splitKey) {\n  if (splitKey === void 0) {\n    splitKey = ',';\n  }\n  var hotkeyArray = isReadonlyArray(key) ? key : key.split(splitKey);\n  return hotkeyArray.every(function (hotkey) {\n    return currentlyPressedKeys.has(hotkey.trim().toLowerCase());\n  });\n}\nfunction pushToCurrentlyPressedKeys(key) {\n  var hotkeyArray = Array.isArray(key) ? key : [key];\n  /*\r\n  Due to a weird behavior on macOS we need to clear the set if the user pressed down the meta key and presses another key.\r\n  https://stackoverflow.com/questions/11818637/why-does-javascript-drop-keyup-events-when-the-metakey-is-pressed-on-mac-browser\r\n  Otherwise the set will hold all ever pressed keys while the meta key is down which leads to wrong results.\r\n   */\n  if (currentlyPressedKeys.has('meta')) {\n    currentlyPressedKeys.forEach(function (key) {\n      return !isHotkeyModifier(key) && currentlyPressedKeys[\"delete\"](key.toLowerCase());\n    });\n  }\n  hotkeyArray.forEach(function (hotkey) {\n    return currentlyPressedKeys.add(hotkey.toLowerCase());\n  });\n}\nfunction removeFromCurrentlyPressedKeys(key) {\n  var hotkeyArray = Array.isArray(key) ? key : [key];\n  /*\r\n  Due to a weird behavior on macOS we need to clear the set if the user pressed down the meta key and presses another key.\r\n  https://stackoverflow.com/questions/11818637/why-does-javascript-drop-keyup-events-when-the-metakey-is-pressed-on-mac-browser\r\n  Otherwise the set will hold all ever pressed keys while the meta key is down which leads to wrong results.\r\n   */\n  if (key === 'meta') {\n    currentlyPressedKeys.clear();\n  } else {\n    hotkeyArray.forEach(function (hotkey) {\n      return currentlyPressedKeys[\"delete\"](hotkey.toLowerCase());\n    });\n  }\n}\n\nfunction maybePreventDefault(e, hotkey, preventDefault) {\n  if (typeof preventDefault === 'function' && preventDefault(e, hotkey) || preventDefault === true) {\n    e.preventDefault();\n  }\n}\nfunction isHotkeyEnabled(e, hotkey, enabled) {\n  if (typeof enabled === 'function') {\n    return enabled(e, hotkey);\n  }\n  return enabled === true || enabled === undefined;\n}\nfunction isKeyboardEventTriggeredByInput(ev) {\n  return isHotkeyEnabledOnTag(ev, ['input', 'textarea', 'select']);\n}\nfunction isHotkeyEnabledOnTag(_ref, enabledOnTags) {\n  var target = _ref.target;\n  if (enabledOnTags === void 0) {\n    enabledOnTags = false;\n  }\n  var targetTagName = target && target.tagName;\n  if (isReadonlyArray(enabledOnTags)) {\n    return Boolean(targetTagName && enabledOnTags && enabledOnTags.some(function (tag) {\n      return tag.toLowerCase() === targetTagName.toLowerCase();\n    }));\n  }\n  return Boolean(targetTagName && enabledOnTags && enabledOnTags === true);\n}\nfunction isScopeActive(activeScopes, scopes) {\n  if (activeScopes.length === 0 && scopes) {\n    console.warn('A hotkey has the \"scopes\" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>');\n    return true;\n  }\n  if (!scopes) {\n    return true;\n  }\n  return activeScopes.some(function (scope) {\n    return scopes.includes(scope);\n  }) || activeScopes.includes('*');\n}\nvar isHotkeyMatchingKeyboardEvent = function isHotkeyMatchingKeyboardEvent(e, hotkey, ignoreModifiers) {\n  if (ignoreModifiers === void 0) {\n    ignoreModifiers = false;\n  }\n  var alt = hotkey.alt,\n    meta = hotkey.meta,\n    mod = hotkey.mod,\n    shift = hotkey.shift,\n    ctrl = hotkey.ctrl,\n    keys = hotkey.keys;\n  var pressedKeyUppercase = e.key,\n    code = e.code,\n    ctrlKey = e.ctrlKey,\n    metaKey = e.metaKey,\n    shiftKey = e.shiftKey,\n    altKey = e.altKey;\n  var keyCode = mapKey(code);\n  var pressedKey = pressedKeyUppercase.toLowerCase();\n  if (!(keys != null && keys.includes(keyCode)) && !(keys != null && keys.includes(pressedKey)) && !['ctrl', 'control', 'unknown', 'meta', 'alt', 'shift', 'os'].includes(keyCode)) {\n    return false;\n  }\n  if (!ignoreModifiers) {\n    // We check the pressed keys for compatibility with the keyup event. In keyup events the modifier flags are not set.\n    if (alt === !altKey && pressedKey !== 'alt') {\n      return false;\n    }\n    if (shift === !shiftKey && pressedKey !== 'shift') {\n      return false;\n    }\n    // Mod is a special key name that is checking for meta on macOS and ctrl on other platforms\n    if (mod) {\n      if (!metaKey && !ctrlKey) {\n        return false;\n      }\n    } else {\n      if (meta === !metaKey && pressedKey !== 'meta' && pressedKey !== 'os') {\n        return false;\n      }\n      if (ctrl === !ctrlKey && pressedKey !== 'ctrl' && pressedKey !== 'control') {\n        return false;\n      }\n    }\n  }\n  // All modifiers are correct, now check the key\n  // If the key is set, we check for the key\n  if (keys && keys.length === 1 && (keys.includes(pressedKey) || keys.includes(keyCode))) {\n    return true;\n  } else if (keys) {\n    // Check if all keys are present in pressedDownKeys set\n    return isHotkeyPressed(keys);\n  } else if (!keys) {\n    // If the key is not set, we only listen for modifiers, that check went alright, so we return true\n    return true;\n  }\n  // There is nothing that matches.\n  return false;\n};\n\nvar BoundHotkeysProxyProvider = /*#__PURE__*/createContext(undefined);\nvar useBoundHotkeysProxy = function useBoundHotkeysProxy() {\n  return useContext(BoundHotkeysProxyProvider);\n};\nfunction BoundHotkeysProxyProviderProvider(_ref) {\n  var addHotkey = _ref.addHotkey,\n    removeHotkey = _ref.removeHotkey,\n    children = _ref.children;\n  return /*#__PURE__*/jsx(BoundHotkeysProxyProvider.Provider, {\n    value: {\n      addHotkey: addHotkey,\n      removeHotkey: removeHotkey\n    },\n    children: children\n  });\n}\n\nfunction deepEqual(x, y) {\n  //@ts-ignore\n  return x && y && typeof x === 'object' && typeof y === 'object' ? Object.keys(x).length === Object.keys(y).length &&\n  //@ts-ignore\n  Object.keys(x).reduce(function (isEqual, key) {\n    return isEqual && deepEqual(x[key], y[key]);\n  }, true) : x === y;\n}\n\nvar HotkeysContext = /*#__PURE__*/createContext({\n  hotkeys: [],\n  enabledScopes: [],\n  toggleScope: function toggleScope() {},\n  enableScope: function enableScope() {},\n  disableScope: function disableScope() {}\n});\nvar useHotkeysContext = function useHotkeysContext() {\n  return useContext(HotkeysContext);\n};\nvar HotkeysProvider = function HotkeysProvider(_ref) {\n  var _ref$initiallyActiveS = _ref.initiallyActiveScopes,\n    initiallyActiveScopes = _ref$initiallyActiveS === void 0 ? ['*'] : _ref$initiallyActiveS,\n    children = _ref.children;\n  var _useState = useState((initiallyActiveScopes == null ? void 0 : initiallyActiveScopes.length) > 0 ? initiallyActiveScopes : ['*']),\n    internalActiveScopes = _useState[0],\n    setInternalActiveScopes = _useState[1];\n  var _useState2 = useState([]),\n    boundHotkeys = _useState2[0],\n    setBoundHotkeys = _useState2[1];\n  var enableScope = useCallback(function (scope) {\n    setInternalActiveScopes(function (prev) {\n      if (prev.includes('*')) {\n        return [scope];\n      }\n      return Array.from(new Set([].concat(prev, [scope])));\n    });\n  }, []);\n  var disableScope = useCallback(function (scope) {\n    setInternalActiveScopes(function (prev) {\n      if (prev.filter(function (s) {\n        return s !== scope;\n      }).length === 0) {\n        return ['*'];\n      } else {\n        return prev.filter(function (s) {\n          return s !== scope;\n        });\n      }\n    });\n  }, []);\n  var toggleScope = useCallback(function (scope) {\n    setInternalActiveScopes(function (prev) {\n      if (prev.includes(scope)) {\n        if (prev.filter(function (s) {\n          return s !== scope;\n        }).length === 0) {\n          return ['*'];\n        } else {\n          return prev.filter(function (s) {\n            return s !== scope;\n          });\n        }\n      } else {\n        if (prev.includes('*')) {\n          return [scope];\n        }\n        return Array.from(new Set([].concat(prev, [scope])));\n      }\n    });\n  }, []);\n  var addBoundHotkey = useCallback(function (hotkey) {\n    setBoundHotkeys(function (prev) {\n      return [].concat(prev, [hotkey]);\n    });\n  }, []);\n  var removeBoundHotkey = useCallback(function (hotkey) {\n    setBoundHotkeys(function (prev) {\n      return prev.filter(function (h) {\n        return !deepEqual(h, hotkey);\n      });\n    });\n  }, []);\n  return /*#__PURE__*/jsx(HotkeysContext.Provider, {\n    value: {\n      enabledScopes: internalActiveScopes,\n      hotkeys: boundHotkeys,\n      enableScope: enableScope,\n      disableScope: disableScope,\n      toggleScope: toggleScope\n    },\n    children: /*#__PURE__*/jsx(BoundHotkeysProxyProviderProvider, {\n      addHotkey: addBoundHotkey,\n      removeHotkey: removeBoundHotkey,\n      children: children\n    })\n  });\n};\n\nfunction useDeepEqualMemo(value) {\n  var ref = useRef(undefined);\n  if (!deepEqual(ref.current, value)) {\n    ref.current = value;\n  }\n  return ref.current;\n}\n\nvar stopPropagation = function stopPropagation(e) {\n  e.stopPropagation();\n  e.preventDefault();\n  e.stopImmediatePropagation();\n};\nvar useSafeLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\nfunction useHotkeys(keys, callback, options, dependencies) {\n  var ref = useRef(null);\n  var hasTriggeredRef = useRef(false);\n  var _options = !(options instanceof Array) ? options : !(dependencies instanceof Array) ? dependencies : undefined;\n  var _keys = isReadonlyArray(keys) ? keys.join(_options == null ? void 0 : _options.splitKey) : keys;\n  var _deps = options instanceof Array ? options : dependencies instanceof Array ? dependencies : undefined;\n  var memoisedCB = useCallback(callback, _deps != null ? _deps : []);\n  var cbRef = useRef(memoisedCB);\n  if (_deps) {\n    cbRef.current = memoisedCB;\n  } else {\n    cbRef.current = callback;\n  }\n  var memoisedOptions = useDeepEqualMemo(_options);\n  var _useHotkeysContext = useHotkeysContext(),\n    enabledScopes = _useHotkeysContext.enabledScopes;\n  var proxy = useBoundHotkeysProxy();\n  useSafeLayoutEffect(function () {\n    if ((memoisedOptions == null ? void 0 : memoisedOptions.enabled) === false || !isScopeActive(enabledScopes, memoisedOptions == null ? void 0 : memoisedOptions.scopes)) {\n      return;\n    }\n    var listener = function listener(e, isKeyUp) {\n      var _e$target;\n      if (isKeyUp === void 0) {\n        isKeyUp = false;\n      }\n      if (isKeyboardEventTriggeredByInput(e) && !isHotkeyEnabledOnTag(e, memoisedOptions == null ? void 0 : memoisedOptions.enableOnFormTags)) {\n        return;\n      }\n      // TODO: SINCE THE EVENT IS NOW ATTACHED TO THE REF, THE ACTIVE ELEMENT CAN NEVER BE INSIDE THE REF. THE HOTKEY ONLY TRIGGERS IF THE\n      // REF IS THE ACTIVE ELEMENT. THIS IS A PROBLEM SINCE FOCUSED SUB COMPONENTS WON'T TRIGGER THE HOTKEY.\n      if (ref.current !== null) {\n        var rootNode = ref.current.getRootNode();\n        if ((rootNode instanceof Document || rootNode instanceof ShadowRoot) && rootNode.activeElement !== ref.current && !ref.current.contains(rootNode.activeElement)) {\n          stopPropagation(e);\n          return;\n        }\n      }\n      if ((_e$target = e.target) != null && _e$target.isContentEditable && !(memoisedOptions != null && memoisedOptions.enableOnContentEditable)) {\n        return;\n      }\n      parseKeysHookInput(_keys, memoisedOptions == null ? void 0 : memoisedOptions.splitKey).forEach(function (key) {\n        var _hotkey$keys;\n        var hotkey = parseHotkey(key, memoisedOptions == null ? void 0 : memoisedOptions.combinationKey);\n        if (isHotkeyMatchingKeyboardEvent(e, hotkey, memoisedOptions == null ? void 0 : memoisedOptions.ignoreModifiers) || (_hotkey$keys = hotkey.keys) != null && _hotkey$keys.includes('*')) {\n          if (memoisedOptions != null && memoisedOptions.ignoreEventWhen != null && memoisedOptions.ignoreEventWhen(e)) {\n            return;\n          }\n          if (isKeyUp && hasTriggeredRef.current) {\n            return;\n          }\n          maybePreventDefault(e, hotkey, memoisedOptions == null ? void 0 : memoisedOptions.preventDefault);\n          if (!isHotkeyEnabled(e, hotkey, memoisedOptions == null ? void 0 : memoisedOptions.enabled)) {\n            stopPropagation(e);\n            return;\n          }\n          // Execute the user callback for that hotkey\n          cbRef.current(e, hotkey);\n          if (!isKeyUp) {\n            hasTriggeredRef.current = true;\n          }\n        }\n      });\n    };\n    var handleKeyDown = function handleKeyDown(event) {\n      if (event.key === undefined) {\n        // Synthetic event (e.g., Chrome autofill).  Ignore.\n        return;\n      }\n      pushToCurrentlyPressedKeys(mapKey(event.code));\n      if ((memoisedOptions == null ? void 0 : memoisedOptions.keydown) === undefined && (memoisedOptions == null ? void 0 : memoisedOptions.keyup) !== true || memoisedOptions != null && memoisedOptions.keydown) {\n        listener(event);\n      }\n    };\n    var handleKeyUp = function handleKeyUp(event) {\n      if (event.key === undefined) {\n        // Synthetic event (e.g., Chrome autofill).  Ignore.\n        return;\n      }\n      removeFromCurrentlyPressedKeys(mapKey(event.code));\n      hasTriggeredRef.current = false;\n      if (memoisedOptions != null && memoisedOptions.keyup) {\n        listener(event, true);\n      }\n    };\n    var domNode = ref.current || (_options == null ? void 0 : _options.document) || document;\n    // @ts-ignore\n    domNode.addEventListener('keyup', handleKeyUp);\n    // @ts-ignore\n    domNode.addEventListener('keydown', handleKeyDown);\n    if (proxy) {\n      parseKeysHookInput(_keys, memoisedOptions == null ? void 0 : memoisedOptions.splitKey).forEach(function (key) {\n        return proxy.addHotkey(parseHotkey(key, memoisedOptions == null ? void 0 : memoisedOptions.combinationKey, memoisedOptions == null ? void 0 : memoisedOptions.description));\n      });\n    }\n    return function () {\n      // @ts-ignore\n      domNode.removeEventListener('keyup', handleKeyUp);\n      // @ts-ignore\n      domNode.removeEventListener('keydown', handleKeyDown);\n      if (proxy) {\n        parseKeysHookInput(_keys, memoisedOptions == null ? void 0 : memoisedOptions.splitKey).forEach(function (key) {\n          return proxy.removeHotkey(parseHotkey(key, memoisedOptions == null ? void 0 : memoisedOptions.combinationKey, memoisedOptions == null ? void 0 : memoisedOptions.description));\n        });\n      }\n    };\n  }, [_keys, memoisedOptions, enabledScopes]);\n  return ref;\n}\n\nfunction useRecordHotkeys() {\n  var _useState = useState(new Set()),\n    keys = _useState[0],\n    setKeys = _useState[1];\n  var _useState2 = useState(false),\n    isRecording = _useState2[0],\n    setIsRecording = _useState2[1];\n  var handler = useCallback(function (event) {\n    if (event.key === undefined) {\n      // Synthetic event (e.g., Chrome autofill).  Ignore.\n      return;\n    }\n    event.preventDefault();\n    event.stopPropagation();\n    setKeys(function (prev) {\n      var newKeys = new Set(prev);\n      newKeys.add(mapKey(event.code));\n      return newKeys;\n    });\n  }, []);\n  var stop = useCallback(function () {\n    if (typeof document !== 'undefined') {\n      document.removeEventListener('keydown', handler);\n      setIsRecording(false);\n    }\n  }, [handler]);\n  var start = useCallback(function () {\n    setKeys(new Set());\n    if (typeof document !== 'undefined') {\n      stop();\n      document.addEventListener('keydown', handler);\n      setIsRecording(true);\n    }\n  }, [handler, stop]);\n  var resetKeys = useCallback(function () {\n    setKeys(new Set());\n  }, []);\n  return [keys, {\n    start: start,\n    stop: stop,\n    resetKeys: resetKeys,\n    isRecording: isRecording\n  }];\n}\n\nexport { HotkeysProvider, isHotkeyPressed, useHotkeys, useHotkeysContext, useRecordHotkeys };\n//# sourceMappingURL=react-hotkeys-hook.esm.js.map\n","/*!\n * Toastify js 1.12.0\n * https://github.com/apvarun/toastify-js\n * @license MIT licensed\n *\n * Copyright (C) 2018 Varun A P\n */\n(function(root, factory) {\n  if (typeof module === \"object\" && module.exports) {\n    module.exports = factory();\n  } else {\n    root.Toastify = factory();\n  }\n})(this, function(global) {\n  // Object initialization\n  var Toastify = function(options) {\n      // Returning a new init object\n      return new Toastify.lib.init(options);\n    },\n    // Library version\n    version = \"1.12.0\";\n\n  // Set the default global options\n  Toastify.defaults = {\n    oldestFirst: true,\n    text: \"Toastify is awesome!\",\n    node: undefined,\n    duration: 3000,\n    selector: undefined,\n    callback: function () {\n    },\n    destination: undefined,\n    newWindow: false,\n    close: false,\n    gravity: \"toastify-top\",\n    positionLeft: false,\n    position: '',\n    backgroundColor: '',\n    avatar: \"\",\n    className: \"\",\n    stopOnFocus: true,\n    onClick: function () {\n    },\n    offset: {x: 0, y: 0},\n    escapeMarkup: true,\n    ariaLive: 'polite',\n    style: {background: ''}\n  };\n\n  // Defining the prototype of the object\n  Toastify.lib = Toastify.prototype = {\n    toastify: version,\n\n    constructor: Toastify,\n\n    // Initializing the object with required parameters\n    init: function(options) {\n      // Verifying and validating the input object\n      if (!options) {\n        options = {};\n      }\n\n      // Creating the options object\n      this.options = {};\n\n      this.toastElement = null;\n\n      // Validating the options\n      this.options.text = options.text || Toastify.defaults.text; // Display message\n      this.options.node = options.node || Toastify.defaults.node;  // Display content as node\n      this.options.duration = options.duration === 0 ? 0 : options.duration || Toastify.defaults.duration; // Display duration\n      this.options.selector = options.selector || Toastify.defaults.selector; // Parent selector\n      this.options.callback = options.callback || Toastify.defaults.callback; // Callback after display\n      this.options.destination = options.destination || Toastify.defaults.destination; // On-click destination\n      this.options.newWindow = options.newWindow || Toastify.defaults.newWindow; // Open destination in new window\n      this.options.close = options.close || Toastify.defaults.close; // Show toast close icon\n      this.options.gravity = options.gravity === \"bottom\" ? \"toastify-bottom\" : Toastify.defaults.gravity; // toast position - top or bottom\n      this.options.positionLeft = options.positionLeft || Toastify.defaults.positionLeft; // toast position - left or right\n      this.options.position = options.position || Toastify.defaults.position; // toast position - left or right\n      this.options.backgroundColor = options.backgroundColor || Toastify.defaults.backgroundColor; // toast background color\n      this.options.avatar = options.avatar || Toastify.defaults.avatar; // img element src - url or a path\n      this.options.className = options.className || Toastify.defaults.className; // additional class names for the toast\n      this.options.stopOnFocus = options.stopOnFocus === undefined ? Toastify.defaults.stopOnFocus : options.stopOnFocus; // stop timeout on focus\n      this.options.onClick = options.onClick || Toastify.defaults.onClick; // Callback after click\n      this.options.offset = options.offset || Toastify.defaults.offset; // toast offset\n      this.options.escapeMarkup = options.escapeMarkup !== undefined ? options.escapeMarkup : Toastify.defaults.escapeMarkup;\n      this.options.ariaLive = options.ariaLive || Toastify.defaults.ariaLive;\n      this.options.style = options.style || Toastify.defaults.style;\n      if(options.backgroundColor) {\n        this.options.style.background = options.backgroundColor;\n      }\n\n      // Returning the current object for chaining functions\n      return this;\n    },\n\n    // Building the DOM element\n    buildToast: function() {\n      // Validating if the options are defined\n      if (!this.options) {\n        throw \"Toastify is not initialized\";\n      }\n\n      // Creating the DOM object\n      var divElement = document.createElement(\"div\");\n      divElement.className = \"toastify on \" + this.options.className;\n\n      // Positioning toast to left or right or center\n      if (!!this.options.position) {\n        divElement.className += \" toastify-\" + this.options.position;\n      } else {\n        // To be depreciated in further versions\n        if (this.options.positionLeft === true) {\n          divElement.className += \" toastify-left\";\n          console.warn('Property `positionLeft` will be depreciated in further versions. Please use `position` instead.')\n        } else {\n          // Default position\n          divElement.className += \" toastify-right\";\n        }\n      }\n\n      // Assigning gravity of element\n      divElement.className += \" \" + this.options.gravity;\n\n      if (this.options.backgroundColor) {\n        // This is being deprecated in favor of using the style HTML DOM property\n        console.warn('DEPRECATION NOTICE: \"backgroundColor\" is being deprecated. Please use the \"style.background\" property.');\n      }\n\n      // Loop through our style object and apply styles to divElement\n      for (var property in this.options.style) {\n        divElement.style[property] = this.options.style[property];\n      }\n\n      // Announce the toast to screen readers\n      if (this.options.ariaLive) {\n        divElement.setAttribute('aria-live', this.options.ariaLive)\n      }\n\n      // Adding the toast message/node\n      if (this.options.node && this.options.node.nodeType === Node.ELEMENT_NODE) {\n        // If we have a valid node, we insert it\n        divElement.appendChild(this.options.node)\n      } else {\n        if (this.options.escapeMarkup) {\n          divElement.innerText = this.options.text;\n        } else {\n          divElement.innerHTML = this.options.text;\n        }\n\n        if (this.options.avatar !== \"\") {\n          var avatarElement = document.createElement(\"img\");\n          avatarElement.src = this.options.avatar;\n\n          avatarElement.className = \"toastify-avatar\";\n\n          if (this.options.position == \"left\" || this.options.positionLeft === true) {\n            // Adding close icon on the left of content\n            divElement.appendChild(avatarElement);\n          } else {\n            // Adding close icon on the right of content\n            divElement.insertAdjacentElement(\"afterbegin\", avatarElement);\n          }\n        }\n      }\n\n      // Adding a close icon to the toast\n      if (this.options.close === true) {\n        // Create a span for close element\n        var closeElement = document.createElement(\"button\");\n        closeElement.type = \"button\";\n        closeElement.setAttribute(\"aria-label\", \"Close\");\n        closeElement.className = \"toast-close\";\n        closeElement.innerHTML = \"&#10006;\";\n\n        // Triggering the removal of toast from DOM on close click\n        closeElement.addEventListener(\n          \"click\",\n          function(event) {\n            event.stopPropagation();\n            this.removeElement(this.toastElement);\n            window.clearTimeout(this.toastElement.timeOutValue);\n          }.bind(this)\n        );\n\n        //Calculating screen width\n        var width = window.innerWidth > 0 ? window.innerWidth : screen.width;\n\n        // Adding the close icon to the toast element\n        // Display on the right if screen width is less than or equal to 360px\n        if ((this.options.position == \"left\" || this.options.positionLeft === true) && width > 360) {\n          // Adding close icon on the left of content\n          divElement.insertAdjacentElement(\"afterbegin\", closeElement);\n        } else {\n          // Adding close icon on the right of content\n          divElement.appendChild(closeElement);\n        }\n      }\n\n      // Clear timeout while toast is focused\n      if (this.options.stopOnFocus && this.options.duration > 0) {\n        var self = this;\n        // stop countdown\n        divElement.addEventListener(\n          \"mouseover\",\n          function(event) {\n            window.clearTimeout(divElement.timeOutValue);\n          }\n        )\n        // add back the timeout\n        divElement.addEventListener(\n          \"mouseleave\",\n          function() {\n            divElement.timeOutValue = window.setTimeout(\n              function() {\n                // Remove the toast from DOM\n                self.removeElement(divElement);\n              },\n              self.options.duration\n            )\n          }\n        )\n      }\n\n      // Adding an on-click destination path\n      if (typeof this.options.destination !== \"undefined\") {\n        divElement.addEventListener(\n          \"click\",\n          function(event) {\n            event.stopPropagation();\n            if (this.options.newWindow === true) {\n              window.open(this.options.destination, \"_blank\");\n            } else {\n              window.location = this.options.destination;\n            }\n          }.bind(this)\n        );\n      }\n\n      if (typeof this.options.onClick === \"function\" && typeof this.options.destination === \"undefined\") {\n        divElement.addEventListener(\n          \"click\",\n          function(event) {\n            event.stopPropagation();\n            this.options.onClick();\n          }.bind(this)\n        );\n      }\n\n      // Adding offset\n      if(typeof this.options.offset === \"object\") {\n\n        var x = getAxisOffsetAValue(\"x\", this.options);\n        var y = getAxisOffsetAValue(\"y\", this.options);\n\n        var xOffset = this.options.position == \"left\" ? x : \"-\" + x;\n        var yOffset = this.options.gravity == \"toastify-top\" ? y : \"-\" + y;\n\n        divElement.style.transform = \"translate(\" + xOffset + \",\" + yOffset + \")\";\n\n      }\n\n      // Returning the generated element\n      return divElement;\n    },\n\n    // Displaying the toast\n    showToast: function() {\n      // Creating the DOM object for the toast\n      this.toastElement = this.buildToast();\n\n      // Getting the root element to with the toast needs to be added\n      var rootElement;\n      if (typeof this.options.selector === \"string\") {\n        rootElement = document.getElementById(this.options.selector);\n      } else if (this.options.selector instanceof HTMLElement || (typeof ShadowRoot !== 'undefined' && this.options.selector instanceof ShadowRoot)) {\n        rootElement = this.options.selector;\n      } else {\n        rootElement = document.body;\n      }\n\n      // Validating if root element is present in DOM\n      if (!rootElement) {\n        throw \"Root element is not defined\";\n      }\n\n      // Adding the DOM element\n      var elementToInsert = Toastify.defaults.oldestFirst ? rootElement.firstChild : rootElement.lastChild;\n      rootElement.insertBefore(this.toastElement, elementToInsert);\n\n      // Repositioning the toasts in case multiple toasts are present\n      Toastify.reposition();\n\n      if (this.options.duration > 0) {\n        this.toastElement.timeOutValue = window.setTimeout(\n          function() {\n            // Remove the toast from DOM\n            this.removeElement(this.toastElement);\n          }.bind(this),\n          this.options.duration\n        ); // Binding `this` for function invocation\n      }\n\n      // Supporting function chaining\n      return this;\n    },\n\n    hideToast: function() {\n      if (this.toastElement.timeOutValue) {\n        clearTimeout(this.toastElement.timeOutValue);\n      }\n      this.removeElement(this.toastElement);\n    },\n\n    // Removing the element from the DOM\n    removeElement: function(toastElement) {\n      // Hiding the element\n      // toastElement.classList.remove(\"on\");\n      toastElement.className = toastElement.className.replace(\" on\", \"\");\n\n      // Removing the element from DOM after transition end\n      window.setTimeout(\n        function() {\n          // remove options node if any\n          if (this.options.node && this.options.node.parentNode) {\n            this.options.node.parentNode.removeChild(this.options.node);\n          }\n\n          // Remove the element from the DOM, only when the parent node was not removed before.\n          if (toastElement.parentNode) {\n            toastElement.parentNode.removeChild(toastElement);\n          }\n\n          // Calling the callback function\n          this.options.callback.call(toastElement);\n\n          // Repositioning the toasts again\n          Toastify.reposition();\n        }.bind(this),\n        400\n      ); // Binding `this` for function invocation\n    },\n  };\n\n  // Positioning the toasts on the DOM\n  Toastify.reposition = function() {\n\n    // Top margins with gravity\n    var topLeftOffsetSize = {\n      top: 15,\n      bottom: 15,\n    };\n    var topRightOffsetSize = {\n      top: 15,\n      bottom: 15,\n    };\n    var offsetSize = {\n      top: 15,\n      bottom: 15,\n    };\n\n    // Get all toast messages on the DOM\n    var allToasts = document.getElementsByClassName(\"toastify\");\n\n    var classUsed;\n\n    // Modifying the position of each toast element\n    for (var i = 0; i < allToasts.length; i++) {\n      // Getting the applied gravity\n      if (containsClass(allToasts[i], \"toastify-top\") === true) {\n        classUsed = \"toastify-top\";\n      } else {\n        classUsed = \"toastify-bottom\";\n      }\n\n      var height = allToasts[i].offsetHeight;\n      classUsed = classUsed.substr(9, classUsed.length-1)\n      // Spacing between toasts\n      var offset = 15;\n\n      var width = window.innerWidth > 0 ? window.innerWidth : screen.width;\n\n      // Show toast in center if screen with less than or equal to 360px\n      if (width <= 360) {\n        // Setting the position\n        allToasts[i].style[classUsed] = offsetSize[classUsed] + \"px\";\n\n        offsetSize[classUsed] += height + offset;\n      } else {\n        if (containsClass(allToasts[i], \"toastify-left\") === true) {\n          // Setting the position\n          allToasts[i].style[classUsed] = topLeftOffsetSize[classUsed] + \"px\";\n\n          topLeftOffsetSize[classUsed] += height + offset;\n        } else {\n          // Setting the position\n          allToasts[i].style[classUsed] = topRightOffsetSize[classUsed] + \"px\";\n\n          topRightOffsetSize[classUsed] += height + offset;\n        }\n      }\n    }\n\n    // Supporting function chaining\n    return this;\n  };\n\n  // Helper function to get offset.\n  function getAxisOffsetAValue(axis, options) {\n\n    if(options.offset[axis]) {\n      if(isNaN(options.offset[axis])) {\n        return options.offset[axis];\n      }\n      else {\n        return options.offset[axis] + 'px';\n      }\n    }\n\n    return '0px';\n\n  }\n\n  function containsClass(elem, yourClass) {\n    if (!elem || typeof yourClass !== \"string\") {\n      return false;\n    } else if (\n      elem.className &&\n      elem.className\n        .trim()\n        .split(/\\s+/gi)\n        .indexOf(yourClass) > -1\n    ) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  // Setting up the prototype for the init object\n  Toastify.lib.init.prototype = Toastify.lib;\n\n  // Returning the Toastify function to be assigned to the window object/module\n  return Toastify;\n});\n","import Toastify from 'toastify-js';\n\nwindow._showToast = showToast;\n\nfunction showToast(props) {\n  if (typeof props === 'string') {\n    props = { text: props };\n  }\n  const { onClick, delay, ...rest } = props;\n  const toast = Toastify({\n    className: `${onClick || props.destination ? 'shiny-pill' : ''}`,\n    gravity: 'bottom',\n    position: 'center',\n    ...rest,\n    onClick: () => {\n      onClick?.(toast); // Pass in the object itself!\n    },\n  });\n  if (delay) {\n    setTimeout(() => {\n      toast.showToast();\n    }, delay);\n  } else {\n    toast.showToast();\n  }\n  return toast;\n}\n\nexport default showToast;\n","import { useEffect, useRef } from 'preact/hooks';\n\nfunction useInterval(fn, delay, deps, immediate) {\n  const savedCallback = useRef(fn);\n  useEffect(() => {\n    savedCallback.current = fn;\n  }, [fn, deps]);\n\n  useEffect(() => {\n    if (!immediate || delay === null || delay === false) return;\n    savedCallback.current();\n  }, [immediate]);\n\n  useEffect(() => {\n    if (delay === null || delay === false) return;\n    const tick = () => savedCallback.current();\n    const id = setInterval(tick, delay);\n    return () => clearInterval(id);\n  }, [delay]);\n}\n\nexport default useInterval;\n","export default function openCompose(opts) {\n  const url = new URL('/compose/', window.location);\n  const { width: screenWidth, height: screenHeight } = window.screen;\n  const left = Math.max(0, (screenWidth - 600) / 2);\n  const top = Math.max(0, (screenHeight - 450) / 2);\n  const width = Math.min(screenWidth, 600);\n  const height = Math.min(screenHeight, 450);\n  const winUID = opts?.uid || Math.random();\n  const newWin = window.open(\n    url,\n    'compose' + winUID,\n    `width=${width},height=${height},left=${left},top=${top}`,\n  );\n\n  if (newWin) {\n    // if (masto) {\n    //   newWin.masto = masto;\n    // }\n\n    newWin.__COMPOSE__ = opts;\n  } else {\n    alert('Looks like your browser is blocking popups.');\n  }\n\n  return newWin;\n}\n","const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent); // https://stackoverflow.com/a/23522755\n\nexport default function openOSK() {\n  if (isSafari) {\n    const fauxEl = document.createElement('input');\n    fauxEl.style.position = 'absolute';\n    fauxEl.style.top = '0';\n    fauxEl.style.left = '0';\n    fauxEl.style.opacity = '0';\n    document.body.appendChild(fauxEl);\n    fauxEl.focus();\n    setTimeout(() => {\n      document.body.removeChild(fauxEl);\n    }, 500);\n  }\n}\n","export const ICONS = {\n  x: () => import('@iconify-icons/mingcute/close-line'),\n  heart: () => import('@iconify-icons/mingcute/heart-line'),\n  bookmark: () => import('@iconify-icons/mingcute/bookmark-line'),\n  'check-circle': () => import('@iconify-icons/mingcute/check-circle-line'),\n  'x-circle': () => import('@iconify-icons/mingcute/close-circle-line'),\n  transfer: () => import('@iconify-icons/mingcute/transfer-4-line'),\n  rocket: () => import('@iconify-icons/mingcute/rocket-line'),\n  'arrow-left': () => import('@iconify-icons/mingcute/arrow-left-line'),\n  'arrow-right': () => import('@iconify-icons/mingcute/arrow-right-line'),\n  'arrow-up': () => import('@iconify-icons/mingcute/arrow-up-line'),\n  'arrow-down': () => import('@iconify-icons/mingcute/arrow-down-line'),\n  earth: () => import('@iconify-icons/mingcute/earth-line'),\n  lock: () => import('@iconify-icons/mingcute/lock-line'),\n  unlock: () => import('@iconify-icons/mingcute/unlock-line'),\n  'eye-close': () => import('@iconify-icons/mingcute/eye-close-line'),\n  'eye-open': () => import('@iconify-icons/mingcute/eye-2-line'),\n  message: () => import('@iconify-icons/mingcute/mail-line'),\n  comment: () => import('@iconify-icons/mingcute/chat-3-line'),\n  comment2: () => import('@iconify-icons/mingcute/comment-2-line'),\n  home: () => import('@iconify-icons/mingcute/home-3-line'),\n  notification: () => import('@iconify-icons/mingcute/notification-line'),\n  follow: () => import('@iconify-icons/mingcute/user-follow-line'),\n  'follow-add': () => import('@iconify-icons/mingcute/user-add-line'),\n  poll: [() => import('@iconify-icons/mingcute/chart-bar-line'), '90deg'],\n  pencil: () => import('@iconify-icons/mingcute/pencil-line'),\n  quill: () => import('@iconify-icons/mingcute/quill-pen-line'),\n  at: () => import('@iconify-icons/mingcute/at-line'),\n  attachment: () => import('@iconify-icons/mingcute/attachment-line'),\n  upload: () => import('@iconify-icons/mingcute/upload-3-line'),\n  gear: () => import('@iconify-icons/mingcute/settings-3-line'),\n  more: () => import('@iconify-icons/mingcute/more-3-line'),\n  more2: () => import('@iconify-icons/mingcute/more-1-fill'),\n  external: () => import('@iconify-icons/mingcute/external-link-line'),\n  popout: () => import('@iconify-icons/mingcute/external-link-line'),\n  popin: [() => import('@iconify-icons/mingcute/external-link-line'), '180deg'],\n  plus: () => import('@iconify-icons/mingcute/add-circle-line'),\n  'chevron-left': () => import('@iconify-icons/mingcute/left-line'),\n  'chevron-right': () => import('@iconify-icons/mingcute/right-line'),\n  'chevron-down': () => import('@iconify-icons/mingcute/down-line'),\n  reply: [\n    () => import('@iconify-icons/mingcute/share-forward-line'),\n    '180deg',\n    'horizontal',\n  ],\n  thread: () => import('@iconify-icons/mingcute/route-line'),\n  group: () => import('@iconify-icons/mingcute/group-line'),\n  bot: () => import('@iconify-icons/mingcute/android-2-line'),\n  menu: () => import('@iconify-icons/mingcute/rows-4-line'),\n  list: () => import('@iconify-icons/mingcute/list-check-line'),\n  search: () => import('@iconify-icons/mingcute/search-2-line'),\n  hashtag: () => import('@iconify-icons/mingcute/hashtag-line'),\n  info: () => import('@iconify-icons/mingcute/information-line'),\n  shortcut: () => import('@iconify-icons/mingcute/lightning-line'),\n  user: () => import('@iconify-icons/mingcute/user-4-line'),\n  following: () => import('@iconify-icons/mingcute/walk-line'),\n  pin: () => import('@iconify-icons/mingcute/pin-line'),\n  unpin: [() => import('@iconify-icons/mingcute/pin-line'), '180deg'],\n  bus: () => import('@iconify-icons/mingcute/bus-2-line'),\n  link: () => import('@iconify-icons/mingcute/link-2-line'),\n  history: () => import('@iconify-icons/mingcute/history-line'),\n  share: () => import('@iconify-icons/mingcute/share-2-line'),\n  sparkles: () => import('@iconify-icons/mingcute/sparkles-line'),\n  sparkles2: () => import('@iconify-icons/mingcute/sparkles-2-line'),\n  exit: () => import('@iconify-icons/mingcute/exit-line'),\n  translate: () => import('@iconify-icons/mingcute/translate-line'),\n  play: () => import('@iconify-icons/mingcute/play-fill'),\n  trash: () => import('@iconify-icons/mingcute/delete-2-line'),\n  mute: () => import('@iconify-icons/mingcute/volume-mute-line'),\n  unmute: () => import('@iconify-icons/mingcute/volume-line'),\n  block: () => import('@iconify-icons/mingcute/forbid-circle-line'),\n  unblock: [\n    () => import('@iconify-icons/mingcute/forbid-circle-line'),\n    '180deg',\n  ],\n  flag: () => import('@iconify-icons/mingcute/flag-1-line'),\n  time: () => import('@iconify-icons/mingcute/time-line'),\n  refresh: () => import('@iconify-icons/mingcute/refresh-2-line'),\n  emoji2: () => import('@iconify-icons/mingcute/emoji-2-line'),\n  filter: () => import('@iconify-icons/mingcute/filter-2-line'),\n  filters: () => import('@iconify-icons/mingcute/filter-line'),\n  chart: () => import('@iconify-icons/mingcute/chart-line-line'),\n  react: () => import('@iconify-icons/mingcute/react-line'),\n  layout4: () => import('@iconify-icons/mingcute/layout-4-line'),\n  layout5: () => import('@iconify-icons/mingcute/layout-5-line'),\n  announce: () => import('@iconify-icons/mingcute/announcement-line'),\n  alert: () => import('@iconify-icons/mingcute/alert-line'),\n  round: () => import('@iconify-icons/mingcute/round-fill'),\n  'arrow-up-circle': () =>\n    import('@iconify-icons/mingcute/arrow-up-circle-line'),\n  'arrow-down-circle': () =>\n    import('@iconify-icons/mingcute/arrow-down-circle-line'),\n  clipboard: () => import('@iconify-icons/mingcute/clipboard-line'),\n  'account-edit': () => import('@iconify-icons/mingcute/user-edit-line'),\n  'account-warning': () => import('@iconify-icons/mingcute/user-warning-line'),\n  keyboard: () => import('@iconify-icons/mingcute/keyboard-line'),\n  cloud: () => import('@iconify-icons/mingcute/cloud-line'),\n  month: () => import('@iconify-icons/mingcute/calendar-month-line'),\n  media: () => import('@iconify-icons/mingcute/photo-album-line'),\n  speak: () => import('@iconify-icons/mingcute/radar-line'),\n  building: () => import('@iconify-icons/mingcute/building-5-line'),\n  history2: () => import('@iconify-icons/mingcute/history-2-line'),\n  document: () => import('@iconify-icons/mingcute/document-line'),\n  'arrows-right': () => import('@iconify-icons/mingcute/arrows-right-line'),\n  code: () => import('@iconify-icons/mingcute/code-line'),\n  copy: () => import('@iconify-icons/mingcute/copy-2-line'),\n  quote: () => import('@iconify-icons/mingcute/quote-left-line'),\n  settings: () => import('@iconify-icons/mingcute/settings-6-line'),\n  'heart-break': () => import('@iconify-icons/mingcute/heart-crack-line'),\n  'user-x': () => import('@iconify-icons/mingcute/user-x-line'),\n  minimize: () => import('@iconify-icons/mingcute/arrows-down-line'),\n};\n","import moize from 'moize';\nimport { useEffect, useRef, useState } from 'preact/hooks';\n\nimport { ICONS } from './ICONS';\n\nconst SIZES = {\n  s: 12,\n  m: 16,\n  l: 20,\n  xl: 24,\n  xxl: 32,\n};\n\nconst ICONDATA = {};\n\n// Memoize the dangerouslySetInnerHTML of the SVGs\nconst SVGICon = moize(\n  function ({ width, height, body, rotate, flip }) {\n    return (\n      <svg\n        viewBox={`0 0 ${width} ${height}`}\n        dangerouslySetInnerHTML={{ __html: body }}\n        style={{\n          transform: `${rotate ? `rotate(${rotate})` : ''} ${\n            flip ? `scaleX(-1)` : ''\n          }`,\n        }}\n      />\n    );\n  },\n  {\n    isShallowEqual: true,\n    maxSize: Object.keys(ICONS).length,\n    matchesArg: (cacheKeyArg, keyArg) =>\n      cacheKeyArg.icon === keyArg.icon && cacheKeyArg.body === keyArg.body,\n  },\n);\n\nfunction Icon({\n  icon,\n  size = 'm',\n  alt,\n  title,\n  class: className = '',\n  style = {},\n}) {\n  if (!icon) return null;\n\n  const iconSize = SIZES[size];\n  let iconBlock = ICONS[icon];\n  if (!iconBlock) {\n    console.warn(`Icon ${icon} not found`);\n    return null;\n  }\n\n  let rotate, flip;\n  if (Array.isArray(iconBlock)) {\n    [iconBlock, rotate, flip] = iconBlock;\n  }\n\n  const [iconData, setIconData] = useState(ICONDATA[icon]);\n  const currentIcon = useRef(icon);\n  useEffect(() => {\n    if (iconData && currentIcon.current === icon) return;\n    (async () => {\n      const iconB = await iconBlock();\n      setIconData(iconB.default);\n      ICONDATA[icon] = iconB.default;\n    })();\n    currentIcon.current = icon;\n  }, [icon]);\n\n  return (\n    <span\n      class={`icon ${className}`}\n      title={title || alt}\n      style={{\n        width: `${iconSize}px`,\n        height: `${iconSize}px`,\n        ...style,\n      }}\n    >\n      {iconData && (\n        // <svg\n        //   width={iconSize}\n        //   height={iconSize}\n        //   viewBox={`0 0 ${iconData.width} ${iconData.height}`}\n        //   dangerouslySetInnerHTML={{ __html: iconData.body }}\n        //   style={{\n        //     transform: `${rotate ? `rotate(${rotate})` : ''} ${\n        //       flip ? `scaleX(-1)` : ''\n        //     }`,\n        //   }}\n        // />\n        <SVGICon\n          icon={icon}\n          width={iconData.width}\n          height={iconData.height}\n          body={iconData.body}\n          rotate={rotate}\n          flip={flip}\n        />\n      )}\n    </span>\n  );\n}\n\nexport default Icon;\n","import { useEffect } from 'preact/hooks';\n\nfunction useCloseWatcher(fn, deps = []) {\n  if (!fn || typeof fn !== 'function') return;\n  useEffect(() => {\n    const watcher = new CloseWatcher();\n    watcher.addEventListener('close', fn);\n    return () => {\n      watcher.destroy();\n    };\n  }, deps);\n}\n\nexport default window.CloseWatcher ? useCloseWatcher : () => {};\n","import './modal.css';\n\nimport { createPortal } from 'preact/compat';\nimport { useEffect, useRef } from 'preact/hooks';\nimport { useHotkeys } from 'react-hotkeys-hook';\n\nimport useCloseWatcher from '../utils/useCloseWatcher';\n\nconst $modalContainer = document.getElementById('modal-container');\n\nfunction Modal({ children, onClose, onClick, class: className, minimized }) {\n  if (!children) return null;\n\n  const modalRef = useRef();\n  useEffect(() => {\n    let timer = setTimeout(() => {\n      const focusElement = modalRef.current?.querySelector('[tabindex=\"-1\"]');\n      if (focusElement) {\n        focusElement.focus();\n      }\n    }, 100);\n    return () => clearTimeout(timer);\n  }, []);\n\n  const supportsCloseWatcher = window.CloseWatcher;\n  const escRef = useHotkeys(\n    'esc',\n    () => {\n      setTimeout(() => {\n        onClose?.();\n      }, 0);\n    },\n    {\n      enabled: !supportsCloseWatcher && !!onClose,\n      // Using keyup and setTimeout above\n      // This will run \"later\" to prevent clash with esc handlers from other components\n      keydown: false,\n      keyup: true,\n    },\n    [onClose],\n  );\n  useCloseWatcher(onClose, [onClose]);\n\n  useEffect(() => {\n    const $deckContainers = document.querySelectorAll('.deck-container');\n    if (minimized) {\n      // Similar to focusDeck in focus-deck.jsx\n      // Focus last deck\n      const page = $deckContainers[$deckContainers.length - 1]; // last one\n      if (page && page.tabIndex === -1) {\n        page.focus();\n      }\n    } else {\n      if (children) {\n        $deckContainers.forEach(($deckContainer) => {\n          $deckContainer.setAttribute('inert', '');\n        });\n      } else {\n        $deckContainers.forEach(($deckContainer) => {\n          $deckContainer.removeAttribute('inert');\n        });\n      }\n    }\n    return () => {\n      $deckContainers.forEach(($deckContainer) => {\n        $deckContainer.removeAttribute('inert');\n      });\n    };\n  }, [children, minimized]);\n\n  const Modal = (\n    <div\n      ref={(node) => {\n        modalRef.current = node;\n        escRef.current = node?.querySelector?.('[tabindex=\"-1\"]') || node;\n      }}\n      className={className}\n      onClick={(e) => {\n        onClick?.(e);\n        if (e.target === e.currentTarget) {\n          onClose?.(e);\n        }\n      }}\n      tabIndex={minimized ? 0 : '-1'}\n      inert={minimized}\n      onFocus={(e) => {\n        try {\n          if (e.target === e.currentTarget) {\n            const focusElement =\n              modalRef.current?.querySelector('[tabindex=\"-1\"]');\n            const isFocusable =\n              !!focusElement &&\n              getComputedStyle(focusElement)?.pointerEvents !== 'none';\n            if (focusElement && isFocusable) {\n              focusElement.focus();\n            }\n          }\n        } catch (err) {\n          console.error(err);\n        }\n      }}\n    >\n      {children}\n    </div>\n  );\n\n  return createPortal(Modal, $modalContainer);\n\n  // return createPortal(children, $modalContainer);\n}\n\nexport default Modal;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","import { unstable_batchedUpdates } from 'react-dom';\n\nconst isMenuOpen = state => !!state && state[0] === 'o';\nconst batchedUpdates = unstable_batchedUpdates || (callback => callback());\nconst values = Object.values || (obj => Object.keys(obj).map(key => obj[key]));\nconst floatEqual = (a, b, diff = 0.0001) => Math.abs(a - b) < diff;\nconst getTransition = (transition, name) => transition === true || !!(transition && transition[name]);\nconst safeCall = (fn, arg) => typeof fn === 'function' ? fn(arg) : fn;\nconst internalKey = '_szhsinMenu';\nconst getName = component => component[internalKey];\nconst defineName = (name, component) => Object.defineProperty(component, internalKey, {\n  value: name\n});\nconst mergeProps = (target, source) => {\n  source && Object.keys(source).forEach(key => {\n    const targetProp = target[key];\n    const sourceProp = source[key];\n    if (typeof sourceProp === 'function' && targetProp) {\n      target[key] = (...arg) => {\n        sourceProp(...arg);\n        targetProp(...arg);\n      };\n    } else {\n      target[key] = sourceProp;\n    }\n  });\n  return target;\n};\nconst parsePadding = paddingStr => {\n  if (typeof paddingStr !== 'string') return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n  const padding = paddingStr.trim().split(/\\s+/, 4).map(parseFloat);\n  const top = !isNaN(padding[0]) ? padding[0] : 0;\n  const right = !isNaN(padding[1]) ? padding[1] : top;\n  return {\n    top,\n    right,\n    bottom: !isNaN(padding[2]) ? padding[2] : top,\n    left: !isNaN(padding[3]) ? padding[3] : right\n  };\n};\nconst getScrollAncestor = node => {\n  while (node) {\n    node = node.parentNode;\n    if (!node || node === document.body || !node.parentNode) return;\n    const {\n      overflow,\n      overflowX,\n      overflowY\n    } = getComputedStyle(node);\n    if (/auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX)) return node;\n  }\n};\nfunction commonProps(isDisabled, isHovering) {\n  return {\n    'aria-disabled': isDisabled || undefined,\n    tabIndex: isHovering ? 0 : -1\n  };\n}\nfunction indexOfNode(nodeList, node) {\n  for (let i = 0; i < nodeList.length; i++) {\n    if (nodeList[i] === node) return i;\n  }\n  return -1;\n}\n\nexport { batchedUpdates, commonProps, defineName, floatEqual, getName, getScrollAncestor, getTransition, indexOfNode, isMenuOpen, mergeProps, parsePadding, safeCall, values };\n","import { oneOfType, string, func, object, bool, number, oneOf, exact } from 'prop-types';\n\nconst stylePropTypes = name => ({\n  [name ? `${name}ClassName` : 'className']: oneOfType([string, func])\n});\nconst menuPropTypes = {\n  className: string,\n  ...stylePropTypes('menu'),\n  arrowProps: object,\n  focusProps: object,\n  menuStyle: object,\n  arrow: bool,\n  setDownOverflow: bool,\n  gap: number,\n  shift: number,\n  align: /*#__PURE__*/oneOf(['start', 'center', 'end']),\n  direction: /*#__PURE__*/oneOf(['left', 'right', 'top', 'bottom']),\n  position: /*#__PURE__*/oneOf(['auto', 'anchor', 'initial']),\n  overflow: /*#__PURE__*/oneOf(['auto', 'visible', 'hidden'])\n};\nconst rootMenuPropTypes = {\n  ...menuPropTypes,\n  containerProps: object,\n  initialMounted: bool,\n  unmountOnClose: bool,\n  transition: /*#__PURE__*/oneOfType([bool, /*#__PURE__*/exact({\n    open: bool,\n    close: bool,\n    item: bool\n  })]),\n  transitionTimeout: number,\n  boundingBoxRef: object,\n  boundingBoxPadding: string,\n  reposition: /*#__PURE__*/oneOf(['auto', 'initial']),\n  repositionFlag: /*#__PURE__*/oneOfType([string, number]),\n  viewScroll: /*#__PURE__*/oneOf(['auto', 'close', 'initial']),\n  submenuOpenDelay: number,\n  submenuCloseDelay: number,\n  portal: /*#__PURE__*/oneOfType([bool, /*#__PURE__*/exact({\n    target: object,\n    stablePosition: bool\n  })]),\n  theming: string,\n  onItemClick: func\n};\nconst uncontrolledMenuPropTypes = {\n  instanceRef: /*#__PURE__*/oneOfType([object, func]),\n  onMenuChange: func\n};\n\nexport { menuPropTypes, rootMenuPropTypes, stylePropTypes, uncontrolledMenuPropTypes };\n","import { useMemo } from 'react';\n\nconst useBEM = ({\n  block,\n  element,\n  modifiers,\n  className\n}) => useMemo(() => {\n  const blockElement = element ? `${block}__${element}` : block;\n  let classString = blockElement;\n  modifiers && Object.keys(modifiers).forEach(name => {\n    const value = modifiers[name];\n    if (value) classString += ` ${blockElement}--${value === true ? name : `${name}-${value}`}`;\n  });\n  let expandedClassName = typeof className === 'function' ? className(modifiers) : className;\n  if (typeof expandedClassName === 'string') {\n    expandedClassName = expandedClassName.trim();\n    if (expandedClassName) classString += ` ${expandedClassName}`;\n  }\n  return classString;\n}, [block, element, modifiers, className]);\n\nexport { useBEM };\n","import { createContext } from 'react';\n\nconst menuContainerClass = 'szh-menu-container';\nconst menuClass = 'szh-menu';\nconst menuButtonClass = 'szh-menu-button';\nconst menuArrowClass = 'arrow';\nconst menuItemClass = 'item';\nconst menuDividerClass = 'divider';\nconst menuHeaderClass = 'header';\nconst menuGroupClass = 'group';\nconst subMenuClass = 'submenu';\nconst radioGroupClass = 'radio-group';\nconst HoverItemContext = /*#__PURE__*/createContext();\nconst MenuListItemContext = /*#__PURE__*/createContext({});\nconst MenuListContext = /*#__PURE__*/createContext({});\nconst EventHandlersContext = /*#__PURE__*/createContext({});\nconst RadioGroupContext = /*#__PURE__*/createContext({});\nconst SettingsContext = /*#__PURE__*/createContext({});\nconst Keys = /*#__PURE__*/Object.freeze({\n  ENTER: 'Enter',\n  ESC: 'Escape',\n  SPACE: ' ',\n  HOME: 'Home',\n  END: 'End',\n  LEFT: 'ArrowLeft',\n  RIGHT: 'ArrowRight',\n  UP: 'ArrowUp',\n  DOWN: 'ArrowDown'\n});\nconst HoverActionTypes = /*#__PURE__*/Object.freeze({\n  RESET: 0,\n  SET: 1,\n  UNSET: 2,\n  INCREASE: 3,\n  DECREASE: 4,\n  FIRST: 5,\n  LAST: 6,\n  SET_INDEX: 7\n});\nconst CloseReason = /*#__PURE__*/Object.freeze({\n  CLICK: 'click',\n  CANCEL: 'cancel',\n  BLUR: 'blur',\n  SCROLL: 'scroll'\n});\nconst FocusPositions = /*#__PURE__*/Object.freeze({\n  FIRST: 'first',\n  LAST: 'last'\n});\nconst MenuStateMap = /*#__PURE__*/Object.freeze({\n  entering: 'opening',\n  entered: 'open',\n  exiting: 'closing',\n  exited: 'closed'\n});\nconst positionAbsolute = 'absolute';\nconst roleNone = 'presentation';\nconst roleMenuitem = 'menuitem';\nconst dummyItemProps = {\n  'aria-hidden': true,\n  role: roleMenuitem\n};\n\nexport { CloseReason, EventHandlersContext, FocusPositions, HoverActionTypes, HoverItemContext, Keys, MenuListContext, MenuListItemContext, MenuStateMap, RadioGroupContext, SettingsContext, dummyItemProps, menuArrowClass, menuButtonClass, menuClass, menuContainerClass, menuDividerClass, menuGroupClass, menuHeaderClass, menuItemClass, positionAbsolute, radioGroupClass, roleMenuitem, roleNone, subMenuClass };\n","import { useMemo } from 'react';\nimport { jsx } from 'react/jsx-runtime';\nimport { mergeProps, getTransition, safeCall } from '../utils/utils.js';\nimport { useBEM } from '../hooks/useBEM.js';\nimport { menuContainerClass, Keys, CloseReason } from '../utils/constants.js';\n\nconst MenuContainer = ({\n  className,\n  containerRef,\n  containerProps,\n  children,\n  isOpen,\n  theming,\n  transition,\n  onClose\n}) => {\n  const itemTransition = getTransition(transition, 'item');\n  const onKeyDown = ({\n    key\n  }) => {\n    switch (key) {\n      case Keys.ESC:\n        safeCall(onClose, {\n          key,\n          reason: CloseReason.CANCEL\n        });\n        break;\n    }\n  };\n  const onBlur = e => {\n    if (isOpen && !e.currentTarget.contains(e.relatedTarget)) {\n      safeCall(onClose, {\n        reason: CloseReason.BLUR\n      });\n    }\n  };\n  return /*#__PURE__*/jsx(\"div\", {\n    ...mergeProps({\n      onKeyDown,\n      onBlur\n    }, containerProps),\n    className: useBEM({\n      block: menuContainerClass,\n      modifiers: useMemo(() => ({\n        theme: theming,\n        itemTransition\n      }), [theming, itemTransition]),\n      className\n    }),\n    style: {\n      position: 'absolute',\n      ...(containerProps == null ? void 0 : containerProps.style)\n    },\n    ref: containerRef,\n    children: children\n  });\n};\n\nexport { MenuContainer };\n","const createSubmenuCtx = () => {\n  let timer,\n    count = 0;\n  return {\n    toggle: isOpen => {\n      isOpen ? count++ : count--;\n      count = Math.max(count, 0);\n    },\n    on: (closeDelay, pending, settled) => {\n      if (count) {\n        if (!timer) timer = setTimeout(() => {\n          timer = 0;\n          pending();\n        }, closeDelay);\n      } else {\n        settled == null || settled();\n      }\n    },\n    off: () => {\n      if (timer) {\n        clearTimeout(timer);\n        timer = 0;\n      }\n    }\n  };\n};\n\nexport { createSubmenuCtx };\n","import { useState, useRef, useCallback } from 'react';\nimport { HoverActionTypes } from '../utils/constants.js';\nimport { indexOfNode } from '../utils/utils.js';\n\nconst useItems = (menuRef, focusRef) => {\n  const [hoverItem, setHoverItem] = useState();\n  const stateRef = useRef({\n    items: [],\n    hoverIndex: -1,\n    sorted: false\n  });\n  const mutableState = stateRef.current;\n  const updateItems = useCallback((item, isMounted) => {\n    const {\n      items\n    } = mutableState;\n    if (!item) {\n      mutableState.items = [];\n    } else if (isMounted) {\n      items.push(item);\n    } else {\n      const index = items.indexOf(item);\n      if (index > -1) {\n        items.splice(index, 1);\n        if (item.contains(document.activeElement)) {\n          focusRef.current.focus();\n          setHoverItem();\n        }\n      }\n    }\n    mutableState.hoverIndex = -1;\n    mutableState.sorted = false;\n  }, [mutableState, focusRef]);\n  const dispatch = useCallback((actionType, item, nextIndex) => {\n    const {\n      items,\n      hoverIndex\n    } = mutableState;\n    const sortItems = () => {\n      if (mutableState.sorted) return;\n      const orderedNodes = menuRef.current.querySelectorAll('.szh-menu__item');\n      items.sort((a, b) => indexOfNode(orderedNodes, a) - indexOfNode(orderedNodes, b));\n      mutableState.sorted = true;\n    };\n    let index = -1,\n      newItem = undefined;\n    switch (actionType) {\n      case HoverActionTypes.RESET:\n        break;\n      case HoverActionTypes.SET:\n        newItem = item;\n        break;\n      case HoverActionTypes.UNSET:\n        newItem = prevItem => prevItem === item ? undefined : prevItem;\n        break;\n      case HoverActionTypes.FIRST:\n        sortItems();\n        index = 0;\n        newItem = items[index];\n        break;\n      case HoverActionTypes.LAST:\n        sortItems();\n        index = items.length - 1;\n        newItem = items[index];\n        break;\n      case HoverActionTypes.SET_INDEX:\n        sortItems();\n        index = nextIndex;\n        newItem = items[index];\n        break;\n      case HoverActionTypes.INCREASE:\n        sortItems();\n        index = hoverIndex;\n        if (index < 0) index = items.indexOf(item);\n        index++;\n        if (index >= items.length) index = 0;\n        newItem = items[index];\n        break;\n      case HoverActionTypes.DECREASE:\n        sortItems();\n        index = hoverIndex;\n        if (index < 0) index = items.indexOf(item);\n        index--;\n        if (index < 0) index = items.length - 1;\n        newItem = items[index];\n        break;\n      default:\n        if (process.env.NODE_ENV !== 'production') throw new Error(`[React-Menu] Unknown hover action type: ${actionType}`);\n    }\n    if (!newItem) index = -1;\n    setHoverItem(newItem);\n    mutableState.hoverIndex = index;\n  }, [menuRef, mutableState]);\n  return {\n    hoverItem,\n    dispatch,\n    updateItems\n  };\n};\n\nexport { useItems };\n","import { parsePadding } from '../utils/utils.js';\n\nconst getPositionHelpers = (containerRef, menuRef, menuScroll, boundingBoxPadding) => {\n  const menuRect = menuRef.current.getBoundingClientRect();\n  const containerRect = containerRef.current.getBoundingClientRect();\n  const boundingRect = menuScroll === window ? {\n    left: 0,\n    top: 0,\n    right: document.documentElement.clientWidth,\n    bottom: window.innerHeight\n  } : menuScroll.getBoundingClientRect();\n  const padding = parsePadding(boundingBoxPadding);\n  const getLeftOverflow = x => x + containerRect.left - boundingRect.left - padding.left;\n  const getRightOverflow = x => x + containerRect.left + menuRect.width - boundingRect.right + padding.right;\n  const getTopOverflow = y => y + containerRect.top - boundingRect.top - padding.top;\n  const getBottomOverflow = y => y + containerRect.top + menuRect.height - boundingRect.bottom + padding.bottom;\n  const confineHorizontally = x => {\n    let leftOverflow = getLeftOverflow(x);\n    if (leftOverflow < 0) {\n      x -= leftOverflow;\n    } else {\n      const rightOverflow = getRightOverflow(x);\n      if (rightOverflow > 0) {\n        x -= rightOverflow;\n        leftOverflow = getLeftOverflow(x);\n        if (leftOverflow < 0) x -= leftOverflow;\n      }\n    }\n    return x;\n  };\n  const confineVertically = y => {\n    let topOverflow = getTopOverflow(y);\n    if (topOverflow < 0) {\n      y -= topOverflow;\n    } else {\n      const bottomOverflow = getBottomOverflow(y);\n      if (bottomOverflow > 0) {\n        y -= bottomOverflow;\n        topOverflow = getTopOverflow(y);\n        if (topOverflow < 0) y -= topOverflow;\n      }\n    }\n    return y;\n  };\n  return {\n    menuRect,\n    containerRect,\n    getLeftOverflow,\n    getRightOverflow,\n    getTopOverflow,\n    getBottomOverflow,\n    confineHorizontally,\n    confineVertically\n  };\n};\n\nexport { getPositionHelpers };\n","const placeArrowVertical = ({\n  arrowRef,\n  menuY,\n  anchorRect,\n  containerRect,\n  menuRect\n}) => {\n  let y = anchorRect.top - containerRect.top - menuY + anchorRect.height / 2;\n  const offset = arrowRef.current.offsetHeight * 1.25;\n  y = Math.max(offset, y);\n  y = Math.min(y, menuRect.height - offset);\n  return y;\n};\n\nexport { placeArrowVertical };\n","import { placeArrowVertical } from './placeArrowVertical.js';\n\nconst placeLeftorRight = ({\n  anchorRect,\n  containerRect,\n  menuRect,\n  placeLeftorRightY,\n  placeLeftX,\n  placeRightX,\n  getLeftOverflow,\n  getRightOverflow,\n  confineHorizontally,\n  confineVertically,\n  arrowRef,\n  arrow,\n  direction,\n  position\n}) => {\n  let computedDirection = direction;\n  let y = placeLeftorRightY;\n  if (position !== 'initial') {\n    y = confineVertically(y);\n    if (position === 'anchor') {\n      y = Math.min(y, anchorRect.bottom - containerRect.top);\n      y = Math.max(y, anchorRect.top - containerRect.top - menuRect.height);\n    }\n  }\n  let x, leftOverflow, rightOverflow;\n  if (computedDirection === 'left') {\n    x = placeLeftX;\n    if (position !== 'initial') {\n      leftOverflow = getLeftOverflow(x);\n      if (leftOverflow < 0) {\n        rightOverflow = getRightOverflow(placeRightX);\n        if (rightOverflow <= 0 || -leftOverflow > rightOverflow) {\n          x = placeRightX;\n          computedDirection = 'right';\n        }\n      }\n    }\n  } else {\n    x = placeRightX;\n    if (position !== 'initial') {\n      rightOverflow = getRightOverflow(x);\n      if (rightOverflow > 0) {\n        leftOverflow = getLeftOverflow(placeLeftX);\n        if (leftOverflow >= 0 || -leftOverflow < rightOverflow) {\n          x = placeLeftX;\n          computedDirection = 'left';\n        }\n      }\n    }\n  }\n  if (position === 'auto') x = confineHorizontally(x);\n  const arrowY = arrow ? placeArrowVertical({\n    menuY: y,\n    arrowRef,\n    anchorRect,\n    containerRect,\n    menuRect\n  }) : undefined;\n  return {\n    arrowY,\n    x,\n    y,\n    computedDirection\n  };\n};\n\nexport { placeLeftorRight };\n","const placeArrowHorizontal = ({\n  arrowRef,\n  menuX,\n  anchorRect,\n  containerRect,\n  menuRect\n}) => {\n  let x = anchorRect.left - containerRect.left - menuX + anchorRect.width / 2;\n  const offset = arrowRef.current.offsetWidth * 1.25;\n  x = Math.max(offset, x);\n  x = Math.min(x, menuRect.width - offset);\n  return x;\n};\n\nexport { placeArrowHorizontal };\n","import { placeArrowHorizontal } from './placeArrowHorizontal.js';\n\nconst placeToporBottom = ({\n  anchorRect,\n  containerRect,\n  menuRect,\n  placeToporBottomX,\n  placeTopY,\n  placeBottomY,\n  getTopOverflow,\n  getBottomOverflow,\n  confineHorizontally,\n  confineVertically,\n  arrowRef,\n  arrow,\n  direction,\n  position\n}) => {\n  let computedDirection = direction === 'top' ? 'top' : 'bottom';\n  let x = placeToporBottomX;\n  if (position !== 'initial') {\n    x = confineHorizontally(x);\n    if (position === 'anchor') {\n      x = Math.min(x, anchorRect.right - containerRect.left);\n      x = Math.max(x, anchorRect.left - containerRect.left - menuRect.width);\n    }\n  }\n  let y, topOverflow, bottomOverflow;\n  if (computedDirection === 'top') {\n    y = placeTopY;\n    if (position !== 'initial') {\n      topOverflow = getTopOverflow(y);\n      if (topOverflow < 0) {\n        bottomOverflow = getBottomOverflow(placeBottomY);\n        if (bottomOverflow <= 0 || -topOverflow > bottomOverflow) {\n          y = placeBottomY;\n          computedDirection = 'bottom';\n        }\n      }\n    }\n  } else {\n    y = placeBottomY;\n    if (position !== 'initial') {\n      bottomOverflow = getBottomOverflow(y);\n      if (bottomOverflow > 0) {\n        topOverflow = getTopOverflow(placeTopY);\n        if (topOverflow >= 0 || -topOverflow < bottomOverflow) {\n          y = placeTopY;\n          computedDirection = 'top';\n        }\n      }\n    }\n  }\n  if (position === 'auto') y = confineVertically(y);\n  const arrowX = arrow ? placeArrowHorizontal({\n    menuX: x,\n    arrowRef,\n    anchorRect,\n    containerRect,\n    menuRect\n  }) : undefined;\n  return {\n    arrowX,\n    x,\n    y,\n    computedDirection\n  };\n};\n\nexport { placeToporBottom };\n","import { placeLeftorRight } from './placeLeftorRight.js';\nimport { placeToporBottom } from './placeToporBottom.js';\n\nconst positionMenu = ({\n  arrow,\n  align,\n  direction,\n  gap,\n  shift,\n  position,\n  anchorRect,\n  arrowRef,\n  positionHelpers\n}) => {\n  const {\n    menuRect,\n    containerRect\n  } = positionHelpers;\n  const isHorizontal = direction === 'left' || direction === 'right';\n  let horizontalOffset = isHorizontal ? gap : shift;\n  let verticalOffset = isHorizontal ? shift : gap;\n  if (arrow) {\n    const arrowElt = arrowRef.current;\n    if (isHorizontal) {\n      horizontalOffset += arrowElt.offsetWidth;\n    } else {\n      verticalOffset += arrowElt.offsetHeight;\n    }\n  }\n  const placeLeftX = anchorRect.left - containerRect.left - menuRect.width - horizontalOffset;\n  const placeRightX = anchorRect.right - containerRect.left + horizontalOffset;\n  const placeTopY = anchorRect.top - containerRect.top - menuRect.height - verticalOffset;\n  const placeBottomY = anchorRect.bottom - containerRect.top + verticalOffset;\n  let placeToporBottomX, placeLeftorRightY;\n  if (align === 'end') {\n    placeToporBottomX = anchorRect.right - containerRect.left - menuRect.width;\n    placeLeftorRightY = anchorRect.bottom - containerRect.top - menuRect.height;\n  } else if (align === 'center') {\n    placeToporBottomX = anchorRect.left - containerRect.left - (menuRect.width - anchorRect.width) / 2;\n    placeLeftorRightY = anchorRect.top - containerRect.top - (menuRect.height - anchorRect.height) / 2;\n  } else {\n    placeToporBottomX = anchorRect.left - containerRect.left;\n    placeLeftorRightY = anchorRect.top - containerRect.top;\n  }\n  placeToporBottomX += horizontalOffset;\n  placeLeftorRightY += verticalOffset;\n  const options = {\n    ...positionHelpers,\n    anchorRect,\n    placeLeftX,\n    placeRightX,\n    placeLeftorRightY,\n    placeTopY,\n    placeBottomY,\n    placeToporBottomX,\n    arrowRef,\n    arrow,\n    direction,\n    position\n  };\n  switch (direction) {\n    case 'left':\n    case 'right':\n      return placeLeftorRight(options);\n    case 'top':\n    case 'bottom':\n    default:\n      return placeToporBottom(options);\n  }\n};\n\nexport { positionMenu };\n","import { useLayoutEffect, useEffect } from 'react';\n\nconst useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;\n\nexport { useIsomorphicLayoutEffect as useLayoutEffect };\n","import { useMemo } from 'react';\n\nfunction setRef(ref, instance) {\n  typeof ref === 'function' ? ref(instance) : ref.current = instance;\n}\nconst useCombinedRef = (refA, refB) => useMemo(() => {\n  if (!refA) return refB;\n  if (!refB) return refA;\n  return instance => {\n    setRef(refA, instance);\n    setRef(refB, instance);\n  };\n}, [refA, refB]);\n\nexport { useCombinedRef };\n","import { useState, useReducer, useContext, useRef, useCallback, useEffect, useMemo } from 'react';\nimport { flushSync } from 'react-dom';\nimport { MenuContainer } from './MenuContainer.js';\nimport { jsxs, jsx } from 'react/jsx-runtime';\nimport { createSubmenuCtx } from '../utils/submenuCtx.js';\nimport { SettingsContext, MenuListContext, HoverActionTypes, menuClass, menuArrowClass, positionAbsolute, dummyItemProps, MenuListItemContext, HoverItemContext, Keys, CloseReason, FocusPositions } from '../utils/constants.js';\nimport { useItems } from '../hooks/useItems.js';\nimport { getScrollAncestor, floatEqual, commonProps, mergeProps, safeCall, isMenuOpen, getTransition, batchedUpdates } from '../utils/utils.js';\nimport { getPositionHelpers } from '../positionUtils/getPositionHelpers.js';\nimport { positionMenu } from '../positionUtils/positionMenu.js';\nimport { useLayoutEffect as useIsomorphicLayoutEffect } from '../hooks/useIsomorphicLayoutEffect.js';\nimport { useBEM } from '../hooks/useBEM.js';\nimport { useCombinedRef } from '../hooks/useCombinedRef.js';\n\nconst offScreen = -9999;\nconst MenuList = ({\n  ariaLabel,\n  menuClassName,\n  menuStyle,\n  arrow,\n  arrowProps = {},\n  anchorPoint,\n  anchorRef,\n  containerRef,\n  containerProps,\n  focusProps,\n  externalRef,\n  parentScrollingRef,\n  align = 'start',\n  direction = 'bottom',\n  position = 'auto',\n  overflow = 'visible',\n  setDownOverflow,\n  repositionFlag,\n  captureFocus = true,\n  state,\n  endTransition,\n  isDisabled,\n  menuItemFocus,\n  gap = 0,\n  shift = 0,\n  children,\n  onClose,\n  ...restProps\n}) => {\n  const [menuPosition, setMenuPosition] = useState({\n    x: offScreen,\n    y: offScreen\n  });\n  const [arrowPosition, setArrowPosition] = useState({});\n  const [overflowData, setOverflowData] = useState();\n  const [expandedDirection, setExpandedDirection] = useState(direction);\n  const [submenuCtx] = useState(createSubmenuCtx);\n  const [reposSubmenu, forceReposSubmenu] = useReducer(c => c + 1, 1);\n  const {\n    transition,\n    boundingBoxRef,\n    boundingBoxPadding,\n    rootMenuRef,\n    rootAnchorRef,\n    scrollNodesRef,\n    reposition,\n    viewScroll,\n    submenuCloseDelay\n  } = useContext(SettingsContext);\n  const {\n    submenuCtx: parentSubmenuCtx,\n    reposSubmenu: reposFlag = repositionFlag\n  } = useContext(MenuListContext);\n  const menuRef = useRef(null);\n  const focusRef = useRef();\n  const arrowRef = useRef();\n  const prevOpen = useRef(false);\n  const latestMenuSize = useRef({\n    width: 0,\n    height: 0\n  });\n  const latestHandlePosition = useRef(() => {});\n  const {\n    hoverItem,\n    dispatch,\n    updateItems\n  } = useItems(menuRef, focusRef);\n  const isOpen = isMenuOpen(state);\n  const openTransition = getTransition(transition, 'open');\n  const closeTransition = getTransition(transition, 'close');\n  const scrollNodes = scrollNodesRef.current;\n  const onKeyDown = e => {\n    switch (e.key) {\n      case Keys.HOME:\n        dispatch(HoverActionTypes.FIRST);\n        break;\n      case Keys.END:\n        dispatch(HoverActionTypes.LAST);\n        break;\n      case Keys.UP:\n        dispatch(HoverActionTypes.DECREASE, hoverItem);\n        break;\n      case Keys.DOWN:\n        dispatch(HoverActionTypes.INCREASE, hoverItem);\n        break;\n      case Keys.SPACE:\n        if (e.target && e.target.className.indexOf(menuClass) !== -1) {\n          e.preventDefault();\n        }\n        return;\n      default:\n        return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  const onAnimationEnd = () => {\n    if (state === 'closing') {\n      setOverflowData();\n    }\n    safeCall(endTransition);\n  };\n  const onPointerMove = e => {\n    e.stopPropagation();\n    submenuCtx.on(submenuCloseDelay, () => {\n      dispatch(HoverActionTypes.RESET);\n      focusRef.current.focus();\n    });\n  };\n  const onPointerLeave = e => {\n    if (e.target === e.currentTarget) submenuCtx.off();\n  };\n  const handlePosition = useCallback(noOverflowCheck => {\n    var _anchorRef$current;\n    const anchorRect = anchorRef ? (_anchorRef$current = anchorRef.current) == null ? void 0 : _anchorRef$current.getBoundingClientRect() : anchorPoint ? {\n      left: anchorPoint.x,\n      right: anchorPoint.x,\n      top: anchorPoint.y,\n      bottom: anchorPoint.y,\n      width: 0,\n      height: 0\n    } : null;\n    if (!anchorRect) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('[React-Menu] Menu might not be positioned properly as one of the anchorRef or anchorPoint prop should be provided. If `anchorRef` is provided, the anchor must be mounted before menu is open.');\n      }\n      return;\n    }\n    if (!scrollNodes.menu) {\n      scrollNodes.menu = (boundingBoxRef ? boundingBoxRef.current : getScrollAncestor(rootMenuRef.current)) || window;\n    }\n    const positionHelpers = getPositionHelpers(containerRef, menuRef, scrollNodes.menu, boundingBoxPadding);\n    let {\n      arrowX,\n      arrowY,\n      x,\n      y,\n      computedDirection\n    } = positionMenu({\n      arrow,\n      align,\n      direction,\n      gap,\n      shift,\n      position,\n      anchorRect,\n      arrowRef,\n      positionHelpers\n    });\n    const {\n      menuRect\n    } = positionHelpers;\n    let menuHeight = menuRect.height;\n    if (!noOverflowCheck && overflow !== 'visible') {\n      const {\n        getTopOverflow,\n        getBottomOverflow\n      } = positionHelpers;\n      let height, overflowAmt;\n      const prevHeight = latestMenuSize.current.height;\n      const bottomOverflow = getBottomOverflow(y);\n      if (bottomOverflow > 0 || floatEqual(bottomOverflow, 0) && floatEqual(menuHeight, prevHeight)) {\n        height = menuHeight - bottomOverflow;\n        overflowAmt = bottomOverflow;\n      } else {\n        const topOverflow = getTopOverflow(y);\n        if (topOverflow < 0 || floatEqual(topOverflow, 0) && floatEqual(menuHeight, prevHeight)) {\n          height = menuHeight + topOverflow;\n          overflowAmt = 0 - topOverflow;\n          if (height >= 0) y -= topOverflow;\n        }\n      }\n      if (height >= 0) {\n        menuHeight = height;\n        setOverflowData({\n          height,\n          overflowAmt\n        });\n      } else {\n        setOverflowData();\n      }\n    }\n    if (arrow) setArrowPosition({\n      x: arrowX,\n      y: arrowY\n    });\n    setMenuPosition({\n      x,\n      y\n    });\n    setExpandedDirection(computedDirection);\n    latestMenuSize.current = {\n      width: menuRect.width,\n      height: menuHeight\n    };\n  }, [arrow, align, boundingBoxPadding, direction, gap, shift, position, overflow, anchorPoint, anchorRef, containerRef, boundingBoxRef, rootMenuRef, scrollNodes]);\n  useIsomorphicLayoutEffect(() => {\n    if (isOpen) {\n      handlePosition();\n      if (prevOpen.current) forceReposSubmenu();\n    }\n    prevOpen.current = isOpen;\n    latestHandlePosition.current = handlePosition;\n  }, [isOpen, handlePosition, reposFlag]);\n  useIsomorphicLayoutEffect(() => {\n    if (overflowData && !setDownOverflow) menuRef.current.scrollTop = 0;\n  }, [overflowData, setDownOverflow]);\n  useIsomorphicLayoutEffect(() => updateItems, [updateItems]);\n  useEffect(() => {\n    let {\n      menu: menuScroll\n    } = scrollNodes;\n    if (!isOpen || !menuScroll) return;\n    menuScroll = menuScroll.addEventListener ? menuScroll : window;\n    if (!scrollNodes.anchors) {\n      scrollNodes.anchors = [];\n      let anchorScroll = getScrollAncestor(rootAnchorRef && rootAnchorRef.current);\n      while (anchorScroll && anchorScroll !== menuScroll) {\n        scrollNodes.anchors.push(anchorScroll);\n        anchorScroll = getScrollAncestor(anchorScroll);\n      }\n    }\n    let scroll = viewScroll;\n    if (scrollNodes.anchors.length && scroll === 'initial') scroll = 'auto';\n    if (scroll === 'initial') return;\n    const handleScroll = () => {\n      if (scroll === 'auto') {\n        batchedUpdates(() => handlePosition(true));\n      } else {\n        safeCall(onClose, {\n          reason: CloseReason.SCROLL\n        });\n      }\n    };\n    const scrollObservers = scrollNodes.anchors.concat(viewScroll !== 'initial' ? menuScroll : []);\n    scrollObservers.forEach(o => o.addEventListener('scroll', handleScroll));\n    return () => scrollObservers.forEach(o => o.removeEventListener('scroll', handleScroll));\n  }, [rootAnchorRef, scrollNodes, isOpen, onClose, viewScroll, handlePosition]);\n  const hasOverflow = !!overflowData && overflowData.overflowAmt > 0;\n  useEffect(() => {\n    if (hasOverflow || !isOpen || !parentScrollingRef) return;\n    const handleScroll = () => batchedUpdates(handlePosition);\n    const parentScroll = parentScrollingRef.current;\n    parentScroll.addEventListener('scroll', handleScroll);\n    return () => parentScroll.removeEventListener('scroll', handleScroll);\n  }, [isOpen, hasOverflow, parentScrollingRef, handlePosition]);\n  useEffect(() => {\n    if (typeof ResizeObserver !== 'function' || reposition === 'initial') return;\n    const resizeObserver = new ResizeObserver(([entry]) => {\n      const {\n        borderBoxSize,\n        target\n      } = entry;\n      let width, height;\n      if (borderBoxSize) {\n        const {\n          inlineSize,\n          blockSize\n        } = borderBoxSize[0] || borderBoxSize;\n        width = inlineSize;\n        height = blockSize;\n      } else {\n        const borderRect = target.getBoundingClientRect();\n        width = borderRect.width;\n        height = borderRect.height;\n      }\n      if (width === 0 || height === 0) return;\n      if (floatEqual(width, latestMenuSize.current.width, 1) && floatEqual(height, latestMenuSize.current.height, 1)) return;\n      flushSync(() => {\n        latestHandlePosition.current();\n        forceReposSubmenu();\n      });\n    });\n    const observeTarget = menuRef.current;\n    resizeObserver.observe(observeTarget, {\n      box: 'border-box'\n    });\n    return () => resizeObserver.unobserve(observeTarget);\n  }, [reposition]);\n  useEffect(() => {\n    if (!isOpen) {\n      dispatch(HoverActionTypes.RESET);\n      if (!closeTransition) setOverflowData();\n      return;\n    }\n    const {\n      position,\n      alwaysUpdate\n    } = menuItemFocus || {};\n    const setItemFocus = () => {\n      if (position === FocusPositions.FIRST) {\n        dispatch(HoverActionTypes.FIRST);\n      } else if (position === FocusPositions.LAST) {\n        dispatch(HoverActionTypes.LAST);\n      } else if (position >= -1) {\n        dispatch(HoverActionTypes.SET_INDEX, undefined, position);\n      }\n    };\n    if (alwaysUpdate) {\n      setItemFocus();\n    } else if (captureFocus) {\n      const id = setTimeout(() => {\n        const menuElt = menuRef.current;\n        if (menuElt && !menuElt.contains(document.activeElement)) {\n          focusRef.current.focus();\n          setItemFocus();\n        }\n      }, openTransition ? 170 : 100);\n      return () => clearTimeout(id);\n    }\n  }, [isOpen, openTransition, closeTransition, captureFocus, menuItemFocus, dispatch]);\n  const itemContext = useMemo(() => ({\n    isParentOpen: isOpen,\n    submenuCtx,\n    dispatch,\n    updateItems\n  }), [isOpen, submenuCtx, dispatch, updateItems]);\n  let maxHeight, overflowAmt;\n  if (overflowData) {\n    setDownOverflow ? overflowAmt = overflowData.overflowAmt : maxHeight = overflowData.height;\n  }\n  const listContext = useMemo(() => ({\n    reposSubmenu,\n    submenuCtx,\n    overflow,\n    overflowAmt,\n    parentMenuRef: menuRef,\n    parentDir: expandedDirection\n  }), [reposSubmenu, submenuCtx, overflow, overflowAmt, expandedDirection]);\n  const overflowStyle = maxHeight >= 0 ? {\n    maxHeight,\n    overflow\n  } : undefined;\n  const modifiers = useMemo(() => ({\n    state,\n    dir: expandedDirection\n  }), [state, expandedDirection]);\n  const arrowModifiers = useMemo(() => ({\n    dir: expandedDirection\n  }), [expandedDirection]);\n  const _arrowClassName = useBEM({\n    block: menuClass,\n    element: menuArrowClass,\n    modifiers: arrowModifiers,\n    className: arrowProps.className\n  });\n  const menu = /*#__PURE__*/jsxs(\"ul\", {\n    role: \"menu\",\n    \"aria-label\": ariaLabel,\n    ...commonProps(isDisabled),\n    ...mergeProps({\n      onPointerEnter: parentSubmenuCtx == null ? void 0 : parentSubmenuCtx.off,\n      onPointerMove,\n      onPointerLeave,\n      onKeyDown,\n      onAnimationEnd\n    }, restProps),\n    ref: useCombinedRef(externalRef, menuRef),\n    className: useBEM({\n      block: menuClass,\n      modifiers,\n      className: menuClassName\n    }),\n    style: {\n      ...menuStyle,\n      ...overflowStyle,\n      margin: 0,\n      display: state === 'closed' ? 'none' : undefined,\n      position: positionAbsolute,\n      left: menuPosition.x,\n      top: menuPosition.y\n    },\n    children: [/*#__PURE__*/jsx(\"li\", {\n      tabIndex: -1,\n      style: {\n        position: positionAbsolute,\n        left: 0,\n        top: 0,\n        display: 'block',\n        outline: 'none'\n      },\n      ref: focusRef,\n      ...dummyItemProps,\n      ...focusProps\n    }), arrow && /*#__PURE__*/jsx(\"li\", {\n      ...dummyItemProps,\n      ...arrowProps,\n      className: _arrowClassName,\n      style: {\n        display: 'block',\n        position: positionAbsolute,\n        left: arrowPosition.x,\n        top: arrowPosition.y,\n        ...arrowProps.style\n      },\n      ref: arrowRef\n    }), /*#__PURE__*/jsx(MenuListContext.Provider, {\n      value: listContext,\n      children: /*#__PURE__*/jsx(MenuListItemContext.Provider, {\n        value: itemContext,\n        children: /*#__PURE__*/jsx(HoverItemContext.Provider, {\n          value: hoverItem,\n          children: safeCall(children, modifiers)\n        })\n      })\n    })]\n  });\n  return containerProps ? /*#__PURE__*/jsx(MenuContainer, {\n    ...containerProps,\n    isOpen: isOpen,\n    children: menu\n  }) : menu;\n};\n\nexport { MenuList };\n","import { forwardRef, useRef, useMemo } from 'react';\nimport { createPortal } from 'react-dom';\nimport { oneOf, exact, number, object, bool, oneOfType, string, func } from 'prop-types';\nimport { MenuList } from './MenuList.js';\nimport { jsx } from 'react/jsx-runtime';\nimport { rootMenuPropTypes } from '../utils/propTypes.js';\nimport { safeCall, values } from '../utils/utils.js';\nimport { MenuStateMap, Keys, CloseReason, SettingsContext, EventHandlersContext } from '../utils/constants.js';\n\nconst ControlledMenu = /*#__PURE__*/forwardRef(function ControlledMenu({\n  'aria-label': ariaLabel,\n  className,\n  containerProps,\n  initialMounted,\n  unmountOnClose,\n  transition,\n  transitionTimeout,\n  boundingBoxRef,\n  boundingBoxPadding,\n  reposition = 'auto',\n  submenuOpenDelay = 300,\n  submenuCloseDelay = 150,\n  viewScroll = 'initial',\n  portal,\n  theming,\n  onItemClick,\n  ...restProps\n}, externalRef) {\n  const containerRef = useRef(null);\n  const scrollNodesRef = useRef({});\n  const {\n    anchorRef,\n    state,\n    onClose\n  } = restProps;\n  const settings = useMemo(() => ({\n    initialMounted,\n    unmountOnClose,\n    transition,\n    transitionTimeout,\n    boundingBoxRef,\n    boundingBoxPadding,\n    rootMenuRef: containerRef,\n    rootAnchorRef: anchorRef,\n    scrollNodesRef,\n    reposition,\n    viewScroll,\n    submenuOpenDelay,\n    submenuCloseDelay\n  }), [initialMounted, unmountOnClose, transition, transitionTimeout, anchorRef, boundingBoxRef, boundingBoxPadding, reposition, viewScroll, submenuOpenDelay, submenuCloseDelay]);\n  const eventHandlers = useMemo(() => ({\n    handleClick(event, isCheckorRadio) {\n      if (!event.stopPropagation) safeCall(onItemClick, event);\n      let keepOpen = event.keepOpen;\n      if (keepOpen === undefined) {\n        keepOpen = isCheckorRadio && event.key === Keys.SPACE;\n      }\n      if (!keepOpen) {\n        safeCall(onClose, {\n          value: event.value,\n          key: event.key,\n          reason: CloseReason.CLICK\n        });\n      }\n    },\n    handleClose(key) {\n      safeCall(onClose, {\n        key,\n        reason: CloseReason.CLICK\n      });\n    }\n  }), [onItemClick, onClose]);\n  if (!state) return null;\n  const menuList = /*#__PURE__*/jsx(SettingsContext.Provider, {\n    value: settings,\n    children: /*#__PURE__*/jsx(EventHandlersContext.Provider, {\n      value: eventHandlers,\n      children: /*#__PURE__*/jsx(MenuList, {\n        ...restProps,\n        ariaLabel: ariaLabel || 'Menu',\n        externalRef: externalRef,\n        containerRef: containerRef,\n        containerProps: {\n          className,\n          containerRef,\n          containerProps,\n          theming,\n          transition,\n          onClose\n        }\n      })\n    })\n  });\n  if (portal === true && typeof document !== 'undefined') {\n    return /*#__PURE__*/createPortal(menuList, document.body);\n  } else if (portal) {\n    return portal.target ? /*#__PURE__*/createPortal(menuList, portal.target) : portal.stablePosition ? null : menuList;\n  }\n  return menuList;\n});\nprocess.env.NODE_ENV !== \"production\" ? ControlledMenu.propTypes = {\n  ...rootMenuPropTypes,\n  state: /*#__PURE__*/oneOf( /*#__PURE__*/values(MenuStateMap)),\n  anchorPoint: /*#__PURE__*/exact({\n    x: number,\n    y: number\n  }),\n  anchorRef: object,\n  captureFocus: bool,\n  menuItemFocus: /*#__PURE__*/exact({\n    position: /*#__PURE__*/oneOfType([string, number]),\n    alwaysUpdate: bool\n  }),\n  onClose: func\n} : void 0;\n\nexport { ControlledMenu };\n","const PRE_ENTER = 0;\nconst ENTERING = 1;\nconst ENTERED = 2;\nconst PRE_EXIT = 3;\nconst EXITING = 4;\nconst EXITED = 5;\nconst UNMOUNTED = 6;\nconst STATUS = ['preEnter', 'entering', 'entered', 'preExit', 'exiting', 'exited', 'unmounted'];\nconst getState = status => ({\n  _s: status,\n  status: STATUS[status],\n  isEnter: status < PRE_EXIT,\n  isMounted: status !== UNMOUNTED,\n  isResolved: status === ENTERED || status > EXITING\n});\nconst startOrEnd = unmounted => unmounted ? UNMOUNTED : EXITED;\nconst getEndStatus = (status, unmountOnExit) => {\n  switch (status) {\n    case ENTERING:\n    case PRE_ENTER:\n      return ENTERED;\n    case EXITING:\n    case PRE_EXIT:\n      return startOrEnd(unmountOnExit);\n  }\n};\nconst getTimeout = timeout => typeof timeout === 'object' ? [timeout.enter, timeout.exit] : [timeout, timeout];\n\nexport { ENTERED, ENTERING, EXITED, EXITING, PRE_ENTER, PRE_EXIT, STATUS, UNMOUNTED, getEndStatus, getState, getTimeout, startOrEnd };\n","import { useState, useRef, useCallback, useEffect } from 'react';\nimport { getState, ENTERED, startOrEnd, getTimeout, getEndStatus, PRE_ENTER, ENTERING, PRE_EXIT, EXITING } from './utils.js';\n\nconst updateState = (status, setState, latestState, timeoutId, onChange) => {\n  clearTimeout(timeoutId.current);\n  const state = getState(status);\n  setState(state);\n  latestState.current = state;\n  onChange && onChange({\n    current: state\n  });\n};\nconst useTransition = ({\n  enter = true,\n  exit = true,\n  preEnter,\n  preExit,\n  timeout,\n  initialEntered,\n  mountOnEnter,\n  unmountOnExit,\n  onStateChange: onChange\n} = {}) => {\n  const [state, setState] = useState(() => getState(initialEntered ? ENTERED : startOrEnd(mountOnEnter)));\n  const latestState = useRef(state);\n  const timeoutId = useRef();\n  const [enterTimeout, exitTimeout] = getTimeout(timeout);\n  const endTransition = useCallback(() => {\n    const status = getEndStatus(latestState.current._s, unmountOnExit);\n    status && updateState(status, setState, latestState, timeoutId, onChange);\n  }, [onChange, unmountOnExit]);\n  const toggle = useCallback(toEnter => {\n    const transitState = status => {\n      updateState(status, setState, latestState, timeoutId, onChange);\n      switch (status) {\n        case ENTERING:\n          if (enterTimeout >= 0) timeoutId.current = setTimeout(endTransition, enterTimeout);\n          break;\n        case EXITING:\n          if (exitTimeout >= 0) timeoutId.current = setTimeout(endTransition, exitTimeout);\n          break;\n        case PRE_ENTER:\n        case PRE_EXIT:\n          timeoutId.current = setTimeout(() => transitState(status + 1), 0);\n          break;\n      }\n    };\n    const enterStage = latestState.current.isEnter;\n    if (typeof toEnter !== 'boolean') toEnter = !enterStage;\n    if (toEnter) {\n      !enterStage && transitState(enter ? preEnter ? PRE_ENTER : ENTERING : ENTERED);\n    } else {\n      enterStage && transitState(exit ? preExit ? PRE_EXIT : EXITING : startOrEnd(unmountOnExit));\n    }\n  }, [endTransition, onChange, enter, exit, preEnter, preExit, enterTimeout, exitTimeout, unmountOnExit]);\n  useEffect(() => () => clearTimeout(timeoutId.current), []);\n  return [state, toggle, endTransition];\n};\n\nexport { useTransition };\n","import { useTransition } from 'react-transition-state';\nimport { getTransition } from '../utils/utils.js';\nimport { MenuStateMap } from '../utils/constants.js';\n\nconst useMenuState = ({\n  initialOpen,\n  initialMounted,\n  unmountOnClose,\n  transition,\n  transitionTimeout = 500\n} = {}) => {\n  const [{\n    status\n  }, toggleMenu, endTransition] = useTransition({\n    initialEntered: initialOpen,\n    mountOnEnter: !initialMounted,\n    unmountOnExit: unmountOnClose,\n    timeout: transitionTimeout,\n    enter: getTransition(transition, 'open'),\n    exit: getTransition(transition, 'close')\n  });\n  return [{\n    state: MenuStateMap[status],\n    endTransition\n  }, toggleMenu];\n};\n\nexport { useMenuState };\n","import { useState } from 'react';\nimport { useMenuState } from './useMenuState.js';\n\nconst useMenuStateAndFocus = options => {\n  const [menuProps, toggleMenu] = useMenuState(options);\n  const [menuItemFocus, setMenuItemFocus] = useState();\n  const openMenu = (position, alwaysUpdate) => {\n    setMenuItemFocus({\n      position,\n      alwaysUpdate\n    });\n    toggleMenu(true);\n  };\n  return [{\n    menuItemFocus,\n    ...menuProps\n  }, toggleMenu, openMenu];\n};\n\nexport { useMenuStateAndFocus };\n","import { useState } from 'react';\n\nconst useClick = (state, onToggle) => {\n  if (process.env.NODE_ENV !== 'production' && typeof onToggle !== 'function') {\n    throw new Error('[React-Menu] useClick/useHover requires a function in the second parameter.');\n  }\n  const [skipOpen] = useState({});\n  return {\n    onMouseDown: () => {\n      skipOpen.v = state && state !== 'closed';\n    },\n    onClick: e => skipOpen.v ? skipOpen.v = false : onToggle(true, e)\n  };\n};\n\nexport { useClick };\n","import { useRef, useEffect } from 'react';\nimport { safeCall } from '../utils/utils.js';\n\nconst useMenuChange = (onMenuChange, isOpen) => {\n  const prevOpen = useRef(isOpen);\n  useEffect(() => {\n    if (prevOpen.current !== isOpen) safeCall(onMenuChange, {\n      open: isOpen\n    });\n    prevOpen.current = isOpen;\n  }, [onMenuChange, isOpen]);\n};\n\nexport { useMenuChange };\n","import { forwardRef, useRef, useCallback, useImperativeHandle, Fragment, cloneElement } from 'react';\nimport { oneOfType, element, func } from 'prop-types';\nimport { ControlledMenu } from './ControlledMenu.js';\nimport { jsxs, jsx } from 'react/jsx-runtime';\nimport { useMenuStateAndFocus } from '../hooks/useMenuStateAndFocus.js';\nimport { useClick } from '../hooks/useClick.js';\nimport { useCombinedRef } from '../hooks/useCombinedRef.js';\nimport { safeCall, mergeProps, getName, isMenuOpen } from '../utils/utils.js';\nimport { useMenuChange } from '../hooks/useMenuChange.js';\nimport { rootMenuPropTypes, uncontrolledMenuPropTypes } from '../utils/propTypes.js';\nimport { FocusPositions, Keys } from '../utils/constants.js';\n\nconst Menu = /*#__PURE__*/forwardRef(function Menu({\n  'aria-label': ariaLabel,\n  captureFocus: _,\n  initialOpen: _1,\n  menuButton,\n  instanceRef,\n  onMenuChange,\n  ...restProps\n}, externalRef) {\n  const [stateProps, toggleMenu, openMenu] = useMenuStateAndFocus(restProps);\n  const {\n    state\n  } = stateProps;\n  const isOpen = isMenuOpen(state);\n  const buttonRef = useRef(null);\n  const anchorProps = useClick(state, (_, e) => openMenu(!e.detail ? FocusPositions.FIRST : undefined));\n  const handleClose = useCallback(e => {\n    toggleMenu(false);\n    if (e.key) buttonRef.current.focus();\n  }, [toggleMenu]);\n  const onKeyDown = e => {\n    switch (e.key) {\n      case Keys.UP:\n        openMenu(FocusPositions.LAST);\n        break;\n      case Keys.DOWN:\n        openMenu(FocusPositions.FIRST);\n        break;\n      default:\n        return;\n    }\n    e.preventDefault();\n  };\n  const button = safeCall(menuButton, {\n    open: isOpen\n  });\n  if (!button || !button.type) throw new Error('Menu requires a menuButton prop.');\n  const buttonProps = {\n    ref: useCombinedRef(button.ref, buttonRef),\n    ...mergeProps({\n      onKeyDown,\n      ...anchorProps\n    }, button.props)\n  };\n  if (getName(button.type) === 'MenuButton') {\n    buttonProps.isOpen = isOpen;\n  }\n  const renderButton = /*#__PURE__*/cloneElement(button, buttonProps);\n  useMenuChange(onMenuChange, isOpen);\n  useImperativeHandle(instanceRef, () => ({\n    openMenu,\n    closeMenu: () => toggleMenu(false)\n  }));\n  return /*#__PURE__*/jsxs(Fragment, {\n    children: [renderButton, /*#__PURE__*/jsx(ControlledMenu, {\n      ...restProps,\n      ...stateProps,\n      \"aria-label\": ariaLabel || (typeof button.props.children === 'string' ? button.props.children : 'Menu'),\n      anchorRef: buttonRef,\n      ref: externalRef,\n      onClose: handleClose\n    })]\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? Menu.propTypes = {\n  ...rootMenuPropTypes,\n  ...uncontrolledMenuPropTypes,\n  menuButton: oneOfType([element, func]).isRequired\n} : void 0;\n\nexport { Menu };\n","import { forwardRef, useRef, useContext, memo } from 'react';\nimport { HoverItemContext } from './constants.js';\nimport { jsx } from 'react/jsx-runtime';\n\nconst withHovering = (name, WrappedComponent) => {\n  const Component = /*#__PURE__*/memo(WrappedComponent);\n  const WithHovering = /*#__PURE__*/forwardRef((props, ref) => {\n    const itemRef = useRef(null);\n    return /*#__PURE__*/jsx(Component, {\n      ...props,\n      itemRef: itemRef,\n      externalRef: ref,\n      isHovering: useContext(HoverItemContext) === itemRef.current\n    });\n  });\n  WithHovering.displayName = `WithHovering(${name})`;\n  return WithHovering;\n};\n\nexport { withHovering };\n","import { useLayoutEffect as useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.js';\n\nconst useItemEffect = (isDisabled, itemRef, updateItems) => {\n  useIsomorphicLayoutEffect(() => {\n    if (process.env.NODE_ENV !== 'production' && !updateItems) {\n      throw new Error(`[React-Menu] This menu item or submenu should be rendered under a menu: ${itemRef.current.outerHTML}`);\n    }\n    if (isDisabled) return;\n    const item = itemRef.current;\n    updateItems(item, true);\n    return () => {\n      updateItems(item);\n    };\n  }, [isDisabled, itemRef, updateItems]);\n};\n\nexport { useItemEffect };\n","import { useContext, useRef, useState, useEffect, useImperativeHandle, useMemo } from 'react';\nimport { createPortal } from 'react-dom';\nimport { bool, oneOf, oneOfType, node, func, shape } from 'prop-types';\nimport { MenuList } from './MenuList.js';\nimport { jsxs, jsx } from 'react/jsx-runtime';\nimport { withHovering } from '../utils/withHovering.js';\nimport { menuPropTypes, uncontrolledMenuPropTypes, stylePropTypes } from '../utils/propTypes.js';\nimport { useMenuStateAndFocus } from '../hooks/useMenuStateAndFocus.js';\nimport { useItemEffect } from '../hooks/useItemEffect.js';\nimport { useMenuChange } from '../hooks/useMenuChange.js';\nimport { useBEM } from '../hooks/useBEM.js';\nimport { SettingsContext, MenuListContext, MenuListItemContext, menuClass, subMenuClass, roleNone, roleMenuitem, menuItemClass, HoverActionTypes, Keys, FocusPositions } from '../utils/constants.js';\nimport { useCombinedRef } from '../hooks/useCombinedRef.js';\nimport { mergeProps, commonProps, safeCall, isMenuOpen, batchedUpdates } from '../utils/utils.js';\n\nconst SubMenu = /*#__PURE__*/withHovering('SubMenu', function SubMenu({\n  'aria-label': ariaLabel,\n  className,\n  disabled,\n  direction,\n  label,\n  openTrigger,\n  onMenuChange,\n  isHovering,\n  instanceRef,\n  itemRef,\n  captureFocus: _1,\n  repositionFlag: _2,\n  itemProps = {},\n  ...restProps\n}) {\n  const settings = useContext(SettingsContext);\n  const {\n    rootMenuRef,\n    submenuOpenDelay,\n    submenuCloseDelay\n  } = settings;\n  const {\n    parentMenuRef,\n    parentDir,\n    overflow: parentOverflow\n  } = useContext(MenuListContext);\n  const {\n    isParentOpen,\n    submenuCtx,\n    dispatch,\n    updateItems\n  } = useContext(MenuListItemContext);\n  const isPortal = parentOverflow !== 'visible';\n  const [stateProps, toggleMenu, _openMenu] = useMenuStateAndFocus(settings);\n  const {\n    state\n  } = stateProps;\n  const isDisabled = !!disabled;\n  const isOpen = isMenuOpen(state);\n  const containerRef = useRef(null);\n  const [timerId] = useState({\n    v: 0\n  });\n  const stopTimer = () => {\n    submenuCtx.off();\n    if (timerId.v) {\n      clearTimeout(timerId.v);\n      timerId.v = 0;\n    }\n  };\n  const openMenu = (...args) => {\n    stopTimer();\n    setHover();\n    !isDisabled && _openMenu(...args);\n  };\n  const setHover = () => !isHovering && !isDisabled && dispatch(HoverActionTypes.SET, itemRef.current);\n  const delayOpen = delay => {\n    setHover();\n    if (!openTrigger) timerId.v = setTimeout(() => batchedUpdates(openMenu), Math.max(delay, 0));\n  };\n  const onPointerMove = e => {\n    if (isDisabled) return;\n    e.stopPropagation();\n    if (timerId.v || isOpen) return;\n    submenuCtx.on(submenuCloseDelay, () => delayOpen(submenuOpenDelay - submenuCloseDelay), () => delayOpen(submenuOpenDelay));\n  };\n  const onPointerLeave = () => {\n    stopTimer();\n    if (!isOpen) dispatch(HoverActionTypes.UNSET, itemRef.current);\n  };\n  const onKeyDown = e => {\n    if (!isHovering) return;\n    switch (e.key) {\n      case Keys.ENTER:\n        e.preventDefault();\n      case Keys.SPACE:\n      case Keys.RIGHT:\n        openTrigger !== 'none' && openMenu(FocusPositions.FIRST);\n    }\n  };\n  const onKeyDownOfRoot = e => {\n    let handled = false;\n    switch (e.key) {\n      case Keys.LEFT:\n        if (isOpen) {\n          itemRef.current.focus();\n          toggleMenu(false);\n          handled = true;\n        }\n        break;\n      case Keys.RIGHT:\n        if (!isOpen) handled = true;\n        break;\n    }\n    if (handled) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  };\n  useItemEffect(isDisabled, itemRef, updateItems);\n  useMenuChange(onMenuChange, isOpen);\n  useEffect(() => submenuCtx.toggle(isOpen), [submenuCtx, isOpen]);\n  useEffect(() => () => clearTimeout(timerId.v), [timerId]);\n  useEffect(() => {\n    if (isHovering && isParentOpen) {\n      itemRef.current.focus();\n    } else {\n      toggleMenu(false);\n    }\n  }, [isHovering, isParentOpen, toggleMenu, itemRef]);\n  useImperativeHandle(instanceRef, () => ({\n    openMenu: (...args) => {\n      isParentOpen && openMenu(...args);\n    },\n    closeMenu: () => {\n      if (isOpen) {\n        itemRef.current.focus();\n        toggleMenu(false);\n      }\n    }\n  }));\n  const modifiers = useMemo(() => ({\n    open: isOpen,\n    hover: isHovering,\n    disabled: isDisabled,\n    submenu: true\n  }), [isOpen, isHovering, isDisabled]);\n  const {\n    ref: externalItemRef,\n    className: itemClassName,\n    ...restItemProps\n  } = itemProps;\n  const mergedItemProps = mergeProps({\n    onPointerEnter: submenuCtx.off,\n    onPointerMove,\n    onPointerLeave,\n    onKeyDown,\n    onClick: () => openTrigger !== 'none' && openMenu()\n  }, restItemProps);\n  const getMenuList = () => {\n    const menuList = /*#__PURE__*/jsx(MenuList, {\n      ...restProps,\n      ...stateProps,\n      ariaLabel: ariaLabel || (typeof label === 'string' ? label : 'Submenu'),\n      anchorRef: itemRef,\n      containerRef: isPortal ? rootMenuRef : containerRef,\n      direction: direction || (parentDir === 'right' || parentDir === 'left' ? parentDir : 'right'),\n      parentScrollingRef: isPortal && parentMenuRef,\n      isDisabled: isDisabled\n    });\n    const container = rootMenuRef.current;\n    return isPortal && container ? /*#__PURE__*/createPortal(menuList, container) : menuList;\n  };\n  return /*#__PURE__*/jsxs(\"li\", {\n    className: useBEM({\n      block: menuClass,\n      element: subMenuClass,\n      className\n    }),\n    style: {\n      position: 'relative'\n    },\n    role: roleNone,\n    ref: containerRef,\n    onKeyDown: onKeyDownOfRoot,\n    children: [/*#__PURE__*/jsx(\"div\", {\n      role: roleMenuitem,\n      \"aria-haspopup\": true,\n      \"aria-expanded\": isOpen,\n      ...commonProps(isDisabled, isHovering),\n      ...mergedItemProps,\n      ref: useCombinedRef(externalItemRef, itemRef),\n      className: useBEM({\n        block: menuClass,\n        element: menuItemClass,\n        modifiers,\n        className: itemClassName\n      }),\n      children: useMemo(() => safeCall(label, modifiers), [label, modifiers])\n    }), state && getMenuList()]\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? SubMenu.propTypes = {\n  ...menuPropTypes,\n  ...uncontrolledMenuPropTypes,\n  disabled: bool,\n  openTrigger: /*#__PURE__*/oneOf(['none', 'clickOnly']),\n  label: /*#__PURE__*/oneOfType([node, func]),\n  itemProps: /*#__PURE__*/shape({\n    ...stylePropTypes()\n  })\n} : void 0;\n\nexport { SubMenu };\n","import { useContext, useEffect } from 'react';\nimport { useItemEffect } from './useItemEffect.js';\nimport { SettingsContext, MenuListItemContext, HoverActionTypes } from '../utils/constants.js';\n\nconst useItemState = (itemRef, focusRef, isHovering, isDisabled) => {\n  const {\n    submenuCloseDelay\n  } = useContext(SettingsContext);\n  const {\n    isParentOpen,\n    submenuCtx,\n    dispatch,\n    updateItems\n  } = useContext(MenuListItemContext);\n  const setHover = () => {\n    !isHovering && !isDisabled && dispatch(HoverActionTypes.SET, itemRef.current);\n  };\n  const unsetHover = () => {\n    !isDisabled && dispatch(HoverActionTypes.UNSET, itemRef.current);\n  };\n  const onBlur = e => {\n    if (isHovering && !e.currentTarget.contains(e.relatedTarget)) unsetHover();\n  };\n  const onPointerMove = e => {\n    if (!isDisabled) {\n      e.stopPropagation();\n      submenuCtx.on(submenuCloseDelay, setHover, setHover);\n    }\n  };\n  const onPointerLeave = (_, keepHover) => {\n    submenuCtx.off();\n    !keepHover && unsetHover();\n  };\n  useItemEffect(isDisabled, itemRef, updateItems);\n  useEffect(() => {\n    if (isHovering && isParentOpen) {\n      focusRef.current && focusRef.current.focus();\n    }\n  }, [focusRef, isHovering, isParentOpen]);\n  return {\n    setHover,\n    onBlur,\n    onPointerMove,\n    onPointerLeave\n  };\n};\n\nexport { useItemState };\n","import { useContext, useMemo } from 'react';\nimport { any, string, oneOf, bool, oneOfType, node, func } from 'prop-types';\nimport { jsx } from 'react/jsx-runtime';\nimport { useItemState } from '../hooks/useItemState.js';\nimport { EventHandlersContext, RadioGroupContext, roleMenuitem, menuClass, menuItemClass, roleNone, Keys } from '../utils/constants.js';\nimport { useCombinedRef } from '../hooks/useCombinedRef.js';\nimport { useBEM } from '../hooks/useBEM.js';\nimport { withHovering } from '../utils/withHovering.js';\nimport { stylePropTypes } from '../utils/propTypes.js';\nimport { mergeProps, commonProps, safeCall } from '../utils/utils.js';\n\nconst MenuItem = /*#__PURE__*/withHovering('MenuItem', function MenuItem({\n  className,\n  value,\n  href,\n  type,\n  checked,\n  disabled,\n  children,\n  onClick,\n  isHovering,\n  itemRef,\n  externalRef,\n  ...restProps\n}) {\n  const isDisabled = !!disabled;\n  const {\n    setHover,\n    ...restStateProps\n  } = useItemState(itemRef, itemRef, isHovering, isDisabled);\n  const eventHandlers = useContext(EventHandlersContext);\n  const radioGroup = useContext(RadioGroupContext);\n  const isRadio = type === 'radio';\n  const isCheckBox = type === 'checkbox';\n  const isAnchor = !!href && !isDisabled && !isRadio && !isCheckBox;\n  const isChecked = isRadio ? radioGroup.value === value : isCheckBox ? !!checked : false;\n  const handleClick = e => {\n    if (isDisabled) {\n      e.stopPropagation();\n      e.preventDefault();\n      return;\n    }\n    const event = {\n      value,\n      syntheticEvent: e\n    };\n    if (e.key !== undefined) event.key = e.key;\n    if (isCheckBox) event.checked = !isChecked;\n    if (isRadio) event.name = radioGroup.name;\n    safeCall(onClick, event);\n    if (isRadio) safeCall(radioGroup.onRadioChange, event);\n    eventHandlers.handleClick(event, isCheckBox || isRadio);\n  };\n  const handleKeyDown = e => {\n    if (!isHovering) return;\n    switch (e.key) {\n      case Keys.ENTER:\n        e.preventDefault();\n      case Keys.SPACE:\n        isAnchor ? itemRef.current.click() : handleClick(e);\n    }\n  };\n  const modifiers = useMemo(() => ({\n    type,\n    disabled: isDisabled,\n    hover: isHovering,\n    checked: isChecked,\n    anchor: isAnchor\n  }), [type, isDisabled, isHovering, isChecked, isAnchor]);\n  const mergedProps = mergeProps({\n    ...restStateProps,\n    onPointerDown: setHover,\n    onKeyDown: handleKeyDown,\n    onClick: handleClick\n  }, restProps);\n  const menuItemProps = {\n    role: isRadio ? 'menuitemradio' : isCheckBox ? 'menuitemcheckbox' : roleMenuitem,\n    'aria-checked': isRadio || isCheckBox ? isChecked : undefined,\n    ...commonProps(isDisabled, isHovering),\n    ...mergedProps,\n    ref: useCombinedRef(externalRef, itemRef),\n    className: useBEM({\n      block: menuClass,\n      element: menuItemClass,\n      modifiers,\n      className\n    }),\n    children: useMemo(() => safeCall(children, modifiers), [children, modifiers])\n  };\n  return isAnchor ? /*#__PURE__*/jsx(\"li\", {\n    role: roleNone,\n    children: /*#__PURE__*/jsx(\"a\", {\n      href: href,\n      ...menuItemProps\n    })\n  }) : /*#__PURE__*/jsx(\"li\", {\n    ...menuItemProps\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? MenuItem.propTypes = {\n  ...stylePropTypes(),\n  value: any,\n  href: string,\n  type: /*#__PURE__*/oneOf(['checkbox', 'radio']),\n  checked: bool,\n  disabled: bool,\n  children: /*#__PURE__*/oneOfType([node, func]),\n  onClick: func\n} : void 0;\n\nexport { MenuItem };\n","import { useRef, useContext, useMemo } from 'react';\nimport { bool, func } from 'prop-types';\nimport { jsx } from 'react/jsx-runtime';\nimport { useItemState } from '../hooks/useItemState.js';\nimport { useCombinedRef } from '../hooks/useCombinedRef.js';\nimport { useBEM } from '../hooks/useBEM.js';\nimport { withHovering } from '../utils/withHovering.js';\nimport { stylePropTypes } from '../utils/propTypes.js';\nimport { EventHandlersContext, roleMenuitem, menuClass, menuItemClass } from '../utils/constants.js';\nimport { safeCall, mergeProps, commonProps } from '../utils/utils.js';\n\nconst FocusableItem = /*#__PURE__*/withHovering('FocusableItem', function FocusableItem({\n  className,\n  disabled,\n  children,\n  isHovering,\n  itemRef,\n  externalRef,\n  ...restProps\n}) {\n  const isDisabled = !!disabled;\n  const ref = useRef(null);\n  const {\n    setHover,\n    onPointerLeave,\n    ...restStateProps\n  } = useItemState(itemRef, ref, isHovering, isDisabled);\n  const {\n    handleClose\n  } = useContext(EventHandlersContext);\n  const modifiers = useMemo(() => ({\n    disabled: isDisabled,\n    hover: isHovering,\n    focusable: true\n  }), [isDisabled, isHovering]);\n  const renderChildren = useMemo(() => safeCall(children, {\n    ...modifiers,\n    ref,\n    closeMenu: handleClose\n  }), [children, modifiers, handleClose]);\n  const mergedProps = mergeProps({\n    ...restStateProps,\n    onPointerLeave: e => onPointerLeave(e, true),\n    onFocus: setHover\n  }, restProps);\n  return /*#__PURE__*/jsx(\"li\", {\n    role: roleMenuitem,\n    ...commonProps(isDisabled),\n    ...mergedProps,\n    ref: useCombinedRef(externalRef, itemRef),\n    className: useBEM({\n      block: menuClass,\n      element: menuItemClass,\n      modifiers,\n      className\n    }),\n    children: renderChildren\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? FocusableItem.propTypes = {\n  ...stylePropTypes(),\n  disabled: bool,\n  children: func\n} : void 0;\n\nexport { FocusableItem };\n","import { memo, forwardRef } from 'react';\nimport { jsx } from 'react/jsx-runtime';\nimport { useBEM } from '../hooks/useBEM.js';\nimport { menuClass, menuDividerClass } from '../utils/constants.js';\nimport { stylePropTypes } from '../utils/propTypes.js';\n\nconst MenuDivider = /*#__PURE__*/memo( /*#__PURE__*/forwardRef(function MenuDivider({\n  className,\n  ...restProps\n}, externalRef) {\n  return /*#__PURE__*/jsx(\"li\", {\n    role: \"separator\",\n    ...restProps,\n    ref: externalRef,\n    className: useBEM({\n      block: menuClass,\n      element: menuDividerClass,\n      className\n    })\n  });\n}));\nprocess.env.NODE_ENV !== \"production\" ? MenuDivider.propTypes = {\n  ...stylePropTypes()\n} : void 0;\n\nexport { MenuDivider };\n","import { memo, forwardRef } from 'react';\nimport { jsx } from 'react/jsx-runtime';\nimport { useBEM } from '../hooks/useBEM.js';\nimport { roleNone, menuClass, menuHeaderClass } from '../utils/constants.js';\nimport { stylePropTypes } from '../utils/propTypes.js';\n\nconst MenuHeader = /*#__PURE__*/memo( /*#__PURE__*/forwardRef(function MenuHeader({\n  className,\n  ...restProps\n}, externalRef) {\n  return /*#__PURE__*/jsx(\"li\", {\n    role: roleNone,\n    ...restProps,\n    ref: externalRef,\n    className: useBEM({\n      block: menuClass,\n      element: menuHeaderClass,\n      className\n    })\n  });\n}));\nprocess.env.NODE_ENV !== \"production\" ? MenuHeader.propTypes = {\n  ...stylePropTypes()\n} : void 0;\n\nexport { MenuHeader };\n","import { forwardRef, useRef, useState, useContext } from 'react';\nimport { bool } from 'prop-types';\nimport { jsx } from 'react/jsx-runtime';\nimport { useLayoutEffect as useIsomorphicLayoutEffect } from '../hooks/useIsomorphicLayoutEffect.js';\nimport { useCombinedRef } from '../hooks/useCombinedRef.js';\nimport { useBEM } from '../hooks/useBEM.js';\nimport { MenuListContext, menuClass, menuGroupClass } from '../utils/constants.js';\nimport { stylePropTypes } from '../utils/propTypes.js';\n\nconst MenuGroup = /*#__PURE__*/forwardRef(function MenuGroup({\n  className,\n  style,\n  takeOverflow,\n  ...restProps\n}, externalRef) {\n  const ref = useRef(null);\n  const [overflowStyle, setOverflowStyle] = useState();\n  const {\n    overflow,\n    overflowAmt\n  } = useContext(MenuListContext);\n  useIsomorphicLayoutEffect(() => {\n    let maxHeight;\n    if (takeOverflow && overflowAmt >= 0) {\n      maxHeight = ref.current.getBoundingClientRect().height - overflowAmt;\n      if (maxHeight < 0) maxHeight = 0;\n    }\n    setOverflowStyle(maxHeight >= 0 ? {\n      maxHeight,\n      overflow\n    } : undefined);\n  }, [takeOverflow, overflow, overflowAmt]);\n  useIsomorphicLayoutEffect(() => {\n    if (overflowStyle) ref.current.scrollTop = 0;\n  }, [overflowStyle]);\n  return /*#__PURE__*/jsx(\"div\", {\n    ...restProps,\n    ref: useCombinedRef(externalRef, ref),\n    className: useBEM({\n      block: menuClass,\n      element: menuGroupClass,\n      className\n    }),\n    style: {\n      ...style,\n      ...overflowStyle\n    }\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? MenuGroup.propTypes = {\n  ...stylePropTypes(),\n  takeOverflow: bool\n} : void 0;\n\nexport { MenuGroup };\n","import './avatar.css';\n\nimport { useRef } from 'preact/hooks';\n\nimport mem from '../utils/mem';\n\nconst SIZES = {\n  s: 16,\n  m: 20,\n  l: 24,\n  xl: 32,\n  xxl: 50,\n  xxxl: 64,\n};\n\nconst alphaCache = {};\n\nconst canvas = window.OffscreenCanvas\n  ? new OffscreenCanvas(1, 1)\n  : document.createElement('canvas');\nconst ctx = canvas.getContext('2d', {\n  willReadFrequently: true,\n});\nctx.imageSmoothingEnabled = false;\n\nfunction Avatar({ url, size, alt = '', squircle, ...props }) {\n  size = SIZES[size] || size || SIZES.m;\n  const avatarRef = useRef();\n  const isMissing = /missing\\.png$/.test(url);\n  return (\n    <span\n      ref={avatarRef}\n      class={`avatar ${squircle ? 'squircle' : ''} ${\n        alphaCache[url] ? 'has-alpha' : ''\n      }`}\n      style={{\n        width: size,\n        height: size,\n      }}\n      title={alt}\n      {...props}\n    >\n      {!!url && (\n        <img\n          src={url}\n          width={size}\n          height={size}\n          alt={alt}\n          loading=\"lazy\"\n          decoding=\"async\"\n          crossOrigin={\n            alphaCache[url] === undefined && !isMissing\n              ? 'anonymous'\n              : undefined\n          }\n          onError={(e) => {\n            if (e.target.crossOrigin) {\n              e.target.crossOrigin = null;\n              e.target.src = url;\n            }\n          }}\n          onLoad={(e) => {\n            if (avatarRef.current) avatarRef.current.dataset.loaded = true;\n            if (alphaCache[url] !== undefined) return;\n            if (isMissing) return;\n            setTimeout(() => {\n              try {\n                // Check if image has alpha channel\n                const { width, height } = e.target;\n                if (canvas.width !== width) canvas.width = width;\n                if (canvas.height !== height) canvas.height = height;\n                ctx.drawImage(e.target, 0, 0);\n                const allPixels = ctx.getImageData(0, 0, width, height);\n                // At least 10% of pixels have alpha <= 128\n                const hasAlpha =\n                  allPixels.data.filter(\n                    (pixel, i) => i % 4 === 3 && pixel <= 128,\n                  ).length /\n                    (allPixels.data.length / 4) >\n                  0.1;\n                if (hasAlpha) {\n                  // console.log('hasAlpha', hasAlpha, allPixels.data);\n                  avatarRef.current.classList.add('has-alpha');\n                }\n                alphaCache[url] = hasAlpha;\n                ctx.clearRect(0, 0, width, height);\n              } catch (e) {\n                // Silent fail\n                alphaCache[url] = false;\n              }\n            }, 1);\n          }}\n        />\n      )}\n    </span>\n  );\n}\n\nexport default mem(Avatar);\n","import { forwardRef } from 'preact/compat';\nimport { useLocation } from 'react-router-dom';\n\nimport states from '../utils/states';\n\n/* NOTES\n   =====\n   Initially this uses <NavLink> from react-router-dom, but it doesn't work:\n   1. It interferes with nested <a> inside <a> and it's difficult to preventDefault/stopPropagation from the nested <a>\n   2. isActive doesn't work properly with the weird routes that's set up in this app, due to the faux \"location\" to make the modals work and prevent unmounting\n   3. Not using <Link state/> because it modifies history.state that *persists* across page reloads. I don't need that, so using valtio's states instead.\n*/\n\nconst Link = forwardRef((props, ref) => {\n  let routerLocation;\n  try {\n    routerLocation = useLocation();\n  } catch (e) {}\n  let hash = (location.hash || '').replace(/^#/, '').trim();\n  if (hash === '') hash = '/';\n  const { to, ...restProps } = props;\n\n  // Handle encodeURIComponent of searchParams values\n  if (!!hash && hash !== '/' && hash.includes('?')) {\n    try {\n      const parsedHash = new URL(hash, location.origin); // Fake base URL\n      if (parsedHash.searchParams.size) {\n        const searchParamsStr = Array.from(parsedHash.searchParams.entries())\n          .map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n          .join('&');\n        hash = parsedHash.pathname + '?' + searchParamsStr;\n      }\n    } catch (e) {}\n  }\n\n  const isActive = hash === to || decodeURIComponent(hash) === to;\n  return (\n    <a\n      ref={ref}\n      href={`#${to}`}\n      {...restProps}\n      class={`${props.class || ''} ${isActive ? 'is-active' : ''}`}\n      onClick={(e) => {\n        if (e.currentTarget?.parentNode?.closest('a')) {\n          // If this <a> is nested inside another <a>\n          e.stopPropagation();\n        }\n        if (routerLocation) states.prevLocation = routerLocation;\n        props.onClick?.(e);\n      }}\n    />\n  );\n});\n\nexport default Link;\n","import * as React from \"react\";\n\nfunction isShallowEqual(object1, object2) {\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (keys1.length !== keys2.length) {\n    return false;\n  }\n\n  for (let key of keys1) {\n    if (object1[key] !== object2[key]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isTouchEvent({ nativeEvent }) {\n  return window.TouchEvent\n    ? nativeEvent instanceof TouchEvent\n    : \"touches\" in nativeEvent;\n}\n\nfunction isMouseEvent(event) {\n  return event.nativeEvent instanceof MouseEvent;\n}\n\nfunction throttle(cb, ms) {\n  let lastTime = 0;\n  return () => {\n    const now = Date.now();\n    if (now - lastTime >= ms) {\n      cb();\n      lastTime = now;\n    }\n  };\n}\n\nfunction isPlainObject(value) {\n  return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n\nfunction dispatchStorageEvent(key, newValue) {\n  window.dispatchEvent(new StorageEvent(\"storage\", { key, newValue }));\n}\n\nexport function useBattery() {\n  const [state, setState] = React.useState({\n    supported: true,\n    loading: true,\n    level: null,\n    charging: null,\n    chargingTime: null,\n    dischargingTime: null,\n  });\n\n  React.useEffect(() => {\n    if (!navigator.getBattery) {\n      setState((s) => ({\n        ...s,\n        supported: false,\n        loading: false,\n      }));\n      return;\n    }\n\n    let battery = null;\n\n    const handleChange = () => {\n      setState({\n        supported: true,\n        loading: false,\n        level: battery.level,\n        charging: battery.charging,\n        chargingTime: battery.chargingTime,\n        dischargingTime: battery.dischargingTime,\n      });\n    };\n\n    navigator.getBattery().then((b) => {\n      battery = b;\n      handleChange();\n\n      b.addEventListener(\"levelchange\", handleChange);\n      b.addEventListener(\"chargingchange\", handleChange);\n      b.addEventListener(\"chargingtimechange\", handleChange);\n      b.addEventListener(\"dischargingtimechange\", handleChange);\n    });\n\n    return () => {\n      if (battery) {\n        battery.removeEventListener(\"levelchange\", handleChange);\n        battery.removeEventListener(\"chargingchange\", handleChange);\n        battery.removeEventListener(\"chargingtimechange\", handleChange);\n        battery.removeEventListener(\"dischargingtimechange\", handleChange);\n      }\n    };\n  }, []);\n\n  return state;\n}\n\nexport function useClickAway(cb) {\n  const ref = React.useRef(null);\n  const refCb = React.useRef(cb);\n\n  React.useLayoutEffect(() => {\n    refCb.current = cb;\n  });\n\n  React.useEffect(() => {\n    const handler = (e) => {\n      const element = ref.current;\n      if (element && !element.contains(e.target)) {\n        refCb.current(e);\n      }\n    };\n\n    document.addEventListener(\"mousedown\", handler);\n    document.addEventListener(\"touchstart\", handler);\n\n    return () => {\n      document.removeEventListener(\"mousedown\", handler);\n      document.removeEventListener(\"touchstart\", handler);\n    };\n  }, []);\n\n  return ref;\n}\n\nfunction oldSchoolCopy(text) {\n  const tempTextArea = document.createElement(\"textarea\");\n  tempTextArea.value = text;\n  document.body.appendChild(tempTextArea);\n  tempTextArea.select();\n  document.execCommand(\"copy\");\n  document.body.removeChild(tempTextArea);\n}\n\nexport function useCopyToClipboard() {\n  const [state, setState] = React.useState(null);\n\n  const copyToClipboard = React.useCallback((value) => {\n    const handleCopy = async () => {\n      try {\n        if (navigator?.clipboard?.writeText) {\n          await navigator.clipboard.writeText(value);\n          setState(value);\n        } else {\n          throw new Error(\"writeText not supported\");\n        }\n      } catch (e) {\n        oldSchoolCopy(value);\n        setState(value);\n      }\n    };\n\n    handleCopy();\n  }, []);\n\n  return [state, copyToClipboard];\n}\n\nexport function useCounter(startingValue = 0, options = {}) {\n  const { min, max } = options;\n\n  if (typeof min === \"number\" && startingValue < min) {\n    throw new Error(\n      `Your starting value of ${startingValue} is less than your min of ${min}.`\n    );\n  }\n\n  if (typeof max === \"number\" && startingValue > max) {\n    throw new Error(\n      `Your starting value of ${startingValue} is greater than your max of ${max}.`\n    );\n  }\n\n  const [count, setCount] = React.useState(startingValue);\n\n  const increment = React.useCallback(() => {\n    setCount((c) => {\n      const nextCount = c + 1;\n\n      if (typeof max === \"number\" && nextCount > max) {\n        return c;\n      }\n\n      return nextCount;\n    });\n  }, [max]);\n\n  const decrement = React.useCallback(() => {\n    setCount((c) => {\n      const nextCount = c - 1;\n\n      if (typeof min === \"number\" && nextCount < min) {\n        return c;\n      }\n\n      return nextCount;\n    });\n  }, [min]);\n\n  const set = React.useCallback(\n    (nextCount) => {\n      setCount((c) => {\n        if (typeof max === \"number\" && nextCount > max) {\n          return c;\n        }\n\n        if (typeof min === \"number\" && nextCount < min) {\n          return c;\n        }\n\n        return nextCount;\n      });\n    },\n    [max, min]\n  );\n\n  const reset = React.useCallback(() => {\n    setCount(startingValue);\n  }, [startingValue]);\n\n  return [\n    count,\n    {\n      increment,\n      decrement,\n      set,\n      reset,\n    },\n  ];\n}\n\nexport function useDebounce(value, delay) {\n  const [debouncedValue, setDebouncedValue] = React.useState(value);\n\n  React.useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\nexport function useDefault(initialValue, defaultValue) {\n  const [state, setState] = React.useState(initialValue);\n\n  if (typeof state === \"undefined\" || state === null) {\n    return [defaultValue, setState];\n  }\n\n  return [state, setState];\n}\n\nexport function useDocumentTitle(title) {\n  React.useEffect(() => {\n    document.title = title;\n  }, [title]);\n}\n\nexport function useFavicon(url) {\n  React.useEffect(() => {\n    let link = document.querySelector(`link[rel~=\"icon\"]`);\n\n    if (!link) {\n      link = document.createElement(\"link\");\n      link.type = \"image/x-icon\";\n      link.rel = \"icon\";\n      link.href = url;\n      document.head.appendChild(link);\n    } else {\n      link.href = url;\n    }\n  }, [url]);\n}\n\nexport function useGeolocation(options = {}) {\n  const [state, setState] = React.useState({\n    loading: true,\n    accuracy: null,\n    altitude: null,\n    altitudeAccuracy: null,\n    heading: null,\n    latitude: null,\n    longitude: null,\n    speed: null,\n    timestamp: null,\n    error: null,\n  });\n\n  const optionsRef = React.useRef(options);\n\n  React.useEffect(() => {\n    const onEvent = ({ coords, timestamp }) => {\n      setState({\n        loading: false,\n        timestamp,\n        latitude: coords.latitude,\n        longitude: coords.longitude,\n        altitude: coords.altitude,\n        accuracy: coords.accuracy,\n        altitudeAccuracy: coords.altitudeAccuracy,\n        heading: coords.heading,\n        speed: coords.speed,\n      });\n    };\n\n    const onEventError = (error) => {\n      setState((s) => ({\n        ...s,\n        loading: false,\n        error,\n      }));\n    };\n\n    navigator.geolocation.getCurrentPosition(\n      onEvent,\n      onEventError,\n      optionsRef.current\n    );\n\n    const watchId = navigator.geolocation.watchPosition(\n      onEvent,\n      onEventError,\n      optionsRef.current\n    );\n\n    return () => {\n      navigator.geolocation.clearWatch(watchId);\n    };\n  }, []);\n\n  return state;\n}\n\nconst initialUseHistoryStateState = {\n  past: [],\n  present: null,\n  future: [],\n};\n\nconst useHistoryStateReducer = (state, action) => {\n  const { past, present, future } = state;\n\n  if (action.type === \"UNDO\") {\n    return {\n      past: past.slice(0, past.length - 1),\n      present: past[past.length - 1],\n      future: [present, ...future],\n    };\n  } else if (action.type === \"REDO\") {\n    return {\n      past: [...past, present],\n      present: future[0],\n      future: future.slice(1),\n    };\n  } else if (action.type === \"SET\") {\n    const { newPresent } = action;\n\n    if (action.newPresent === present) {\n      return state;\n    }\n\n    return {\n      past: [...past, present],\n      present: newPresent,\n      future: [],\n    };\n  } else if (action.type === \"CLEAR\") {\n    return {\n      ...initialUseHistoryStateState,\n      present: action.initialPresent,\n    };\n  } else {\n    throw new Error(\"Unsupported action type\");\n  }\n};\n\nexport function useHistoryState(initialPresent = {}) {\n  const initialPresentRef = React.useRef(initialPresent);\n\n  const [state, dispatch] = React.useReducer(useHistoryStateReducer, {\n    ...initialUseHistoryStateState,\n    present: initialPresentRef.current,\n  });\n\n  const canUndo = state.past.length !== 0;\n  const canRedo = state.future.length !== 0;\n\n  const undo = React.useCallback(() => {\n    if (canUndo) {\n      dispatch({ type: \"UNDO\" });\n    }\n  }, [canUndo]);\n\n  const redo = React.useCallback(() => {\n    if (canRedo) {\n      dispatch({ type: \"REDO\" });\n    }\n  }, [canRedo]);\n\n  const set = React.useCallback(\n    (newPresent) => dispatch({ type: \"SET\", newPresent }),\n    []\n  );\n\n  const clear = React.useCallback(\n    () =>\n      dispatch({ type: \"CLEAR\", initialPresent: initialPresentRef.current }),\n    []\n  );\n\n  return { state: state.present, set, undo, redo, clear, canUndo, canRedo };\n}\n\nexport function useHover() {\n  const [hovering, setHovering] = React.useState(false);\n  const previousNode = React.useRef(null);\n\n  const handleMouseEnter = React.useCallback(() => {\n    setHovering(true);\n  }, []);\n\n  const handleMouseLeave = React.useCallback(() => {\n    setHovering(false);\n  }, []);\n\n  const customRef = React.useCallback(\n    (node) => {\n      if (previousNode.current?.nodeType === Node.ELEMENT_NODE) {\n        previousNode.current.removeEventListener(\n          \"mouseenter\",\n          handleMouseEnter\n        );\n        previousNode.current.removeEventListener(\n          \"mouseleave\",\n          handleMouseLeave\n        );\n      }\n\n      if (node?.nodeType === Node.ELEMENT_NODE) {\n        node.addEventListener(\"mouseenter\", handleMouseEnter);\n        node.addEventListener(\"mouseleave\", handleMouseLeave);\n      }\n\n      previousNode.current = node;\n    },\n    [handleMouseEnter, handleMouseLeave]\n  );\n\n  return [customRef, hovering];\n}\n\nexport function useIdle(ms = 1000 * 60) {\n  const [idle, setIdle] = React.useState(false);\n\n  React.useEffect(() => {\n    let timeoutId;\n\n    const handleTimeout = () => {\n      setIdle(true);\n    };\n\n    const handleEvent = throttle((e) => {\n      setIdle(false);\n\n      window.clearTimeout(timeoutId);\n      timeoutId = window.setTimeout(handleTimeout, ms);\n    }, 500);\n\n    const handleVisibilityChange = () => {\n      if (!document.hidden) {\n        handleEvent();\n      }\n    };\n\n    timeoutId = window.setTimeout(handleTimeout, ms);\n\n    window.addEventListener(\"mousemove\", handleEvent);\n    window.addEventListener(\"mousedown\", handleEvent);\n    window.addEventListener(\"resize\", handleEvent);\n    window.addEventListener(\"keydown\", handleEvent);\n    window.addEventListener(\"touchstart\", handleEvent);\n    window.addEventListener(\"wheel\", handleEvent);\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n\n    return () => {\n      window.removeEventListener(\"mousemove\", handleEvent);\n      window.removeEventListener(\"mousedown\", handleEvent);\n      window.removeEventListener(\"resize\", handleEvent);\n      window.removeEventListener(\"keydown\", handleEvent);\n      window.removeEventListener(\"touchstart\", handleEvent);\n      window.removeEventListener(\"wheel\", handleEvent);\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n      window.clearTimeout(timeoutId);\n    };\n  }, [ms]);\n\n  return idle;\n}\n\nexport function useIntersectionObserver(options = {}) {\n  const { threshold = 1, root = null, rootMargin = \"0px\" } = options;\n  const [entry, setEntry] = React.useState(null);\n\n  const previousObserver = React.useRef(null);\n\n  const customRef = React.useCallback(\n    (node) => {\n      if (previousObserver.current) {\n        previousObserver.current.disconnect();\n        previousObserver.current = null;\n      }\n\n      if (node?.nodeType === Node.ELEMENT_NODE) {\n        const observer = new IntersectionObserver(\n          ([entry]) => {\n            setEntry(entry);\n          },\n          { threshold, root, rootMargin }\n        );\n\n        observer.observe(node);\n        previousObserver.current = observer;\n      }\n    },\n    [threshold, root, rootMargin]\n  );\n\n  return [customRef, entry];\n}\n\nexport function useIsClient() {\n  const [isClient, setIsClient] = React.useState(false);\n\n  React.useEffect(() => {\n    setIsClient(true);\n  }, []);\n\n  return isClient;\n}\n\nexport function useIsFirstRender() {\n  const renderRef = React.useRef(true);\n\n  if (renderRef.current === true) {\n    renderRef.current = false;\n    return true;\n  }\n\n  return renderRef.current;\n}\n\nexport function useList(defaultList = []) {\n  const [list, setList] = React.useState(defaultList);\n\n  const set = React.useCallback((l) => {\n    setList(l);\n  }, []);\n\n  const push = React.useCallback((element) => {\n    setList((l) => [...l, element]);\n  }, []);\n\n  const removeAt = React.useCallback((index) => {\n    setList((l) => [...l.slice(0, index), ...l.slice(index + 1)]);\n  }, []);\n\n  const insertAt = React.useCallback((index, element) => {\n    setList((l) => [...l.slice(0, index), element, ...l.slice(index)]);\n  }, []);\n\n  const updateAt = React.useCallback((index, element) => {\n    setList((l) => l.map((e, i) => (i === index ? element : e)));\n  }, []);\n\n  const clear = React.useCallback(() => setList([]), []);\n\n  return [list, { set, push, removeAt, insertAt, updateAt, clear }];\n}\n\nconst setLocalStorageItem = (key, value) => {\n  const stringifiedValue = JSON.stringify(value);\n  window.localStorage.setItem(key, stringifiedValue);\n  dispatchStorageEvent(key, stringifiedValue);\n};\n\nconst removeLocalStorageItem = (key) => {\n  window.localStorage.removeItem(key);\n  dispatchStorageEvent(key, null);\n};\n\nconst getLocalStorageItem = (key) => {\n  return window.localStorage.getItem(key);\n};\n\nconst useLocalStorageSubscribe = (callback) => {\n  window.addEventListener(\"storage\", callback);\n  return () => window.removeEventListener(\"storage\", callback);\n};\n\nconst getLocalStorageServerSnapshot = () => {\n  throw Error(\"useLocalStorage is a client-only hook\");\n};\n\nexport function useLocalStorage(key, initialValue) {\n  const getSnapshot = () => getLocalStorageItem(key);\n\n  const store = React.useSyncExternalStore(\n    useLocalStorageSubscribe,\n    getSnapshot,\n    getLocalStorageServerSnapshot\n  );\n\n  const setState = React.useCallback(\n    (v) => {\n      try {\n        const nextState = typeof v === \"function\" ? v(JSON.parse(store)) : v;\n\n        if (nextState === undefined || nextState === null) {\n          removeLocalStorageItem(key);\n        } else {\n          setLocalStorageItem(key, nextState);\n        }\n      } catch (e) {\n        console.warn(e);\n      }\n    },\n    [key, store]\n  );\n\n  React.useEffect(() => {\n    if (\n      getLocalStorageItem(key) === null &&\n      typeof initialValue !== \"undefined\"\n    ) {\n      setLocalStorageItem(key, initialValue);\n    }\n  }, [key, initialValue]);\n\n  return [store ? JSON.parse(store) : initialValue, setState];\n}\n\nexport function useLockBodyScroll() {\n  React.useLayoutEffect(() => {\n    const originalStyle = window.getComputedStyle(document.body).overflow;\n    document.body.style.overflow = \"hidden\";\n    return () => {\n      document.body.style.overflow = originalStyle;\n    };\n  }, []);\n}\n\nexport function useLongPress(callback, options = {}) {\n  const { threshold = 400, onStart, onFinish, onCancel } = options;\n  const isLongPressActive = React.useRef(false);\n  const isPressed = React.useRef(false);\n  const timerId = React.useRef();\n\n  return React.useMemo(() => {\n    if (typeof callback !== \"function\") {\n      return {};\n    }\n\n    const start = (event) => {\n      if (!isMouseEvent(event) && !isTouchEvent(event)) return;\n\n      if (onStart) {\n        onStart(event);\n      }\n\n      isPressed.current = true;\n      timerId.current = setTimeout(() => {\n        callback(event);\n        isLongPressActive.current = true;\n      }, threshold);\n    };\n\n    const cancel = (event) => {\n      if (!isMouseEvent(event) && !isTouchEvent(event)) return;\n\n      if (isLongPressActive.current) {\n        if (onFinish) {\n          onFinish(event);\n        }\n      } else if (isPressed.current) {\n        if (onCancel) {\n          onCancel(event);\n        }\n      }\n\n      isLongPressActive.current = false;\n      isPressed.current = false;\n\n      if (timerId.current) {\n        window.clearTimeout(timerId.current);\n      }\n    };\n\n    const mouseHandlers = {\n      onMouseDown: start,\n      onMouseUp: cancel,\n      onMouseLeave: cancel,\n    };\n\n    const touchHandlers = {\n      onTouchStart: start,\n      onTouchEnd: cancel,\n    };\n\n    return {\n      ...mouseHandlers,\n      ...touchHandlers,\n    };\n  }, [callback, threshold, onCancel, onFinish, onStart]);\n}\n\nexport function useMap(initialState) {\n  const mapRef = React.useRef(new Map(initialState));\n  const [, reRender] = React.useReducer((x) => x + 1, 0);\n\n  mapRef.current.set = (...args) => {\n    Map.prototype.set.apply(mapRef.current, args);\n    reRender();\n    return mapRef.current;\n  };\n\n  mapRef.current.clear = (...args) => {\n    Map.prototype.clear.apply(mapRef.current, args);\n    reRender();\n  };\n\n  mapRef.current.delete = (...args) => {\n    const res = Map.prototype.delete.apply(mapRef.current, args);\n    reRender();\n\n    return res;\n  };\n\n  return mapRef.current;\n}\n\nexport function useMeasure() {\n  const [dimensions, setDimensions] = React.useState({\n    width: null,\n    height: null,\n  });\n\n  const previousObserver = React.useRef(null);\n\n  const customRef = React.useCallback((node) => {\n    if (previousObserver.current) {\n      previousObserver.current.disconnect();\n      previousObserver.current = null;\n    }\n\n    if (node?.nodeType === Node.ELEMENT_NODE) {\n      const observer = new ResizeObserver(([entry]) => {\n        if (entry && entry.borderBoxSize) {\n          const { inlineSize: width, blockSize: height } =\n            entry.borderBoxSize[0];\n\n          setDimensions({ width, height });\n        }\n      });\n\n      observer.observe(node);\n      previousObserver.current = observer;\n    }\n  }, []);\n\n  return [customRef, dimensions];\n}\n\nexport function useMediaQuery(query) {\n  const subscribe = React.useCallback(\n    (callback) => {\n      const matchMedia = window.matchMedia(query);\n\n      matchMedia.addEventListener(\"change\", callback);\n      return () => {\n        matchMedia.removeEventListener(\"change\", callback);\n      };\n    },\n    [query]\n  );\n\n  const getSnapshot = () => {\n    return window.matchMedia(query).matches;\n  };\n\n  const getServerSnapshot = () => {\n    throw Error(\"useMediaQuery is a client-only hook\");\n  };\n\n  return React.useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot);\n}\n\nexport function useMouse() {\n  const [state, setState] = React.useState({\n    x: 0,\n    y: 0,\n    elementX: 0,\n    elementY: 0,\n    elementPositionX: 0,\n    elementPositionY: 0,\n  });\n\n  const ref = React.useRef(null);\n\n  React.useLayoutEffect(() => {\n    const handleMouseMove = (event) => {\n      let newState = {\n        x: event.pageX,\n        y: event.pageY,\n      };\n\n      if (ref.current?.nodeType === Node.ELEMENT_NODE) {\n        const { left, top } = ref.current.getBoundingClientRect();\n        const elementPositionX = left + window.scrollX;\n        const elementPositionY = top + window.scrollY;\n        const elementX = event.pageX - elementPositionX;\n        const elementY = event.pageY - elementPositionY;\n\n        newState.elementX = elementX;\n        newState.elementY = elementY;\n        newState.elementPositionX = elementPositionX;\n        newState.elementPositionY = elementPositionY;\n      }\n\n      setState((s) => {\n        return {\n          ...s,\n          ...newState,\n        };\n      });\n    };\n\n    document.addEventListener(\"mousemove\", handleMouseMove);\n\n    return () => {\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n    };\n  }, []);\n\n  return [state, ref];\n}\n\nconst getConnection = () => {\n  return (\n    navigator?.connection ||\n    navigator?.mozConnection ||\n    navigator?.webkitConnection\n  );\n};\n\nconst useNetworkStateSubscribe = (callback) => {\n  window.addEventListener(\"online\", callback, { passive: true });\n  window.addEventListener(\"offline\", callback, { passive: true });\n\n  const connection = getConnection();\n\n  if (connection) {\n    connection.addEventListener(\"change\", callback, { passive: true });\n  }\n\n  return () => {\n    window.removeEventListener(\"online\", callback);\n    window.removeEventListener(\"offline\", callback);\n\n    if (connection) {\n      connection.removeEventListener(\"change\", callback);\n    }\n  };\n};\n\nconst getNetworkStateServerSnapshot = () => {\n  throw Error(\"useNetworkState is a client-only hook\");\n};\n\nexport function useNetworkState() {\n  const cache = React.useRef({});\n\n  const getSnapshot = () => {\n    const online = navigator.onLine;\n    const connection = getConnection();\n\n    const nextState = {\n      online,\n      downlink: connection?.downlink,\n      downlinkMax: connection?.downlinkMax,\n      effectiveType: connection?.effectiveType,\n      rtt: connection?.rtt,\n      saveData: connection?.saveData,\n      type: connection?.type,\n    };\n\n    if (isShallowEqual(cache.current, nextState)) {\n      return cache.current;\n    } else {\n      cache.current = nextState;\n      return nextState;\n    }\n  };\n\n  return React.useSyncExternalStore(\n    useNetworkStateSubscribe,\n    getSnapshot,\n    getNetworkStateServerSnapshot\n  );\n}\n\nexport function useObjectState(initialValue) {\n  const [state, setState] = React.useState(initialValue);\n\n  const handleUpdate = React.useCallback((arg) => {\n    if (typeof arg === \"function\") {\n      setState((s) => {\n        const newState = arg(s);\n\n        if (isPlainObject(newState)) {\n          return {\n            ...s,\n            ...newState,\n          };\n        }\n      });\n    }\n\n    if (isPlainObject(arg)) {\n      setState((s) => ({\n        ...s,\n        ...arg,\n      }));\n    }\n  }, []);\n\n  return [state, handleUpdate];\n}\n\nexport function useOrientation() {\n  const [orientation, setOrientation] = React.useState({\n    angle: 0,\n    type: \"landscape-primary\",\n  });\n\n  React.useLayoutEffect(() => {\n    const handleChange = () => {\n      const { angle, type } = window.screen.orientation;\n      setOrientation({\n        angle,\n        type,\n      });\n    };\n\n    const handle_orientationchange = () => {\n      setOrientation({\n        type: \"UNKNOWN\",\n        angle: window.orientation,\n      });\n    };\n\n    if (window.screen?.orientation) {\n      handleChange();\n      window.screen.orientation.addEventListener(\"change\", handleChange);\n    } else {\n      handle_orientationchange();\n      window.addEventListener(\"orientationchange\", handle_orientationchange);\n    }\n\n    return () => {\n      if (window.screen?.orientation) {\n        window.screen.orientation.removeEventListener(\"change\", handleChange);\n      } else {\n        window.removeEventListener(\n          \"orientationchange\",\n          handle_orientationchange\n        );\n      }\n    };\n  }, []);\n\n  return orientation;\n}\n\nconst usePreferredLanguageSubscribe = (cb) => {\n  window.addEventListener(\"languagechange\", cb);\n  return () => window.removeEventListener(\"languagechange\", cb);\n};\n\nconst getPreferredLanguageSnapshot = () => {\n  return navigator.language;\n};\n\nconst getPreferredLanguageServerSnapshot = () => {\n  throw Error(\"usePreferredLanguage is a client-only hook\");\n};\n\nexport function usePreferredLanguage() {\n  return React.useSyncExternalStore(\n    usePreferredLanguageSubscribe,\n    getPreferredLanguageSnapshot,\n    getPreferredLanguageServerSnapshot\n  );\n}\n\nexport function usePrevious(value) {\n  const [current, setCurrent] = React.useState(value);\n  const [previous, setPrevious] = React.useState(null);\n\n  if (value !== current) {\n    setPrevious(current);\n    setCurrent(value);\n  }\n\n  return previous;\n}\n\nexport function useQueue(initialValue = []) {\n  const [queue, setQueue] = React.useState(initialValue);\n\n  const add = React.useCallback((element) => {\n    setQueue((q) => [...q, element]);\n  }, []);\n\n  const remove = React.useCallback(() => {\n    let removedElement;\n\n    setQueue(([first, ...q]) => {\n      removedElement = first;\n      return q;\n    });\n\n    return removedElement;\n  }, []);\n\n  const clear = React.useCallback(() => {\n    setQueue([]);\n  }, []);\n\n  return {\n    add,\n    remove,\n    clear,\n    first: queue[0],\n    last: queue[queue.length - 1],\n    size: queue.length,\n    queue,\n  };\n}\n\nexport function useRenderCount() {\n  const count = React.useRef(0);\n\n  count.current++;\n\n  return count.current;\n}\n\nexport function useRenderInfo(name = \"Unknown\") {\n  const count = React.useRef(0);\n  const lastRender = React.useRef();\n  const now = Date.now();\n\n  count.current++;\n\n  React.useEffect(() => {\n    lastRender.current = Date.now();\n  });\n\n  const sinceLastRender = lastRender.current ? now - lastRender.current : 0;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    const info = {\n      name,\n      renders: count.current,\n      sinceLastRender,\n      timestamp: now,\n    };\n\n    console.log(info);\n\n    return info;\n  }\n}\n\nexport function useScript(src, options = {}) {\n  const [status, setStatus] = React.useState(\"loading\");\n  const optionsRef = React.useRef(options);\n\n  React.useEffect(() => {\n    let script = document.querySelector(`script[src=\"${src}\"]`);\n\n    const domStatus = script?.getAttribute(\"data-status\");\n    if (domStatus) {\n      setStatus(domStatus);\n      return;\n    }\n\n    if (script === null) {\n      script = document.createElement(\"script\");\n      script.src = src;\n      script.async = true;\n      script.setAttribute(\"data-status\", \"loading\");\n      document.body.appendChild(script);\n\n      const handleScriptLoad = () => {\n        script.setAttribute(\"data-status\", \"ready\");\n        setStatus(\"ready\");\n        removeEventListeners();\n      };\n\n      const handleScriptError = () => {\n        script.setAttribute(\"data-status\", \"error\");\n        setStatus(\"error\");\n        removeEventListeners();\n      };\n\n      const removeEventListeners = () => {\n        script.removeEventListener(\"load\", handleScriptLoad);\n        script.removeEventListener(\"error\", handleScriptError);\n      };\n\n      script.addEventListener(\"load\", handleScriptLoad);\n      script.addEventListener(\"error\", handleScriptError);\n\n      const removeOnUnmount = optionsRef.current.removeOnUnmount;\n\n      return () => {\n        if (removeOnUnmount === true) {\n          script.remove();\n          removeEventListeners();\n        }\n      };\n    } else {\n      setStatus(\"unknown\");\n    }\n  }, [src]);\n\n  return status;\n}\n\nconst setSessionStorageItem = (key, value) => {\n  const stringifiedValue = JSON.stringify(value);\n  window.sessionStorage.setItem(key, stringifiedValue);\n  dispatchStorageEvent(key, stringifiedValue);\n};\n\nconst removeSessionStorageItem = (key) => {\n  window.sessionStorage.removeItem(key);\n  dispatchStorageEvent(key, null);\n};\n\nconst getSessionStorageItem = (key) => {\n  return window.sessionStorage.getItem(key);\n};\n\nconst useSessionStorageSubscribe = (callback) => {\n  window.addEventListener(\"storage\", callback);\n  return () => window.removeEventListener(\"storage\", callback);\n};\n\nconst getSessionStorageServerSnapshot = () => {\n  throw Error(\"useSessionStorage is a client-only hook\");\n};\n\nexport function useSessionStorage(key, initialValue) {\n  const getSnapshot = () => getSessionStorageItem(key);\n\n  const store = React.useSyncExternalStore(\n    useSessionStorageSubscribe,\n    getSnapshot,\n    getSessionStorageServerSnapshot\n  );\n\n  const setState = React.useCallback(\n    (v) => {\n      try {\n        const nextState = typeof v === \"function\" ? v(JSON.parse(store)) : v;\n\n        if (nextState === undefined || nextState === null) {\n          removeSessionStorageItem(key);\n        } else {\n          setSessionStorageItem(key, nextState);\n        }\n      } catch (e) {\n        console.warn(e);\n      }\n    },\n    [key, store]\n  );\n\n  React.useEffect(() => {\n    if (\n      getSessionStorageItem(key) === null &&\n      typeof initialValue !== \"undefined\"\n    ) {\n      setSessionStorageItem(key, initialValue);\n    }\n  }, [key, initialValue]);\n\n  return [store ? JSON.parse(store) : initialValue, setState];\n}\n\nexport function useSet(values) {\n  const setRef = React.useRef(new Set(values));\n  const [, reRender] = React.useReducer((x) => x + 1, 0);\n\n  setRef.current.add = (...args) => {\n    const res = Set.prototype.add.apply(setRef.current, args);\n    reRender();\n\n    return res;\n  };\n\n  setRef.current.clear = (...args) => {\n    Set.prototype.clear.apply(setRef.current, args);\n    reRender();\n  };\n\n  setRef.current.delete = (...args) => {\n    const res = Set.prototype.delete.apply(setRef.current, args);\n    reRender();\n\n    return res;\n  };\n\n  return setRef.current;\n}\n\nexport function useThrottle(value, interval = 500) {\n  const [throttledValue, setThrottledValue] = React.useState(value);\n  const lastUpdated = React.useRef(null);\n\n  React.useEffect(() => {\n    const now = Date.now();\n\n    if (lastUpdated.current && now >= lastUpdated.current + interval) {\n      lastUpdated.current = now;\n      setThrottledValue(value);\n    } else {\n      const id = window.setTimeout(() => {\n        lastUpdated.current = now;\n        setThrottledValue(value);\n      }, interval);\n\n      return () => window.clearTimeout(id);\n    }\n  }, [value, interval]);\n\n  return throttledValue;\n}\n\nexport function useToggle(initialValue) {\n  const [on, setOn] = React.useState(() => {\n    if (typeof initialValue === \"boolean\") {\n      return initialValue;\n    }\n\n    return Boolean(initialValue);\n  });\n\n  const handleToggle = React.useCallback((value) => {\n    if (typeof value === \"boolean\") {\n      return setOn(value);\n    }\n\n    return setOn((v) => !v);\n  }, []);\n\n  return [on, handleToggle];\n}\n\nconst useVisibilityChangeSubscribe = (callback) => {\n  document.addEventListener(\"visibilitychange\", callback);\n\n  return () => {\n    document.removeEventListener(\"visibilitychange\", callback);\n  };\n};\n\nconst getVisibilityChangeSnapshot = () => {\n  return document.visibilityState;\n};\n\nconst getVisibilityChangeServerSnapshot = () => {\n  throw Error(\"useVisibilityChange is a client-only hook\");\n};\n\nexport function useVisibilityChange() {\n  const visibilityState = React.useSyncExternalStore(\n    useVisibilityChangeSubscribe,\n    getVisibilityChangeSnapshot,\n    getVisibilityChangeServerSnapshot\n  );\n\n  return visibilityState === \"visible\";\n}\n\nexport function useWindowScroll() {\n  const [state, setState] = React.useState({\n    x: null,\n    y: null,\n  });\n\n  const scrollTo = React.useCallback((...args) => {\n    if (typeof args[0] === \"object\") {\n      window.scrollTo(args[0]);\n    } else if (typeof args[0] === \"number\" && typeof args[1] === \"number\") {\n      window.scrollTo(args[0], args[1]);\n    } else {\n      throw new Error(\n        `Invalid arguments passed to scrollTo. See here for more info. https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollTo`\n      );\n    }\n  }, []);\n\n  React.useLayoutEffect(() => {\n    const handleScroll = () => {\n      setState({ x: window.scrollX, y: window.scrollY });\n    };\n\n    handleScroll();\n    window.addEventListener(\"scroll\", handleScroll);\n\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, []);\n\n  return [state, scrollTo];\n}\n\nexport function useWindowSize() {\n  const [size, setSize] = React.useState({\n    width: null,\n    height: null,\n  });\n\n  React.useLayoutEffect(() => {\n    const handleResize = () => {\n      setSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    };\n\n    handleResize();\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  return size;\n}\n","const root = document.documentElement;\nconst style = getComputedStyle(root);\nconst defaultBoundingBoxPadding = 8;\n\nlet safeAreaInsets = [0, 0, 0, 0];\nfunction getSafeAreaInsets() {\n  // Get safe area inset variables from root\n  const safeAreaInsetTop = style.getPropertyValue('--sai-top');\n  const safeAreaInsetRight = style.getPropertyValue('--sai-right');\n  const safeAreaInsetBottom = style.getPropertyValue('--sai-bottom');\n  const safeAreaInsetLeft = style.getPropertyValue('--sai-left');\n  safeAreaInsets = [\n    // top, right, bottom, left (clockwise)\n    Math.max(0, parseInt(safeAreaInsetTop, 10)),\n    Math.max(0, parseInt(safeAreaInsetRight, 10)),\n    Math.max(0, parseInt(safeAreaInsetBottom, 10)),\n    Math.max(0, parseInt(safeAreaInsetLeft, 10)),\n  ];\n}\nrequestAnimationFrame(getSafeAreaInsets);\n\nfunction safeBoundingBoxPadding(paddings = []) {\n  const str = safeAreaInsets\n    .map((v, i) => (v || defaultBoundingBoxPadding) + (paddings[i] || 0))\n    .join(' ');\n  // console.log(str);\n  return str;\n}\n\n// Update safe area insets when orientation or resize\nif (CSS.supports('top: env(safe-area-inset-top)')) {\n  window.addEventListener('resize', getSafeAreaInsets, { passive: true });\n}\n\nexport default safeBoundingBoxPadding;\n","import { Menu } from '@szhsin/react-menu';\nimport { useWindowSize } from '@uidotdev/usehooks';\nimport { useRef } from 'preact/hooks';\n\nimport safeBoundingBoxPadding from '../utils/safe-bounding-box-padding';\n\n// It's like Menu but with sensible defaults, bug fixes and improvements.\nfunction Menu2(props) {\n  const { containerProps, instanceRef: _instanceRef } = props;\n  const size = useWindowSize();\n  const instanceRef = _instanceRef?.current ? _instanceRef : useRef();\n\n  return (\n    <Menu\n      boundingBoxPadding={safeBoundingBoxPadding()}\n      repositionFlag={`${size.width}x${size.height}`}\n      unmountOnClose\n      {...props}\n      instanceRef={instanceRef}\n      containerProps={{\n        onClick: (e) => {\n          if (e.target === e.currentTarget) {\n            instanceRef.current?.closeMenu?.();\n          }\n          containerProps?.onClick?.(e);\n        },\n        ...containerProps,\n      }}\n    />\n  );\n}\n\nexport default Menu2;\n","import { SubMenu } from '@szhsin/react-menu';\nimport { useRef } from 'preact/hooks';\n\nexport default function SubMenu2(props) {\n  const menuRef = useRef();\n  return (\n    <SubMenu\n      {...props}\n      instanceRef={menuRef}\n      // Test fix for bug; submenus not opening on Android\n      itemProps={{\n        onPointerMove: (e) => {\n          if (e.pointerType === 'touch') {\n            menuRef.current?.openMenu?.();\n          }\n        },\n        onPointerLeave: (e) => {\n          if (e.pointerType === 'touch') {\n            menuRef.current?.openMenu?.();\n          }\n        },\n      }}\n    />\n  );\n}\n","import { MenuItem } from '@szhsin/react-menu';\nimport { cloneElement } from 'preact';\n\nimport Menu2 from './menu2';\nimport SubMenu2 from './submenu2';\n\nfunction MenuConfirm({\n  subMenu = false,\n  confirm = true,\n  confirmLabel,\n  menuItemClassName,\n  menuFooter,\n  menuExtras,\n  ...props\n}) {\n  const { children, onClick, ...restProps } = props;\n  if (!confirm) {\n    if (subMenu) return <MenuItem {...props} />;\n    if (onClick) {\n      return cloneElement(children, {\n        onClick,\n      });\n    }\n    return children;\n  }\n  const Parent = subMenu ? SubMenu2 : Menu2;\n  return (\n    <Parent\n      openTrigger=\"clickOnly\"\n      direction=\"bottom\"\n      overflow=\"auto\"\n      gap={-8}\n      shift={8}\n      menuClassName=\"menu-emphasized\"\n      {...restProps}\n      menuButton={subMenu ? undefined : children}\n      label={subMenu ? children : undefined}\n    >\n      <MenuItem className={menuItemClassName} onClick={onClick}>\n        {confirmLabel}\n      </MenuItem>\n      {menuExtras}\n      {menuFooter}\n    </Parent>\n  );\n}\n\nexport default MenuConfirm;\n","export default function CustomEmoji({ staticUrl, alt, url }) {\n  return (\n    <picture>\n      {staticUrl && (\n        <source srcset={staticUrl} media=\"(prefers-reduced-motion: reduce)\" />\n      )}\n      <img\n        key={alt || url}\n        src={url}\n        alt={alt}\n        class=\"shortcode-emoji emoji\"\n        width=\"16\"\n        height=\"16\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </picture>\n  );\n}\n","import { memo } from 'preact/compat';\n\nimport CustomEmoji from './custom-emoji';\n\nfunction EmojiText({ text, emojis }) {\n  if (!text) return '';\n  if (!emojis?.length) return text;\n  if (text.indexOf(':') === -1) return text;\n  const regex = new RegExp(\n    `:(${emojis.map((e) => e.shortcode).join('|')}):`,\n    'g',\n  );\n  const elements = text.split(regex).map((word) => {\n    const emoji = emojis.find((e) => e.shortcode === word);\n    if (emoji) {\n      const { url, staticUrl } = emoji;\n      return <CustomEmoji staticUrl={staticUrl} alt={word} url={url} />;\n    }\n    return word;\n  });\n  return elements;\n}\n\nexport default memo(\n  EmojiText,\n  (oldProps, newProps) =>\n    oldProps.text === newProps.text &&\n    oldProps.emojis?.length === newProps.emojis?.length,\n);\n","import './name-text.css';\n\nimport { memo } from 'preact/compat';\n\nimport states from '../utils/states';\n\nimport Avatar from './avatar';\nimport EmojiText from './emoji-text';\n\nconst nameCollator = new Intl.Collator('en', {\n  sensitivity: 'base',\n});\n\nfunction NameText({\n  account,\n  instance,\n  showAvatar,\n  showAcct,\n  short,\n  external,\n  onClick,\n}) {\n  const {\n    acct,\n    avatar,\n    avatarStatic,\n    id,\n    url,\n    displayName,\n    emojis,\n    bot,\n    username,\n  } = account;\n  const [_, acct1, acct2] = acct.match(/([^@]+)(@.+)/i) || [, acct];\n\n  const trimmedUsername = username.toLowerCase().trim();\n  const trimmedDisplayName = (displayName || '').toLowerCase().trim();\n  const shortenedDisplayName = trimmedDisplayName\n    .replace(/(\\:(\\w|\\+|\\-)+\\:)(?=|[\\!\\.\\?]|$)/g, '') // Remove shortcodes, regex from https://regex101.com/r/iE9uV0/1\n    .replace(/\\s+/g, ''); // E.g. \"My name\" === \"myname\"\n  const shortenedAlphaNumericDisplayName = shortenedDisplayName.replace(\n    /[^a-z0-9@\\.]/gi,\n    '',\n  ); // Remove non-alphanumeric characters\n\n  const hideUsername =\n    (!short &&\n      (trimmedUsername === trimmedDisplayName ||\n        trimmedUsername === shortenedDisplayName ||\n        trimmedUsername === shortenedAlphaNumericDisplayName ||\n        nameCollator.compare(trimmedUsername, shortenedDisplayName) === 0)) ||\n    shortenedAlphaNumericDisplayName === acct.toLowerCase();\n\n  return (\n    <a\n      class={`name-text ${showAcct ? 'show-acct' : ''} ${short ? 'short' : ''}`}\n      href={url}\n      target={external ? '_blank' : null}\n      title={\n        displayName\n          ? `${displayName} (${acct2 ? '' : '@'}${acct})`\n          : `${acct2 ? '' : '@'}${acct}`\n      }\n      onClick={(e) => {\n        if (external) return;\n        if (e.shiftKey) return; // Save link? \n        e.preventDefault();\n        e.stopPropagation();\n        if (onClick) return onClick(e);\n        if (e.metaKey || e.ctrlKey || e.shiftKey || e.which === 2) {\n          const internalURL = `#/${instance}/a/${id}`;\n          window.open(internalURL, '_blank');\n          return;\n        }\n        states.showAccount = {\n          account,\n          instance,\n        };\n      }}\n    >\n      {showAvatar && (\n        <>\n          <Avatar url={avatarStatic || avatar} squircle={bot} />{' '}\n        </>\n      )}\n      {displayName && !short ? (\n        <>\n          <b>\n            <EmojiText text={displayName} emojis={emojis} />\n          </b>\n          {!showAcct && !hideUsername && (\n            <>\n              {' '}\n              <i>@{username}</i>\n            </>\n          )}\n        </>\n      ) : short ? (\n        <i>{username}</i>\n      ) : (\n        <b>{username}</b>\n      )}\n      {showAcct && (\n        <>\n          <br />\n          <i>\n            {acct2 ? '' : '@'}\n            {acct1}\n            {!!acct2 && <span class=\"ib\">{acct2}</span>}\n          </i>\n        </>\n      )}\n    </a>\n  );\n}\n\nexport default memo(NameText, (oldProps, newProps) => {\n  // Only care about account.id, the other props usually don't change\n  const { account } = oldProps;\n  const { account: newAccount } = newProps;\n  return account?.acct === newAccount?.acct;\n});\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",c=\"month\",f=\"quarter\",h=\"year\",d=\"date\",l=\"Invalid Date\",$=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\"),ordinal:function(t){var e=[\"th\",\"st\",\"nd\",\"rd\"],n=t%100;return\"[\"+t+(e[(n-20)%10]||e[n]||e[0])+\"]\"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,c),s=n-i<0,u=e.clone().add(r+(s?-1:1),c);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:h,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:f}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},g=\"en\",D={};D[g]=M;var p=\"$isDayjsObject\",S=function(t){return t instanceof _||!(!t||!t[p])},w=function t(e,n,r){var i;if(!e)return g;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(g=i),i||!r&&g},O=function(t,e){if(S(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},b=v;b.l=w,b.i=S,b.w=function(t,e){return O(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[p]=!0}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match($);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return b},m.isValid=function(){return!(this.$d.toString()===l)},m.isSame=function(t,e){var n=O(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return O(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<O(t)},m.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!b.u(e)||e,f=b.p(t),l=function(t,e){var i=b.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},$=function(t,e){return b.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,v=\"set\"+(this.$u?\"UTC\":\"\");switch(f){case h:return r?l(1,0):l(31,11);case c:return r?l(1,M):l(0,M+1);case o:var g=this.$locale().weekStart||0,D=(y<g?y+7:y)-g;return l(r?m-D:m+(6-D),M);case a:case d:return $(v+\"Hours\",0);case u:return $(v+\"Minutes\",1);case s:return $(v+\"Seconds\",2);case i:return $(v+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=b.p(t),f=\"set\"+(this.$u?\"UTC\":\"\"),l=(n={},n[a]=f+\"Date\",n[d]=f+\"Date\",n[c]=f+\"Month\",n[h]=f+\"FullYear\",n[u]=f+\"Hours\",n[s]=f+\"Minutes\",n[i]=f+\"Seconds\",n[r]=f+\"Milliseconds\",n)[o],$=o===a?this.$D+(e-this.$W):e;if(o===c||o===h){var y=this.clone().set(d,1);y.$d[l]($),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else l&&this.$d[l]($);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[b.p(t)]()},m.add=function(r,f){var d,l=this;r=Number(r);var $=b.p(f),y=function(t){var e=O(l);return b.w(e.date(e.date()+Math.round(t*r)),l)};if($===c)return this.set(c,this.$M+r);if($===h)return this.set(h,this.$y+r);if($===a)return y(1);if($===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[$]||1,m=this.$d.getTime()+r*M;return b.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||l;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=b.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,c=n.months,f=n.meridiem,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},d=function(t){return b.s(s%12||12,t,\"0\")},$=f||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r};return r.replace(y,(function(t,r){return r||function(t){switch(t){case\"YY\":return String(e.$y).slice(-2);case\"YYYY\":return b.s(e.$y,4,\"0\");case\"M\":return a+1;case\"MM\":return b.s(a+1,2,\"0\");case\"MMM\":return h(n.monthsShort,a,c,3);case\"MMMM\":return h(c,a);case\"D\":return e.$D;case\"DD\":return b.s(e.$D,2,\"0\");case\"d\":return String(e.$W);case\"dd\":return h(n.weekdaysMin,e.$W,o,2);case\"ddd\":return h(n.weekdaysShort,e.$W,o,3);case\"dddd\":return o[e.$W];case\"H\":return String(s);case\"HH\":return b.s(s,2,\"0\");case\"h\":return d(1);case\"hh\":return d(2);case\"a\":return $(s,u,!0);case\"A\":return $(s,u,!1);case\"m\":return String(u);case\"mm\":return b.s(u,2,\"0\");case\"s\":return String(e.$s);case\"ss\":return b.s(e.$s,2,\"0\");case\"SSS\":return b.s(e.$ms,3,\"0\");case\"Z\":return i}return null}(t)||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,l){var $,y=this,M=b.p(d),m=O(r),v=(m.utcOffset()-this.utcOffset())*e,g=this-m,D=function(){return b.m(y,m)};switch(M){case h:$=D()/12;break;case c:$=D();break;case f:$=D()/3;break;case o:$=(g-v)/6048e5;break;case a:$=(g-v)/864e5;break;case u:$=g/n;break;case s:$=g/e;break;case i:$=g/t;break;default:$=g}return l?$:b.a($)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return b.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),k=_.prototype;return O.prototype=k,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",c],[\"$y\",h],[\"$D\",d]].forEach((function(t){k[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),O.extend=function(t,e){return t.$i||(t(e,_,O),t.$i=!0),O},O.locale=w,O.isDayjs=S,O.unix=function(t){return O(1e3*t)},O.en=D[g],O.Ls=D,O.p={},O}));","!function(e,n){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=n():\"function\"==typeof define&&define.amd?define([],n):\"object\"==typeof exports?exports.dayjsTwitter=n():e.dayjsTwitter=n()}(this,function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&n&&\"string\"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p=\"\",t(t.s=1)}([function(e,n,t){var r,o=function(){var e={ns:1e-6,us:.001,\"s\":.001,\"s\":.001,ms:1,s:1e3,m:6e4,h:36e5,d:864e5,w:6048e5},n=function(e){if(e instanceof n)return e;switch(typeof e){case\"number\":if(!isFinite(e))throw new Error(\"invalid duration: \"+e);this._milliseconds=e;break;case\"string\":this._milliseconds=n.parse(e).valueOf();break;case\"undefined\":this._milliseconds=0;break;default:throw new Error(\"invalid duration: \"+e)}};return n.millisecond=new n(1),n.second=new n(1e3),n.minute=new n(6e4),n.hour=new n(36e5),n.day=new n(864e5),n.week=new n(6048e5),n.prototype.nanoseconds=function(){return Math.floor(this._milliseconds/1e-6)},n.prototype.microseconds=function(){return Math.floor(this._milliseconds/.001)},n.prototype.milliseconds=function(){return this._milliseconds},n.prototype.seconds=function(){return Math.floor(this._milliseconds/1e3)},n.prototype.minutes=function(){return Math.floor(this._milliseconds/6e4)},n.prototype.hours=function(){return Math.floor(this._milliseconds/36e5)},n.prototype.days=function(){return Math.floor(this._milliseconds/864e5)},n.prototype.weeks=function(){return Math.floor(this._milliseconds/6048e5)},n.prototype.toString=function(){var e=\"\",n=Math.abs(this._milliseconds),t=this._milliseconds<0?\"-\":\"\";if(0===n)return\"0\";var r=Math.floor(n/36e5);0!==r&&(n-=36e5*r,e+=r.toString()+\"h\");var o=Math.floor(n/6e4);0!==o&&(n-=6e4*o,e+=o.toString()+\"m\");var i=Math.floor(n/1e3);return 0!==i&&(n-=1e3*i,e+=i.toString()+\"s\"),0!==n&&(e+=n.toString()+\"ms\"),t+e},n.prototype.valueOf=function(){return this._milliseconds},n.parse=function(t){if(\"0\"===t||\"+0\"===t||\"-0\"===t)return new n(0);for(var r,o,i,s=/([\\-\\+\\d\\.]+)([a-z]+)/g,u=0,a=0,f=\"-\"===t[0]?-1:1;i=s.exec(t);){if(r=i[2],o=Math.abs(parseFloat(i[1])),a++,isNaN(o))throw new Error(\"invalid duration\");if(void 0===e[r])throw new Error(\"invalid unit: \"+r);u+=o*e[r]}if(0===a)throw new Error(\"invalid duration\");return new n(Math.floor(u)*f)},n.prototype.roundTo=function(e){var t=new n(e).valueOf();this._milliseconds=t*Math.round(this._milliseconds/t)},n.prototype.isGreaterThan=function(e){return this.valueOf()>new n(e).valueOf()},n.prototype.isLessThan=function(e){return this.valueOf()<new n(e).valueOf()},n.prototype.isEqualTo=function(e){return this.valueOf()===new n(e).valueOf()},n.prototype.after=function(e){return new Date(e.valueOf()+this._milliseconds)},n.since=function(e){return new n((new Date).valueOf()-e.valueOf())},n.until=function(e){return new n(e.valueOf()-(new Date).valueOf())},n.fromMicroseconds=function(e){var t=Math.floor(e/1e3);return new n(t)},n.fromNanoseconds=function(e){var t=Math.floor(e/1e6);return new n(t)},n.between=function(e,t){return new n(t.valueOf()-e.valueOf())},n.add=function(e,t){return new n(e+t)},n.subtract=function(e,t){return new n(e-t)},n.multiply=function(e,t){return new n(e*t)},n.divide=function(e,n){return e/n},n}.call(this);void 0===(r=function(){return o}.apply(n,[]))||(e.exports=r)},function(e,n,t){\"use strict\";t.r(n);var r=t(0),o=t.n(r),i={en:{now:\"Now\",seconds:\"%ds\",minutes:\"%dm\",hours:\"%dh\",days:\"MMM D\",years:\"MMM D, YYYY\"},es:{now:\"Ahora\",seconds:\"%ds\",minutes:\"%dmin\",hours:\"%dh\",days:\"D MMM.\",years:\"D MMM. YYYY\"},ru:{now:\"1 \",seconds:\"%d \",minutes:\"%d \",hours:\"%d \",days:\"D MMM.\",years:\"D MMM. YYYY\"},fr:{now:\"aintenant\",seconds:\"%ds\",minutes:\"%dm\",hours:\"%dh\",days:\"MMM D\",years:\"MMM D, YYYY\"},el:{now:\"\",seconds:\"%d\",minutes:\"%d\",hours:\"%d\",days:\"MMM D\",years:\"MMM D, YYYY\"}};n.default=function(e,n,t){n.prototype.twitter=function(){return function(e){var n=e.$locale(),t=n?n.name:\"en\",r=Math.abs(e.diff(new Date)),s=null,u=null;(s=r<=1e3?\"now\":r<6e4?\"seconds\":r<36e5?\"minutes\":r<864e5?\"hours\":r<31536e6?\"days\":\"years\",u&&s||!([\"seconds\",\"minutes\",\"hours\"].indexOf(s)>-1))||(u=new o.a(r)[s]());if(\"days\"===s||\"years\"===s){var a=i[t][s];return e.format(a)}return i[t][s].replace(\"%d\",u)}(this)}}}])});","!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_localizedFormat=t()}(this,(function(){\"use strict\";var e={LTS:\"h:mm:ss A\",LT:\"h:mm A\",L:\"MM/DD/YYYY\",LL:\"MMMM D, YYYY\",LLL:\"MMMM D, YYYY h:mm A\",LLLL:\"dddd, MMMM D, YYYY h:mm A\"};return function(t,o,n){var r=o.prototype,i=r.format;n.en.formats=e,r.format=function(t){void 0===t&&(t=\"YYYY-MM-DDTHH:mm:ssZ\");var o=this.$locale().formats,n=function(t,o){return t.replace(/(\\[[^\\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var i=r&&r.toUpperCase();return n||o[r]||e[r]||o[i].replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,o){return t||o.slice(1)}))}))}(t,void 0===o?{}:o);return i.call(this,n)}}}));","!function(r,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(r=\"undefined\"!=typeof globalThis?globalThis:r||self).dayjs_plugin_relativeTime=e()}(this,(function(){\"use strict\";return function(r,e,t){r=r||{};var n=e.prototype,o={future:\"in %s\",past:\"%s ago\",s:\"a few seconds\",m:\"a minute\",mm:\"%d minutes\",h:\"an hour\",hh:\"%d hours\",d:\"a day\",dd:\"%d days\",M:\"a month\",MM:\"%d months\",y:\"a year\",yy:\"%d years\"};function i(r,e,t,o){return n.fromToBase(r,e,t,o)}t.en.relativeTime=o,n.fromToBase=function(e,n,i,d,u){for(var f,a,s,l=i.$locale().relativeTime||o,h=r.thresholds||[{l:\"s\",r:44,d:\"second\"},{l:\"m\",r:89},{l:\"mm\",r:44,d:\"minute\"},{l:\"h\",r:89},{l:\"hh\",r:21,d:\"hour\"},{l:\"d\",r:35},{l:\"dd\",r:25,d:\"day\"},{l:\"M\",r:45},{l:\"MM\",r:10,d:\"month\"},{l:\"y\",r:17},{l:\"yy\",d:\"year\"}],m=h.length,c=0;c<m;c+=1){var y=h[c];y.d&&(f=d?t(e).diff(i,y.d,!0):i.diff(e,y.d,!0));var p=(r.rounding||Math.round)(Math.abs(f));if(s=f>0,p<=y.r||!y.r){p<=1&&c>0&&(y=h[c-1]);var v=l[y.l];u&&(p=u(\"\"+p)),a=\"string\"==typeof v?v.replace(\"%d\",p):v(p,n,y.l,s);break}}if(n)return a;var M=s?l.future:l.past;return\"function\"==typeof M?M(a):M.replace(\"%s\",a)},n.to=function(r,e){return i(r,e,this,!0)},n.from=function(r,e){return i(r,e,this)};var d=function(r){return r.$u?t.utc():t()};n.toNow=function(r){return this.to(d(this),r)},n.fromNow=function(r){return this.from(d(this),r)}}}));","// Twitter-style relative time component\n// Seconds = 1s\n// Minutes = 1m\n// Hours = 1h\n// Days = 1d\n// After 7 days, use DD/MM/YYYY or MM/DD/YYYY\nimport dayjs from 'dayjs';\nimport dayjsTwitter from 'dayjs-twitter';\nimport localizedFormat from 'dayjs/plugin/localizedFormat';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport { useEffect, useMemo, useReducer } from 'preact/hooks';\n\ndayjs.extend(dayjsTwitter);\ndayjs.extend(localizedFormat);\ndayjs.extend(relativeTime);\n\nconst dtf = new Intl.DateTimeFormat();\n\nexport default function RelativeTime({ datetime, format }) {\n  if (!datetime) return null;\n  const [renderCount, rerender] = useReducer((x) => x + 1, 0);\n  const date = useMemo(() => dayjs(datetime), [datetime]);\n  const [dateStr, dt, title] = useMemo(() => {\n    if (!date.isValid()) return ['' + datetime, '', ''];\n    let str;\n    if (format === 'micro') {\n      // If date <= 1 day ago or day is within this year\n      const now = dayjs();\n      const dayDiff = now.diff(date, 'day');\n      if (dayDiff <= 1 || now.year() === date.year()) {\n        str = date.twitter();\n      } else {\n        str = dtf.format(date.toDate());\n      }\n    }\n    if (!str) str = date.fromNow();\n    return [str, date.toISOString(), date.format('LLLL')];\n  }, [date, format, renderCount]);\n\n  useEffect(() => {\n    if (!date.isValid()) return;\n    let timeout;\n    let raf;\n    function rafRerender() {\n      raf = requestAnimationFrame(() => {\n        rerender();\n        scheduleRerender();\n      });\n    }\n    function scheduleRerender() {\n      // If less than 1 minute, rerender every 10s\n      // If less than 1 hour rerender every 1m\n      // Else, don't need to rerender\n      if (date.diff(dayjs(), 'minute', true) < 1) {\n        timeout = setTimeout(rafRerender, 10_000);\n      } else if (date.diff(dayjs(), 'hour', true) < 1) {\n        timeout = setTimeout(rafRerender, 60_000);\n      }\n    }\n    scheduleRerender();\n    return () => {\n      clearTimeout(timeout);\n      cancelAnimationFrame(raf);\n    };\n  }, []);\n\n  return (\n    <time datetime={dt} title={title}>\n      {dateStr}\n    </time>\n  );\n}\n","import { match } from '@formatjs/intl-localematcher';\n\nimport mem from './mem';\n\nfunction _localeMatch(...args) {\n  // Wrap in try/catch because localeMatcher throws on invalid locales\n  try {\n    return match(...args);\n  } catch (e) {\n    const defaultLocale = args[2];\n    return defaultLocale || false;\n  }\n}\nconst localeMatch = mem(_localeMatch);\n\nexport default localeMatch;\n","import translationTargetLanguages from '../data/lingva-target-languages';\n\nimport localeMatch from './locale-match';\nimport states from './states';\n\nconst locales = [\n  new Intl.DateTimeFormat().resolvedOptions().locale,\n  ...navigator.languages,\n];\n\nconst localeTargetLanguages = localeMatch(\n  locales,\n  translationTargetLanguages.map((l) => l.code.replace('_', '-')), // The underscore will fail Intl.Locale inside `match`\n  'en',\n);\n\nfunction getTranslateTargetLanguage(fromSettings = false) {\n  if (fromSettings) {\n    const { contentTranslationTargetLanguage } = states.settings;\n    if (contentTranslationTargetLanguage) {\n      return contentTranslationTargetLanguage;\n    }\n  }\n  return localeTargetLanguages;\n}\n\nexport default getTranslateTargetLanguage;\n","import mem from './mem';\n\nconst IntlDN = new Intl.DisplayNames(navigator.languages, {\n  type: 'language',\n});\n\nfunction _localeCode2Text(code) {\n  try {\n    return IntlDN.of(code);\n  } catch (e) {\n    console.error(e);\n    return null;\n  }\n}\n\nexport default mem(_localeCode2Text);\n","'use strict';\n\n/** Highest positive signed 32-bit float value */\nconst maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\n\n/** Bootstring parameters */\nconst base = 36;\nconst tMin = 1;\nconst tMax = 26;\nconst skew = 38;\nconst damp = 700;\nconst initialBias = 72;\nconst initialN = 128; // 0x80\nconst delimiter = '-'; // '\\x2D'\n\n/** Regular expressions */\nconst regexPunycode = /^xn--/;\nconst regexNonASCII = /[^\\0-\\x7F]/; // Note: U+007F DEL is excluded too.\nconst regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\n\n/** Error messages */\nconst errors = {\n\t'overflow': 'Overflow: input needs wider integers to process',\n\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t'invalid-input': 'Invalid input'\n};\n\n/** Convenience shortcuts */\nconst baseMinusTMin = base - tMin;\nconst floor = Math.floor;\nconst stringFromCharCode = String.fromCharCode;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * A generic error utility function.\n * @private\n * @param {String} type The error type.\n * @returns {Error} Throws a `RangeError` with the applicable error message.\n */\nfunction error(type) {\n\tthrow new RangeError(errors[type]);\n}\n\n/**\n * A generic `Array#map` utility function.\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function that gets called for every array\n * item.\n * @returns {Array} A new array of values returned by the callback function.\n */\nfunction map(array, callback) {\n\tconst result = [];\n\tlet length = array.length;\n\twhile (length--) {\n\t\tresult[length] = callback(array[length]);\n\t}\n\treturn result;\n}\n\n/**\n * A simple `Array#map`-like wrapper to work with domain name strings or email\n * addresses.\n * @private\n * @param {String} domain The domain name or email address.\n * @param {Function} callback The function that gets called for every\n * character.\n * @returns {String} A new string of characters returned by the callback\n * function.\n */\nfunction mapDomain(domain, callback) {\n\tconst parts = domain.split('@');\n\tlet result = '';\n\tif (parts.length > 1) {\n\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t// the local part (i.e. everything up to `@`) intact.\n\t\tresult = parts[0] + '@';\n\t\tdomain = parts[1];\n\t}\n\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\tdomain = domain.replace(regexSeparators, '\\x2E');\n\tconst labels = domain.split('.');\n\tconst encoded = map(labels, callback).join('.');\n\treturn result + encoded;\n}\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n\tconst output = [];\n\tlet counter = 0;\n\tconst length = string.length;\n\twhile (counter < length) {\n\t\tconst value = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// It's a high surrogate, and there is a next character.\n\t\t\tconst extra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // Low surrogate.\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// It's an unmatched surrogate; only append this code unit, in case the\n\t\t\t\t// next code unit is the high surrogate of a surrogate pair.\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n/**\n * Creates a string based on an array of numeric code points.\n * @see `punycode.ucs2.decode`\n * @memberOf punycode.ucs2\n * @name encode\n * @param {Array} codePoints The array of numeric code points.\n * @returns {String} The new Unicode string (UCS-2).\n */\nconst ucs2encode = codePoints => String.fromCodePoint(...codePoints);\n\n/**\n * Converts a basic code point into a digit/integer.\n * @see `digitToBasic()`\n * @private\n * @param {Number} codePoint The basic numeric code point value.\n * @returns {Number} The numeric value of a basic code point (for use in\n * representing integers) in the range `0` to `base - 1`, or `base` if\n * the code point does not represent a value.\n */\nconst basicToDigit = function(codePoint) {\n\tif (codePoint >= 0x30 && codePoint < 0x3A) {\n\t\treturn 26 + (codePoint - 0x30);\n\t}\n\tif (codePoint >= 0x41 && codePoint < 0x5B) {\n\t\treturn codePoint - 0x41;\n\t}\n\tif (codePoint >= 0x61 && codePoint < 0x7B) {\n\t\treturn codePoint - 0x61;\n\t}\n\treturn base;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n * @see `basicToDigit()`\n * @private\n * @param {Number} digit The numeric value of a basic code point.\n * @returns {Number} The basic code point whose value (when used for\n * representing integers) is `digit`, which needs to be in the range\n * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n * used; else, the lowercase form is used. The behavior is undefined\n * if `flag` is non-zero and `digit` has no uppercase form.\n */\nconst digitToBasic = function(digit, flag) {\n\t//  0..25 map to ASCII a..z or A..Z\n\t// 26..35 map to ASCII 0..9\n\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n * @private\n */\nconst adapt = function(delta, numPoints, firstTime) {\n\tlet k = 0;\n\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\tdelta += floor(delta / numPoints);\n\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\tdelta = floor(delta / baseMinusTMin);\n\t}\n\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n * symbols.\n * @memberOf punycode\n * @param {String} input The Punycode string of ASCII-only symbols.\n * @returns {String} The resulting string of Unicode symbols.\n */\nconst decode = function(input) {\n\t// Don't use UCS-2.\n\tconst output = [];\n\tconst inputLength = input.length;\n\tlet i = 0;\n\tlet n = initialN;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points: let `basic` be the number of input code\n\t// points before the last delimiter, or `0` if there is none, then copy\n\t// the first basic code points to the output.\n\n\tlet basic = input.lastIndexOf(delimiter);\n\tif (basic < 0) {\n\t\tbasic = 0;\n\t}\n\n\tfor (let j = 0; j < basic; ++j) {\n\t\t// if it's not a basic code point\n\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\terror('not-basic');\n\t\t}\n\t\toutput.push(input.charCodeAt(j));\n\t}\n\n\t// Main decoding loop: start just after the last delimiter if any basic code\n\t// points were copied; start at the beginning otherwise.\n\n\tfor (let index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t// `index` is the index of the next character to be consumed.\n\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t// which gets added to `i`. The overflow checking is easier\n\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t// value at the end to obtain `delta`.\n\t\tconst oldi = i;\n\t\tfor (let w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\tif (index >= inputLength) {\n\t\t\t\terror('invalid-input');\n\t\t\t}\n\n\t\t\tconst digit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\tif (digit >= base) {\n\t\t\t\terror('invalid-input');\n\t\t\t}\n\t\t\tif (digit > floor((maxInt - i) / w)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\ti += digit * w;\n\t\t\tconst t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\tif (digit < t) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst baseMinusT = base - t;\n\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tw *= baseMinusT;\n\n\t\t}\n\n\t\tconst out = output.length + 1;\n\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t// incrementing `n` each time, so we'll fix that now:\n\t\tif (floor(i / out) > maxInt - n) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tn += floor(i / out);\n\t\ti %= out;\n\n\t\t// Insert `n` at position `i` of the output.\n\t\toutput.splice(i++, 0, n);\n\n\t}\n\n\treturn String.fromCodePoint(...output);\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n * @memberOf punycode\n * @param {String} input The string of Unicode symbols.\n * @returns {String} The resulting Punycode string of ASCII-only symbols.\n */\nconst encode = function(input) {\n\tconst output = [];\n\n\t// Convert the input in UCS-2 to an array of Unicode code points.\n\tinput = ucs2decode(input);\n\n\t// Cache the length.\n\tconst inputLength = input.length;\n\n\t// Initialize the state.\n\tlet n = initialN;\n\tlet delta = 0;\n\tlet bias = initialBias;\n\n\t// Handle the basic code points.\n\tfor (const currentValue of input) {\n\t\tif (currentValue < 0x80) {\n\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t}\n\t}\n\n\tconst basicLength = output.length;\n\tlet handledCPCount = basicLength;\n\n\t// `handledCPCount` is the number of code points that have been handled;\n\t// `basicLength` is the number of basic code points.\n\n\t// Finish the basic string with a delimiter unless it's empty.\n\tif (basicLength) {\n\t\toutput.push(delimiter);\n\t}\n\n\t// Main encoding loop:\n\twhile (handledCPCount < inputLength) {\n\n\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t// larger one:\n\t\tlet m = maxInt;\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\tm = currentValue;\n\t\t\t}\n\t\t}\n\n\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t// but guard against overflow.\n\t\tconst handledCPCountPlusOne = handledCPCount + 1;\n\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\tn = m;\n\n\t\tfor (const currentValue of input) {\n\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\t\t\tif (currentValue === n) {\n\t\t\t\t// Represent delta as a generalized variable-length integer.\n\t\t\t\tlet q = delta;\n\t\t\t\tfor (let k = base; /* no condition */; k += base) {\n\t\t\t\t\tconst t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconst qMinusT = q - t;\n\t\t\t\t\tconst baseMinusT = base - t;\n\t\t\t\t\toutput.push(\n\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t);\n\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t}\n\n\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount === basicLength);\n\t\t\t\tdelta = 0;\n\t\t\t\t++handledCPCount;\n\t\t\t}\n\t\t}\n\n\t\t++delta;\n\t\t++n;\n\n\t}\n\treturn output.join('');\n};\n\n/**\n * Converts a Punycode string representing a domain name or an email address\n * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n * it doesn't matter if you call it on a string that has already been\n * converted to Unicode.\n * @memberOf punycode\n * @param {String} input The Punycoded domain name or email address to\n * convert to Unicode.\n * @returns {String} The Unicode representation of the given Punycode\n * string.\n */\nconst toUnicode = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexPunycode.test(string)\n\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t: string;\n\t});\n};\n\n/**\n * Converts a Unicode string representing a domain name or an email address to\n * Punycode. Only the non-ASCII parts of the domain name will be converted,\n * i.e. it doesn't matter if you call it with a domain that's already in\n * ASCII.\n * @memberOf punycode\n * @param {String} input The domain name or email address to convert, as a\n * Unicode string.\n * @returns {String} The Punycode representation of the given domain name or\n * email address.\n */\nconst toASCII = function(input) {\n\treturn mapDomain(input, function(string) {\n\t\treturn regexNonASCII.test(string)\n\t\t\t? 'xn--' + encode(string)\n\t\t\t: string;\n\t});\n};\n\n/*--------------------------------------------------------------------------*/\n\n/** Define the public API */\nconst punycode = {\n\t/**\n\t * A string representing the current Punycode.js version number.\n\t * @memberOf punycode\n\t * @type String\n\t */\n\t'version': '2.3.1',\n\t/**\n\t * An object of methods to convert from JavaScript's internal character\n\t * representation (UCS-2) to Unicode code points, and back.\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode\n\t * @type Object\n\t */\n\t'ucs2': {\n\t\t'decode': ucs2decode,\n\t\t'encode': ucs2encode\n\t},\n\t'decode': decode,\n\t'encode': encode,\n\t'toASCII': toASCII,\n\t'toUnicode': toUnicode\n};\n\nexport { ucs2decode, ucs2encode, decode, encode, toASCII, toUnicode };\nexport default punycode;\n","function emojifyText(text, emojis = []) {\n  if (!text) return '';\n  if (!emojis.length) return text;\n  if (text.indexOf(':') === -1) return text;\n  // Replace shortcodes in text with emoji\n  // emojis = [{ shortcode: 'smile', url: 'https://example.com/emoji.png' }]\n  emojis.forEach((emoji) => {\n    const { shortcode, staticUrl, url } = emoji;\n    text = text.replace(\n      new RegExp(`:${shortcode}:`, 'g'),\n      `<picture><source srcset=\"${staticUrl}\" media=\"(prefers-reduced-motion: reduce)\"></source><img class=\"shortcode-emoji emoji\" src=\"${url}\" alt=\":${shortcode}:\" width=\"16\" height=\"16\" loading=\"lazy\" decoding=\"async\" /></picture>`,\n    );\n  });\n  // console.log(text, emojis);\n  return text;\n}\n\nexport default emojifyText;\n","import emojifyText from './emojify-text';\nimport mem from './mem';\n\nconst fauxDiv = document.createElement('div');\nconst whitelistLinkClasses = ['u-url', 'mention', 'hashtag'];\n\nfunction _enhanceContent(content, opts = {}) {\n  const { emojis, postEnhanceDOM = () => {} } = opts;\n  let enhancedContent = content;\n  const dom = document.createElement('div');\n  dom.innerHTML = enhancedContent;\n  const hasLink = /<a/i.test(enhancedContent);\n  const hasCodeBlock = enhancedContent.includes('```');\n\n  if (hasLink) {\n    // Add target=\"_blank\" to all links with no target=\"_blank\"\n    // E.g. `note` in `account`\n    const noTargetBlankLinks = dom.querySelectorAll('a:not([target=\"_blank\"])');\n    noTargetBlankLinks.forEach((link) => {\n      link.setAttribute('target', '_blank');\n    });\n\n    // Remove all classes except `u-url`, `mention`, `hashtag`\n    const links = dom.querySelectorAll('a[class]');\n    links.forEach((link) => {\n      link.classList.forEach((c) => {\n        if (!whitelistLinkClasses.includes(c)) {\n          link.classList.remove(c);\n        }\n      });\n    });\n  }\n\n  // Add 'has-url-text' to all links that contains a url\n  if (hasLink) {\n    const links = dom.querySelectorAll('a[href]');\n    links.forEach((link) => {\n      if (/^https?:\\/\\//i.test(link.textContent.trim())) {\n        link.classList.add('has-url-text');\n        shortenLink(link);\n      }\n    });\n  }\n\n  // Spanify un-spanned mentions\n  if (hasLink) {\n    const links = dom.querySelectorAll('a[href]');\n    const usernames = [];\n    links.forEach((link) => {\n      const text = link.innerText.trim();\n      const hasChildren = link.querySelector('*');\n      // If text looks like @username@domain, then it's a mention\n      if (/^@[^@]+(@[^@]+)?$/g.test(text)) {\n        // Only show @username\n        const [_, username, domain] = text.split('@');\n        if (!hasChildren) {\n          if (\n            !usernames.some(([u]) => u === username) ||\n            usernames.some(([u, d]) => u === username && d === domain)\n          ) {\n            link.innerHTML = `@<span>${username}</span>`;\n            usernames.push([username, domain]);\n          } else {\n            link.innerHTML = `@<span>${username}@${domain}</span>`;\n          }\n        }\n        link.classList.add('mention');\n      }\n      // If text looks like #hashtag, then it's a hashtag\n      if (/^#[^#]+$/g.test(text)) {\n        if (!hasChildren) link.innerHTML = `#<span>${text.slice(1)}</span>`;\n        link.classList.add('mention', 'hashtag');\n      }\n    });\n  }\n\n  // EMOJIS\n  // ======\n  // Convert :shortcode: to <img />\n  let textNodes;\n  if (enhancedContent.includes(':')) {\n    textNodes = extractTextNodes(dom);\n    textNodes.forEach((node) => {\n      let html = node.nodeValue\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;');\n      if (emojis) {\n        html = emojifyText(html, emojis);\n      }\n      fauxDiv.innerHTML = html;\n      // const nodes = [...fauxDiv.childNodes];\n      node.replaceWith(...fauxDiv.childNodes);\n    });\n  }\n\n  // CODE BLOCKS\n  // ===========\n  // Convert ```code``` to <pre><code>code</code></pre>\n  if (hasCodeBlock) {\n    const blocks = [...dom.querySelectorAll('p')].filter((p) =>\n      /^```[^]+```$/g.test(p.innerText.trim()),\n    );\n    blocks.forEach((block) => {\n      const pre = document.createElement('pre');\n      // Replace <br /> with newlines\n      block.querySelectorAll('br').forEach((br) => br.replaceWith('\\n'));\n      pre.innerHTML = `<code>${block.innerHTML.trim()}</code>`;\n      block.replaceWith(pre);\n    });\n  }\n\n  // Convert multi-paragraph code blocks to <pre><code>code</code></pre>\n  if (hasCodeBlock) {\n    const paragraphs = [...dom.querySelectorAll('p')];\n    // Filter out paragraphs with ``` in beginning only\n    const codeBlocks = paragraphs.filter((p) => /^```/g.test(p.innerText));\n    // For each codeBlocks, get all paragraphs until the last paragraph with ``` at the end only\n    codeBlocks.forEach((block) => {\n      const nextParagraphs = [block];\n      let hasCodeBlock = false;\n      let currentBlock = block;\n      while (currentBlock.nextElementSibling) {\n        const next = currentBlock.nextElementSibling;\n        if (next && next.tagName === 'P') {\n          if (/```$/g.test(next.innerText)) {\n            nextParagraphs.push(next);\n            hasCodeBlock = true;\n            break;\n          } else {\n            nextParagraphs.push(next);\n          }\n        } else {\n          break;\n        }\n        currentBlock = next;\n      }\n      if (hasCodeBlock) {\n        const pre = document.createElement('pre');\n        nextParagraphs.forEach((p) => {\n          // Replace <br /> with newlines\n          p.querySelectorAll('br').forEach((br) => br.replaceWith('\\n'));\n        });\n        const codeText = nextParagraphs.map((p) => p.innerHTML).join('\\n\\n');\n        pre.innerHTML = `<code tabindex=\"0\">${codeText}</code>`;\n        block.replaceWith(pre);\n        nextParagraphs.forEach((p) => p.remove());\n      }\n    });\n  }\n\n  // INLINE CODE\n  // ===========\n  // Convert `code` to <code>code</code>\n  if (enhancedContent.includes('`')) {\n    textNodes = extractTextNodes(dom);\n    textNodes.forEach((node) => {\n      let html = node.nodeValue\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;');\n      if (/`[^`]+`/g.test(html)) {\n        html = html.replaceAll(/(`[^]+?`)/g, '<code>$1</code>');\n      }\n      fauxDiv.innerHTML = html;\n      // const nodes = [...fauxDiv.childNodes];\n      node.replaceWith(...fauxDiv.childNodes);\n    });\n  }\n\n  // TWITTER USERNAMES\n  // =================\n  // Convert @username@twitter.com to <a href=\"https://twitter.com/username\">@username@twitter.com</a>\n  if (/twitter\\.com/i.test(enhancedContent)) {\n    textNodes = extractTextNodes(dom, {\n      rejectFilter: ['A'],\n    });\n    textNodes.forEach((node) => {\n      let html = node.nodeValue\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;');\n      if (/@[a-zA-Z0-9_]+@twitter\\.com/g.test(html)) {\n        html = html.replaceAll(\n          /(@([a-zA-Z0-9_]+)@twitter\\.com)/g,\n          '<a href=\"https://twitter.com/$2\" rel=\"nofollow noopener noreferrer\" target=\"_blank\">$1</a>',\n        );\n      }\n      fauxDiv.innerHTML = html;\n      // const nodes = [...fauxDiv.childNodes];\n      node.replaceWith(...fauxDiv.childNodes);\n    });\n  }\n\n  // HASHTAG STUFFING\n  // ================\n  // Get the <p> that contains a lot of hashtags, add a class to it\n  if (enhancedContent.includes('#')) {\n    let prevIndex = null;\n    const hashtagStuffedParagraphs = [...dom.querySelectorAll('p')].filter(\n      (p, index) => {\n        let hashtagCount = 0;\n        for (let i = 0; i < p.childNodes.length; i++) {\n          const node = p.childNodes[i];\n\n          if (node.nodeType === Node.TEXT_NODE) {\n            const text = node.textContent.trim();\n            if (text !== '') {\n              return false;\n            }\n          } else if (node.tagName === 'BR') {\n            // Ignore <br />\n          } else if (node.tagName === 'A') {\n            const linkText = node.textContent.trim();\n            if (!linkText || !linkText.startsWith('#')) {\n              return false;\n            } else {\n              hashtagCount++;\n            }\n          } else {\n            return false;\n          }\n        }\n        // Only consider \"stuffing\" if:\n        // - there are more than 3 hashtags\n        // - there are more than 1 hashtag in adjacent paragraphs\n        if (hashtagCount > 3) {\n          prevIndex = index;\n          return true;\n        }\n        if (hashtagCount > 1 && prevIndex && index === prevIndex + 1) {\n          prevIndex = index;\n          return true;\n        }\n      },\n    );\n    if (hashtagStuffedParagraphs?.length) {\n      hashtagStuffedParagraphs.forEach((p) => {\n        p.classList.add('hashtag-stuffing');\n        p.title = p.innerText;\n      });\n    }\n  }\n\n  // ADD ASPECT RATIO TO ALL IMAGES\n  if (enhancedContent.includes('<img')) {\n    dom.querySelectorAll('img').forEach((img) => {\n      const width = img.getAttribute('width') || img.naturalWidth;\n      const height = img.getAttribute('height') || img.naturalHeight;\n      if (width && height) {\n        img.style.setProperty('--original-aspect-ratio', `${width}/${height}`);\n      }\n    });\n  }\n\n  if (postEnhanceDOM) {\n    queueMicrotask(() => postEnhanceDOM(dom));\n    // postEnhanceDOM(dom); // mutate dom\n  }\n\n  enhancedContent = dom.innerHTML;\n\n  return enhancedContent;\n}\nconst enhanceContent = mem(_enhanceContent);\n\nconst defaultRejectFilter = [\n  // Document metadata\n  'STYLE',\n  // Image and multimedia\n  'IMG',\n  'VIDEO',\n  'AUDIO',\n  'AREA',\n  'MAP',\n  'TRACK',\n  // Embedded content\n  'EMBED',\n  'IFRAME',\n  'OBJECT',\n  'PICTURE',\n  'PORTAL',\n  'SOURCE',\n  // SVG and MathML\n  'SVG',\n  'MATH',\n  // Scripting\n  'CANVAS',\n  'NOSCRIPT',\n  'SCRIPT',\n  // Forms\n  'INPUT',\n  'OPTION',\n  'TEXTAREA',\n  // Web Components\n  'SLOT',\n  'TEMPLATE',\n];\nconst defaultRejectFilterMap = Object.fromEntries(\n  defaultRejectFilter.map((nodeName) => [nodeName, true]),\n);\n\nconst URL_PREFIX_REGEX = /^(https?:\\/\\/(www\\.)?|xmpp:)/;\nconst URL_DISPLAY_LENGTH = 30;\n// Similar to https://github.com/mastodon/mastodon/blob/1666b1955992e16f4605b414c6563ca25b3a3f18/app/lib/text_formatter.rb#L54-L69\nfunction shortenLink(link) {\n  if (!link || link.querySelector?.('*')) {\n    return;\n  }\n  try {\n    const url = link.innerText.trim();\n    const prefix = (url.match(URL_PREFIX_REGEX) || [])[0] || '';\n    if (!prefix) return;\n    const displayURL = url.slice(\n      prefix.length,\n      prefix.length + URL_DISPLAY_LENGTH,\n    );\n    const suffix = url.slice(prefix.length + URL_DISPLAY_LENGTH);\n    const cutoff = url.slice(prefix.length).length > URL_DISPLAY_LENGTH;\n    link.innerHTML = `<span class=\"invisible\">${prefix}</span><span class=${\n      cutoff ? 'ellipsis' : ''\n    }>${displayURL}</span><span class=\"invisible\">${suffix}</span>`;\n  } catch (e) {}\n}\n\nfunction extractTextNodes(dom, opts = {}) {\n  const textNodes = [];\n  const rejectFilterMap = Object.assign(\n    {},\n    defaultRejectFilterMap,\n    opts.rejectFilter?.reduce((acc, cur) => {\n      acc[cur] = true;\n      return acc;\n    }, {}),\n  );\n  const walk = document.createTreeWalker(\n    dom,\n    NodeFilter.SHOW_TEXT,\n    {\n      acceptNode(node) {\n        if (rejectFilterMap[node.parentNode.nodeName]) {\n          return NodeFilter.FILTER_REJECT;\n        }\n        return NodeFilter.FILTER_ACCEPT;\n      },\n    },\n    false,\n  );\n  let node;\n  while ((node = walk.nextNode())) {\n    textNodes.push(node);\n  }\n  return textNodes;\n}\n\nexport default enhanceContent;\n","import mem from './mem';\n\nconst div = document.createElement('div');\nfunction getHTMLText(html, opts) {\n  if (!html) return '';\n  const { preProcess } = opts || {};\n\n  div.innerHTML = html\n    .replace(/<\\/p>/g, '</p>\\n\\n')\n    .replace(/<\\/li>/g, '</li>\\n');\n  div.querySelectorAll('br').forEach((br) => {\n    br.replaceWith('\\n');\n  });\n\n  preProcess?.(div);\n\n  // MASTODON-SPECIFIC classes\n  // Remove .invisible\n  div.querySelectorAll('.invisible').forEach((el) => {\n    el.remove();\n  });\n  // Add  at end of .ellipsis\n  div.querySelectorAll('.ellipsis').forEach((el) => {\n    el.append('...');\n  });\n\n  return div.innerText.replace(/[\\r\\n]{3,}/g, '\\n\\n').trim();\n}\n\nexport default mem(getHTMLText);\n","import states from './states';\n\nfunction handleContentLinks(opts) {\n  const { mentions = [], instance, previewMode, statusURL } = opts || {};\n  return (e) => {\n    let { target } = e;\n    target = target.closest('a');\n    if (!target) return;\n\n    // If cmd/ctrl/shift/alt key is pressed or middle-click, let the browser handle it\n    if (e.metaKey || e.ctrlKey || e.shiftKey || e.altKey || e.which === 2) {\n      return;\n    }\n\n    const prevText = target.previousSibling?.textContent;\n    const textBeforeLinkIsAt = prevText?.endsWith('@');\n    const textStartsWithAt = target.innerText.startsWith('@');\n    if (\n      ((target.classList.contains('u-url') ||\n        target.classList.contains('mention')) &&\n        textStartsWithAt) ||\n      (textBeforeLinkIsAt && !textStartsWithAt)\n    ) {\n      const targetText = (\n        target.querySelector('span') || target\n      ).innerText.trim();\n      const username = targetText.replace(/^@/, '');\n      const url = target.getAttribute('href');\n      // Only fallback to acct/username check if url doesn't match\n      const mention =\n        mentions.find((mention) => mention.url === url) ||\n        mentions.find(\n          (mention) =>\n            mention.acct === username || mention.username === username,\n        );\n      console.warn('MENTION', mention, url);\n      if (mention) {\n        e.preventDefault();\n        e.stopPropagation();\n        states.showAccount = {\n          account: mention.acct,\n          instance,\n        };\n      } else if (!/^http/i.test(targetText)) {\n        console.log('mention not found', targetText);\n        e.preventDefault();\n        e.stopPropagation();\n        const href = target.getAttribute('href');\n        states.showAccount = {\n          account: href,\n          instance,\n        };\n      }\n    } else if (!previewMode) {\n      const textBeforeLinkIsHash = prevText?.endsWith('#');\n      if (target.classList.contains('hashtag') || textBeforeLinkIsHash) {\n        e.preventDefault();\n        e.stopPropagation();\n        const tag = target.innerText.replace(/^#/, '').trim();\n        const hashURL = instance ? `#/${instance}/t/${tag}` : `#/t/${tag}`;\n        console.log({ hashURL });\n        location.hash = hashURL;\n      } else if (\n        states.unfurledLinks[target.href]?.url &&\n        statusURL !== target.href\n      ) {\n        // If unfurled AND not self-referential\n        e.preventDefault();\n        e.stopPropagation();\n        states.prevLocation = {\n          pathname: location.hash.replace(/^#/, ''),\n        };\n        location.hash = `#${states.unfurledLinks[target.href].url}`;\n      }\n    }\n  };\n}\n\nexport default handleContentLinks;\n","import mem from './mem';\n\nconst { locale } = new Intl.DateTimeFormat().resolvedOptions();\n\nconst _DateTimeFormat = (opts) => {\n  const { dateYear, hideTime, formatOpts } = opts || {};\n  const currentYear = new Date().getFullYear();\n  return Intl.DateTimeFormat(locale, {\n    // Show year if not current year\n    year: dateYear === currentYear ? undefined : 'numeric',\n    month: 'short',\n    day: 'numeric',\n    // Hide time if requested\n    hour: hideTime ? undefined : 'numeric',\n    minute: hideTime ? undefined : 'numeric',\n    ...formatOpts,\n  });\n};\nconst DateTimeFormat = mem(_DateTimeFormat);\n\nfunction niceDateTime(date, dtfOpts) {\n  if (!(date instanceof Date)) {\n    date = new Date(date);\n  }\n  const DTF = DateTimeFormat({\n    dateYear: date.getFullYear(),\n    ...dtfOpts,\n  });\n  const dateText = DTF.format(date);\n  return dateText;\n}\n\nexport default niceDateTime;\n","const { locale } = Intl.NumberFormat().resolvedOptions();\nconst shortenNumber = Intl.NumberFormat(locale, {\n  notation: 'compact',\n  roundingMode: 'floor',\n}).format;\nexport default shortenNumber;\n","import openOSK from './open-osk';\nimport showToast from './show-toast';\nimport states from './states';\n\nconst TOAST_DURATION = 5_000; // 5 seconds\n\nexport default function showCompose(opts) {\n  if (!opts) opts = true;\n\n  if (states.showCompose) {\n    if (states.composerState.minimized) {\n      showToast({\n        duration: TOAST_DURATION,\n        text: `A draft post is currently minimized. Post or discard it before creating a new one.`,\n      });\n    } else {\n      showToast({\n        duration: TOAST_DURATION,\n        text: `A post is currently open. Post or discard it before creating a new one.`,\n      });\n    }\n    return;\n  }\n\n  openOSK();\n  states.showCompose = opts;\n}\n","export const semver = /^[v^~<>=]*?(\\d+)(?:\\.([x*]|\\d+)(?:\\.([x*]|\\d+)(?:\\.([x*]|\\d+))?(?:-([\\da-z\\-]+(?:\\.[\\da-z\\-]+)*))?(?:\\+[\\da-z\\-]+(?:\\.[\\da-z\\-]+)*)?)?)?$/i;\nexport const validateAndParse = (version) => {\n    if (typeof version !== 'string') {\n        throw new TypeError('Invalid argument expected string');\n    }\n    const match = version.match(semver);\n    if (!match) {\n        throw new Error(`Invalid argument not valid semver ('${version}' received)`);\n    }\n    match.shift();\n    return match;\n};\nconst isWildcard = (s) => s === '*' || s === 'x' || s === 'X';\nconst tryParse = (v) => {\n    const n = parseInt(v, 10);\n    return isNaN(n) ? v : n;\n};\nconst forceType = (a, b) => typeof a !== typeof b ? [String(a), String(b)] : [a, b];\nconst compareStrings = (a, b) => {\n    if (isWildcard(a) || isWildcard(b))\n        return 0;\n    const [ap, bp] = forceType(tryParse(a), tryParse(b));\n    if (ap > bp)\n        return 1;\n    if (ap < bp)\n        return -1;\n    return 0;\n};\nexport const compareSegments = (a, b) => {\n    for (let i = 0; i < Math.max(a.length, b.length); i++) {\n        const r = compareStrings(a[i] || '0', b[i] || '0');\n        if (r !== 0)\n            return r;\n    }\n    return 0;\n};\n//# sourceMappingURL=utils.js.map","import { compareSegments, validateAndParse } from './utils';\n/**\n * Compare [semver](https://semver.org/) version strings to find greater, equal or lesser.\n * This library supports the full semver specification, including comparing versions with different number of digits like `1.0.0`, `1.0`, `1`, and pre-release versions like `1.0.0-alpha`.\n * @param v1 - First version to compare\n * @param v2 - Second version to compare\n * @returns Numeric value compatible with the [Array.sort(fn) interface](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#Parameters).\n */\nexport const compareVersions = (v1, v2) => {\n    // validate input and split into segments\n    const n1 = validateAndParse(v1);\n    const n2 = validateAndParse(v2);\n    // pop off the patch\n    const p1 = n1.pop();\n    const p2 = n2.pop();\n    // validate numbers\n    const r = compareSegments(n1, n2);\n    if (r !== 0)\n        return r;\n    // validate pre-release\n    if (p1 && p2) {\n        return compareSegments(p1.split('.'), p2.split('.'));\n    }\n    else if (p1 || p2) {\n        return p1 ? -1 : 1;\n    }\n    return 0;\n};\n//# sourceMappingURL=compareVersions.js.map","import { compareVersions } from './compareVersions';\n/**\n * Compare [semver](https://semver.org/) version strings using the specified operator.\n *\n * @param v1 First version to compare\n * @param v2 Second version to compare\n * @param operator Allowed arithmetic operator to use\n * @returns `true` if the comparison between the firstVersion and the secondVersion satisfies the operator, `false` otherwise.\n *\n * @example\n * ```\n * compare('10.1.8', '10.0.4', '>'); // return true\n * compare('10.0.1', '10.0.1', '='); // return true\n * compare('10.1.1', '10.2.2', '<'); // return true\n * compare('10.1.1', '10.2.2', '<='); // return true\n * compare('10.1.1', '10.2.2', '>='); // return false\n * ```\n */\nexport const compare = (v1, v2, operator) => {\n    // validate input operator\n    assertValidOperator(operator);\n    // since result of compareVersions can only be -1 or 0 or 1\n    // a simple map can be used to replace switch\n    const res = compareVersions(v1, v2);\n    return operatorResMap[operator].includes(res);\n};\nconst operatorResMap = {\n    '>': [1],\n    '>=': [0, 1],\n    '=': [0],\n    '<=': [-1, 0],\n    '<': [-1],\n    '!=': [-1, 1],\n};\nconst allowedOperators = Object.keys(operatorResMap);\nconst assertValidOperator = (op) => {\n    if (typeof op !== 'string') {\n        throw new TypeError(`Invalid operator type, expected string but got ${typeof op}`);\n    }\n    if (allowedOperators.indexOf(op) === -1) {\n        throw new Error(`Invalid operator, expected one of ${allowedOperators.join('|')}`);\n    }\n};\n//# sourceMappingURL=compare.js.map","import { compare } from './compare';\nimport { compareSegments, validateAndParse } from './utils';\n/**\n * Match [npm semver](https://docs.npmjs.com/cli/v6/using-npm/semver) version range.\n *\n * @param version Version number to match\n * @param range Range pattern for version\n * @returns `true` if the version number is within the range, `false` otherwise.\n *\n * @example\n * ```\n * satisfies('1.1.0', '^1.0.0'); // return true\n * satisfies('1.1.0', '~1.0.0'); // return false\n * ```\n */\nexport const satisfies = (version, range) => {\n    // clean input\n    range = range.replace(/([><=]+)\\s+/g, '$1');\n    // handle multiple comparators\n    if (range.includes('||')) {\n        return range.split('||').some((r) => satisfies(version, r));\n    }\n    else if (range.includes(' - ')) {\n        const [a, b] = range.split(' - ', 2);\n        return satisfies(version, `>=${a} <=${b}`);\n    }\n    else if (range.includes(' ')) {\n        return range\n            .trim()\n            .replace(/\\s{2,}/g, ' ')\n            .split(' ')\n            .every((r) => satisfies(version, r));\n    }\n    // if no range operator then \"=\"\n    const m = range.match(/^([<>=~^]+)/);\n    const op = m ? m[1] : '=';\n    // if gt/lt/eq then operator compare\n    if (op !== '^' && op !== '~')\n        return compare(version, range, op);\n    // else range of either \"~\" or \"^\" is assumed\n    const [v1, v2, v3, , vp] = validateAndParse(version);\n    const [r1, r2, r3, , rp] = validateAndParse(range);\n    const v = [v1, v2, v3];\n    const r = [r1, r2 !== null && r2 !== void 0 ? r2 : 'x', r3 !== null && r3 !== void 0 ? r3 : 'x'];\n    // validate pre-release\n    if (rp) {\n        if (!vp)\n            return false;\n        if (compareSegments(v, r) !== 0)\n            return false;\n        if (compareSegments(vp.split('.'), rp.split('.')) === -1)\n            return false;\n    }\n    // first non-zero number\n    const nonZero = r.findIndex((v) => v !== '0') + 1;\n    // pointer to where segments can be >=\n    const i = op === '~' ? 2 : nonZero > 1 ? nonZero : 1;\n    // before pointer must be equal\n    if (compareSegments(v.slice(0, i), r.slice(0, i)) !== 0)\n        return false;\n    // after pointer must be >=\n    if (compareSegments(v.slice(i), r.slice(i)) === -1)\n        return false;\n    return true;\n};\n//# sourceMappingURL=satisfies.js.map","import { satisfies } from 'compare-versions';\n\nimport features from '../data/features.json';\n\nimport { getCurrentInstance } from './store-utils';\n\n// Non-semver(?) UA string detection\nconst containPixelfed = /pixelfed/i;\nconst notContainPixelfed = /^(?!.*pixelfed).*$/i;\nconst platformFeatures = {\n  '@mastodon/lists': notContainPixelfed,\n  '@mastodon/filters': notContainPixelfed,\n  '@mastodon/mentions': notContainPixelfed,\n  '@mastodon/trending-hashtags': notContainPixelfed,\n  '@mastodon/trending-links': notContainPixelfed,\n  '@mastodon/post-bookmark': notContainPixelfed,\n  '@mastodon/post-edit': notContainPixelfed,\n  '@mastodon/profile-edit': notContainPixelfed,\n  '@mastodon/profile-private-note': notContainPixelfed,\n  '@pixelfed/trending': containPixelfed,\n  '@pixelfed/home-include-reblogs': containPixelfed,\n  '@pixelfed/global-feed': containPixelfed,\n};\nconst supportsCache = {};\n\nfunction supports(feature) {\n  try {\n    const { version, domain } = getCurrentInstance();\n    const key = `${domain}-${feature}`;\n    if (supportsCache[key]) return supportsCache[key];\n\n    if (platformFeatures[feature]) {\n      return (supportsCache[key] = platformFeatures[feature].test(version));\n    }\n\n    const range = features[feature];\n    if (!range) return false;\n    return (supportsCache[key] = satisfies(version, range, {\n      includePrerelease: true,\n      loose: true,\n    }));\n  } catch (e) {\n    return false;\n  }\n}\n\nexport default supports;\n","import './account-block.css';\n\n// import { useNavigate } from 'react-router-dom';\nimport enhanceContent from '../utils/enhance-content';\nimport niceDateTime from '../utils/nice-date-time';\nimport shortenNumber from '../utils/shorten-number';\nimport states from '../utils/states';\n\nimport Avatar from './avatar';\nimport EmojiText from './emoji-text';\nimport Icon from './icon';\n\nfunction AccountBlock({\n  skeleton,\n  account,\n  avatarSize = 'xl',\n  useAvatarStatic = false,\n  instance,\n  external,\n  internal,\n  onClick,\n  showActivity = false,\n  showStats = false,\n  accountInstance,\n  hideDisplayName = false,\n  relationship = {},\n  excludeRelationshipAttrs = [],\n}) {\n  if (skeleton) {\n    return (\n      <div class=\"account-block skeleton\">\n        <Avatar size={avatarSize} />\n        <span>\n          <b></b>\n          <br />\n          <span class=\"account-block-acct\"></span>\n        </span>\n      </div>\n    );\n  }\n\n  if (!account) {\n    return null;\n  }\n\n  // const navigate = useNavigate();\n\n  const {\n    id,\n    acct,\n    avatar,\n    avatarStatic,\n    displayName,\n    username,\n    emojis,\n    url,\n    statusesCount,\n    lastStatusAt,\n    bot,\n    fields,\n    note,\n    group,\n    followersCount,\n    createdAt,\n    locked,\n  } = account;\n  let [_, acct1, acct2] = acct.match(/([^@]+)(@.+)/i) || [, acct];\n  if (accountInstance) {\n    acct2 = `@${accountInstance}`;\n  }\n\n  const verifiedField = fields?.find((f) => !!f.verifiedAt && !!f.value);\n\n  const excludedRelationship = {};\n  for (const r in relationship) {\n    if (!excludeRelationshipAttrs.includes(r)) {\n      excludedRelationship[r] = relationship[r];\n    }\n  }\n  const hasRelationship =\n    excludedRelationship.following ||\n    excludedRelationship.followedBy ||\n    excludedRelationship.requested;\n\n  return (\n    <a\n      class=\"account-block\"\n      href={url}\n      target={external ? '_blank' : null}\n      title={acct2 ? acct : `@${acct}`}\n      onClick={(e) => {\n        if (external) return;\n        e.preventDefault();\n        if (onClick) return onClick(e);\n        if (internal) {\n          // navigate(`/${instance}/a/${id}`);\n          location.hash = `/${instance}/a/${id}`;\n        } else {\n          states.showAccount = {\n            account,\n            instance,\n          };\n        }\n      }}\n    >\n      <Avatar\n        url={useAvatarStatic ? avatarStatic : avatar || avatarStatic}\n        size={avatarSize}\n        squircle={bot}\n      />\n      <span class=\"account-block-content\">\n        {!hideDisplayName && (\n          <>\n            {displayName ? (\n              <b>\n                <EmojiText text={displayName} emojis={emojis} />\n              </b>\n            ) : (\n              <b>{username}</b>\n            )}\n          </>\n        )}{' '}\n        <span class=\"account-block-acct\">\n          {acct2 ? '' : '@'}\n          {acct1}\n          <wbr />\n          {acct2}\n          {locked && (\n            <>\n              {' '}\n              <Icon icon=\"lock\" size=\"s\" alt=\"Locked\" />\n            </>\n          )}\n        </span>\n        {showActivity && (\n          <div class=\"account-block-stats\">\n            Posts: {shortenNumber(statusesCount)}\n            {!!lastStatusAt && (\n              <>\n                {' '}\n                &middot; Last posted:{' '}\n                {niceDateTime(lastStatusAt, {\n                  hideTime: true,\n                })}\n              </>\n            )}\n          </div>\n        )}\n        {showStats && (\n          <div class=\"account-block-stats\">\n            {bot && (\n              <>\n                <span class=\"tag collapsed\">\n                  <Icon icon=\"bot\" /> Automated\n                </span>\n              </>\n            )}\n            {!!group && (\n              <>\n                <span class=\"tag collapsed\">\n                  <Icon icon=\"group\" /> Group\n                </span>\n              </>\n            )}\n            {hasRelationship && (\n              <div key={relationship.id} class=\"shazam-container-horizontal\">\n                <div class=\"shazam-container-inner\">\n                  {excludedRelationship.following &&\n                  excludedRelationship.followedBy ? (\n                    <span class=\"tag minimal\">Mutual</span>\n                  ) : excludedRelationship.requested ? (\n                    <span class=\"tag minimal\">Requested</span>\n                  ) : excludedRelationship.following ? (\n                    <span class=\"tag minimal\">Following</span>\n                  ) : excludedRelationship.followedBy ? (\n                    <span class=\"tag minimal\">Follows you</span>\n                  ) : null}\n                </div>\n              </div>\n            )}\n            {!!followersCount && (\n              <span class=\"ib\">\n                {shortenNumber(followersCount)}{' '}\n                {followersCount === 1 ? 'follower' : 'followers'}\n              </span>\n            )}\n            {!!verifiedField && (\n              <span class=\"verified-field\">\n                <Icon icon=\"check-circle\" size=\"s\" />{' '}\n                <span\n                  dangerouslySetInnerHTML={{\n                    __html: enhanceContent(verifiedField.value, { emojis }),\n                  }}\n                />\n              </span>\n            )}\n            {!bot &&\n              !group &&\n              !hasRelationship &&\n              !followersCount &&\n              !verifiedField &&\n              !!createdAt && (\n                <span class=\"created-at\">\n                  Joined{' '}\n                  <time datetime={createdAt}>\n                    {niceDateTime(createdAt, {\n                      hideTime: true,\n                    })}\n                  </time>\n                </span>\n              )}\n          </div>\n        )}\n      </span>\n    </a>\n  );\n}\n\nexport default AccountBlock;\n","import { FocusableItem } from '@szhsin/react-menu';\n\nimport Link from './link';\n\nfunction MenuLink(props) {\n  const { className, disabled, ...restProps } = props;\n  return (\n    <FocusableItem className={className} disabled={disabled}>\n      {({ ref, closeMenu }) => (\n        <Link\n          {...restProps}\n          ref={ref}\n          onClick={({ detail }) =>\n            closeMenu(detail === 0 ? 'Enter' : undefined)\n          }\n        />\n      )}\n    </FocusableItem>\n  );\n}\n\nexport default MenuLink;\n","function RetryOperation(timeouts, options) {\n  // Compatibility for the old (timeouts, retryForever) signature\n  if (typeof options === 'boolean') {\n    options = { forever: options };\n  }\n\n  this._originalTimeouts = JSON.parse(JSON.stringify(timeouts));\n  this._timeouts = timeouts;\n  this._options = options || {};\n  this._maxRetryTime = options && options.maxRetryTime || Infinity;\n  this._fn = null;\n  this._errors = [];\n  this._attempts = 1;\n  this._operationTimeout = null;\n  this._operationTimeoutCb = null;\n  this._timeout = null;\n  this._operationStart = null;\n  this._timer = null;\n\n  if (this._options.forever) {\n    this._cachedTimeouts = this._timeouts.slice(0);\n  }\n}\nmodule.exports = RetryOperation;\n\nRetryOperation.prototype.reset = function() {\n  this._attempts = 1;\n  this._timeouts = this._originalTimeouts.slice(0);\n}\n\nRetryOperation.prototype.stop = function() {\n  if (this._timeout) {\n    clearTimeout(this._timeout);\n  }\n  if (this._timer) {\n    clearTimeout(this._timer);\n  }\n\n  this._timeouts       = [];\n  this._cachedTimeouts = null;\n};\n\nRetryOperation.prototype.retry = function(err) {\n  if (this._timeout) {\n    clearTimeout(this._timeout);\n  }\n\n  if (!err) {\n    return false;\n  }\n  var currentTime = new Date().getTime();\n  if (err && currentTime - this._operationStart >= this._maxRetryTime) {\n    this._errors.push(err);\n    this._errors.unshift(new Error('RetryOperation timeout occurred'));\n    return false;\n  }\n\n  this._errors.push(err);\n\n  var timeout = this._timeouts.shift();\n  if (timeout === undefined) {\n    if (this._cachedTimeouts) {\n      // retry forever, only keep last error\n      this._errors.splice(0, this._errors.length - 1);\n      timeout = this._cachedTimeouts.slice(-1);\n    } else {\n      return false;\n    }\n  }\n\n  var self = this;\n  this._timer = setTimeout(function() {\n    self._attempts++;\n\n    if (self._operationTimeoutCb) {\n      self._timeout = setTimeout(function() {\n        self._operationTimeoutCb(self._attempts);\n      }, self._operationTimeout);\n\n      if (self._options.unref) {\n          self._timeout.unref();\n      }\n    }\n\n    self._fn(self._attempts);\n  }, timeout);\n\n  if (this._options.unref) {\n      this._timer.unref();\n  }\n\n  return true;\n};\n\nRetryOperation.prototype.attempt = function(fn, timeoutOps) {\n  this._fn = fn;\n\n  if (timeoutOps) {\n    if (timeoutOps.timeout) {\n      this._operationTimeout = timeoutOps.timeout;\n    }\n    if (timeoutOps.cb) {\n      this._operationTimeoutCb = timeoutOps.cb;\n    }\n  }\n\n  var self = this;\n  if (this._operationTimeoutCb) {\n    this._timeout = setTimeout(function() {\n      self._operationTimeoutCb();\n    }, self._operationTimeout);\n  }\n\n  this._operationStart = new Date().getTime();\n\n  this._fn(this._attempts);\n};\n\nRetryOperation.prototype.try = function(fn) {\n  console.log('Using RetryOperation.try() is deprecated');\n  this.attempt(fn);\n};\n\nRetryOperation.prototype.start = function(fn) {\n  console.log('Using RetryOperation.start() is deprecated');\n  this.attempt(fn);\n};\n\nRetryOperation.prototype.start = RetryOperation.prototype.try;\n\nRetryOperation.prototype.errors = function() {\n  return this._errors;\n};\n\nRetryOperation.prototype.attempts = function() {\n  return this._attempts;\n};\n\nRetryOperation.prototype.mainError = function() {\n  if (this._errors.length === 0) {\n    return null;\n  }\n\n  var counts = {};\n  var mainError = null;\n  var mainErrorCount = 0;\n\n  for (var i = 0; i < this._errors.length; i++) {\n    var error = this._errors[i];\n    var message = error.message;\n    var count = (counts[message] || 0) + 1;\n\n    counts[message] = count;\n\n    if (count >= mainErrorCount) {\n      mainError = error;\n      mainErrorCount = count;\n    }\n  }\n\n  return mainError;\n};\n","var RetryOperation = require('./retry_operation');\n\nexports.operation = function(options) {\n  var timeouts = exports.timeouts(options);\n  return new RetryOperation(timeouts, {\n      forever: options && (options.forever || options.retries === Infinity),\n      unref: options && options.unref,\n      maxRetryTime: options && options.maxRetryTime\n  });\n};\n\nexports.timeouts = function(options) {\n  if (options instanceof Array) {\n    return [].concat(options);\n  }\n\n  var opts = {\n    retries: 10,\n    factor: 2,\n    minTimeout: 1 * 1000,\n    maxTimeout: Infinity,\n    randomize: false\n  };\n  for (var key in options) {\n    opts[key] = options[key];\n  }\n\n  if (opts.minTimeout > opts.maxTimeout) {\n    throw new Error('minTimeout is greater than maxTimeout');\n  }\n\n  var timeouts = [];\n  for (var i = 0; i < opts.retries; i++) {\n    timeouts.push(this.createTimeout(i, opts));\n  }\n\n  if (options && options.forever && !timeouts.length) {\n    timeouts.push(this.createTimeout(i, opts));\n  }\n\n  // sort the array numerically ascending\n  timeouts.sort(function(a,b) {\n    return a - b;\n  });\n\n  return timeouts;\n};\n\nexports.createTimeout = function(attempt, opts) {\n  var random = (opts.randomize)\n    ? (Math.random() + 1)\n    : 1;\n\n  var timeout = Math.round(random * Math.max(opts.minTimeout, 1) * Math.pow(opts.factor, attempt));\n  timeout = Math.min(timeout, opts.maxTimeout);\n\n  return timeout;\n};\n\nexports.wrap = function(obj, options, methods) {\n  if (options instanceof Array) {\n    methods = options;\n    options = null;\n  }\n\n  if (!methods) {\n    methods = [];\n    for (var key in obj) {\n      if (typeof obj[key] === 'function') {\n        methods.push(key);\n      }\n    }\n  }\n\n  for (var i = 0; i < methods.length; i++) {\n    var method   = methods[i];\n    var original = obj[method];\n\n    obj[method] = function retryWrapper(original) {\n      var op       = exports.operation(options);\n      var args     = Array.prototype.slice.call(arguments, 1);\n      var callback = args.pop();\n\n      args.push(function(err) {\n        if (op.retry(err)) {\n          return;\n        }\n        if (err) {\n          arguments[0] = op.mainError();\n        }\n        callback.apply(this, arguments);\n      });\n\n      op.attempt(function() {\n        original.apply(obj, args);\n      });\n    }.bind(obj, original);\n    obj[method].options = options;\n  }\n};\n","module.exports = require('./lib/retry');","const objectToString = Object.prototype.toString;\n\nconst isError = value => objectToString.call(value) === '[object Error]';\n\nconst errorMessages = new Set([\n\t'Failed to fetch', // Chrome\n\t'NetworkError when attempting to fetch resource.', // Firefox\n\t'The Internet connection appears to be offline.', // Safari 16\n\t'Load failed', // Safari 17+\n\t'Network request failed', // `cross-fetch`\n\t'fetch failed', // Undici (Node.js)\n]);\n\nexport default function isNetworkError(error) {\n\tconst isValid = error\n\t\t&& isError(error)\n\t\t&& error.name === 'TypeError'\n\t\t&& typeof error.message === 'string';\n\n\tif (!isValid) {\n\t\treturn false;\n\t}\n\n\t// We do an extra check for Safari 17+ as it has a very generic error message.\n\t// Network errors in Safari have no stack.\n\tif (error.message === 'Load failed') {\n\t\treturn error.stack === undefined;\n\t}\n\n\treturn errorMessages.has(error.message);\n}\n","import retry from 'retry';\nimport isNetworkError from 'is-network-error';\n\nexport class AbortError extends Error {\n\tconstructor(message) {\n\t\tsuper();\n\n\t\tif (message instanceof Error) {\n\t\t\tthis.originalError = message;\n\t\t\t({message} = message);\n\t\t} else {\n\t\t\tthis.originalError = new Error(message);\n\t\t\tthis.originalError.stack = this.stack;\n\t\t}\n\n\t\tthis.name = 'AbortError';\n\t\tthis.message = message;\n\t}\n}\n\nconst decorateErrorWithCounts = (error, attemptNumber, options) => {\n\t// Minus 1 from attemptNumber because the first attempt does not count as a retry\n\tconst retriesLeft = options.retries - (attemptNumber - 1);\n\n\terror.attemptNumber = attemptNumber;\n\terror.retriesLeft = retriesLeft;\n\treturn error;\n};\n\nexport default async function pRetry(input, options) {\n\treturn new Promise((resolve, reject) => {\n\t\toptions = {\n\t\t\tonFailedAttempt() {},\n\t\t\tretries: 10,\n\t\t\tshouldRetry: () => true,\n\t\t\t...options,\n\t\t};\n\n\t\tconst operation = retry.operation(options);\n\n\t\tconst abortHandler = () => {\n\t\t\toperation.stop();\n\t\t\treject(options.signal?.reason);\n\t\t};\n\n\t\tif (options.signal && !options.signal.aborted) {\n\t\t\toptions.signal.addEventListener('abort', abortHandler, {once: true});\n\t\t}\n\n\t\tconst cleanUp = () => {\n\t\t\toptions.signal?.removeEventListener('abort', abortHandler);\n\t\t\toperation.stop();\n\t\t};\n\n\t\toperation.attempt(async attemptNumber => {\n\t\t\ttry {\n\t\t\t\tconst result = await input(attemptNumber);\n\t\t\t\tcleanUp();\n\t\t\t\tresolve(result);\n\t\t\t} catch (error) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!(error instanceof Error)) {\n\t\t\t\t\t\tthrow new TypeError(`Non-error was thrown: \"${error}\". You should only throw errors.`);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (error instanceof AbortError) {\n\t\t\t\t\t\tthrow error.originalError;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (error instanceof TypeError && !isNetworkError(error)) {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\n\t\t\t\t\tdecorateErrorWithCounts(error, attemptNumber, options);\n\n\t\t\t\t\tif (!(await options.shouldRetry(error))) {\n\t\t\t\t\t\toperation.stop();\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\n\t\t\t\t\tawait options.onFailedAttempt(error);\n\n\t\t\t\t\tif (!operation.retry(error)) {\n\t\t\t\t\t\tthrow operation.mainError();\n\t\t\t\t\t}\n\t\t\t\t} catch (finalError) {\n\t\t\t\t\tdecorateErrorWithCounts(finalError, attemptNumber, options);\n\t\t\t\t\tcleanUp();\n\t\t\t\t\treject(finalError);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n","\"use client\";\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\n\n// src/InView.tsx\nimport * as React from \"react\";\n\n// src/observe.ts\nvar observerMap = /* @__PURE__ */ new Map();\nvar RootIds = /* @__PURE__ */ new WeakMap();\nvar rootId = 0;\nvar unsupportedValue = void 0;\nfunction defaultFallbackInView(inView) {\n  unsupportedValue = inView;\n}\nfunction getRootId(root) {\n  if (!root)\n    return \"0\";\n  if (RootIds.has(root))\n    return RootIds.get(root);\n  rootId += 1;\n  RootIds.set(root, rootId.toString());\n  return RootIds.get(root);\n}\nfunction optionsToId(options) {\n  return Object.keys(options).sort().filter(\n    (key) => options[key] !== void 0\n  ).map((key) => {\n    return `${key}_${key === \"root\" ? getRootId(options.root) : options[key]}`;\n  }).toString();\n}\nfunction createObserver(options) {\n  const id = optionsToId(options);\n  let instance = observerMap.get(id);\n  if (!instance) {\n    const elements = /* @__PURE__ */ new Map();\n    let thresholds;\n    const observer = new IntersectionObserver((entries) => {\n      entries.forEach((entry) => {\n        var _a;\n        const inView = entry.isIntersecting && thresholds.some((threshold) => entry.intersectionRatio >= threshold);\n        if (options.trackVisibility && typeof entry.isVisible === \"undefined\") {\n          entry.isVisible = inView;\n        }\n        (_a = elements.get(entry.target)) == null ? void 0 : _a.forEach((callback) => {\n          callback(inView, entry);\n        });\n      });\n    }, options);\n    thresholds = observer.thresholds || (Array.isArray(options.threshold) ? options.threshold : [options.threshold || 0]);\n    instance = {\n      id,\n      observer,\n      elements\n    };\n    observerMap.set(id, instance);\n  }\n  return instance;\n}\nfunction observe(element, callback, options = {}, fallbackInView = unsupportedValue) {\n  if (typeof window.IntersectionObserver === \"undefined\" && fallbackInView !== void 0) {\n    const bounds = element.getBoundingClientRect();\n    callback(fallbackInView, {\n      isIntersecting: fallbackInView,\n      target: element,\n      intersectionRatio: typeof options.threshold === \"number\" ? options.threshold : 0,\n      time: 0,\n      boundingClientRect: bounds,\n      intersectionRect: bounds,\n      rootBounds: bounds\n    });\n    return () => {\n    };\n  }\n  const { id, observer, elements } = createObserver(options);\n  const callbacks = elements.get(element) || [];\n  if (!elements.has(element)) {\n    elements.set(element, callbacks);\n  }\n  callbacks.push(callback);\n  observer.observe(element);\n  return function unobserve() {\n    callbacks.splice(callbacks.indexOf(callback), 1);\n    if (callbacks.length === 0) {\n      elements.delete(element);\n      observer.unobserve(element);\n    }\n    if (elements.size === 0) {\n      observer.disconnect();\n      observerMap.delete(id);\n    }\n  };\n}\n\n// src/InView.tsx\nfunction isPlainChildren(props) {\n  return typeof props.children !== \"function\";\n}\nvar InView = class extends React.Component {\n  constructor(props) {\n    super(props);\n    __publicField(this, \"node\", null);\n    __publicField(this, \"_unobserveCb\", null);\n    __publicField(this, \"handleNode\", (node) => {\n      if (this.node) {\n        this.unobserve();\n        if (!node && !this.props.triggerOnce && !this.props.skip) {\n          this.setState({ inView: !!this.props.initialInView, entry: void 0 });\n        }\n      }\n      this.node = node ? node : null;\n      this.observeNode();\n    });\n    __publicField(this, \"handleChange\", (inView, entry) => {\n      if (inView && this.props.triggerOnce) {\n        this.unobserve();\n      }\n      if (!isPlainChildren(this.props)) {\n        this.setState({ inView, entry });\n      }\n      if (this.props.onChange) {\n        this.props.onChange(inView, entry);\n      }\n    });\n    this.state = {\n      inView: !!props.initialInView,\n      entry: void 0\n    };\n  }\n  componentDidMount() {\n    this.unobserve();\n    this.observeNode();\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.rootMargin !== this.props.rootMargin || prevProps.root !== this.props.root || prevProps.threshold !== this.props.threshold || prevProps.skip !== this.props.skip || prevProps.trackVisibility !== this.props.trackVisibility || prevProps.delay !== this.props.delay) {\n      this.unobserve();\n      this.observeNode();\n    }\n  }\n  componentWillUnmount() {\n    this.unobserve();\n  }\n  observeNode() {\n    if (!this.node || this.props.skip)\n      return;\n    const {\n      threshold,\n      root,\n      rootMargin,\n      trackVisibility,\n      delay,\n      fallbackInView\n    } = this.props;\n    this._unobserveCb = observe(\n      this.node,\n      this.handleChange,\n      {\n        threshold,\n        root,\n        rootMargin,\n        // @ts-ignore\n        trackVisibility,\n        // @ts-ignore\n        delay\n      },\n      fallbackInView\n    );\n  }\n  unobserve() {\n    if (this._unobserveCb) {\n      this._unobserveCb();\n      this._unobserveCb = null;\n    }\n  }\n  render() {\n    const { children } = this.props;\n    if (typeof children === \"function\") {\n      const { inView, entry } = this.state;\n      return children({ inView, entry, ref: this.handleNode });\n    }\n    const {\n      as,\n      triggerOnce,\n      threshold,\n      root,\n      rootMargin,\n      onChange,\n      skip,\n      trackVisibility,\n      delay,\n      initialInView,\n      fallbackInView,\n      ...props\n    } = this.props;\n    return React.createElement(\n      as || \"div\",\n      { ref: this.handleNode, ...props },\n      children\n    );\n  }\n};\n\n// src/useInView.tsx\nimport * as React2 from \"react\";\nfunction useInView({\n  threshold,\n  delay,\n  trackVisibility,\n  rootMargin,\n  root,\n  triggerOnce,\n  skip,\n  initialInView,\n  fallbackInView,\n  onChange\n} = {}) {\n  var _a;\n  const [ref, setRef] = React2.useState(null);\n  const callback = React2.useRef();\n  const [state, setState] = React2.useState({\n    inView: !!initialInView,\n    entry: void 0\n  });\n  callback.current = onChange;\n  React2.useEffect(\n    () => {\n      if (skip || !ref)\n        return;\n      let unobserve;\n      unobserve = observe(\n        ref,\n        (inView, entry) => {\n          setState({\n            inView,\n            entry\n          });\n          if (callback.current)\n            callback.current(inView, entry);\n          if (entry.isIntersecting && triggerOnce && unobserve) {\n            unobserve();\n            unobserve = void 0;\n          }\n        },\n        {\n          root,\n          rootMargin,\n          threshold,\n          // @ts-ignore\n          trackVisibility,\n          // @ts-ignore\n          delay\n        },\n        fallbackInView\n      );\n      return () => {\n        if (unobserve) {\n          unobserve();\n        }\n      };\n    },\n    // We break the rule here, because we aren't including the actual `threshold` variable\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      // If the threshold is an array, convert it to a string, so it won't change between renders.\n      Array.isArray(threshold) ? threshold.toString() : threshold,\n      ref,\n      root,\n      rootMargin,\n      triggerOnce,\n      skip,\n      trackVisibility,\n      fallbackInView,\n      delay\n    ]\n  );\n  const entryTarget = (_a = state.entry) == null ? void 0 : _a.target;\n  const previousEntryTarget = React2.useRef();\n  if (!ref && entryTarget && !triggerOnce && !skip && previousEntryTarget.current !== entryTarget) {\n    previousEntryTarget.current = entryTarget;\n    setState({\n      inView: !!initialInView,\n      entry: void 0\n    });\n  }\n  const result = [setRef, state.inView, state.entry];\n  result.ref = result[0];\n  result.inView = result[1];\n  result.entry = result[2];\n  return result;\n}\nexport {\n  InView,\n  defaultFallbackInView,\n  observe,\n  useInView\n};\n//# sourceMappingURL=index.mjs.map","/*\n  Rendered but hidden. Only show when visible\n*/\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { useInView } from 'react-intersection-observer';\n\n// The sticky header, usually at the top\nconst TOP = 48;\n\nconst shazamIDs = {};\n\nexport default function LazyShazam({ id, children }) {\n  const containerRef = useRef();\n  const hasID = !!shazamIDs[id];\n  const [visible, setVisible] = useState(false);\n  const [visibleStart, setVisibleStart] = useState(hasID || false);\n\n  const { ref } = useInView({\n    root: null,\n    rootMargin: `-${TOP}px 0px 0px 0px`,\n    trackVisibility: true,\n    delay: 1000,\n    onChange: (inView) => {\n      if (inView) {\n        setVisible(true);\n        if (id) shazamIDs[id] = true;\n      }\n    },\n    triggerOnce: true,\n    skip: visibleStart || visible,\n  });\n\n  useEffect(() => {\n    if (!containerRef.current) return;\n    const rect = containerRef.current.getBoundingClientRect();\n    if (rect.bottom > TOP) {\n      if (rect.top < window.innerHeight) {\n        setVisible(true);\n      } else {\n        setVisibleStart(true);\n      }\n      if (id) shazamIDs[id] = true;\n    }\n  }, []);\n\n  if (visibleStart) return children;\n\n  return (\n    <div\n      ref={containerRef}\n      class=\"shazam-container no-animation\"\n      hidden={!visible}\n    >\n      <div ref={ref} class=\"shazam-container-inner\">\n        {children}\n      </div>\n    </div>\n  );\n}\n","import './translation-block.css';\n\nimport pRetry from 'p-retry';\nimport pThrottle from 'p-throttle';\nimport { useEffect, useRef, useState } from 'preact/hooks';\n\nimport sourceLanguages from '../data/lingva-source-languages';\nimport getTranslateTargetLanguage from '../utils/get-translate-target-language';\nimport localeCode2Text from '../utils/localeCode2Text';\nimport pmem from '../utils/pmem';\n\nimport Icon from './icon';\nimport LazyShazam from './lazy-shazam';\nimport Loader from './loader';\n\nconst { PHANPY_LINGVA_INSTANCES } = import.meta.env;\nconst LINGVA_INSTANCES = PHANPY_LINGVA_INSTANCES\n  ? PHANPY_LINGVA_INSTANCES.split(/\\s+/)\n  : [];\n\nconst throttle = pThrottle({\n  limit: 1,\n  interval: 2000,\n});\n\nlet currentLingvaInstance = 0;\n\nfunction _lingvaTranslate(text, source, target) {\n  console.log('TRANSLATE', text, source, target);\n  const fetchCall = () => {\n    let instance = LINGVA_INSTANCES[currentLingvaInstance];\n    return fetch(\n      `https://${instance}/api/v1/${source}/${target}/${encodeURIComponent(\n        text,\n      )}`,\n    )\n      .then((res) => {\n        if (!res.ok) throw new Error(res.statusText);\n        return res.json();\n      })\n      .then((res) => {\n        return {\n          provider: 'lingva',\n          content: res.translation,\n          detectedSourceLanguage: res.info?.detectedSource,\n          info: res.info,\n        };\n      });\n  };\n  return pRetry(fetchCall, {\n    retries: 3,\n    onFailedAttempt: (e) => {\n      currentLingvaInstance =\n        (currentLingvaInstance + 1) % LINGVA_INSTANCES.length;\n      console.log(\n        'Retrying translation with another instance',\n        currentLingvaInstance,\n      );\n    },\n  });\n  // return masto.v1.statuses.$select(id).translate({\n  //   lang: DEFAULT_LANG,\n  // });\n}\nconst TRANSLATED_MAX_AGE = 1000 * 60 * 60; // 1 hour\nconst lingvaTranslate = pmem(_lingvaTranslate, {\n  maxAge: TRANSLATED_MAX_AGE,\n});\nconst throttledLingvaTranslate = pmem(throttle(lingvaTranslate), {\n  // I know, this is double-layered memoization\n  maxAge: TRANSLATED_MAX_AGE,\n});\n\nfunction TranslationBlock({\n  forceTranslate,\n  sourceLanguage,\n  onTranslate,\n  text = '',\n  mini,\n  autoDetected,\n}) {\n  const targetLang = getTranslateTargetLanguage(true);\n  const [uiState, setUIState] = useState('default');\n  const [pronunciationContent, setPronunciationContent] = useState(null);\n  const [translatedContent, setTranslatedContent] = useState(null);\n  const [detectedLang, setDetectedLang] = useState(null);\n  const detailsRef = useRef();\n\n  const sourceLangText = sourceLanguage\n    ? localeCode2Text(sourceLanguage)\n    : null;\n  const targetLangText = localeCode2Text(targetLang);\n  const apiSourceLang = useRef('auto');\n\n  if (!onTranslate) {\n    onTranslate = mini ? throttledLingvaTranslate : lingvaTranslate;\n  }\n\n  const translate = async () => {\n    setUIState('loading');\n    try {\n      const { content, detectedSourceLanguage, provider, error, ...props } =\n        await onTranslate(text, apiSourceLang.current, targetLang);\n      if (content) {\n        if (detectedSourceLanguage) {\n          const detectedLangText = localeCode2Text(detectedSourceLanguage);\n          setDetectedLang(detectedLangText);\n        }\n        if (provider === 'lingva') {\n          const pronunciation = props?.info?.pronunciation?.query;\n          if (pronunciation) {\n            setPronunciationContent(pronunciation);\n          }\n        }\n        setTranslatedContent(content);\n        setUIState('default');\n        if (!mini && content.trim() !== text.trim()) {\n          detailsRef.current.open = true;\n          detailsRef.current.scrollIntoView({\n            behavior: 'smooth',\n            block: 'nearest',\n          });\n        }\n      } else {\n        if (error) console.error(error);\n        setUIState('error');\n      }\n    } catch (e) {\n      console.error(e);\n      setUIState('error');\n    }\n  };\n\n  useEffect(() => {\n    if (forceTranslate) {\n      translate();\n    }\n  }, [forceTranslate]);\n\n  if (mini) {\n    if (\n      !!translatedContent &&\n      translatedContent.trim() !== text.trim() &&\n      detectedLang !== targetLangText\n    ) {\n      return (\n        <LazyShazam>\n          <div class=\"status-translation-block-mini\">\n            <Icon\n              icon=\"translate\"\n              alt={`Auto-translated from ${sourceLangText}`}\n            />\n            <output\n              lang={targetLang}\n              dir=\"auto\"\n              title={pronunciationContent || ''}\n            >\n              {translatedContent}\n            </output>\n          </div>\n        </LazyShazam>\n      );\n    }\n    return null;\n  }\n\n  return (\n    <div\n      class=\"status-translation-block\"\n      onClick={(e) => {\n        e.preventDefault();\n      }}\n    >\n      <details ref={detailsRef}>\n        <summary>\n          <button\n            type=\"button\"\n            onClick={async (e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              detailsRef.current.open = !detailsRef.current.open;\n              if (uiState === 'loading') return;\n              if (!translatedContent) translate();\n            }}\n          >\n            <Icon icon=\"translate\" />{' '}\n            <span>\n              {uiState === 'loading'\n                ? 'Translating'\n                : sourceLanguage && sourceLangText && !detectedLang\n                ? autoDetected\n                  ? `Translate from ${sourceLangText} (auto-detected)`\n                  : `Translate from ${sourceLangText}`\n                : `Translate`}\n            </span>\n          </button>\n        </summary>\n        <div class=\"translated-block\">\n          <div class=\"translation-info insignificant\">\n            <select\n              class=\"translated-source-select\"\n              disabled={uiState === 'loading'}\n              onChange={(e) => {\n                apiSourceLang.current = e.target.value;\n                translate();\n              }}\n            >\n              {sourceLanguages.map((l) => (\n                <option value={l.code}>\n                  {l.code === 'auto' ? `Auto (${detectedLang ?? ''})` : l.name}\n                </option>\n              ))}\n            </select>{' '}\n            <span> {targetLangText}</span>\n            <Loader abrupt hidden={uiState !== 'loading'} />\n          </div>\n          {uiState === 'error' ? (\n            <p class=\"ui-state\">Failed to translate</p>\n          ) : (\n            !!translatedContent && (\n              <>\n                <output class=\"translated-content\" lang={targetLang} dir=\"auto\">\n                  {translatedContent}\n                </output>\n                {!!pronunciationContent && (\n                  <output\n                    class=\"translated-pronunciation-content\"\n                    tabIndex={-1}\n                    onClick={(e) => {\n                      e.target.classList.toggle('expand');\n                    }}\n                  >\n                    {pronunciationContent}\n                  </output>\n                )}\n              </>\n            )\n          )}\n        </div>\n      </details>\n    </div>\n  );\n}\n\nexport default LINGVA_INSTANCES?.length ? TranslationBlock : () => null;\n","function promisifyRequest(request) {\n    return new Promise((resolve, reject) => {\n        // @ts-ignore - file size hacks\n        request.oncomplete = request.onsuccess = () => resolve(request.result);\n        // @ts-ignore - file size hacks\n        request.onabort = request.onerror = () => reject(request.error);\n    });\n}\nfunction createStore(dbName, storeName) {\n    const request = indexedDB.open(dbName);\n    request.onupgradeneeded = () => request.result.createObjectStore(storeName);\n    const dbp = promisifyRequest(request);\n    return (txMode, callback) => dbp.then((db) => callback(db.transaction(storeName, txMode).objectStore(storeName)));\n}\nlet defaultGetStoreFunc;\nfunction defaultGetStore() {\n    if (!defaultGetStoreFunc) {\n        defaultGetStoreFunc = createStore('keyval-store', 'keyval');\n    }\n    return defaultGetStoreFunc;\n}\n/**\n * Get a value by its key.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction get(key, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => promisifyRequest(store.get(key)));\n}\n/**\n * Set a value with a key.\n *\n * @param key\n * @param value\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction set(key, value, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.put(value, key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Set multiple values at once. This is faster than calling set() multiple times.\n * It's also atomic  if one of the pairs can't be added, none will be added.\n *\n * @param entries Array of entries, where each entry is an array of `[key, value]`.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction setMany(entries, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        entries.forEach((entry) => store.put(entry[1], entry[0]));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Get multiple values by their keys\n *\n * @param keys\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction getMany(keys, customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => Promise.all(keys.map((key) => promisifyRequest(store.get(key)))));\n}\n/**\n * Update a value. This lets you see the old value and update it as an atomic operation.\n *\n * @param key\n * @param updater A callback that takes the old value and returns a new value.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction update(key, updater, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => \n    // Need to create the promise manually.\n    // If I try to chain promises, the transaction closes in browsers\n    // that use a promise polyfill (IE10/11).\n    new Promise((resolve, reject) => {\n        store.get(key).onsuccess = function () {\n            try {\n                store.put(updater(this.result), key);\n                resolve(promisifyRequest(store.transaction));\n            }\n            catch (err) {\n                reject(err);\n            }\n        };\n    }));\n}\n/**\n * Delete a particular key from the store.\n *\n * @param key\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction del(key, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.delete(key);\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Delete multiple keys at once.\n *\n * @param keys List of keys to delete.\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction delMany(keys, customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        keys.forEach((key) => store.delete(key));\n        return promisifyRequest(store.transaction);\n    });\n}\n/**\n * Clear all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction clear(customStore = defaultGetStore()) {\n    return customStore('readwrite', (store) => {\n        store.clear();\n        return promisifyRequest(store.transaction);\n    });\n}\nfunction eachCursor(store, callback) {\n    store.openCursor().onsuccess = function () {\n        if (!this.result)\n            return;\n        callback(this.result);\n        this.result.continue();\n    };\n    return promisifyRequest(store.transaction);\n}\n/**\n * Get all keys in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction keys(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAllKeys) {\n            return promisifyRequest(store.getAllKeys());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.key)).then(() => items);\n    });\n}\n/**\n * Get all values in the store.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction values(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        if (store.getAll) {\n            return promisifyRequest(store.getAll());\n        }\n        const items = [];\n        return eachCursor(store, (cursor) => items.push(cursor.value)).then(() => items);\n    });\n}\n/**\n * Get all entries in the store. Each entry is an array of `[key, value]`.\n *\n * @param customStore Method to get a custom store. Use with caution (see the docs).\n */\nfunction entries(customStore = defaultGetStore()) {\n    return customStore('readonly', (store) => {\n        // Fast path for modern browsers\n        // (although, hopefully we'll get a simpler path some day)\n        if (store.getAll && store.getAllKeys) {\n            return Promise.all([\n                promisifyRequest(store.getAllKeys()),\n                promisifyRequest(store.getAll()),\n            ]).then(([keys, values]) => keys.map((key, i) => [key, values[i]]));\n        }\n        const items = [];\n        return customStore('readonly', (store) => eachCursor(store, (cursor) => items.push([cursor.key, cursor.value])).then(() => items));\n    });\n}\n\nexport { clear, createStore, del, delMany, entries, get, getMany, keys, promisifyRequest, set, setMany, update, values };\n","import {\n  clear,\n  createStore,\n  del,\n  delMany,\n  get,\n  getMany,\n  keys,\n  set,\n} from 'idb-keyval';\n\nfunction initDB(dbName, storeName) {\n  const store = createStore(dbName, storeName);\n  return {\n    set: (key, val) => set(key, val, store),\n    get: (key) => get(key, store),\n    getMany: (keys) => getMany(keys, store),\n    del: (key) => del(key, store),\n    delMany: (keys) => delMany(keys, store),\n    clear: () => clear(store),\n    keys: () => keys(store),\n  };\n}\n\nexport default {\n  drafts: initDB('drafts-db', 'drafts-store'),\n  catchup: initDB('catchup-db', 'catchup-store'),\n};\n","import { api } from './api';\nimport { getCurrentAccountID } from './store-utils';\n\nexport async function fetchRelationships(accounts, relationshipsMap = {}) {\n  if (!accounts?.length) return;\n  const { masto } = api();\n\n  const currentAccount = getCurrentAccountID();\n  const uniqueAccountIds = accounts.reduce((acc, a) => {\n    // 1. Ignore duplicate accounts\n    // 2. Ignore accounts that are already inside relationshipsMap\n    // 3. Ignore currently logged in account\n    if (\n      !acc.includes(a.id) &&\n      !relationshipsMap[a.id] &&\n      a.id !== currentAccount\n    ) {\n      acc.push(a.id);\n    }\n    return acc;\n  }, []);\n  if (!uniqueAccountIds.length) return null;\n\n  try {\n    const relationships = await masto.v1.accounts.relationships.fetch({\n      id: uniqueAccountIds,\n    });\n    const newRelationshipsMap = relationships.reduce((acc, r) => {\n      acc[r.id] = r;\n      return acc;\n    }, {});\n    return newRelationshipsMap;\n  } catch (e) {\n    console.error(e);\n    // It's okay to fail\n    return null;\n  }\n}\n","export class LiteYTEmbed extends HTMLElement {\n    constructor() {\n        super();\n        this.isIframeLoaded = false;\n        this.setupDom();\n    }\n    static get observedAttributes() {\n        return ['videoid', 'playlistid'];\n    }\n    connectedCallback() {\n        this.addEventListener('pointerover', LiteYTEmbed.warmConnections, {\n            once: true,\n        });\n        this.addEventListener('click', () => this.addIframe());\n    }\n    get videoId() {\n        return encodeURIComponent(this.getAttribute('videoid') || '');\n    }\n    set videoId(id) {\n        this.setAttribute('videoid', id);\n    }\n    get playlistId() {\n        return encodeURIComponent(this.getAttribute('playlistid') || '');\n    }\n    set playlistId(id) {\n        this.setAttribute('playlistid', id);\n    }\n    get videoTitle() {\n        return this.getAttribute('videotitle') || 'Video';\n    }\n    set videoTitle(title) {\n        this.setAttribute('videotitle', title);\n    }\n    get videoPlay() {\n        return this.getAttribute('videoPlay') || 'Play';\n    }\n    set videoPlay(name) {\n        this.setAttribute('videoPlay', name);\n    }\n    get videoStartAt() {\n        return this.getAttribute('videoStartAt') || '0';\n    }\n    get autoLoad() {\n        return this.hasAttribute('autoload');\n    }\n    get noCookie() {\n        return this.hasAttribute('nocookie');\n    }\n    get posterQuality() {\n        return this.getAttribute('posterquality') || 'hqdefault';\n    }\n    get posterLoading() {\n        return (this.getAttribute('posterloading') ||\n            'lazy');\n    }\n    get params() {\n        return `start=${this.videoStartAt}&${this.getAttribute('params')}`;\n    }\n    set params(opts) {\n        this.setAttribute('params', opts);\n    }\n    setupDom() {\n        const shadowDom = this.attachShadow({ mode: 'open' });\n        let nonce = '';\n        if (window.liteYouTubeNonce) {\n            nonce = `nonce=\"${window.liteYouTubeNonce}\"`;\n        }\n        shadowDom.innerHTML = `\n      <style ${nonce}>\n        :host {\n          contain: content;\n          display: block;\n          position: relative;\n          width: 100%;\n          padding-bottom: calc(100% / (16 / 9));\n        }\n\n        @media (max-width: 40em) {\n          :host([short]) {\n            padding-bottom: calc(100% / (9 / 16));\n          }\n        }\n\n        #frame, #fallbackPlaceholder, iframe {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          left: 0;\n        }\n\n        #frame {\n          cursor: pointer;\n        }\n\n        #fallbackPlaceholder {\n          object-fit: cover;\n        }\n\n        #frame::before {\n          content: '';\n          display: block;\n          position: absolute;\n          top: 0;\n          background-image: linear-gradient(180deg, #111 -20%, transparent 90%);\n          height: 60px;\n          width: 100%;\n          z-index: 1;\n        }\n\n        #playButton {\n          width: 68px;\n          height: 48px;\n          background-color: transparent;\n          background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 68 48\"><path d=\"M66.52 7.74c-.78-2.93-2.49-5.41-5.42-6.19C55.79.13 34 0 34 0S12.21.13 6.9 1.55c-2.93.78-4.63 3.26-5.42 6.19C.06 13.05 0 24 0 24s.06 10.95 1.48 16.26c.78 2.93 2.49 5.41 5.42 6.19C12.21 47.87 34 48 34 48s21.79-.13 27.1-1.55c2.93-.78 4.64-3.26 5.42-6.19C67.94 34.95 68 24 68 24s-.06-10.95-1.48-16.26z\" fill=\"red\"/><path d=\"M45 24 27 14v20\" fill=\"white\"/></svg>');\n          z-index: 1;\n          border: 0;\n          border-radius: inherit;\n        }\n\n        #playButton:before {\n          content: '';\n          border-style: solid;\n          border-width: 11px 0 11px 19px;\n          border-color: transparent transparent transparent #fff;\n        }\n\n        #playButton,\n        #playButton:before {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate3d(-50%, -50%, 0);\n          cursor: inherit;\n        }\n\n        /* Post-click styles */\n        .activated {\n          cursor: unset;\n        }\n\n        #frame.activated::before,\n        #frame.activated > #playButton {\n          display: none;\n        }\n      </style>\n      <div id=\"frame\">\n        <picture>\n          <source id=\"webpPlaceholder\" type=\"image/webp\">\n          <source id=\"jpegPlaceholder\" type=\"image/jpeg\">\n          <img id=\"fallbackPlaceholder\" referrerpolicy=\"origin\" loading=\"lazy\">\n        </picture>\n        <button id=\"playButton\"></button>\n      </div>\n    `;\n        this.domRefFrame = shadowDom.querySelector('#frame');\n        this.domRefImg = {\n            fallback: shadowDom.querySelector('#fallbackPlaceholder'),\n            webp: shadowDom.querySelector('#webpPlaceholder'),\n            jpeg: shadowDom.querySelector('#jpegPlaceholder'),\n        };\n        this.domRefPlayButton = shadowDom.querySelector('#playButton');\n    }\n    setupComponent() {\n        this.initImagePlaceholder();\n        this.domRefPlayButton.setAttribute('aria-label', `${this.videoPlay}: ${this.videoTitle}`);\n        this.setAttribute('title', `${this.videoPlay}: ${this.videoTitle}`);\n        if (this.autoLoad || this.isYouTubeShort()) {\n            this.initIntersectionObserver();\n        }\n    }\n    attributeChangedCallback(name, oldVal, newVal) {\n        switch (name) {\n            case 'videoid':\n            case 'playlistid':\n            case 'videoTitle':\n            case 'videoPlay': {\n                if (oldVal !== newVal) {\n                    this.setupComponent();\n                    if (this.domRefFrame.classList.contains('activated')) {\n                        this.domRefFrame.classList.remove('activated');\n                        this.shadowRoot.querySelector('iframe').remove();\n                        this.isIframeLoaded = false;\n                    }\n                }\n                break;\n            }\n            default:\n                break;\n        }\n    }\n    addIframe(isIntersectionObserver = false) {\n        if (!this.isIframeLoaded) {\n            let autoplay = isIntersectionObserver ? 0 : 1;\n            const wantsNoCookie = this.noCookie ? '-nocookie' : '';\n            let embedTarget;\n            if (this.playlistId) {\n                embedTarget = `?listType=playlist&list=${this.playlistId}&`;\n            }\n            else {\n                embedTarget = `${this.videoId}?`;\n            }\n            if (this.isYouTubeShort()) {\n                this.params = `loop=1&mute=1&modestbranding=1&playsinline=1&rel=0&enablejsapi=1&playlist=${this.videoId}`;\n                autoplay = 1;\n            }\n            const iframeHTML = `\n<iframe frameborder=\"0\" title=\"${this.videoTitle}\"\n  allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen\n  src=\"https://www.youtube${wantsNoCookie}.com/embed/${embedTarget}autoplay=${autoplay}&${this.params}\"\n></iframe>`;\n            this.domRefFrame.insertAdjacentHTML('beforeend', iframeHTML);\n            this.domRefFrame.classList.add('activated');\n            this.isIframeLoaded = true;\n            this.attemptShortAutoPlay();\n            this.dispatchEvent(new CustomEvent('liteYoutubeIframeLoaded', {\n                detail: {\n                    videoId: this.videoId,\n                },\n                bubbles: true,\n                cancelable: true,\n            }));\n        }\n    }\n    initImagePlaceholder() {\n        const posterUrlWebp = `https://i.ytimg.com/vi_webp/${this.videoId}/${this.posterQuality}.webp`;\n        const posterUrlJpeg = `https://i.ytimg.com/vi/${this.videoId}/${this.posterQuality}.jpg`;\n        this.domRefImg.fallback.loading = this.posterLoading;\n        this.domRefImg.webp.srcset = posterUrlWebp;\n        this.domRefImg.jpeg.srcset = posterUrlJpeg;\n        this.domRefImg.fallback.src = posterUrlJpeg;\n        this.domRefImg.fallback.setAttribute('aria-label', `${this.videoPlay}: ${this.videoTitle}`);\n        this.domRefImg?.fallback?.setAttribute('alt', `${this.videoPlay}: ${this.videoTitle}`);\n    }\n    initIntersectionObserver() {\n        const options = {\n            root: null,\n            rootMargin: '0px',\n            threshold: 0,\n        };\n        const observer = new IntersectionObserver((entries, observer) => {\n            entries.forEach(entry => {\n                if (entry.isIntersecting && !this.isIframeLoaded) {\n                    LiteYTEmbed.warmConnections();\n                    this.addIframe(true);\n                    observer.unobserve(this);\n                }\n            });\n        }, options);\n        observer.observe(this);\n    }\n    attemptShortAutoPlay() {\n        if (this.isYouTubeShort()) {\n            setTimeout(() => {\n                this.shadowRoot\n                    .querySelector('iframe')\n                    ?.contentWindow?.postMessage('{\"event\":\"command\",\"func\":\"' + 'playVideo' + '\",\"args\":\"\"}', '*');\n            }, 2000);\n        }\n    }\n    isYouTubeShort() {\n        return (this.getAttribute('short') === '' &&\n            window.matchMedia('(max-width: 40em)').matches);\n    }\n    static addPrefetch(kind, url) {\n        const linkElem = document.createElement('link');\n        linkElem.rel = kind;\n        linkElem.href = url;\n        linkElem.crossOrigin = 'true';\n        document.head.append(linkElem);\n    }\n    static warmConnections() {\n        if (LiteYTEmbed.isPreconnected || window.liteYouTubeIsPreconnected)\n            return;\n        LiteYTEmbed.addPrefetch('preconnect', 'https://i.ytimg.com/');\n        LiteYTEmbed.addPrefetch('preconnect', 'https://s.ytimg.com');\n        LiteYTEmbed.addPrefetch('preconnect', 'https://www.youtube.com');\n        LiteYTEmbed.addPrefetch('preconnect', 'https://www.google.com');\n        LiteYTEmbed.addPrefetch('preconnect', 'https://googleads.g.doubleclick.net');\n        LiteYTEmbed.addPrefetch('preconnect', 'https://static.doubleclick.net');\n        LiteYTEmbed.isPreconnected = true;\n        window.liteYouTubeIsPreconnected = true;\n    }\n}\nLiteYTEmbed.isPreconnected = false;\ncustomElements.define('lite-youtube', LiteYTEmbed);\n//# sourceMappingURL=lite-youtube.js.map","const digit =\n    '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~';\nconst decode83 = (str, start, end) => {\n    let value = 0;\n    while (start < end) {\n        value *= 83;\n        value += digit.indexOf(str[start++]);\n    }\n    return value;\n};\n\nconst pow = Math.pow;\nconst PI = Math.PI;\nconst PI2 = PI * 2;\n\nconst d = 3294.6;\nconst e = 269.025;\nconst sRGBToLinear = (value) =>\n    value > 10.31475 ? pow(value / e + 0.052132, 2.4) : value / d;\n\nconst linearTosRGB = (v) =>\n    ~~(v > 0.00001227 ? e * pow(v, 0.416666) - 13.025 : v * d + 1);\n\nconst signSqr = (x) => (x < 0 ? -1 : 1) * x * x;\n\n/**\n * Fast approximate cosine implementation\n * Based on FTrig https://github.com/netcell/FTrig\n */\nconst fastCos = (x) => {\n    x += PI / 2;\n    while (x > PI) {\n        x -= PI2;\n    }\n    const cos = 1.27323954 * x - 0.405284735 * signSqr(x);\n    return 0.225 * (signSqr(cos) - cos) + cos;\n};\n\n/**\n * Extracts average color from BlurHash image\n * @param {string} blurHash BlurHash image string\n * @returns {[number, number, number]}\n */\nexport function getBlurHashAverageColor(blurHash) {\n    const val = decode83(blurHash, 2, 6);\n    return [val >> 16, (val >> 8) & 255, val & 255];\n}\n\n/**\n * Decodes BlurHash image\n * @param {string} blurHash BlurHash image string\n * @param {number} width Output image width\n * @param {number} height Output image height\n * @param {?number} punch\n * @returns {Uint8ClampedArray}\n */\nexport function decodeBlurHash(blurHash, width, height, punch) {\n    const sizeFlag = decode83(blurHash, 0, 1);\n    const numX = (sizeFlag % 9) + 1;\n    const numY = ~~(sizeFlag / 9) + 1;\n    const size = numX * numY;\n\n    let i = 0,\n        j = 0,\n        x = 0,\n        y = 0,\n        r = 0,\n        g = 0,\n        b = 0,\n        basis = 0,\n        basisY = 0,\n        colorIndex = 0,\n        pixelIndex = 0,\n        yh = 0,\n        xw = 0,\n        value = 0;\n\n    const maximumValue = ((decode83(blurHash, 1, 2) + 1) / 13446) * (punch | 1);\n\n    const colors = new Float64Array(size * 3);\n\n    const averageColor = getBlurHashAverageColor(blurHash);\n    for (i = 0; i < 3; i++) {\n        colors[i] = sRGBToLinear(averageColor[i]);\n    }\n\n    for (i = 1; i < size; i++) {\n        value = decode83(blurHash, 4 + i * 2, 6 + i * 2);\n        colors[i * 3] = signSqr(~~(value / (19 * 19)) - 9) * maximumValue;\n        colors[i * 3 + 1] = signSqr((~~(value / 19) % 19) - 9) * maximumValue;\n        colors[i * 3 + 2] = signSqr((value % 19) - 9) * maximumValue;\n    }\n\n    const bytesPerRow = width * 4;\n    const pixels = new Uint8ClampedArray(bytesPerRow * height);\n\n    for (y = 0; y < height; y++) {\n        yh = (PI * y) / height;\n        for (x = 0; x < width; x++) {\n            r = 0;\n            g = 0;\n            b = 0;\n            xw = (PI * x) / width;\n\n            for (j = 0; j < numY; j++) {\n                basisY = fastCos(yh * j);\n                for (i = 0; i < numX; i++) {\n                    basis = fastCos(xw * i) * basisY;\n                    colorIndex = (i + j * numX) * 3;\n                    r += colors[colorIndex] * basis;\n                    g += colors[colorIndex + 1] * basis;\n                    b += colors[colorIndex + 2] * basis;\n                }\n            }\n\n            pixelIndex = 4 * x + y * bytesPerRow;\n            pixels[pixelIndex] = linearTosRGB(r);\n            pixels[pixelIndex + 1] = linearTosRGB(g);\n            pixels[pixelIndex + 2] = linearTosRGB(b);\n            pixels[pixelIndex + 3] = 255; // alpha\n        }\n    }\n    return pixels;\n}\n","/**\n * @param {string[]} splittedHtml\n * @param {{ char?: string; count?: number}} options\n * @returns {string}\n */\nconst addIndentation = (splittedHtml, options = {}) => {\n  const char = options.char || ' '\n  const count = options.count || 2\n\n  let level = 0\n  const opened = []\n\n  return splittedHtml.reverse().reduce((indented, elTag) => {\n    if (opened.length\n      && level\n      && opened[level]\n      /* if current element tag is the same as previously opened one */\n      && opened[level] === elTag.substring(1, opened[level].length + 1)\n    ) {\n      opened.splice(level, 1)\n      level--\n    }\n\n    const indentation = char.repeat(level ? level * count : 0)\n\n    const newIndented = [\n      `${indentation}${elTag}`,\n      ...indented,\n    ]\n\n    // if current element tag is closing tag\n    // add it to opened elements\n    if (elTag.substring(0, 2) === '</') {\n      level++\n      opened[level] = elTag.substring(2, elTag.length - 1)\n    }\n\n    return newIndented\n  }, []).join('\\n')\n}\n\nmodule.exports = addIndentation\n","/**\n * @param {string} nonFormattedString Any non formatted string\n * @returns {string[]} Array of strings separated on new lines\n */\nconst removeEmptyLines = (nonFormattedString) => (\n  // Replace\n  // - 1 or more spaces or tabs at the start of line\n  // - 1 or more spaces or tabs at the end of line\n  // - empty lines\n  // with empty string\n  nonFormattedString.trim().replace(/(^(\\s|\\t)+|(( |\\t)+)$)/gm, '')\n)\n\n/**\n * @param {string} markup\n * @returns {string[]} Array of strings splitted on new lines without empty lines\n */\nconst mergeAttributesWithElements = (markup) => {\n  const splittedMarkup = removeEmptyLines(markup).split('\\n')\n\n  const mergedLines = []\n  let currentElement = ''\n  for (let i = 0; i < splittedMarkup.length; i += 1) {\n    const line = splittedMarkup[i]\n\n    // If line is closing element/tag separate closing tag from rest of the line with space\n    if (line.endsWith('/>')) {\n      mergedLines.push(`${currentElement}${line.slice(0, -2)} />`)\n      currentElement = ''\n      // eslint-disable-next-line no-continue\n      continue\n    }\n\n    if (line.endsWith('>')) {\n      mergedLines.push(`${currentElement}${\n        line.startsWith('>') || line.startsWith('<') ? '' : ' '\n      }${line}`)\n      currentElement = ''\n      // eslint-disable-next-line no-continue\n      continue\n    }\n\n    currentElement += currentElement.length ? ` ${line}` : line\n  }\n\n  return mergedLines\n}\n\nmodule.exports = {\n  mergeAttributesWithElements,\n  removeEmptyLines,\n}\n","const addIndentation = require('./utils/addIndentation')\nconst { mergeAttributesWithElements } = require('./utils/toLines')\n\n/**\n * @param {string} markup\n * @param {{ char?: string; count?: number }} options\n * @returns {string}\n */\nconst prettify = (markup, options = {}) => {\n  const splitted = mergeAttributesWithElements(markup)\n\n  return addIndentation(splitted, options)\n}\n\nmodule.exports = prettify\n","import { useRef as s, useCallback as h, useEffect as g } from \"react\";\nvar l = /* @__PURE__ */ ((e) => (e.Mouse = \"mouse\", e.Touch = \"touch\", e.Pointer = \"pointer\", e))(l || {}), d = /* @__PURE__ */ ((e) => (e.CancelledByMovement = \"cancelled-by-movement\", e.CancelledByRelease = \"cancelled-by-release\", e.CancelledOutsideElement = \"cancelled-outside-element\", e))(d || {});\nconst A = () => typeof window == \"object\" ? window?.PointerEvent ?? null : null, z = () => typeof window == \"object\" ? window?.TouchEvent ?? null : null;\nfunction U(e) {\n  const { nativeEvent: t } = e, u = z();\n  return u && t instanceof u || \"touches\" in e;\n}\nfunction X(e) {\n  const t = A();\n  return e.nativeEvent instanceof MouseEvent && !(t && e.nativeEvent instanceof t);\n}\nfunction Y(e) {\n  const { nativeEvent: t } = e;\n  if (!t)\n    return !1;\n  const u = A();\n  return u && t instanceof u || \"pointerId\" in t;\n}\nfunction R(e) {\n  return X(e) || U(e) || Y(e);\n}\nfunction j(e) {\n  return U(e) ? {\n    x: e.touches[0].pageX,\n    y: e.touches[0].pageY\n  } : X(e) || Y(e) ? {\n    x: e.pageX,\n    y: e.pageY\n  } : null;\n}\nfunction G(e) {\n  return {\n    target: e.target,\n    currentTarget: e.currentTarget,\n    nativeEvent: e,\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    persist: () => {\n    }\n  };\n}\nfunction J(e, {\n  threshold: t = 400,\n  captureEvent: u = !1,\n  detect: y = l.Pointer,\n  cancelOnMovement: w = !1,\n  cancelOutsideElement: v = !0,\n  filterEvents: p,\n  onStart: M,\n  onMove: C,\n  onFinish: L,\n  onCancel: b\n} = {}) {\n  const P = s(!1), c = s(!1), I = s(), a = s(), T = s(e), f = s(null), E = h(\n    (n) => (r) => {\n      c.current || R(r) && (p !== void 0 && !p(r) || (u && r.persist(), M?.(r, { context: n }), f.current = j(r), c.current = !0, I.current = r.currentTarget, a.current = setTimeout(() => {\n        T.current && (T.current(r, { context: n }), P.current = !0);\n      }, t)));\n    },\n    [u, p, M, t]\n  ), i = h(\n    (n) => (r, o) => {\n      R(r) && c.current && (f.current = null, u && r.persist(), P.current ? L?.(r, { context: n }) : c.current && b?.(r, { context: n, reason: o ?? d.CancelledByRelease }), P.current = !1, c.current = !1, a.current !== void 0 && clearTimeout(a.current));\n    },\n    [u, L, b]\n  ), m = h(\n    (n) => (r) => {\n      if (C?.(r, { context: n }), w !== !1 && f.current) {\n        const o = j(r);\n        if (o) {\n          const B = w === !0 ? 25 : w, D = {\n            x: Math.abs(o.x - f.current.x),\n            y: Math.abs(o.y - f.current.y)\n          };\n          (D.x > B || D.y > B) && i(n)(r, d.CancelledByMovement);\n        }\n      }\n    },\n    [i, w, C]\n  ), q = h(\n    (n) => {\n      if (e === null)\n        return {};\n      switch (y) {\n        case l.Mouse: {\n          const r = {\n            onMouseDown: E(n),\n            onMouseMove: m(n),\n            onMouseUp: i(n)\n          };\n          return v && (r.onMouseLeave = (o) => {\n            i(n)(o, d.CancelledOutsideElement);\n          }), r;\n        }\n        case l.Touch:\n          return {\n            onTouchStart: E(n),\n            onTouchMove: m(n),\n            onTouchEnd: i(n)\n          };\n        case l.Pointer: {\n          const r = {\n            onPointerDown: E(n),\n            onPointerMove: m(n),\n            onPointerUp: i(n)\n          };\n          return v && (r.onPointerLeave = (o) => i(n)(o, d.CancelledOutsideElement)), r;\n        }\n      }\n    },\n    [e, i, v, y, m, E]\n  );\n  return g(() => {\n    if (!window)\n      return;\n    function n(r) {\n      const o = G(r);\n      i()(o);\n    }\n    return window.addEventListener(\"mouseup\", n), window.addEventListener(\"touchend\", n), window.addEventListener(\"pointerup\", n), () => {\n      window.removeEventListener(\"mouseup\", n), window.removeEventListener(\"touchend\", n), window.removeEventListener(\"pointerup\", n);\n    };\n  }, [i]), g(\n    () => () => {\n      a.current !== void 0 && clearTimeout(a.current);\n    },\n    []\n  ), g(() => {\n    T.current = e;\n  }, [e]), q;\n}\nexport {\n  d as LongPressCallbackReason,\n  l as LongPressEventType,\n  J as useLongPress\n};\n","import { useState } from 'preact/hooks';\n\nimport shortenNumber from '../utils/shorten-number';\n\nimport EmojiText from './emoji-text';\nimport Icon from './icon';\nimport RelativeTime from './relative-time';\n\nexport default function Poll({\n  poll,\n  lang,\n  readOnly,\n  refresh = () => {},\n  votePoll = () => {},\n}) {\n  const [uiState, setUIState] = useState('default');\n  const {\n    expired,\n    expiresAt,\n    id,\n    multiple,\n    options,\n    ownVotes,\n    voted,\n    votersCount,\n    votesCount,\n    emojis,\n  } = poll;\n  const expiresAtDate = !!expiresAt && new Date(expiresAt); // Update poll at point of expiry\n  // NOTE: Disable this because setTimeout runs immediately if delay is too large\n  // https://stackoverflow.com/a/56718027/20838\n  // useEffect(() => {\n  //   let timeout;\n  //   if (!expired && expiresAtDate) {\n  //     const ms = expiresAtDate.getTime() - Date.now() + 1; // +1 to give it a little buffer\n  //     if (ms > 0) {\n  //       timeout = setTimeout(() => {\n  //         setUIState('loading');\n  //         (async () => {\n  //           // await refresh();\n  //           setUIState('default');\n  //         })();\n  //       }, ms);\n  //     }\n  //   }\n  //   return () => {\n  //     clearTimeout(timeout);\n  //   };\n  // }, [expired, expiresAtDate]);\n\n  const pollVotesCount = votersCount || votesCount;\n  let roundPrecision = 0;\n\n  if (pollVotesCount <= 1000) {\n    roundPrecision = 0;\n  } else if (pollVotesCount <= 10000) {\n    roundPrecision = 1;\n  } else if (pollVotesCount <= 100000) {\n    roundPrecision = 2;\n  }\n\n  const [showResults, setShowResults] = useState(false);\n  const optionsHaveVoteCounts = options.every((o) => o.votesCount !== null);\n\n  return (\n    <div\n      lang={lang}\n      dir=\"auto\"\n      class={`poll ${readOnly ? 'read-only' : ''} ${\n        uiState === 'loading' ? 'loading' : ''\n      }`}\n    >\n      {(showResults && optionsHaveVoteCounts) || voted || expired ? (\n        <>\n          <div class=\"poll-options\">\n            {options.map((option, i) => {\n              const { title, votesCount: optionVotesCount } = option;\n              const percentage = pollVotesCount\n                ? ((optionVotesCount / pollVotesCount) * 100).toFixed(\n                    roundPrecision,\n                  )\n                : 0; // check if current poll choice is the leading one\n\n              const isLeading =\n                optionVotesCount > 0 &&\n                optionVotesCount ===\n                  Math.max(...options.map((o) => o.votesCount));\n              return (\n                <div\n                  key={`${i}-${title}-${optionVotesCount}`}\n                  class={`poll-option poll-result ${\n                    isLeading ? 'poll-option-leading' : ''\n                  }`}\n                  style={{\n                    '--percentage': `${percentage}%`,\n                  }}\n                >\n                  <div class=\"poll-option-title\">\n                    <span>\n                      <EmojiText text={title} emojis={emojis} />\n                    </span>\n                    {voted && ownVotes.includes(i) && (\n                      <>\n                        {' '}\n                        <Icon icon=\"check-circle\" />\n                      </>\n                    )}\n                  </div>\n                  <div\n                    class=\"poll-option-votes\"\n                    title={`${optionVotesCount} vote${\n                      optionVotesCount === 1 ? '' : 's'\n                    }`}\n                  >\n                    {percentage}%\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n          {!expired && !voted && (\n            <button\n              class=\"poll-vote-button plain2\"\n              disabled={uiState === 'loading'}\n              onClick={(e) => {\n                e.preventDefault();\n                setShowResults(false);\n              }}\n            >\n              <Icon icon=\"arrow-left\" size=\"s\" /> Hide results\n            </button>\n          )}\n        </>\n      ) : (\n        <form\n          onSubmit={async (e) => {\n            e.preventDefault();\n            const form = e.target;\n            const formData = new FormData(form);\n            const choices = [];\n            formData.forEach((value, key) => {\n              if (key === 'poll') {\n                choices.push(value);\n              }\n            });\n            if (!choices.length) return;\n            setUIState('loading');\n            await votePoll(choices);\n            setUIState('default');\n          }}\n        >\n          <div class=\"poll-options\">\n            {options.map((option, i) => {\n              const { title } = option;\n              return (\n                <div class=\"poll-option\">\n                  <label class=\"poll-label\">\n                    <input\n                      type={multiple ? 'checkbox' : 'radio'}\n                      name=\"poll\"\n                      value={i}\n                      disabled={uiState === 'loading'}\n                      readOnly={readOnly}\n                    />\n                    <span class=\"poll-option-title\">\n                      <EmojiText text={title} emojis={emojis} />\n                    </span>\n                  </label>\n                </div>\n              );\n            })}\n          </div>\n          {!readOnly && (\n            <button\n              class=\"poll-vote-button\"\n              type=\"submit\"\n              disabled={uiState === 'loading'}\n            >\n              Vote\n            </button>\n          )}\n        </form>\n      )}\n      <p class=\"poll-meta\">\n        {!expired && !readOnly && (\n          <button\n            type=\"button\"\n            class=\"plain small\"\n            disabled={uiState === 'loading'}\n            style={{\n              marginLeft: -8,\n            }}\n            onClick={(e) => {\n              e.preventDefault();\n              setUIState('loading');\n\n              (async () => {\n                await refresh();\n                setUIState('default');\n              })();\n            }}\n            title=\"Refresh\"\n          >\n            <Icon icon=\"refresh\" alt=\"Refresh\" />\n          </button>\n        )}\n        {!voted && !expired && !readOnly && optionsHaveVoteCounts && (\n          <button\n            type=\"button\"\n            class=\"plain small\"\n            disabled={uiState === 'loading'}\n            onClick={(e) => {\n              e.preventDefault();\n              setShowResults(!showResults);\n            }}\n            title={showResults ? 'Hide results' : 'Show results'}\n          >\n            <Icon\n              icon={showResults ? 'eye-open' : 'eye-close'}\n              alt={showResults ? 'Hide results' : 'Show results'}\n            />{' '}\n          </button>\n        )}\n        {!expired && !readOnly && ' '}\n        <span title={votesCount}>{shortenNumber(votesCount)}</span> vote\n        {votesCount === 1 ? '' : 's'}\n        {!!votersCount && votersCount !== votesCount && (\n          <>\n            {' '}\n            &bull; <span title={votersCount}>\n              {shortenNumber(votersCount)}\n            </span>{' '}\n            voter\n            {votersCount === 1 ? '' : 's'}\n          </>\n        )}{' '}\n        &bull; {expired ? 'Ended' : 'Ending'}{' '}\n        {!!expiresAtDate && <RelativeTime datetime={expiresAtDate} />}\n      </p>{' '}\n    </div>\n  );\n}\n","import { createContext } from 'preact';\n\nconst FilterContext = createContext();\nexport default FilterContext;\n","import mem from './mem';\nimport { getCurrentAccountID } from './store-utils';\n\nfunction _isFiltered(filtered, filterContext) {\n  if (!filtered?.length) return false;\n  const appliedFilters = filtered.filter((f) => {\n    const { filter } = f;\n    const hasContext = filter.context.includes(filterContext);\n    if (!hasContext) return false;\n    if (!filter.expiresAt) return hasContext;\n    return new Date(filter.expiresAt) > new Date();\n  });\n  if (!appliedFilters.length) return false;\n  const isHidden = appliedFilters.some((f) => f.filter.filterAction === 'hide');\n  if (isHidden)\n    return {\n      action: 'hide',\n    };\n  const isWarn = appliedFilters.some((f) => f.filter.filterAction === 'warn');\n  if (isWarn) {\n    const filterTitles = appliedFilters.map((f) => f.filter.title);\n    return {\n      action: 'warn',\n      titles: filterTitles,\n      titlesStr: filterTitles.join('  '),\n    };\n  }\n  return false;\n}\nexport const isFiltered = mem(_isFiltered);\n\nexport function filteredItem(item, filterContext, currentAccountID) {\n  const { filtered } = item;\n  if (!filtered?.length) return true;\n  const isSelf = currentAccountID && item.account?.id === currentAccountID;\n  if (isSelf) return true;\n  const filterState = isFiltered(filtered, filterContext);\n  if (!filterState) return true;\n  if (filterState.action === 'hide') return false;\n  // item._filtered = filterState;\n  return true;\n}\nexport function filteredItems(items, filterContext) {\n  if (!items?.length) return [];\n  if (!filterContext) return items;\n  const currentAccountID = getCurrentAccountID();\n  return items.filter((item) =>\n    filteredItem(item, filterContext, currentAccountID),\n  );\n}\n","const div = document.createElement('div');\nexport default function htmlContentLength(html) {\n  if (!html) return 0;\n  div.innerHTML = html;\n  // .invisible spans for links\n  // e.g. <span class=\"invisible\">https://</span>mastodon.social\n  div.querySelectorAll('.invisible').forEach((el) => {\n    el.remove();\n  });\n  return div.innerText.length;\n}\n","export const supportsTTS = 'speechSynthesis' in window;\n\nexport function speak(text, lang) {\n  if (!supportsTTS) return;\n  try {\n    if (speechSynthesis.speaking) {\n      speechSynthesis.cancel();\n    }\n    const utterance = new SpeechSynthesisUtterance(text);\n    if (lang) utterance.lang = lang;\n    speechSynthesis.speak(utterance);\n  } catch (e) {\n    alert(e);\n  }\n}\n","import getHTMLText from './getHTMLText';\n\nfunction statusPeek(status) {\n  const { spoilerText, content, poll, mediaAttachments } = status;\n  let text = '';\n  if (spoilerText?.trim()) {\n    text += spoilerText;\n  } else {\n    text += getHTMLText(content);\n  }\n  text = text.trim();\n  if (poll?.options?.length) {\n    text += `\\n\\n:\\n${poll.options\n      .map((o) => `${poll.multiple ? '' : ''} ${o.title}`)\n      .join('\\n')}`;\n  }\n  if (mediaAttachments?.length) {\n    text +=\n      ' ' +\n      mediaAttachments\n        .map(\n          (m) =>\n            ({\n              image: '',\n              gifv: '',\n              video: '',\n              audio: '',\n              unknown: '',\n            }[m.type] || ''),\n        )\n        .join('');\n  }\n  return text;\n}\n\nexport default statusPeek;\n","import{useRef as r,useEffect as n,useMemo as t,useReducer as e,useCallback as u}from\"react\";function c(e,u,c){var i=this,a=r(null),o=r(0),f=r(null),l=r([]),v=r(),m=r(),d=r(e),g=r(!0);d.current=e;var p=\"undefined\"!=typeof window,w=!u&&0!==u&&p;if(\"function\"!=typeof e)throw new TypeError(\"Expected a function\");u=+u||0;var s=!!(c=c||{}).leading,x=!(\"trailing\"in c)||!!c.trailing,h=\"maxWait\"in c,y=\"debounceOnServer\"in c&&!!c.debounceOnServer,F=h?Math.max(+c.maxWait||0,u):null;n(function(){return g.current=!0,function(){g.current=!1}},[]);var A=t(function(){var r=function(r){var n=l.current,t=v.current;return l.current=v.current=null,o.current=r,m.current=d.current.apply(t,n)},n=function(r,n){w&&cancelAnimationFrame(f.current),f.current=w?requestAnimationFrame(r):setTimeout(r,n)},t=function(r){if(!g.current)return!1;var n=r-a.current;return!a.current||n>=u||n<0||h&&r-o.current>=F},e=function(n){return f.current=null,x&&l.current?r(n):(l.current=v.current=null,m.current)},c=function r(){var c=Date.now();if(t(c))return e(c);if(g.current){var i=u-(c-a.current),f=h?Math.min(i,F-(c-o.current)):i;n(r,f)}},A=function(){if(p||y){var e=Date.now(),d=t(e);if(l.current=[].slice.call(arguments),v.current=i,a.current=e,d){if(!f.current&&g.current)return o.current=a.current,n(c,u),s?r(a.current):m.current;if(h)return n(c,u),r(a.current)}return f.current||n(c,u),m.current}};return A.cancel=function(){f.current&&(w?cancelAnimationFrame(f.current):clearTimeout(f.current)),o.current=0,l.current=a.current=v.current=f.current=null},A.isPending=function(){return!!f.current},A.flush=function(){return f.current?e(Date.now()):m.current},A},[s,h,u,F,x,w,p,y]);return A}function i(r,n){return r===n}function a(r,n){return n}function o(n,t,o){var f=o&&o.equalityFn||i,l=e(a,n),v=l[0],m=l[1],d=c(u(function(r){return m(r)},[m]),t,o),g=r(n);return f(g.current,n)||(d(n),g.current=n),[v,d]}function f(r,n,t){var e=void 0===t?{}:t,u=e.leading,i=e.trailing;return c(r,n,{maxWait:n,leading:void 0===u||u,trailing:void 0===i||i})}export{o as useDebounce,c as useDebouncedCallback,f as useThrottledCallback};\n//# sourceMappingURL=index.module.js.map\n","import { useRef, useEffect, useCallback, useState, useMemo } from 'react';\n\n// This could've been more streamlined with internal state instead of abusing\n// refs to such extent, but then composing hooks and components could not opt out of unnecessary renders.\nfunction useResolvedElement(subscriber, refOrElement) {\n  var lastReportRef = useRef(null);\n  var refOrElementRef = useRef(null);\n  refOrElementRef.current = refOrElement;\n  var cbElementRef = useRef(null); // Calling re-evaluation after each render without using a dep array,\n  // as the ref object's current value could've changed since the last render.\n\n  useEffect(function () {\n    evaluateSubscription();\n  });\n  var evaluateSubscription = useCallback(function () {\n    var cbElement = cbElementRef.current;\n    var refOrElement = refOrElementRef.current; // Ugly ternary. But smaller than an if-else block.\n\n    var element = cbElement ? cbElement : refOrElement ? refOrElement instanceof Element ? refOrElement : refOrElement.current : null;\n\n    if (lastReportRef.current && lastReportRef.current.element === element && lastReportRef.current.subscriber === subscriber) {\n      return;\n    }\n\n    if (lastReportRef.current && lastReportRef.current.cleanup) {\n      lastReportRef.current.cleanup();\n    }\n\n    lastReportRef.current = {\n      element: element,\n      subscriber: subscriber,\n      // Only calling the subscriber, if there's an actual element to report.\n      // Setting cleanup to undefined unless a subscriber returns one, as an existing cleanup function would've been just called.\n      cleanup: element ? subscriber(element) : undefined\n    };\n  }, [subscriber]); // making sure we call the cleanup function on unmount\n\n  useEffect(function () {\n    return function () {\n      if (lastReportRef.current && lastReportRef.current.cleanup) {\n        lastReportRef.current.cleanup();\n        lastReportRef.current = null;\n      }\n    };\n  }, []);\n  return useCallback(function (element) {\n    cbElementRef.current = element;\n    evaluateSubscription();\n  }, [evaluateSubscription]);\n}\n\n// We're only using the first element of the size sequences, until future versions of the spec solidify on how\n// exactly it'll be used for fragments in multi-column scenarios:\n// From the spec:\n// > The box size properties are exposed as FrozenArray in order to support elements that have multiple fragments,\n// > which occur in multi-column scenarios. However the current definitions of content rect and border box do not\n// > mention how those boxes are affected by multi-column layout. In this spec, there will only be a single\n// > ResizeObserverSize returned in the FrozenArray, which will correspond to the dimensions of the first column.\n// > A future version of this spec will extend the returned FrozenArray to contain the per-fragment size information.\n// (https://drafts.csswg.org/resize-observer/#resize-observer-entry-interface)\n//\n// Also, testing these new box options revealed that in both Chrome and FF everything is returned in the callback,\n// regardless of the \"box\" option.\n// The spec states the following on this:\n// > This does not have any impact on which box dimensions are returned to the defined callback when the event\n// > is fired, it solely defines which box the author wishes to observe layout changes on.\n// (https://drafts.csswg.org/resize-observer/#resize-observer-interface)\n// I'm not exactly clear on what this means, especially when you consider a later section stating the following:\n// > This section is non-normative. An author may desire to observe more than one CSS box.\n// > In this case, author will need to use multiple ResizeObservers.\n// (https://drafts.csswg.org/resize-observer/#resize-observer-interface)\n// Which is clearly not how current browser implementations behave, and seems to contradict the previous quote.\n// For this reason I decided to only return the requested size,\n// even though it seems we have access to results for all box types.\n// This also means that we get to keep the current api, being able to return a simple { width, height } pair,\n// regardless of box option.\nfunction extractSize(entry, boxProp, sizeType) {\n  if (!entry[boxProp]) {\n    if (boxProp === \"contentBoxSize\") {\n      // The dimensions in `contentBoxSize` and `contentRect` are equivalent according to the spec.\n      // See the 6th step in the description for the RO algorithm:\n      // https://drafts.csswg.org/resize-observer/#create-and-populate-resizeobserverentry-h\n      // > Set this.contentRect to logical this.contentBoxSize given target and observedBox of \"content-box\".\n      // In real browser implementations of course these objects differ, but the width/height values should be equivalent.\n      return entry.contentRect[sizeType === \"inlineSize\" ? \"width\" : \"height\"];\n    }\n\n    return undefined;\n  } // A couple bytes smaller than calling Array.isArray() and just as effective here.\n\n\n  return entry[boxProp][0] ? entry[boxProp][0][sizeType] : // TS complains about this, because the RO entry type follows the spec and does not reflect Firefox's current\n  // behaviour of returning objects instead of arrays for `borderBoxSize` and `contentBoxSize`.\n  // @ts-ignore\n  entry[boxProp][sizeType];\n}\n\nfunction useResizeObserver(opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n\n  // Saving the callback as a ref. With this, I don't need to put onResize in the\n  // effect dep array, and just passing in an anonymous function without memoising\n  // will not reinstantiate the hook's ResizeObserver.\n  var onResize = opts.onResize;\n  var onResizeRef = useRef(undefined);\n  onResizeRef.current = onResize;\n  var round = opts.round || Math.round; // Using a single instance throughout the hook's lifetime\n\n  var resizeObserverRef = useRef();\n\n  var _useState = useState({\n    width: undefined,\n    height: undefined\n  }),\n      size = _useState[0],\n      setSize = _useState[1]; // In certain edge cases the RO might want to report a size change just after\n  // the component unmounted.\n\n\n  var didUnmount = useRef(false);\n  useEffect(function () {\n    didUnmount.current = false;\n    return function () {\n      didUnmount.current = true;\n    };\n  }, []); // Using a ref to track the previous width / height to avoid unnecessary renders.\n\n  var previous = useRef({\n    width: undefined,\n    height: undefined\n  }); // This block is kinda like a useEffect, only it's called whenever a new\n  // element could be resolved based on the ref option. It also has a cleanup\n  // function.\n\n  var refCallback = useResolvedElement(useCallback(function (element) {\n    // We only use a single Resize Observer instance, and we're instantiating it on demand, only once there's something to observe.\n    // This instance is also recreated when the `box` option changes, so that a new observation is fired if there was a previously observed element with a different box option.\n    if (!resizeObserverRef.current || resizeObserverRef.current.box !== opts.box || resizeObserverRef.current.round !== round) {\n      resizeObserverRef.current = {\n        box: opts.box,\n        round: round,\n        instance: new ResizeObserver(function (entries) {\n          var entry = entries[0];\n          var boxProp = opts.box === \"border-box\" ? \"borderBoxSize\" : opts.box === \"device-pixel-content-box\" ? \"devicePixelContentBoxSize\" : \"contentBoxSize\";\n          var reportedWidth = extractSize(entry, boxProp, \"inlineSize\");\n          var reportedHeight = extractSize(entry, boxProp, \"blockSize\");\n          var newWidth = reportedWidth ? round(reportedWidth) : undefined;\n          var newHeight = reportedHeight ? round(reportedHeight) : undefined;\n\n          if (previous.current.width !== newWidth || previous.current.height !== newHeight) {\n            var newSize = {\n              width: newWidth,\n              height: newHeight\n            };\n            previous.current.width = newWidth;\n            previous.current.height = newHeight;\n\n            if (onResizeRef.current) {\n              onResizeRef.current(newSize);\n            } else {\n              if (!didUnmount.current) {\n                setSize(newSize);\n              }\n            }\n          }\n        })\n      };\n    }\n\n    resizeObserverRef.current.instance.observe(element, {\n      box: opts.box\n    });\n    return function () {\n      if (resizeObserverRef.current) {\n        resizeObserverRef.current.instance.unobserve(element);\n      }\n    };\n  }, [opts.box, round]), opts.ref);\n  return useMemo(function () {\n    return {\n      ref: refCallback,\n      width: size.width,\n      height: size.height\n    };\n  }, [refCallback, size.width, size.height]);\n}\n\nexport { useResizeObserver as default };\n","import { useRef } from 'preact/hooks';\nimport { useThrottledCallback } from 'use-debounce';\nimport useResizeObserver from 'use-resize-observer';\n\nexport default function useTruncated({ className = 'truncated' } = {}) {\n  const ref = useRef();\n  const onResize = useThrottledCallback(({ height }) => {\n    if (ref.current) {\n      const { scrollHeight } = ref.current;\n      let truncated = scrollHeight > height;\n      if (truncated) {\n        const { height: _height, maxHeight } = getComputedStyle(ref.current);\n        const computedHeight = parseInt(maxHeight || _height, 10);\n        truncated = scrollHeight > computedHeight;\n      }\n      ref.current.classList.toggle(className, truncated);\n    }\n  }, 300);\n  useResizeObserver({\n    ref,\n    box: 'border-box',\n    onResize,\n  });\n  return ref;\n}\n","export default {\n  public: 'earth',\n  unlisted: 'group',\n  private: 'lock',\n  direct: 'message',\n};\n","export var styleRoot = 'kvfysmfp';\nexport var styleChild = 'ufhsfnkm';\nexport var styles = \".\".concat(styleRoot, \"{overflow:hidden;touch-action:none}.\").concat(styleChild, \"{transform-origin: 0 0}\");\n","var isSsr = typeof window === 'undefined';\nexport var isTouch = function () {\n    return !isSsr && ('ontouchstart' in window || navigator.maxTouchPoints > 0);\n};\nexport var make2dTransformValue = function (_a) {\n    var x = _a.x, y = _a.y, scale = _a.scale;\n    return \"scale(\".concat(scale, \") translate(\").concat(x, \"px, \").concat(y, \"px)\");\n};\nexport var make3dTransformValue = function (_a) {\n    var x = _a.x, y = _a.y, scale = _a.scale;\n    return \"scale3d(\".concat(scale, \",\").concat(scale, \", 1) translate3d(\").concat(x, \"px, \").concat(y, \"px, 0)\");\n};\nexport var hasTranslate3DSupport = function () {\n    var css = !isSsr && window.CSS;\n    return css && css.supports && css.supports('transform', 'translate3d(0,0,0)');\n};\n","var min = Math.min, max = Math.max;\nexport function getOffsetBounds(_a) {\n    var containerDimension = _a.containerDimension, childDimension = _a.childDimension, padding = _a.padding, centerContained = _a.centerContained;\n    var diff = childDimension - containerDimension;\n    if (diff + 2 * padding <= 0 && centerContained) {\n        return [diff / 2, diff / 2];\n    }\n    else {\n        return [min(diff + padding, 0) - padding, max(0, diff + padding)];\n    }\n}\n","import { __assign, __extends } from \"tslib\";\nimport React, { Component, createRef, Children, cloneElement } from 'react';\nimport { styleRoot, styleChild, styles } from './styles.css';\nimport { isTouch } from '../utils';\nimport { getOffsetBounds } from './getOffsetBounds';\nvar classnames = function (base, other) {\n    return other ? \"\".concat(base, \" \").concat(other) : base;\n};\nvar abs = Math.abs, min = Math.min, sqrt = Math.sqrt;\nvar isSsr = typeof window === 'undefined';\nvar isMac = isSsr ? false : /(Mac)/i.test(navigator.platform);\nvar isDragInteraction = function (i) { return i === 'drag'; };\nvar isZoomInteraction = function (i) { return i === 'zoom'; };\nvar isZoomGesture = function (wheelEvent) { return isMac && wheelEvent.ctrlKey; };\nvar cancelEvent = function (event) {\n    event.stopPropagation();\n    event.preventDefault();\n};\nvar getDistance = function (a, b) {\n    var x = a.x - b.x;\n    var y = a.y - b.y;\n    return sqrt(x * x + y * y);\n};\nvar calculateScale = function (startTouches, endTouches) {\n    var startDistance = getDistance(startTouches[0], startTouches[1]);\n    var endDistance = getDistance(endTouches[0], endTouches[1]);\n    return endDistance / startDistance;\n};\nvar isCloseTo = function (value, expected) {\n    return value > expected - 0.01 && value < expected + 0.01;\n};\nvar swing = function (p) { return -Math.cos(p * Math.PI) / 2 + 0.5; };\nvar getPointByPageCoordinates = function (touch) { return ({\n    x: touch.pageX,\n    y: touch.pageY,\n}); };\nvar getPageCoordinatesByTouches = function (touches) {\n    return Array.from(touches).map(getPointByPageCoordinates);\n};\nvar sum = function (a, b) { return a + b; };\nvar getVectorAvg = function (vectors) { return ({\n    x: vectors.map(function (_a) {\n        var x = _a.x;\n        return x;\n    }).reduce(sum, 0) / vectors.length,\n    y: vectors.map(function (_a) {\n        var y = _a.y;\n        return y;\n    }).reduce(sum, 0) / vectors.length,\n}); };\nvar clamp = function (min, max, value) {\n    return value < min ? min : value > max ? max : value;\n};\nvar shouldInterceptWheel = function (event) {\n    return !(event.ctrlKey || event.metaKey);\n};\nvar getElementSize = function (element) {\n    if (element) {\n        var offsetWidth = element.offsetWidth, offsetHeight = element.offsetHeight;\n        // Any DOMElement\n        if (offsetWidth && offsetHeight) {\n            return { width: offsetWidth, height: offsetHeight };\n        }\n        // Svg support\n        var style = getComputedStyle(element);\n        var width = parseFloat(style.width);\n        var height = parseFloat(style.height);\n        if (height && width) {\n            return { width: width, height: height };\n        }\n    }\n    return { width: 0, height: 0 };\n};\nvar calculateVelocity = function (startPoint, endPoint) { return ({\n    x: endPoint.x - startPoint.x,\n    y: endPoint.y - startPoint.y,\n}); };\nvar comparePoints = function (p1, p2) { return p1.x === p2.x && p1.y === p2.y; };\nvar noup = function () { };\nvar zeroPoint = { x: 0, y: 0 };\nvar PinchZoom = /** @class */ (function (_super) {\n    __extends(PinchZoom, _super);\n    function PinchZoom() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._prevDragMovePoint = null;\n        _this._containerObserver = null;\n        _this._fingers = 0;\n        _this._firstMove = true;\n        _this._initialOffset = __assign({}, zeroPoint);\n        _this._interaction = null;\n        _this._isDoubleTap = false;\n        _this._isOffsetsSet = false;\n        _this._lastDragPosition = null;\n        _this._lastScale = 1;\n        _this._lastTouchStart = 0;\n        _this._lastZoomCenter = null;\n        _this._listenMouseMove = false;\n        _this._nthZoom = 0;\n        _this._offset = __assign({}, zeroPoint);\n        _this._startOffset = __assign({}, zeroPoint);\n        _this._startTouches = null;\n        _this._updatePlaned = false;\n        _this._wheelTimeOut = null;\n        _this._zoomFactor = 1;\n        _this._initialZoomFactor = 1;\n        _this._draggingPoint = __assign({}, zeroPoint);\n        // It help reduce behavior difference between touch and mouse events\n        _this._ignoreNextClick = false;\n        // @ts-ignore\n        _this._containerRef = createRef();\n        _this._handleClick = function (clickEvent) {\n            if (_this._ignoreNextClick) {\n                _this._ignoreNextClick = false;\n                clickEvent.stopPropagation();\n            }\n        };\n        _this._onResize = function () {\n            var _a;\n            if ((_a = _this._containerRef) === null || _a === void 0 ? void 0 : _a.current) {\n                _this._updateInitialZoomFactor();\n                _this._setupOffsets();\n                _this._update();\n            }\n        };\n        _this._handlerOnTouchEnd = _this._handlerIfEnable(function (touchEndEvent) {\n            _this._fingers = touchEndEvent.touches.length;\n            if (_this.props.shouldCancelHandledTouchEndEvents &&\n                (isZoomInteraction(_this._interaction) ||\n                    (isDragInteraction(_this._interaction) &&\n                        (_this._startOffset.x !== _this._offset.x ||\n                            _this._startOffset.y !== _this._offset.y)))) {\n                cancelEvent(touchEndEvent);\n            }\n            if (isDragInteraction(_this._interaction) && !_this._enoughToDrag()) {\n                _this._handleClick(touchEndEvent);\n            }\n            _this._updateInteraction(touchEndEvent);\n        });\n        _this._handlerOnTouchStart = _this._handlerIfEnable(function (touchStartEvent) {\n            _this._firstMove = true;\n            _this._fingers = touchStartEvent.touches.length;\n            _this._detectDoubleTap(touchStartEvent);\n        });\n        _this._handlerOnTouchMove = _this._handlerIfEnable(function (touchMoveEvent) {\n            if (_this._isDoubleTap) {\n                return;\n            }\n            _this._collectInertia(touchMoveEvent);\n            if (_this._firstMove) {\n                _this._updateInteraction(touchMoveEvent);\n                if (_this._interaction) {\n                    cancelEvent(touchMoveEvent);\n                }\n                _this._startOffset = __assign({}, _this._offset);\n                _this._startTouches = getPageCoordinatesByTouches(touchMoveEvent.touches);\n            }\n            else {\n                if (isZoomInteraction(_this._interaction)) {\n                    if (_this._startTouches &&\n                        _this._startTouches.length === 2 &&\n                        touchMoveEvent.touches.length === 2) {\n                        _this._handleZoom(touchMoveEvent, calculateScale(_this._startTouches, getPageCoordinatesByTouches(touchMoveEvent.touches)));\n                    }\n                }\n                else if (isDragInteraction(_this._interaction)) {\n                    _this._handleDrag(touchMoveEvent);\n                }\n                if (_this._interaction) {\n                    cancelEvent(touchMoveEvent);\n                    _this._update();\n                }\n            }\n            _this._firstMove = false;\n        });\n        _this._handlerWheel = function (wheelEvent) {\n            if (_this.props.shouldInterceptWheel(wheelEvent)) {\n                return;\n            }\n            cancelEvent(wheelEvent);\n            var pageX = wheelEvent.pageX, pageY = wheelEvent.pageY, deltaY = wheelEvent.deltaY, deltaMode = wheelEvent.deltaMode;\n            var scaleDelta = 1;\n            if (isZoomGesture(wheelEvent) || deltaMode === 1) {\n                scaleDelta = 15;\n            }\n            var likeTouchEvent = {\n                touches: [\n                    // @ts-ignore\n                    { pageX: pageX, pageY: pageY },\n                ],\n            };\n            var center = _this._getOffsetByFirstTouch(likeTouchEvent);\n            var dScale = deltaY * scaleDelta;\n            _this._stopAnimation();\n            _this._scaleTo(_this._zoomFactor - dScale / _this.props.wheelScaleFactor, center);\n            _this._update();\n            clearTimeout(\n            // @ts-ignore\n            _this._wheelTimeOut);\n            _this._wheelTimeOut = setTimeout(function () { return _this._sanitize(); }, 100);\n        };\n        // @ts-ignore\n        _this._handlers = _this.props.isTouch()\n            ? [\n                ['touchstart', _this._handlerOnTouchStart],\n                ['touchend', _this._handlerOnTouchEnd],\n                ['touchmove', _this._handlerOnTouchMove],\n            ]\n            : [\n                [\n                    'mousemove',\n                    _this.simulate(_this._handlerOnTouchMove),\n                    _this.props._document,\n                ],\n                [\n                    'mouseup',\n                    _this.simulate(_this._handlerOnTouchEnd),\n                    _this.props._document,\n                ],\n                ['mousedown', _this.simulate(_this._handlerOnTouchStart)],\n                ['click', _this._handleClick],\n                ['wheel', _this._handlerWheel],\n            ];\n        return _this;\n    }\n    PinchZoom.prototype._handleDragStart = function (event) {\n        this._ignoreNextClick = true;\n        this.props.onDragStart();\n        this._stopAnimation();\n        this._resetInertia();\n        this._lastDragPosition = null;\n        this._hasInteraction = true;\n        this._draggingPoint = this._offset;\n        this._handleDrag(event);\n    };\n    PinchZoom.prototype._handleDrag = function (event) {\n        var touch = this._getOffsetByFirstTouch(event);\n        if (this._enoughToDrag()) {\n            this._drag(touch, this._lastDragPosition);\n        }\n        else {\n            this._virtualDrag(touch, this._lastDragPosition);\n        }\n        this._offset = this._sanitizeOffset(this._offset);\n        this._lastDragPosition = touch;\n    };\n    PinchZoom.prototype._resetInertia = function () {\n        this._velocity = null;\n        this._prevDragMovePoint = null;\n    };\n    PinchZoom.prototype._realizeInertia = function () {\n        var _this = this;\n        var _a = this.props, inertiaFriction = _a.inertiaFriction, inertia = _a.inertia;\n        if (!inertia || !this._velocity) {\n            return;\n        }\n        var _b = this._velocity, x = _b.x, y = _b.y;\n        if (x || y) {\n            this._stopAnimation();\n            this._resetInertia();\n            var renderFrame = function () {\n                x *= inertiaFriction;\n                y *= inertiaFriction;\n                if (!x && !y) {\n                    return _this._stopAnimation();\n                }\n                var prevOffset = __assign({}, _this._offset);\n                _this._addOffset({ x: x, y: y });\n                _this._offset = _this._sanitizeOffset(_this._offset);\n                if (comparePoints(prevOffset, _this._offset)) {\n                    return _this._stopAnimation();\n                }\n                _this._update({ isAnimation: true });\n            };\n            this._animate(renderFrame, { duration: 9999 });\n        }\n    };\n    PinchZoom.prototype._collectInertia = function (_a) {\n        var touches = _a.touches;\n        if (!this.props.inertia) {\n            return;\n        }\n        var currentCoordinates = getPageCoordinatesByTouches(touches)[0];\n        var prevPoint = this._prevDragMovePoint;\n        if (prevPoint) {\n            this._velocity = calculateVelocity(currentCoordinates, prevPoint);\n        }\n        this._prevDragMovePoint = currentCoordinates;\n    };\n    PinchZoom.prototype._handleDragEnd = function () {\n        this.props.onDragEnd();\n        this._end();\n        this._realizeInertia();\n    };\n    PinchZoom.prototype._handleZoomStart = function () {\n        this.props.onZoomStart();\n        this._stopAnimation();\n        this._lastScale = 1;\n        this._nthZoom = 0;\n        this._lastZoomCenter = null;\n        this._hasInteraction = true;\n    };\n    PinchZoom.prototype._handleZoom = function (event, newScale) {\n        var touchCenter = getVectorAvg(this._getOffsetTouches(event));\n        var scale = newScale / this._lastScale;\n        this._lastScale = newScale;\n        // The first touch events are thrown away since they are not precise\n        this._nthZoom += 1;\n        if (this._nthZoom > 3) {\n            this._scale(scale, touchCenter);\n            this._drag(touchCenter, this._lastZoomCenter);\n            if (this.props.enforceBoundsDuringZoom) {\n                this._offset = this._sanitizeOffset(this._offset);\n            }\n        }\n        this._lastZoomCenter = touchCenter;\n    };\n    PinchZoom.prototype._handleZoomEnd = function () {\n        this.props.onZoomEnd();\n        this._end();\n    };\n    PinchZoom.prototype._handleDoubleTap = function (event) {\n        var _this = this;\n        if (this._hasInteraction || this.props.tapZoomFactor === 0) {\n            return;\n        }\n        var needZoomOut = (this.props.doubleTapZoomOutOnMaxScale &&\n            this._zoomFactor === this.props.maxZoom) ||\n            (this.props.doubleTapToggleZoom && this._zoomFactor > 1);\n        this.props.onDoubleTap();\n        this._ignoreNextClick = true;\n        var zoomFactor = this._zoomFactor + this.props.tapZoomFactor;\n        var startZoomFactor = this._zoomFactor;\n        var updateProgress = function (progress) {\n            _this._scaleTo(startZoomFactor + progress * (zoomFactor - startZoomFactor), center);\n        };\n        var center = this._getOffsetByFirstTouch(event);\n        this._isDoubleTap = true;\n        if (startZoomFactor > zoomFactor) {\n            center = this._getCurrentZoomCenter();\n        }\n        needZoomOut ? this._zoomOutAnimation() : this._animate(updateProgress);\n    };\n    PinchZoom.prototype._computeInitialOffset = function () {\n        var rect = this._getContainerRect();\n        var _a = this._getChildSize(), width = _a.width, height = _a.height;\n        var x = -abs(width * this._getInitialZoomFactor() - rect.width) / 2;\n        var y = -abs(height * this._getInitialZoomFactor() - rect.height) / 2;\n        this._initialOffset = { x: x, y: y };\n    };\n    PinchZoom.prototype._resetOffset = function () {\n        this._offset = __assign({}, this._initialOffset);\n    };\n    PinchZoom.prototype._setupOffsets = function () {\n        if (this.props.setOffsetsOnce && this._isOffsetsSet) {\n            return;\n        }\n        this._isOffsetsSet = true;\n        this._computeInitialOffset();\n        this._resetOffset();\n    };\n    PinchZoom.prototype._sanitizeOffset = function (offset) {\n        var rect = this._getContainerRect();\n        var _a = this._getChildSize(), width = _a.width, height = _a.height;\n        var elWidth = width * this._getInitialZoomFactor() * this._zoomFactor;\n        var elHeight = height * this._getInitialZoomFactor() * this._zoomFactor;\n        var _b = getOffsetBounds({\n            containerDimension: rect.width,\n            childDimension: elWidth,\n            padding: this.props.horizontalPadding,\n            centerContained: this.props.centerContained,\n        }), minOffsetX = _b[0], maxOffsetX = _b[1];\n        var _c = getOffsetBounds({\n            containerDimension: rect.height,\n            childDimension: elHeight,\n            padding: this.props.verticalPadding,\n            centerContained: this.props.centerContained,\n        }), minOffsetY = _c[0], maxOffsetY = _c[1];\n        return {\n            x: clamp(minOffsetX, maxOffsetX, offset.x),\n            y: clamp(minOffsetY, maxOffsetY, offset.y),\n        };\n    };\n    PinchZoom.prototype.alignCenter = function (options) {\n        var _this = this;\n        var _a = __assign({ duration: 250, animated: true }, options), __x = _a.x, __y = _a.y, scale = _a.scale, animated = _a.animated, duration = _a.duration;\n        // Bug-Fix: https://github.com/retyui/react-quick-pinch-zoom/issues/58\n        var x = __x * this._initialZoomFactor;\n        var y = __y * this._initialZoomFactor;\n        var startZoomFactor = this._zoomFactor;\n        var startOffset = __assign({}, this._offset);\n        var rect = this._getContainerRect();\n        var containerCenter = { x: rect.width / 2, y: rect.height / 2 };\n        this._zoomFactor = 1;\n        this._offset = { x: -(containerCenter.x - x), y: -(containerCenter.y - y) };\n        this._scaleTo(scale, containerCenter);\n        this._stopAnimation();\n        if (!animated) {\n            return this._update();\n        }\n        var diffZoomFactor = this._zoomFactor - startZoomFactor;\n        var diffOffset = {\n            x: this._offset.x - startOffset.x,\n            y: this._offset.y - startOffset.y,\n        };\n        this._zoomFactor = startZoomFactor;\n        this._offset = __assign({}, startOffset);\n        var updateFrame = function (progress) {\n            var x = startOffset.x + diffOffset.x * progress;\n            var y = startOffset.y + diffOffset.y * progress;\n            _this._zoomFactor = startZoomFactor + diffZoomFactor * progress;\n            _this._offset = _this._sanitizeOffset({ x: x, y: y });\n            _this._update();\n        };\n        this._animate(updateFrame, {\n            callback: function () { return _this._sanitize(); },\n            duration: duration,\n        });\n    };\n    PinchZoom.prototype.scaleTo = function (options) {\n        var _this = this;\n        var _a = __assign({ duration: 250, animated: true }, options), x = _a.x, y = _a.y, scale = _a.scale, animated = _a.animated, duration = _a.duration;\n        var startZoomFactor = this._zoomFactor;\n        var startOffset = __assign({}, this._offset);\n        this._zoomFactor = 1;\n        this._offset = { x: 0, y: 0 };\n        this._scaleTo(scale, { x: x, y: y });\n        this._stopAnimation();\n        if (!animated) {\n            return this._update();\n        }\n        var diffZoomFactor = this._zoomFactor - startZoomFactor;\n        var diffOffset = {\n            x: this._offset.x - startOffset.x,\n            y: this._offset.y - startOffset.y,\n        };\n        this._zoomFactor = startZoomFactor;\n        this._offset = __assign({}, startOffset);\n        var updateFrame = function (progress) {\n            var x = startOffset.x + diffOffset.x * progress;\n            var y = startOffset.y + diffOffset.y * progress;\n            _this._zoomFactor = startZoomFactor + diffZoomFactor * progress;\n            _this._offset = { x: x, y: y };\n            _this._update();\n        };\n        this._animate(updateFrame, { callback: function () { return _this._sanitize(); }, duration: duration });\n    };\n    PinchZoom.prototype._scaleTo = function (zoomFactor, center) {\n        this._scale(zoomFactor / this._zoomFactor, center);\n        this._offset = this._sanitizeOffset(this._offset);\n    };\n    PinchZoom.prototype._scale = function (scale, center) {\n        scale = this._scaleZoomFactor(scale);\n        this._addOffset({\n            x: (scale - 1) * (center.x + this._offset.x),\n            y: (scale - 1) * (center.y + this._offset.y),\n        });\n        this.props.onZoomUpdate();\n    };\n    PinchZoom.prototype._scaleZoomFactor = function (scale) {\n        var originalZoomFactor = this._zoomFactor;\n        this._zoomFactor *= scale;\n        this._zoomFactor = clamp(this.props.minZoom, this.props.maxZoom, this._zoomFactor);\n        return this._zoomFactor / originalZoomFactor;\n    };\n    PinchZoom.prototype._canDrag = function () {\n        return this.props.draggableUnZoomed || !isCloseTo(this._zoomFactor, 1);\n    };\n    PinchZoom.prototype._drag = function (center, lastCenter) {\n        if (lastCenter) {\n            var y = -(center.y - lastCenter.y);\n            var x = -(center.x - lastCenter.x);\n            if (!this.props.lockDragAxis) {\n                this._addOffset({\n                    x: x,\n                    y: y,\n                });\n            }\n            else {\n                // lock scroll to position that was changed the most\n                if (abs(x) > abs(y)) {\n                    this._addOffset({\n                        x: x,\n                        y: 0,\n                    });\n                }\n                else {\n                    this._addOffset({\n                        y: y,\n                        x: 0,\n                    });\n                }\n            }\n            this.props.onDragUpdate();\n        }\n    };\n    PinchZoom.prototype._virtualDrag = function (center, lastCenter) {\n        if (lastCenter) {\n            var y = -(center.y - lastCenter.y);\n            var x = -(center.x - lastCenter.x);\n            this._draggingPoint = {\n                x: x + this._draggingPoint.x,\n                y: y + this._draggingPoint.y,\n            };\n        }\n    };\n    PinchZoom.prototype._addOffset = function (offset) {\n        var _a = this._offset, x = _a.x, y = _a.y;\n        this._offset = {\n            x: x + offset.x,\n            y: y + offset.y,\n        };\n    };\n    PinchZoom.prototype._sanitize = function () {\n        if (this._zoomFactor < this.props.zoomOutFactor) {\n            this._resetInertia();\n            this._zoomOutAnimation();\n        }\n        else if (this._isInsaneOffset()) {\n            this._sanitizeOffsetAnimation();\n        }\n    };\n    PinchZoom.prototype._isInsaneOffset = function () {\n        var offset = this._offset;\n        var sanitizedOffset = this._sanitizeOffset(offset);\n        return sanitizedOffset.x !== offset.x || sanitizedOffset.y !== offset.y;\n    };\n    PinchZoom.prototype._sanitizeOffsetAnimation = function () {\n        var _this = this;\n        var targetOffset = this._sanitizeOffset(this._offset);\n        var startOffset = __assign({}, this._offset);\n        var updateProgress = function (progress) {\n            var x = startOffset.x + progress * (targetOffset.x - startOffset.x);\n            var y = startOffset.y + progress * (targetOffset.y - startOffset.y);\n            _this._offset = { x: x, y: y };\n            _this._update();\n        };\n        this._animate(updateProgress);\n    };\n    PinchZoom.prototype._zoomOutAnimation = function () {\n        var _this = this;\n        if (this._zoomFactor === 1) {\n            return;\n        }\n        var startZoomFactor = this._zoomFactor;\n        var zoomFactor = 1;\n        var center = this._getCurrentZoomCenter();\n        var updateProgress = function (progress) {\n            var scaleFactor = startZoomFactor + progress * (zoomFactor - startZoomFactor);\n            _this._scaleTo(scaleFactor, center);\n        };\n        this._animate(updateProgress);\n    };\n    PinchZoom.prototype._getInitialZoomFactor = function () {\n        return this._initialZoomFactor;\n    };\n    PinchZoom.prototype._getCurrentZoomCenter = function () {\n        var _a = this._offset, x = _a.x, y = _a.y;\n        var offsetLeft = x - this._initialOffset.x;\n        var offsetTop = y - this._initialOffset.y;\n        return {\n            x: -1 * x - offsetLeft / (1 / this._zoomFactor - 1),\n            y: -1 * y - offsetTop / (1 / this._zoomFactor - 1),\n        };\n    };\n    PinchZoom.prototype._getOffsetByFirstTouch = function (event) {\n        return this._getOffsetTouches(event)[0];\n    };\n    PinchZoom.prototype._getOffsetTouches = function (event) {\n        var _document = this.props._document;\n        var _html = _document.documentElement;\n        var _body = _document.body;\n        var _a = this._getContainerRect(), top = _a.top, left = _a.left;\n        var scrollTop = _html.scrollTop || _body.scrollTop;\n        var scrollLeft = _html.scrollLeft || _body.scrollLeft;\n        var posTop = top + scrollTop;\n        var posLeft = left + scrollLeft;\n        return getPageCoordinatesByTouches(event.touches).map(function (_a) {\n            var x = _a.x, y = _a.y;\n            return ({\n                x: x - posLeft,\n                y: y - posTop,\n            });\n        });\n    };\n    PinchZoom.prototype._animate = function (frameFn, options) {\n        var _this = this;\n        var startTime = new Date().getTime();\n        var _a = __assign({ timeFn: swing, callback: function () { }, duration: this.props.animationDuration }, options), timeFn = _a.timeFn, callback = _a.callback, duration = _a.duration;\n        var renderFrame = function () {\n            if (!_this._inAnimation) {\n                return;\n            }\n            var frameTime = new Date().getTime() - startTime;\n            var progress = frameTime / duration;\n            if (frameTime >= duration) {\n                frameFn(1);\n                _this._stopAnimation();\n                callback();\n                _this._update();\n            }\n            else {\n                progress = timeFn(progress);\n                frameFn(progress);\n                _this._update({ isAnimation: true });\n                requestAnimationFrame(renderFrame);\n            }\n        };\n        this._inAnimation = true;\n        requestAnimationFrame(renderFrame);\n    };\n    PinchZoom.prototype._stopAnimation = function () {\n        this._inAnimation = false;\n    };\n    PinchZoom.prototype._end = function () {\n        this._hasInteraction = false;\n        this._sanitize();\n        this._update();\n    };\n    PinchZoom.prototype._getContainerRect = function () {\n        var div = this._containerRef.current;\n        return div.getBoundingClientRect();\n    };\n    PinchZoom.prototype._getChildSize = function () {\n        var div = this._containerRef.current;\n        return getElementSize(div === null || div === void 0 ? void 0 : div.firstElementChild);\n    };\n    PinchZoom.prototype._updateInitialZoomFactor = function () {\n        var rect = this._getContainerRect();\n        var size = this._getChildSize();\n        var xZoomFactor = rect.width / size.width;\n        var yZoomFactor = rect.height / size.height;\n        this._initialZoomFactor = min(xZoomFactor, yZoomFactor);\n    };\n    PinchZoom.prototype._bindEvents = function () {\n        var _this = this;\n        var div = this._containerRef.current;\n        if (window.ResizeObserver) {\n            this._containerObserver = new ResizeObserver(this._onResize);\n            this._containerObserver.observe(div);\n        }\n        else {\n            window.addEventListener('resize', this._onResize);\n        }\n        this._handlers.forEach(function (_a) {\n            var eventName = _a[0], fn = _a[1], target = _a[2];\n            (target || div).addEventListener(eventName, fn, true);\n        });\n        Array.from(div.querySelectorAll('img')).forEach(function (img) {\n            return img.addEventListener('load', _this._onResize);\n        });\n    };\n    PinchZoom.prototype._unSubscribe = function () {\n        var _this = this;\n        var div = this._containerRef.current;\n        if (this._containerObserver) {\n            this._containerObserver.disconnect();\n            this._containerObserver = null;\n        }\n        window.removeEventListener('resize', this._onResize);\n        this._handlers.forEach(function (_a) {\n            var eventName = _a[0], fn = _a[1], target = _a[2];\n            (target || div).removeEventListener(eventName, fn, true);\n        });\n        Array.from(div.querySelectorAll('img')).forEach(function (img) {\n            return img.removeEventListener('load', _this._onResize);\n        });\n    };\n    PinchZoom.prototype._update = function (options) {\n        var _this = this;\n        if (this._updatePlaned) {\n            return;\n        }\n        var updateFrame = function () {\n            var scale = _this._getInitialZoomFactor() * _this._zoomFactor;\n            var x = -_this._offset.x / scale;\n            var y = -_this._offset.y / scale;\n            _this.props.onUpdate({ scale: scale, x: x, y: y });\n        };\n        if (options === null || options === void 0 ? void 0 : options.isAnimation) {\n            return updateFrame();\n        }\n        this._updatePlaned = true;\n        requestAnimationFrame(function () {\n            _this._updatePlaned = false;\n            updateFrame();\n        });\n    };\n    PinchZoom.prototype._handlerIfEnable = function (fn) {\n        var _this = this;\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            if (_this.props.enabled) {\n                fn.apply(void 0, args);\n            }\n        };\n    };\n    PinchZoom.prototype._setInteraction = function (newInteraction, event) {\n        var interaction = this._interaction;\n        if (interaction !== newInteraction) {\n            if (interaction && !newInteraction) {\n                if (isZoomInteraction(interaction)) {\n                    this._handleZoomEnd();\n                }\n                else if (isDragInteraction(interaction)) {\n                    this._handleDragEnd();\n                }\n            }\n            if (isZoomInteraction(newInteraction)) {\n                this._handleZoomStart();\n            }\n            else if (isDragInteraction(newInteraction)) {\n                this._handleDragStart(event);\n            }\n        }\n        this._interaction = newInteraction;\n    };\n    PinchZoom.prototype._distanceBetweenNumbers = function (a, b) {\n        return a > b ? a - b : b - a;\n    };\n    PinchZoom.prototype._enoughToDrag = function () {\n        if (this._distanceBetweenNumbers(this._startOffset.x, this._draggingPoint.x) >\n            5 ||\n            this._distanceBetweenNumbers(this._startOffset.y, this._draggingPoint.y) >\n                5)\n            return true;\n        return false;\n    };\n    PinchZoom.prototype._updateInteraction = function (event) {\n        var fingers = this._fingers;\n        if (fingers === 2) {\n            return this._setInteraction('zoom', event);\n        }\n        if (fingers === 1 && this._canDrag()) {\n            return this._setInteraction('drag', event);\n        }\n        this._setInteraction(null, event);\n    };\n    PinchZoom.prototype._detectDoubleTap = function (event) {\n        var time = new Date().getTime();\n        if (this._fingers > 1) {\n            this._lastTouchStart = 0;\n        }\n        if (time - this._lastTouchStart < 300) {\n            cancelEvent(event);\n            this._handleDoubleTap(event);\n            if (isZoomInteraction(this._interaction)) {\n                this._handleZoomEnd();\n            }\n            else if (isDragInteraction(this._interaction)) {\n                this._handleDragEnd();\n            }\n        }\n        else {\n            this._isDoubleTap = false;\n        }\n        if (this._fingers === 1) {\n            this._lastTouchStart = time;\n        }\n    };\n    PinchZoom.prototype.simulate = function (fn) {\n        var _this = this;\n        return function (mouseEvent) {\n            var pageX = mouseEvent.pageX, pageY = mouseEvent.pageY, type = mouseEvent.type;\n            var isEnd = type === 'mouseup';\n            var isStart = type === 'mousedown';\n            if (isStart) {\n                mouseEvent.preventDefault();\n                _this._listenMouseMove = true;\n            }\n            if (_this._listenMouseMove) {\n                // @ts-ignore\n                mouseEvent.touches = isEnd ? [] : [{ pageX: pageX, pageY: pageY }];\n                fn(\n                // @ts-ignore\n                mouseEvent);\n            }\n            if (isEnd) {\n                _this._listenMouseMove = false;\n            }\n        };\n    };\n    PinchZoom.prototype.componentDidMount = function () {\n        this._bindEvents();\n        this._update();\n    };\n    PinchZoom.prototype.componentWillUnmount = function () {\n        this._stopAnimation();\n        this._unSubscribe();\n    };\n    PinchZoom.prototype.render = function () {\n        var _a = this.props, children = _a.children, containerProps = _a.containerProps;\n        var child = Children.only(children);\n        var props = containerProps || {};\n        return (React.createElement(React.Fragment, null,\n            React.createElement(\"style\", null, styles),\n            React.createElement(\"div\", __assign({}, props, { ref: this._containerRef, className: classnames(styleRoot, props.className) }), cloneElement(child, {\n                className: classnames(styleChild, child.props.className),\n            }))));\n    };\n    PinchZoom.defaultProps = {\n        animationDuration: 250,\n        draggableUnZoomed: true,\n        enforceBoundsDuringZoom: false,\n        centerContained: false,\n        enabled: true,\n        inertia: true,\n        inertiaFriction: 0.96,\n        horizontalPadding: 0,\n        isTouch: isTouch,\n        lockDragAxis: false,\n        maxZoom: 5,\n        minZoom: 0.5,\n        onDoubleTap: noup,\n        onDragEnd: noup,\n        onDragStart: noup,\n        onDragUpdate: noup,\n        onZoomEnd: noup,\n        onZoomStart: noup,\n        onZoomUpdate: noup,\n        setOffsetsOnce: false,\n        shouldInterceptWheel: shouldInterceptWheel,\n        shouldCancelHandledTouchEndEvents: false,\n        tapZoomFactor: 1,\n        verticalPadding: 0,\n        wheelScaleFactor: 1500,\n        zoomOutFactor: 1.3,\n        doubleTapZoomOutOnMaxScale: false,\n        doubleTapToggleZoom: false,\n        // @ts-expect-error\n        _document: isSsr ? null : window.document,\n    };\n    return PinchZoom;\n}(Component));\nif (process.env.NODE_ENV !== 'production') {\n    var _a = require('prop-types'), any = _a.any, element = _a.element, object = _a.object, number = _a.number, func = _a.func, bool = _a.bool;\n    // @ts-ignore\n    PinchZoom.propTypes = {\n        children: element,\n        containerProps: object,\n        wheelScaleFactor: number,\n        animationDuration: number,\n        draggableUnZoomed: bool,\n        enforceBoundsDuringZoom: bool,\n        centerContained: bool,\n        enabled: bool,\n        horizontalPadding: number,\n        lockDragAxis: bool,\n        onUpdate: func.isRequired,\n        maxZoom: number,\n        minZoom: number,\n        onDoubleTap: func,\n        onDragEnd: func,\n        onDragStart: func,\n        onDragUpdate: func,\n        onZoomEnd: func,\n        onZoomStart: func,\n        onZoomUpdate: func,\n        setOffsetsOnce: bool,\n        tapZoomFactor: number,\n        verticalPadding: number,\n        zoomOutFactor: number,\n        doubleTapZoomOutOnMaxScale: bool,\n        doubleTapToggleZoom: bool,\n        isTouch: func,\n        _document: any,\n    };\n}\nexport default PinchZoom;\n","export default function formatDuration(time) {\n  if (!time) return;\n  let hours = Math.floor(time / 3600);\n  let minutes = Math.floor((time % 3600) / 60);\n  let seconds = Math.round(time % 60);\n\n  if (hours === 0) {\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  } else {\n    return `${hours}:${minutes.toString().padStart(2, '0')}:${seconds\n      .toString()\n      .padStart(2, '0')}`;\n  }\n}\n","import { getBlurHashAverageColor } from 'fast-blurhash';\nimport { Fragment } from 'preact';\nimport {\n  useCallback,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'preact/hooks';\nimport QuickPinchZoom, { make3dTransformValue } from 'react-quick-pinch-zoom';\n\nimport formatDuration from '../utils/format-duration';\nimport mem from '../utils/mem';\nimport states from '../utils/states';\n\nimport Icon from './icon';\nimport Link from './link';\n\nconst isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent); // https://stackoverflow.com/a/23522755\n\n/*\nMedia type\n===\nunknown = unsupported or unrecognized file type\nimage = Static image\ngifv = Looping, soundless animation\nvideo = Video clip\naudio = Audio track\n*/\n\nconst dataAltLabel = 'ALT';\nconst AltBadge = (props) => {\n  const { alt, lang, index, ...rest } = props;\n  if (!alt || !alt.trim()) return null;\n  return (\n    <button\n      type=\"button\"\n      class=\"alt-badge clickable\"\n      {...rest}\n      onClick={(e) => {\n        e.stopPropagation();\n        e.preventDefault();\n        states.showMediaAlt = {\n          alt,\n          lang,\n        };\n      }}\n      title=\"Media description\"\n    >\n      {dataAltLabel}\n      {!!index && <sup>{index}</sup>}\n    </button>\n  );\n};\n\nconst MEDIA_CAPTION_LIMIT = 140;\nconst MEDIA_CAPTION_LIMIT_LONGER = 280;\nexport const isMediaCaptionLong = mem((caption) =>\n  caption?.length\n    ? caption.length > MEDIA_CAPTION_LIMIT ||\n      /[\\n\\r].*[\\n\\r]/.test(caption.trim())\n    : false,\n);\n\nfunction Media({\n  class: className = '',\n  media,\n  to,\n  lang,\n  showOriginal,\n  autoAnimate,\n  showCaption,\n  allowLongerCaption,\n  altIndex,\n  onClick = () => {},\n}) {\n  let {\n    blurhash,\n    description,\n    meta,\n    previewRemoteUrl,\n    previewUrl,\n    remoteUrl,\n    url,\n    type,\n  } = media;\n  if (/no\\-preview\\./i.test(previewUrl)) {\n    previewUrl = null;\n  }\n  const { original = {}, small, focus } = meta || {};\n\n  const width = showOriginal\n    ? original?.width\n    : small?.width || original?.width;\n  const height = showOriginal\n    ? original?.height\n    : small?.height || original?.height;\n  const mediaURL = showOriginal ? url : previewUrl || url;\n  const remoteMediaURL = showOriginal\n    ? remoteUrl\n    : previewRemoteUrl || remoteUrl;\n  const hasDimensions = width && height;\n  const orientation = hasDimensions\n    ? width > height\n      ? 'landscape'\n      : 'portrait'\n    : null;\n\n  const rgbAverageColor = blurhash ? getBlurHashAverageColor(blurhash) : null;\n\n  const videoRef = useRef();\n\n  let focalPosition;\n  if (focus) {\n    // Convert focal point to CSS background position\n    // Formula from jquery-focuspoint\n    // x = -1, y = 1 => 0% 0%\n    // x = 0, y = 0 => 50% 50%\n    // x = 1, y = -1 => 100% 100%\n    const x = ((focus.x + 1) / 2) * 100;\n    const y = ((1 - focus.y) / 2) * 100;\n    focalPosition = `${x.toFixed(0)}% ${y.toFixed(0)}%`;\n  }\n\n  const mediaRef = useRef();\n  const onUpdate = useCallback(({ x, y, scale }) => {\n    const { current: media } = mediaRef;\n\n    if (media) {\n      const value = make3dTransformValue({ x, y, scale });\n\n      if (scale === 1) {\n        media.style.removeProperty('transform');\n      } else {\n        media.style.setProperty('transform', value);\n      }\n\n      media.closest('.media-zoom').style.touchAction =\n        scale <= 1.01 ? 'pan-x' : '';\n    }\n  }, []);\n\n  const [pinchZoomEnabled, setPinchZoomEnabled] = useState(false);\n  const quickPinchZoomProps = {\n    enabled: pinchZoomEnabled,\n    draggableUnZoomed: false,\n    inertiaFriction: 0.9,\n    tapZoomFactor: 2,\n    doubleTapToggleZoom: true,\n    containerProps: {\n      className: 'media-zoom',\n      style: {\n        overflow: 'visible',\n        //   width: 'inherit',\n        //   height: 'inherit',\n        //   justifyContent: 'inherit',\n        //   alignItems: 'inherit',\n        //   display: 'inherit',\n      },\n    },\n    onUpdate,\n  };\n\n  const Parent = useMemo(\n    () => (to ? (props) => <Link to={to} {...props} /> : 'div'),\n    [to],\n  );\n\n  const remoteMediaURLObj = remoteMediaURL ? getURLObj(remoteMediaURL) : null;\n  const isVideoMaybe =\n    type === 'unknown' &&\n    remoteMediaURLObj &&\n    /\\.(mp4|m4r|m4v|mov|webm)$/i.test(remoteMediaURLObj.pathname);\n  const isAudioMaybe =\n    type === 'unknown' &&\n    remoteMediaURLObj &&\n    /\\.(mp3|ogg|wav|m4a|m4p|m4b)$/i.test(remoteMediaURLObj.pathname);\n  const isImage =\n    type === 'image' ||\n    (type === 'unknown' && previewUrl && !isVideoMaybe && !isAudioMaybe);\n\n  const parentRef = useRef();\n  const [imageSmallerThanParent, setImageSmallerThanParent] = useState(false);\n  useLayoutEffect(() => {\n    if (!isImage) return;\n    if (!showOriginal) return;\n    if (!parentRef.current) return;\n    const { offsetWidth, offsetHeight } = parentRef.current;\n    const smaller = width < offsetWidth && height < offsetHeight;\n    if (smaller) setImageSmallerThanParent(smaller);\n  }, [width, height]);\n\n  const maxAspectHeight =\n    window.innerHeight * (orientation === 'portrait' ? 0.45 : 0.33);\n  const maxHeight = orientation === 'portrait' ? 0 : 160;\n  const averageColorStyle = {\n    '--average-color': rgbAverageColor && `rgb(${rgbAverageColor.join(',')})`,\n  };\n  const mediaStyles =\n    width && height\n      ? {\n          '--width': `${width}px`,\n          '--height': `${height}px`,\n          // Calculate '--aspectWidth' based on aspect ratio calculated from '--width' and '--height', max height has to be 160px\n          '--aspectWidth': `${\n            (width / height) * Math.max(maxHeight, maxAspectHeight)\n          }px`,\n          aspectRatio: `${width} / ${height}`,\n          ...averageColorStyle,\n        }\n      : {\n          ...averageColorStyle,\n        };\n\n  const longDesc = isMediaCaptionLong(description);\n  let showInlineDesc =\n    !!showCaption && !showOriginal && !!description && !longDesc;\n  if (\n    allowLongerCaption &&\n    !showInlineDesc &&\n    description?.length <= MEDIA_CAPTION_LIMIT_LONGER\n  ) {\n    showInlineDesc = true;\n  }\n  const Figure = !showInlineDesc\n    ? Fragment\n    : (props) => {\n        const { children, ...restProps } = props;\n        return (\n          <figure {...restProps}>\n            {children}\n            <figcaption\n              class=\"media-caption\"\n              lang={lang}\n              dir=\"auto\"\n              onClick={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                states.showMediaAlt = {\n                  alt: description,\n                  lang,\n                };\n              }}\n            >\n              {description}\n            </figcaption>\n          </figure>\n        );\n      };\n\n  if (isImage) {\n    // Note: type: unknown might not have width/height\n    quickPinchZoomProps.containerProps.style.display = 'inherit';\n\n    useLayoutEffect(() => {\n      if (!isSafari) return;\n      if (!showOriginal) return;\n      (async () => {\n        try {\n          await fetch(mediaURL, { mode: 'no-cors' });\n          mediaRef.current.src = mediaURL;\n        } catch (e) {\n          // Ignore\n        }\n      })();\n    }, [mediaURL]);\n\n    return (\n      <Figure>\n        <Parent\n          ref={parentRef}\n          class={`media media-image ${className}`}\n          onClick={onClick}\n          data-orientation={orientation}\n          data-has-alt={!showInlineDesc}\n          style={\n            showOriginal\n              ? {\n                  backgroundImage: `url(${previewUrl})`,\n                  backgroundSize: imageSmallerThanParent\n                    ? `${width}px ${height}px`\n                    : undefined,\n                  ...averageColorStyle,\n                }\n              : mediaStyles\n          }\n        >\n          {showOriginal ? (\n            <QuickPinchZoom {...quickPinchZoomProps}>\n              <img\n                ref={mediaRef}\n                src={mediaURL}\n                alt={description}\n                width={width}\n                height={height}\n                data-orientation={orientation}\n                loading=\"eager\"\n                decoding=\"sync\"\n                onLoad={(e) => {\n                  e.target.closest('.media-image').style.backgroundImage = '';\n                  e.target.closest('.media-zoom').style.display = '';\n                  setPinchZoomEnabled(true);\n                }}\n                onError={(e) => {\n                  const { src } = e.target;\n                  if (\n                    src === mediaURL &&\n                    remoteMediaURL &&\n                    mediaURL !== remoteMediaURL\n                  ) {\n                    e.target.src = remoteMediaURL;\n                  }\n                }}\n              />\n            </QuickPinchZoom>\n          ) : (\n            <>\n              <img\n                src={mediaURL}\n                alt={showInlineDesc ? '' : description}\n                width={width}\n                height={height}\n                data-orientation={orientation}\n                loading=\"lazy\"\n                style={{\n                  // backgroundColor:\n                  //   rgbAverageColor && `rgb(${rgbAverageColor.join(',')})`,\n                  // backgroundPosition: focalBackgroundPosition || 'center',\n                  // Duration based on width or height in pixels\n                  objectPosition: focalPosition || 'center',\n                  // 100px per second (rough estimate)\n                  // Clamp between 5s and 120s\n                  '--anim-duration': `${Math.min(\n                    Math.max(Math.max(width, height) / 100, 5),\n                    120,\n                  )}s`,\n                }}\n                onLoad={(e) => {\n                  // e.target.closest('.media-image').style.backgroundImage = '';\n                  e.target.dataset.loaded = true;\n                  const $media = e.target.closest('.media');\n                  if (!hasDimensions && $media) {\n                    const { naturalWidth, naturalHeight } = e.target;\n                    $media.dataset.orientation =\n                      naturalWidth > naturalHeight ? 'landscape' : 'portrait';\n                    $media.style.setProperty('--width', `${naturalWidth}px`);\n                    $media.style.setProperty('--height', `${naturalHeight}px`);\n                    $media.style.aspectRatio = `${naturalWidth}/${naturalHeight}`;\n                  }\n\n                  // Check natural aspect ratio vs display aspect ratio\n                  if ($media) {\n                    const {\n                      clientWidth,\n                      clientHeight,\n                      naturalWidth,\n                      naturalHeight,\n                    } = e.target;\n                    if (\n                      clientWidth &&\n                      clientHeight &&\n                      naturalWidth &&\n                      naturalHeight\n                    ) {\n                      const naturalAspectRatio = (\n                        naturalWidth / naturalHeight\n                      ).toFixed(2);\n                      const displayAspectRatio = (\n                        clientWidth / clientHeight\n                      ).toFixed(2);\n                      const similarThreshold = 0.05;\n                      if (\n                        naturalAspectRatio === displayAspectRatio ||\n                        Math.abs(naturalAspectRatio - displayAspectRatio) <\n                          similarThreshold\n                      ) {\n                        $media.dataset.hasNaturalAspectRatio = true;\n                      }\n                      // $media.dataset.aspectRatios = `${naturalAspectRatio} ${displayAspectRatio}`;\n                    }\n                  }\n                }}\n                onError={(e) => {\n                  const { src } = e.target;\n                  if (src === mediaURL && mediaURL !== remoteMediaURL) {\n                    e.target.src = remoteMediaURL;\n                  }\n                }}\n              />\n              {!showInlineDesc && (\n                <AltBadge alt={description} lang={lang} index={altIndex} />\n              )}\n            </>\n          )}\n        </Parent>\n      </Figure>\n    );\n  } else if (type === 'gifv' || type === 'video' || isVideoMaybe) {\n    const hasDuration = original.duration > 0;\n    const shortDuration = original.duration < 31;\n    const isGIF = type === 'gifv' && shortDuration;\n    // If GIF is too long, treat it as a video\n    const loopable = original.duration < 61;\n    const formattedDuration = formatDuration(original.duration);\n    const hoverAnimate = !showOriginal && !autoAnimate && isGIF;\n    const autoGIFAnimate = !showOriginal && autoAnimate && isGIF;\n    const showProgress = original.duration > 5;\n\n    // This string is only for autoplay + muted to work on Mobile Safari\n    const gifHTML = `\n      <video\n        src=\"${url}\"\n        poster=\"${previewUrl}\"\n        width=\"${width}\"\n        height=\"${height}\"\n        data-orientation=\"${orientation}\"\n        preload=\"auto\"\n        autoplay\n        muted\n        playsinline\n        loop=\"${loopable}\"\n        ondblclick=\"this.paused ? this.play() : this.pause()\"\n        ${\n          showProgress\n            ? \"ontimeupdate=\\\"this.closest('.media-gif') && this.closest('.media-gif').style.setProperty('--progress', `${~~((this.currentTime / this.duration) * 100)}%`)\\\"\"\n            : ''\n        }\n      ></video>\n  `;\n\n    return (\n      <Figure>\n        <Parent\n          class={`media ${className} media-${isGIF ? 'gif' : 'video'} ${\n            autoGIFAnimate ? 'media-contain' : ''\n          } ${hoverAnimate ? 'media-hover-animate' : ''}`}\n          data-orientation={orientation}\n          data-formatted-duration={\n            !showOriginal ? formattedDuration : undefined\n          }\n          data-label={isGIF && !showOriginal && !autoGIFAnimate ? 'GIF' : ''}\n          data-has-alt={!showInlineDesc}\n          // style={{\n          //   backgroundColor:\n          //     rgbAverageColor && `rgb(${rgbAverageColor.join(',')})`,\n          // }}\n          style={!showOriginal && mediaStyles}\n          onClick={(e) => {\n            if (hoverAnimate) {\n              try {\n                videoRef.current.pause();\n              } catch (e) {}\n            }\n            onClick(e);\n          }}\n          onMouseEnter={() => {\n            if (hoverAnimate) {\n              try {\n                videoRef.current.play();\n              } catch (e) {}\n            }\n          }}\n          onMouseLeave={() => {\n            if (hoverAnimate) {\n              try {\n                videoRef.current.pause();\n              } catch (e) {}\n            }\n          }}\n          onFocus={() => {\n            if (hoverAnimate) {\n              try {\n                videoRef.current.play();\n              } catch (e) {}\n            }\n          }}\n          onBlur={() => {\n            if (hoverAnimate) {\n              try {\n                videoRef.current.pause();\n              } catch (e) {}\n            }\n          }}\n        >\n          {showOriginal || autoGIFAnimate ? (\n            isGIF && showOriginal ? (\n              <QuickPinchZoom {...quickPinchZoomProps} enabled>\n                <div\n                  ref={mediaRef}\n                  dangerouslySetInnerHTML={{\n                    __html: gifHTML,\n                  }}\n                />\n              </QuickPinchZoom>\n            ) : isGIF ? (\n              <div\n                class=\"video-container\"\n                dangerouslySetInnerHTML={{\n                  __html: gifHTML,\n                }}\n              />\n            ) : (\n              <div class=\"video-container\">\n                <video\n                  slot=\"media\"\n                  src={url}\n                  poster={previewUrl}\n                  width={width}\n                  height={height}\n                  data-orientation={orientation}\n                  preload=\"auto\"\n                  autoplay\n                  playsinline\n                  loop={loopable}\n                  controls\n                ></video>\n              </div>\n            )\n          ) : isGIF ? (\n            <video\n              ref={videoRef}\n              src={url}\n              poster={previewUrl}\n              width={width}\n              height={height}\n              data-orientation={orientation}\n              preload=\"auto\"\n              // controls\n              playsinline\n              loop\n              muted\n              onTimeUpdate={\n                showProgress\n                  ? (e) => {\n                      const { target } = e;\n                      const container = target?.closest('.media-gif');\n                      if (container) {\n                        const percentage =\n                          (target.currentTime / target.duration) * 100;\n                        container.style.setProperty(\n                          '--progress',\n                          `${percentage}%`,\n                        );\n                      }\n                    }\n                  : undefined\n              }\n            />\n          ) : (\n            <>\n              {previewUrl ? (\n                <img\n                  src={previewUrl}\n                  alt={showInlineDesc ? '' : description}\n                  width={width}\n                  height={height}\n                  data-orientation={orientation}\n                  loading=\"lazy\"\n                  decoding=\"async\"\n                  onLoad={(e) => {\n                    if (!hasDimensions) {\n                      const $media = e.target.closest('.media');\n                      if ($media) {\n                        const { naturalHeight, naturalWidth } = e.target;\n                        $media.dataset.orientation =\n                          naturalWidth > naturalHeight\n                            ? 'landscape'\n                            : 'portrait';\n                        $media.style.setProperty(\n                          '--width',\n                          `${naturalWidth}px`,\n                        );\n                        $media.style.setProperty(\n                          '--height',\n                          `${naturalHeight}px`,\n                        );\n                        $media.style.aspectRatio = `${naturalWidth}/${naturalHeight}`;\n                      }\n                    }\n                  }}\n                />\n              ) : (\n                <video\n                  src={url + '#t=0.1'} // Make Safari show 1st-frame preview\n                  width={width}\n                  height={height}\n                  data-orientation={orientation}\n                  preload=\"metadata\"\n                  muted\n                  disablePictureInPicture\n                  onLoadedMetadata={(e) => {\n                    if (!hasDuration) {\n                      const { duration } = e.target;\n                      if (duration) {\n                        const formattedDuration = formatDuration(duration);\n                        const container = e.target.closest('.media-video');\n                        if (container) {\n                          container.dataset.formattedDuration =\n                            formattedDuration;\n                        }\n                      }\n                    }\n                  }}\n                />\n              )}\n              <div class=\"media-play\">\n                <Icon icon=\"play\" size=\"xl\" />\n              </div>\n            </>\n          )}\n          {!showOriginal && !showInlineDesc && (\n            <AltBadge alt={description} lang={lang} index={altIndex} />\n          )}\n        </Parent>\n      </Figure>\n    );\n  } else if (type === 'audio' || isAudioMaybe) {\n    const formattedDuration = formatDuration(original.duration);\n    return (\n      <Figure>\n        <Parent\n          class={`media media-audio ${className}`}\n          data-formatted-duration={\n            !showOriginal ? formattedDuration : undefined\n          }\n          data-has-alt={!showInlineDesc}\n          onClick={onClick}\n          style={!showOriginal && mediaStyles}\n        >\n          {showOriginal ? (\n            <audio src={remoteUrl || url} preload=\"none\" controls autoplay />\n          ) : previewUrl ? (\n            <img\n              src={previewUrl}\n              alt={showInlineDesc ? '' : description}\n              width={width}\n              height={height}\n              data-orientation={orientation}\n              loading=\"lazy\"\n              onError={(e) => {\n                try {\n                  // Remove self if broken\n                  e.target?.remove?.();\n                } catch (e) {}\n              }}\n            />\n          ) : null}\n          {!showOriginal && (\n            <>\n              <div class=\"media-play\">\n                <Icon icon=\"play\" size=\"xl\" />\n              </div>\n              {!showInlineDesc && (\n                <AltBadge alt={description} lang={lang} index={altIndex} />\n              )}\n            </>\n          )}\n        </Parent>\n      </Figure>\n    );\n  }\n}\n\nfunction getURLObj(url) {\n  try {\n    // Fake base URL if url doesn't have https:// prefix\n    return new URL(url, location.origin);\n  } catch (e) {\n    return null;\n  }\n}\n\nexport default Media;\n","import './status.css';\n\nimport '@justinribeiro/lite-youtube';\nimport {\n  ControlledMenu,\n  Menu,\n  MenuDivider,\n  MenuHeader,\n  MenuItem,\n} from '@szhsin/react-menu';\nimport { decodeBlurHash, getBlurHashAverageColor } from 'fast-blurhash';\nimport { shallowEqual } from 'fast-equals';\nimport prettify from 'html-prettify';\nimport pThrottle from 'p-throttle';\nimport { Fragment } from 'preact';\nimport { memo } from 'preact/compat';\nimport {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'preact/hooks';\nimport punycode from 'punycode/';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { detectAll } from 'tinyld/light';\nimport { useLongPress } from 'use-long-press';\nimport { useSnapshot } from 'valtio';\n\nimport CustomEmoji from '../components/custom-emoji';\nimport EmojiText from '../components/emoji-text';\nimport LazyShazam from '../components/lazy-shazam';\nimport Loader from '../components/loader';\nimport Menu2 from '../components/menu2';\nimport MenuConfirm from '../components/menu-confirm';\nimport Modal from '../components/modal';\nimport NameText from '../components/name-text';\nimport Poll from '../components/poll';\nimport { api } from '../utils/api';\nimport emojifyText from '../utils/emojify-text';\nimport enhanceContent from '../utils/enhance-content';\nimport FilterContext from '../utils/filter-context';\nimport { isFiltered } from '../utils/filters';\nimport getTranslateTargetLanguage from '../utils/get-translate-target-language';\nimport getHTMLText from '../utils/getHTMLText';\nimport handleContentLinks from '../utils/handle-content-links';\nimport htmlContentLength from '../utils/html-content-length';\nimport isMastodonLinkMaybe from '../utils/isMastodonLinkMaybe';\nimport localeMatch from '../utils/locale-match';\nimport mem from '../utils/mem';\nimport niceDateTime from '../utils/nice-date-time';\nimport openCompose from '../utils/open-compose';\nimport pmem from '../utils/pmem';\nimport safeBoundingBoxPadding from '../utils/safe-bounding-box-padding';\nimport shortenNumber from '../utils/shorten-number';\nimport showCompose from '../utils/show-compose';\nimport showToast from '../utils/show-toast';\nimport { speak, supportsTTS } from '../utils/speech';\nimport states, { getStatus, saveStatus, statusKey } from '../utils/states';\nimport statusPeek from '../utils/status-peek';\nimport store from '../utils/store';\nimport { getCurrentAccountID } from '../utils/store-utils';\nimport supports from '../utils/supports';\nimport unfurlMastodonLink from '../utils/unfurl-link';\nimport useTruncated from '../utils/useTruncated';\nimport visibilityIconsMap from '../utils/visibility-icons-map';\n\nimport Avatar from './avatar';\nimport Icon from './icon';\nimport Link from './link';\nimport Media from './media';\nimport { isMediaCaptionLong } from './media';\nimport MenuLink from './menu-link';\nimport RelativeTime from './relative-time';\nimport TranslationBlock from './translation-block';\n\nconst SHOW_COMMENT_COUNT_LIMIT = 280;\nconst INLINE_TRANSLATE_LIMIT = 140;\n\nconst throttle = pThrottle({\n  limit: 1,\n  interval: 1000,\n});\nfunction fetchAccount(id, masto) {\n  return masto.v1.accounts.$select(id).fetch();\n}\nconst memFetchAccount = pmem(throttle(fetchAccount));\n\nconst visibilityText = {\n  public: 'Public',\n  unlisted: 'Unlisted',\n  private: 'Followers only',\n  direct: 'Private mention',\n};\n\nconst isIOS =\n  window.ontouchstart !== undefined &&\n  /iPad|iPhone|iPod/.test(navigator.userAgent);\n\nconst rtf = new Intl.RelativeTimeFormat();\n\nconst REACTIONS_LIMIT = 80;\n\nfunction getPollText(poll) {\n  if (!poll?.options?.length) return '';\n  return `:\\n${poll.options\n    .map(\n      (option) =>\n        `- ${option.title}${\n          option.votesCount >= 0 ? ` (${option.votesCount})` : ''\n        }`,\n    )\n    .join('\\n')}`;\n}\nfunction getPostText(status) {\n  const { spoilerText, content, poll } = status;\n  return (\n    (spoilerText ? `${spoilerText}\\n\\n` : '') +\n    getHTMLText(content) +\n    getPollText(poll)\n  );\n}\n\nconst PostContent = memo(\n  ({ post, instance, previewMode }) => {\n    const { content, emojis, language, mentions, url } = post;\n    return (\n      <div\n        lang={language}\n        dir=\"auto\"\n        class=\"inner-content\"\n        onClick={handleContentLinks({\n          mentions,\n          instance,\n          previewMode,\n          statusURL: url,\n        })}\n        dangerouslySetInnerHTML={{\n          __html: enhanceContent(content, {\n            emojis,\n            postEnhanceDOM: (dom) => {\n              // Remove target=\"_blank\" from links\n              dom.querySelectorAll('a.u-url[target=\"_blank\"]').forEach((a) => {\n                if (!/http/i.test(a.innerText.trim())) {\n                  a.removeAttribute('target');\n                }\n              });\n            },\n          }),\n        }}\n      />\n    );\n  },\n  (oldProps, newProps) => {\n    const { post: oldPost } = oldProps;\n    const { post: newPost } = newProps;\n    return oldPost.content === newPost.content;\n  },\n);\n\nconst SIZE_CLASS = {\n  s: 'small',\n  m: 'medium',\n  l: 'large',\n};\n\nconst detectLang = mem((text) => {\n  text = text?.trim();\n\n  // Ref: https://github.com/komodojp/tinyld/blob/develop/docs/benchmark.md\n  // 500 should be enough for now, also the default max chars for Mastodon\n  if (text?.length > 500) {\n    return null;\n  }\n  const langs = detectAll(text);\n  const lang = langs[0];\n  if (lang?.lang && lang?.accuracy > 0.5) {\n    // If > 50% accurate, use it\n    // It can be accurate if < 50% but better be safe\n    // Though > 50% also can be inaccurate \n    return lang.lang;\n  }\n  return null;\n});\n\nfunction Status({\n  statusID,\n  status,\n  instance: propInstance,\n  size = 'm',\n  contentTextWeight,\n  readOnly,\n  enableCommentHint,\n  withinContext,\n  skeleton,\n  enableTranslate,\n  forceTranslate: _forceTranslate,\n  previewMode,\n  // allowFilters,\n  onMediaClick,\n  quoted,\n  onStatusLinkClick = () => {},\n  showFollowedTags,\n  allowContextMenu,\n  showActionsBar,\n  showReplyParent,\n  mediaFirst,\n}) {\n  if (skeleton) {\n    return (\n      <div\n        class={`status skeleton ${\n          mediaFirst ? 'status-media-first small' : ''\n        }`}\n      >\n        {!mediaFirst && <Avatar size=\"xxl\" />}\n        <div class=\"container\">\n          <div class=\"meta\">\n            {(size === 's' || mediaFirst) && <Avatar size=\"m\" />}  \n          </div>\n          <div class=\"content-container\">\n            {mediaFirst && <div class=\"media-first-container\" />}\n            <div class={`content ${mediaFirst ? 'media-first-content' : ''}`}>\n              <p> </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  const { masto, instance, authenticated } = api({ instance: propInstance });\n  const { instance: currentInstance } = api();\n  const sameInstance = instance === currentInstance;\n\n  let sKey = statusKey(statusID || status?.id, instance);\n  const snapStates = useSnapshot(states);\n  if (!status) {\n    status = snapStates.statuses[sKey] || snapStates.statuses[statusID];\n    sKey = statusKey(status?.id, instance);\n  }\n  if (!status) {\n    return null;\n  }\n\n  const {\n    account: {\n      acct,\n      avatar,\n      avatarStatic,\n      id: accountId,\n      url: accountURL,\n      displayName,\n      username,\n      emojis: accountEmojis,\n      bot,\n      group,\n    },\n    id,\n    repliesCount,\n    reblogged,\n    reblogsCount,\n    favourited,\n    favouritesCount,\n    bookmarked,\n    poll,\n    muted,\n    sensitive,\n    spoilerText,\n    visibility, // public, unlisted, private, direct\n    language: _language,\n    editedAt,\n    filtered,\n    card,\n    createdAt,\n    inReplyToId,\n    inReplyToAccountId,\n    content,\n    mentions,\n    mediaAttachments,\n    reblog,\n    uri,\n    url,\n    emojis,\n    tags,\n    // Non-API props\n    _deleted,\n    _pinned,\n    // _filtered,\n    // Non-Mastodon\n    emojiReactions,\n  } = status;\n\n  const [languageAutoDetected, setLanguageAutoDetected] = useState(null);\n  useEffect(() => {\n    if (!content) return;\n    if (_language) return;\n    let timer;\n    timer = setTimeout(() => {\n      let detected = detectLang(\n        getHTMLText(content, {\n          preProcess: (dom) => {\n            // Remove anything that can skew the language detection\n\n            // Remove .mention, .hashtag, pre, code, a:has(.invisible)\n            dom\n              .querySelectorAll(\n                '.mention, .hashtag, pre, code, a:has(.invisible)',\n              )\n              .forEach((a) => {\n                a.remove();\n              });\n\n            // Remove links that contains text that starts with https?://\n            dom.querySelectorAll('a').forEach((a) => {\n              const text = a.innerText.trim();\n              if (text.startsWith('https://') || text.startsWith('http://')) {\n                a.remove();\n              }\n            });\n          },\n        }),\n      );\n      setLanguageAutoDetected(detected);\n    }, 1000);\n    return () => clearTimeout(timer);\n  }, [content, _language]);\n  const language = _language || languageAutoDetected;\n\n  // if (!mediaAttachments?.length) mediaFirst = false;\n  const hasMediaAttachments = !!mediaAttachments?.length;\n  if (mediaFirst && hasMediaAttachments) size = 's';\n\n  const currentAccount = useMemo(() => {\n    return getCurrentAccountID();\n  }, []);\n  const isSelf = useMemo(() => {\n    return currentAccount && currentAccount === accountId;\n  }, [accountId, currentAccount]);\n\n  const filterContext = useContext(FilterContext);\n  const filterInfo =\n    !isSelf && !readOnly && !previewMode && isFiltered(filtered, filterContext);\n\n  if (filterInfo?.action === 'hide') {\n    return null;\n  }\n\n  console.debug('RENDER Status', id, status?.account.displayName, quoted);\n\n  const debugHover = (e) => {\n    if (e.shiftKey) {\n      console.log({\n        ...status,\n      });\n    }\n  };\n\n  if (/*allowFilters && */ size !== 'l' && filterInfo) {\n    return (\n      <FilteredStatus\n        status={status}\n        filterInfo={filterInfo}\n        instance={instance}\n        containerProps={{\n          onMouseEnter: debugHover,\n        }}\n        showFollowedTags\n        quoted={quoted}\n      />\n    );\n  }\n\n  const createdAtDate = new Date(createdAt);\n  const editedAtDate = new Date(editedAt);\n\n  let inReplyToAccountRef = mentions?.find(\n    (mention) => mention.id === inReplyToAccountId,\n  );\n  if (!inReplyToAccountRef && inReplyToAccountId === id) {\n    inReplyToAccountRef = { url: accountURL, username, displayName };\n  }\n  const [inReplyToAccount, setInReplyToAccount] = useState(inReplyToAccountRef);\n  if (!withinContext && !inReplyToAccount && inReplyToAccountId) {\n    const account = states.accounts[inReplyToAccountId];\n    if (account) {\n      setInReplyToAccount(account);\n    } else {\n      memFetchAccount(inReplyToAccountId, masto)\n        .then((account) => {\n          setInReplyToAccount(account);\n          states.accounts[account.id] = account;\n        })\n        .catch((e) => {});\n    }\n  }\n  const mentionSelf =\n    inReplyToAccountId === currentAccount ||\n    mentions?.find((mention) => mention.id === currentAccount);\n\n  const readingExpandSpoilers = useMemo(() => {\n    const prefs = store.account.get('preferences') || {};\n    return !!prefs['reading:expand:spoilers'];\n  }, []);\n  const readingExpandMedia = useMemo(() => {\n    // default | show_all | hide_all\n    // Ignore hide_all because it means hide *ALL* media including non-sensitive ones\n    const prefs = store.account.get('preferences') || {};\n    return prefs['reading:expand:media'] || 'default';\n  }, []);\n  // FOR TESTING:\n  // const readingExpandSpoilers = true;\n  // const readingExpandMedia = 'show_all';\n  const showSpoiler =\n    previewMode || readingExpandSpoilers || !!snapStates.spoilers[id];\n  const showSpoilerMedia =\n    previewMode ||\n    readingExpandMedia === 'show_all' ||\n    !!snapStates.spoilersMedia[id];\n\n  if (reblog) {\n    // If has statusID, means useItemID (cached in states)\n\n    if (group) {\n      return (\n        <div\n          data-state-post-id={sKey}\n          class=\"status-group\"\n          onMouseEnter={debugHover}\n        >\n          <div class=\"status-pre-meta\">\n            <Icon icon=\"group\" size=\"l\" alt=\"Group\" />{' '}\n            <NameText account={status.account} instance={instance} showAvatar />\n          </div>\n          <Status\n            status={statusID ? null : reblog}\n            statusID={statusID ? reblog.id : null}\n            instance={instance}\n            size={size}\n            contentTextWeight={contentTextWeight}\n            readOnly={readOnly}\n            mediaFirst={mediaFirst}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div\n        data-state-post-id={sKey}\n        class=\"status-reblog\"\n        onMouseEnter={debugHover}\n      >\n        <div class=\"status-pre-meta\">\n          <Icon icon=\"rocket\" size=\"l\" />{' '}\n          <NameText account={status.account} instance={instance} showAvatar />{' '}\n          <span>boosted</span>\n        </div>\n        <Status\n          status={statusID ? null : reblog}\n          statusID={statusID ? reblog.id : null}\n          instance={instance}\n          size={size}\n          contentTextWeight={contentTextWeight}\n          readOnly={readOnly}\n          enableCommentHint\n          mediaFirst={mediaFirst}\n        />\n      </div>\n    );\n  }\n\n  // Check followedTags\n  const FollowedTagsParent = useCallback(\n    ({ children }) => (\n      <div\n        data-state-post-id={sKey}\n        class=\"status-followed-tags\"\n        onMouseEnter={debugHover}\n      >\n        <div class=\"status-pre-meta\">\n          <Icon icon=\"hashtag\" size=\"l\" />{' '}\n          {snapStates.statusFollowedTags[sKey].slice(0, 3).map((tag) => (\n            <Link\n              key={tag}\n              to={instance ? `/${instance}/t/${tag}` : `/t/${tag}`}\n              class=\"status-followed-tag-item\"\n            >\n              {tag}\n            </Link>\n          ))}\n        </div>\n        {children}\n      </div>\n    ),\n    [sKey, instance, snapStates.statusFollowedTags[sKey]],\n  );\n  const StatusParent =\n    showFollowedTags && !!snapStates.statusFollowedTags[sKey]?.length\n      ? FollowedTagsParent\n      : Fragment;\n\n  const isSizeLarge = size === 'l';\n\n  const [forceTranslate, setForceTranslate] = useState(_forceTranslate);\n  const targetLanguage = getTranslateTargetLanguage(true);\n  const contentTranslationHideLanguages =\n    snapStates.settings.contentTranslationHideLanguages || [];\n  const { contentTranslation, contentTranslationAutoInline } =\n    snapStates.settings;\n  if (!contentTranslation) enableTranslate = false;\n  const inlineTranslate = useMemo(() => {\n    if (\n      !contentTranslation ||\n      !contentTranslationAutoInline ||\n      readOnly ||\n      (withinContext && !isSizeLarge) ||\n      previewMode ||\n      spoilerText ||\n      sensitive ||\n      poll ||\n      card ||\n      mediaAttachments?.length\n    ) {\n      return false;\n    }\n    const contentLength = htmlContentLength(content);\n    return contentLength > 0 && contentLength <= INLINE_TRANSLATE_LIMIT;\n  }, [\n    contentTranslation,\n    contentTranslationAutoInline,\n    readOnly,\n    withinContext,\n    isSizeLarge,\n    previewMode,\n    spoilerText,\n    sensitive,\n    poll,\n    card,\n    mediaAttachments,\n    content,\n  ]);\n\n  const [showEdited, setShowEdited] = useState(false);\n  const [showEmbed, setShowEmbed] = useState(false);\n\n  const spoilerContentRef = useTruncated();\n  const contentRef = useTruncated();\n  const mediaContainerRef = useTruncated();\n  const readMoreText = 'Read more ';\n\n  const statusRef = useRef(null);\n\n  const unauthInteractionErrorMessage = `Sorry, your current logged-in instance can't interact with this post from another instance.`;\n\n  const textWeight = useCallback(\n    () =>\n      Math.max(\n        Math.round((spoilerText.length + htmlContentLength(content)) / 140) ||\n          1,\n        1,\n      ),\n    [spoilerText, content],\n  );\n\n  const createdDateText = niceDateTime(createdAtDate);\n  const editedDateText = editedAt && niceDateTime(editedAtDate);\n\n  // Can boost if:\n  // - authenticated AND\n  // - visibility != direct OR\n  // - visibility = private AND isSelf\n  let canBoost =\n    authenticated && visibility !== 'direct' && visibility !== 'private';\n  if (visibility === 'private' && isSelf) {\n    canBoost = true;\n  }\n\n  const replyStatus = (e) => {\n    if (!sameInstance || !authenticated) {\n      return alert(unauthInteractionErrorMessage);\n    }\n    // syntheticEvent comes from MenuItem\n    if (e?.shiftKey || e?.syntheticEvent?.shiftKey) {\n      const newWin = openCompose({\n        replyToStatus: status,\n      });\n      if (newWin) return;\n    }\n    showCompose({\n      replyToStatus: status,\n    });\n  };\n\n  // Check if media has no descriptions\n  const mediaNoDesc = useMemo(() => {\n    return mediaAttachments.some(\n      (attachment) => !attachment.description?.trim?.(),\n    );\n  }, [mediaAttachments]);\n\n  const statusMonthsAgo = useMemo(() => {\n    return Math.floor(\n      (new Date() - createdAtDate) / (1000 * 60 * 60 * 24 * 30),\n    );\n  }, [createdAtDate]);\n\n  const boostStatus = async () => {\n    if (!sameInstance || !authenticated) {\n      alert(unauthInteractionErrorMessage);\n      return false;\n    }\n    try {\n      if (!reblogged) {\n        let confirmText = 'Boost this post?';\n        if (mediaNoDesc) {\n          confirmText += '\\n\\n Some media have no descriptions.';\n        }\n        const yes = confirm(confirmText);\n        if (!yes) {\n          return false;\n        }\n      }\n      // Optimistic\n      states.statuses[sKey] = {\n        ...status,\n        reblogged: !reblogged,\n        reblogsCount: reblogsCount + (reblogged ? -1 : 1),\n      };\n      if (reblogged) {\n        const newStatus = await masto.v1.statuses.$select(id).unreblog();\n        saveStatus(newStatus, instance);\n        return true;\n      } else {\n        const newStatus = await masto.v1.statuses.$select(id).reblog();\n        saveStatus(newStatus, instance);\n        return true;\n      }\n    } catch (e) {\n      console.error(e);\n      // Revert optimistism\n      states.statuses[sKey] = status;\n      return false;\n    }\n  };\n  const confirmBoostStatus = async () => {\n    if (!sameInstance || !authenticated) {\n      alert(unauthInteractionErrorMessage);\n      return false;\n    }\n    try {\n      // Optimistic\n      states.statuses[sKey] = {\n        ...status,\n        reblogged: !reblogged,\n        reblogsCount: reblogsCount + (reblogged ? -1 : 1),\n      };\n      if (reblogged) {\n        const newStatus = await masto.v1.statuses.$select(id).unreblog();\n        saveStatus(newStatus, instance);\n      } else {\n        const newStatus = await masto.v1.statuses.$select(id).reblog();\n        saveStatus(newStatus, instance);\n      }\n      return true;\n    } catch (e) {\n      console.error(e);\n      // Revert optimistism\n      states.statuses[sKey] = status;\n      return false;\n    }\n  };\n\n  const favouriteStatus = async () => {\n    if (!sameInstance || !authenticated) {\n      alert(unauthInteractionErrorMessage);\n      return false;\n    }\n    try {\n      // Optimistic\n      states.statuses[sKey] = {\n        ...status,\n        favourited: !favourited,\n        favouritesCount: favouritesCount + (favourited ? -1 : 1),\n      };\n      if (favourited) {\n        const newStatus = await masto.v1.statuses.$select(id).unfavourite();\n        saveStatus(newStatus, instance);\n      } else {\n        const newStatus = await masto.v1.statuses.$select(id).favourite();\n        saveStatus(newStatus, instance);\n      }\n      return true;\n    } catch (e) {\n      console.error(e);\n      // Revert optimistism\n      states.statuses[sKey] = status;\n      return false;\n    }\n  };\n  const favouriteStatusNotify = async () => {\n    try {\n      const done = await favouriteStatus();\n      if (!isSizeLarge && done) {\n        showToast(\n          favourited\n            ? `Unliked @${username || acct}'s post`\n            : `Liked @${username || acct}'s post`,\n        );\n      }\n    } catch (e) {}\n  };\n\n  const bookmarkStatus = async () => {\n    if (!supports('@mastodon/post-bookmark')) return;\n    if (!sameInstance || !authenticated) {\n      alert(unauthInteractionErrorMessage);\n      return false;\n    }\n    try {\n      // Optimistic\n      states.statuses[sKey] = {\n        ...status,\n        bookmarked: !bookmarked,\n      };\n      if (bookmarked) {\n        const newStatus = await masto.v1.statuses.$select(id).unbookmark();\n        saveStatus(newStatus, instance);\n      } else {\n        const newStatus = await masto.v1.statuses.$select(id).bookmark();\n        saveStatus(newStatus, instance);\n      }\n      return true;\n    } catch (e) {\n      console.error(e);\n      // Revert optimistism\n      states.statuses[sKey] = status;\n      return false;\n    }\n  };\n  const bookmarkStatusNotify = async () => {\n    try {\n      const done = await bookmarkStatus();\n      if (!isSizeLarge && done) {\n        showToast(\n          bookmarked\n            ? `Unbookmarked @${username || acct}'s post`\n            : `Bookmarked @${username || acct}'s post`,\n        );\n      }\n    } catch (e) {}\n  };\n\n  const differentLanguage =\n    !!language &&\n    language !== targetLanguage &&\n    !localeMatch([language], [targetLanguage]) &&\n    !contentTranslationHideLanguages.find(\n      (l) => language === l || localeMatch([language], [l]),\n    );\n\n  const reblogIterator = useRef();\n  const favouriteIterator = useRef();\n  async function fetchBoostedLikedByAccounts(firstLoad) {\n    if (firstLoad) {\n      reblogIterator.current = masto.v1.statuses\n        .$select(statusID)\n        .rebloggedBy.list({\n          limit: REACTIONS_LIMIT,\n        });\n      favouriteIterator.current = masto.v1.statuses\n        .$select(statusID)\n        .favouritedBy.list({\n          limit: REACTIONS_LIMIT,\n        });\n    }\n    const [{ value: reblogResults }, { value: favouriteResults }] =\n      await Promise.allSettled([\n        reblogIterator.current.next(),\n        favouriteIterator.current.next(),\n      ]);\n    if (reblogResults.value?.length || favouriteResults.value?.length) {\n      const accounts = [];\n      if (reblogResults.value?.length) {\n        accounts.push(\n          ...reblogResults.value.map((a) => {\n            a._types = ['reblog'];\n            return a;\n          }),\n        );\n      }\n      if (favouriteResults.value?.length) {\n        accounts.push(\n          ...favouriteResults.value.map((a) => {\n            a._types = ['favourite'];\n            return a;\n          }),\n        );\n      }\n      return {\n        value: accounts,\n        done: reblogResults.done && favouriteResults.done,\n      };\n    }\n    return {\n      value: [],\n      done: true,\n    };\n  }\n\n  const actionsRef = useRef();\n  const isPublic = ['public', 'unlisted'].includes(visibility);\n  const isPinnable = ['public', 'unlisted', 'private'].includes(visibility);\n  const StatusMenuItems = (\n    <>\n      {!isSizeLarge && sameInstance && (\n        <>\n          <div class=\"menu-control-group-horizontal status-menu\">\n            <MenuItem onClick={replyStatus}>\n              <Icon icon=\"comment\" />\n              <span>\n                {repliesCount > 0 ? shortenNumber(repliesCount) : 'Reply'}\n              </span>\n            </MenuItem>\n            <MenuConfirm\n              subMenu\n              confirmLabel={\n                <>\n                  <Icon icon=\"rocket\" />\n                  <span>{reblogged ? 'Unboost' : 'Boost'}</span>\n                </>\n              }\n              className={`menu-reblog ${reblogged ? 'checked' : ''}`}\n              menuExtras={\n                <MenuItem\n                  onClick={() => {\n                    showCompose({\n                      draftStatus: {\n                        status: `\\n${url}`,\n                      },\n                    });\n                  }}\n                >\n                  <Icon icon=\"quote\" />\n                  <span>Quote</span>\n                </MenuItem>\n              }\n              menuFooter={\n                mediaNoDesc && !reblogged ? (\n                  <div class=\"footer\">\n                    <Icon icon=\"alert\" />\n                    Some media have no descriptions.\n                  </div>\n                ) : (\n                  statusMonthsAgo >= 3 && (\n                    <div class=\"footer\">\n                      <Icon icon=\"info\" />\n                      <span>\n                        Old post (\n                        <strong>{rtf.format(-statusMonthsAgo, 'month')}</strong>\n                        )\n                      </span>\n                    </div>\n                  )\n                )\n              }\n              disabled={!canBoost}\n              onClick={async () => {\n                try {\n                  const done = await confirmBoostStatus();\n                  if (!isSizeLarge && done) {\n                    showToast(\n                      reblogged\n                        ? `Unboosted @${username || acct}'s post`\n                        : `Boosted @${username || acct}'s post`,\n                    );\n                  }\n                } catch (e) {}\n              }}\n            >\n              <Icon icon=\"rocket\" />\n              <span>\n                {reblogsCount > 0\n                  ? shortenNumber(reblogsCount)\n                  : reblogged\n                  ? 'Unboost'\n                  : 'Boost'}\n              </span>\n            </MenuConfirm>\n            <MenuItem\n              onClick={favouriteStatusNotify}\n              className={`menu-favourite ${favourited ? 'checked' : ''}`}\n            >\n              <Icon icon=\"heart\" />\n              <span>\n                {favouritesCount > 0\n                  ? shortenNumber(favouritesCount)\n                  : favourited\n                  ? 'Unlike'\n                  : 'Like'}\n              </span>\n            </MenuItem>\n            {supports('@mastodon/post-bookmark') && (\n              <MenuItem\n                onClick={bookmarkStatusNotify}\n                className={`menu-bookmark ${bookmarked ? 'checked' : ''}`}\n              >\n                <Icon icon=\"bookmark\" />\n                <span>{bookmarked ? 'Unbookmark' : 'Bookmark'}</span>\n              </MenuItem>\n            )}\n          </div>\n        </>\n      )}\n      {!isSizeLarge && sameInstance && (isSizeLarge || showActionsBar) && (\n        <MenuDivider />\n      )}\n      {(isSizeLarge || showActionsBar) && (\n        <>\n          <MenuItem\n            onClick={() => {\n              states.showGenericAccounts = {\n                heading: 'Boosted/Liked by',\n                fetchAccounts: fetchBoostedLikedByAccounts,\n                instance,\n                showReactions: true,\n                postID: sKey,\n              };\n            }}\n          >\n            <Icon icon=\"react\" />\n            <span>\n              Boosted/Liked by<span class=\"more-insignificant\"></span>\n            </span>\n          </MenuItem>\n        </>\n      )}\n      {!mediaFirst && (\n        <>\n          {(enableTranslate || !language || differentLanguage) && (\n            <MenuDivider />\n          )}\n          {enableTranslate ? (\n            <div class={supportsTTS ? 'menu-horizontal' : ''}>\n              <MenuItem\n                disabled={forceTranslate}\n                onClick={() => {\n                  setForceTranslate(true);\n                }}\n              >\n                <Icon icon=\"translate\" />\n                <span>Translate</span>\n              </MenuItem>\n              {supportsTTS && (\n                <MenuItem\n                  onClick={() => {\n                    const postText = getPostText(status);\n                    if (postText) {\n                      speak(postText, language);\n                    }\n                  }}\n                >\n                  <Icon icon=\"speak\" />\n                  <span>Speak</span>\n                </MenuItem>\n              )}\n            </div>\n          ) : (\n            (!language || differentLanguage) && (\n              <div class={supportsTTS ? 'menu-horizontal' : ''}>\n                <MenuLink\n                  to={`${instance ? `/${instance}` : ''}/s/${id}?translate=1`}\n                >\n                  <Icon icon=\"translate\" />\n                  <span>Translate</span>\n                </MenuLink>\n                {supportsTTS && (\n                  <MenuItem\n                    onClick={() => {\n                      const postText = getPostText(status);\n                      if (postText) {\n                        speak(postText, language);\n                      }\n                    }}\n                  >\n                    <Icon icon=\"speak\" />\n                    <span>Speak</span>\n                  </MenuItem>\n                )}\n              </div>\n            )\n          )}\n        </>\n      )}\n      {((!isSizeLarge && sameInstance) ||\n        enableTranslate ||\n        !language ||\n        differentLanguage) && <MenuDivider />}\n      {!isSizeLarge && (\n        <>\n          <MenuLink\n            to={instance ? `/${instance}/s/${id}` : `/s/${id}`}\n            onClick={(e) => {\n              onStatusLinkClick(e, status);\n            }}\n          >\n            <Icon icon=\"arrows-right\" />\n            <small>\n              View post by @{username || acct}\n              <br />\n              <span class=\"more-insignificant\">\n                {visibilityText[visibility]}  {createdDateText}\n              </span>\n            </small>\n          </MenuLink>\n        </>\n      )}\n      {!!editedAt && (\n        <>\n          <MenuItem\n            onClick={() => {\n              setShowEdited(id);\n            }}\n          >\n            <Icon icon=\"history\" />\n            <small>\n              Show Edit History\n              <br />\n              <span class=\"more-insignificant\">Edited: {editedDateText}</span>\n            </small>\n          </MenuItem>\n        </>\n      )}\n      <MenuItem href={url} target=\"_blank\">\n        <Icon icon=\"external\" />\n        <small class=\"menu-double-lines\">{nicePostURL(url)}</small>\n      </MenuItem>\n      <div class=\"menu-horizontal\">\n        <MenuItem\n          onClick={() => {\n            // Copy url to clipboard\n            try {\n              navigator.clipboard.writeText(url);\n              showToast('Link copied');\n            } catch (e) {\n              console.error(e);\n              showToast('Unable to copy link');\n            }\n          }}\n        >\n          <Icon icon=\"link\" />\n          <span>Copy</span>\n        </MenuItem>\n        {isPublic &&\n          navigator?.share &&\n          navigator?.canShare?.({\n            url,\n          }) && (\n            <MenuItem\n              onClick={() => {\n                try {\n                  navigator.share({\n                    url,\n                  });\n                } catch (e) {\n                  console.error(e);\n                  alert(\"Sharing doesn't seem to work.\");\n                }\n              }}\n            >\n              <Icon icon=\"share\" />\n              <span>Share</span>\n            </MenuItem>\n          )}\n      </div>\n      {isPublic && isSizeLarge && (\n        <MenuItem\n          onClick={() => {\n            setShowEmbed(true);\n          }}\n        >\n          <Icon icon=\"code\" />\n          <span>Embed post</span>\n        </MenuItem>\n      )}\n      {(isSelf || mentionSelf) && <MenuDivider />}\n      {(isSelf || mentionSelf) && (\n        <MenuItem\n          onClick={async () => {\n            try {\n              const newStatus = await masto.v1.statuses\n                .$select(id)\n                [muted ? 'unmute' : 'mute']();\n              saveStatus(newStatus, instance);\n              showToast(muted ? 'Conversation unmuted' : 'Conversation muted');\n            } catch (e) {\n              console.error(e);\n              showToast(\n                muted\n                  ? 'Unable to unmute conversation'\n                  : 'Unable to mute conversation',\n              );\n            }\n          }}\n        >\n          {muted ? (\n            <>\n              <Icon icon=\"unmute\" />\n              <span>Unmute conversation</span>\n            </>\n          ) : (\n            <>\n              <Icon icon=\"mute\" />\n              <span>Mute conversation</span>\n            </>\n          )}\n        </MenuItem>\n      )}\n      {isSelf && isPinnable && (\n        <MenuItem\n          onClick={async () => {\n            try {\n              const newStatus = await masto.v1.statuses\n                .$select(id)\n                [_pinned ? 'unpin' : 'pin']();\n              // saveStatus(newStatus, instance);\n              showToast(\n                _pinned\n                  ? 'Post unpinned from profile'\n                  : 'Post pinned to profile',\n              );\n            } catch (e) {\n              console.error(e);\n              showToast(\n                _pinned ? 'Unable to unpin post' : 'Unable to pin post',\n              );\n            }\n          }}\n        >\n          {_pinned ? (\n            <>\n              <Icon icon=\"unpin\" />\n              <span>Unpin from profile</span>\n            </>\n          ) : (\n            <>\n              <Icon icon=\"pin\" />\n              <span>Pin to profile</span>\n            </>\n          )}\n        </MenuItem>\n      )}\n      {isSelf && (\n        <div class=\"menu-horizontal\">\n          {supports('@mastodon/post-edit') && (\n            <MenuItem\n              onClick={() => {\n                showCompose({\n                  editStatus: status,\n                });\n              }}\n            >\n              <Icon icon=\"pencil\" />\n              <span>Edit</span>\n            </MenuItem>\n          )}\n          {isSizeLarge && (\n            <MenuConfirm\n              subMenu\n              confirmLabel={\n                <>\n                  <Icon icon=\"trash\" />\n                  <span>Delete this post?</span>\n                </>\n              }\n              menuItemClassName=\"danger\"\n              onClick={() => {\n                // const yes = confirm('Delete this post?');\n                // if (yes) {\n                (async () => {\n                  try {\n                    await masto.v1.statuses.$select(id).remove();\n                    const cachedStatus = getStatus(id, instance);\n                    cachedStatus._deleted = true;\n                    showToast('Deleted');\n                  } catch (e) {\n                    console.error(e);\n                    showToast('Unable to delete');\n                  }\n                })();\n                // }\n              }}\n            >\n              <Icon icon=\"trash\" />\n              <span>Delete</span>\n            </MenuConfirm>\n          )}\n        </div>\n      )}\n      {!isSelf && isSizeLarge && (\n        <>\n          <MenuDivider />\n          <MenuItem\n            className=\"danger\"\n            onClick={() => {\n              states.showReportModal = {\n                account: status.account,\n                post: status,\n              };\n            }}\n          >\n            <Icon icon=\"flag\" />\n            <span>Report post</span>\n          </MenuItem>\n        </>\n      )}\n    </>\n  );\n\n  const contextMenuRef = useRef();\n  const [isContextMenuOpen, setIsContextMenuOpen] = useState(false);\n  const [contextMenuProps, setContextMenuProps] = useState({});\n\n  const showContextMenu =\n    allowContextMenu || (!isSizeLarge && !previewMode && !_deleted && !quoted);\n\n  // Only iOS/iPadOS browsers don't support contextmenu\n  // Some comments report iPadOS might support contextmenu if a mouse is connected\n  const bindLongPressContext = useLongPress(\n    isIOS && showContextMenu\n      ? (e) => {\n          if (e.pointerType === 'mouse') return;\n          // There's 'pen' too, but not sure if contextmenu event would trigger from a pen\n\n          const { clientX, clientY } = e.touches?.[0] || e;\n          // link detection copied from onContextMenu because here it works\n          const link = e.target.closest('a');\n          if (\n            link &&\n            statusRef.current.contains(link) &&\n            !link.getAttribute('href').startsWith('#')\n          )\n            return;\n          e.preventDefault();\n          setContextMenuProps({\n            anchorPoint: {\n              x: clientX,\n              y: clientY,\n            },\n            direction: 'right',\n          });\n          setIsContextMenuOpen(true);\n        }\n      : null,\n    {\n      threshold: 600,\n      captureEvent: true,\n      detect: 'touch',\n      cancelOnMovement: 2, // true allows movement of up to 25 pixels\n    },\n  );\n\n  const hotkeysEnabled = !readOnly && !previewMode && !quoted;\n  const rRef = useHotkeys('r, shift+r', replyStatus, {\n    enabled: hotkeysEnabled,\n  });\n  const fRef = useHotkeys('f, l', favouriteStatusNotify, {\n    enabled: hotkeysEnabled,\n  });\n  const dRef = useHotkeys('d', bookmarkStatusNotify, {\n    enabled: hotkeysEnabled,\n  });\n  const bRef = useHotkeys(\n    'shift+b',\n    () => {\n      (async () => {\n        try {\n          const done = await confirmBoostStatus();\n          if (!isSizeLarge && done) {\n            showToast(\n              reblogged\n                ? `Unboosted @${username || acct}'s post`\n                : `Boosted @${username || acct}'s post`,\n            );\n          }\n        } catch (e) {}\n      })();\n    },\n    {\n      enabled: hotkeysEnabled && canBoost,\n    },\n  );\n  const xRef = useHotkeys('x', (e) => {\n    const activeStatus = document.activeElement.closest(\n      '.status-link, .status-focus',\n    );\n    if (activeStatus) {\n      const spoilerButton = activeStatus.querySelector(\n        '.spoiler-button:not(.spoiling)',\n      );\n      if (spoilerButton) {\n        e.stopPropagation();\n        spoilerButton.click();\n      } else {\n        const spoilerMediaButton = activeStatus.querySelector(\n          '.spoiler-media-button:not(.spoiling)',\n        );\n        if (spoilerMediaButton) {\n          e.stopPropagation();\n          spoilerMediaButton.click();\n        }\n      }\n    }\n  });\n\n  const displayedMediaAttachments = mediaAttachments.slice(\n    0,\n    isSizeLarge ? undefined : 4,\n  );\n  const showMultipleMediaCaptions =\n    mediaAttachments.length > 1 &&\n    displayedMediaAttachments.some(\n      (media) => !!media.description && !isMediaCaptionLong(media.description),\n    );\n  const captionChildren = useMemo(() => {\n    if (!showMultipleMediaCaptions) return null;\n    const attachments = [];\n    displayedMediaAttachments.forEach((media, i) => {\n      if (!media.description) return;\n      const index = attachments.findIndex(\n        (attachment) => attachment.media.description === media.description,\n      );\n      if (index === -1) {\n        attachments.push({\n          media,\n          indices: [i],\n        });\n      } else {\n        attachments[index].indices.push(i);\n      }\n    });\n    return attachments.map(({ media, indices }) => (\n      <div\n        key={media.id}\n        data-caption-index={indices.map((i) => i + 1).join(' ')}\n        onClick={(e) => {\n          e.preventDefault();\n          e.stopPropagation();\n          states.showMediaAlt = {\n            alt: media.description,\n            lang: language,\n          };\n        }}\n        title={media.description}\n      >\n        <sup>{indices.map((i) => i + 1).join(' ')}</sup> {media.description}\n      </div>\n    ));\n\n    // return displayedMediaAttachments.map(\n    //   (media, i) =>\n    //     !!media.description && (\n    //       <div\n    //         key={media.id}\n    //         data-caption-index={i + 1}\n    //         onClick={(e) => {\n    //           e.preventDefault();\n    //           e.stopPropagation();\n    //           states.showMediaAlt = {\n    //             alt: media.description,\n    //             lang: language,\n    //           };\n    //         }}\n    //         title={media.description}\n    //       >\n    //         <sup>{i + 1}</sup> {media.description}\n    //       </div>\n    //     ),\n    // );\n  }, [showMultipleMediaCaptions, displayedMediaAttachments, language]);\n\n  const isThread = useMemo(() => {\n    return (\n      (!!inReplyToId && inReplyToAccountId === status.account?.id) ||\n      !!snapStates.statusThreadNumber[sKey]\n    );\n  }, [\n    inReplyToId,\n    inReplyToAccountId,\n    status.account?.id,\n    snapStates.statusThreadNumber[sKey],\n  ]);\n\n  const showCommentHint = useMemo(() => {\n    return (\n      enableCommentHint &&\n      !isThread &&\n      !withinContext &&\n      !inReplyToId &&\n      visibility === 'public' &&\n      repliesCount > 0\n    );\n  }, [\n    enableCommentHint,\n    isThread,\n    withinContext,\n    inReplyToId,\n    repliesCount,\n    visibility,\n  ]);\n  const showCommentCount = useMemo(() => {\n    if (\n      card ||\n      poll ||\n      sensitive ||\n      spoilerText ||\n      mediaAttachments?.length ||\n      isThread ||\n      withinContext ||\n      inReplyToId ||\n      repliesCount <= 0\n    ) {\n      return false;\n    }\n    const questionRegex = /[??]/;\n    const containsQuestion = questionRegex.test(content);\n    if (!containsQuestion) return false;\n    const contentLength = htmlContentLength(content);\n    if (contentLength > 0 && contentLength <= SHOW_COMMENT_COUNT_LIMIT) {\n      return true;\n    }\n  }, [\n    card,\n    poll,\n    sensitive,\n    spoilerText,\n    mediaAttachments,\n    reblog,\n    isThread,\n    withinContext,\n    inReplyToId,\n    repliesCount,\n    content,\n  ]);\n\n  return (\n    <StatusParent>\n      {showReplyParent && !!(inReplyToId && inReplyToAccountId) && (\n        <StatusCompact sKey={sKey} />\n      )}\n      <article\n        data-state-post-id={sKey}\n        ref={(node) => {\n          statusRef.current = node;\n          // Use parent node if it's in focus\n          // Use case: <a><status /></a>\n          // When navigating (j/k), the <a> is focused instead of <status />\n          // Hotkey binding doesn't bubble up thus this hack\n          const nodeRef =\n            node?.closest?.(\n              '.timeline-item, .timeline-item-alt, .status-link, .status-focus',\n            ) || node;\n          rRef.current = nodeRef;\n          fRef.current = nodeRef;\n          dRef.current = nodeRef;\n          bRef.current = nodeRef;\n          xRef.current = nodeRef;\n        }}\n        tabindex=\"-1\"\n        class={`status ${\n          !withinContext && inReplyToId && inReplyToAccount\n            ? 'status-reply-to'\n            : ''\n        } visibility-${visibility} ${_pinned ? 'status-pinned' : ''} ${\n          SIZE_CLASS[size]\n        } ${_deleted ? 'status-deleted' : ''} ${quoted ? 'status-card' : ''} ${\n          isContextMenuOpen ? 'status-menu-open' : ''\n        } ${mediaFirst && hasMediaAttachments ? 'status-media-first' : ''}`}\n        onMouseEnter={debugHover}\n        onContextMenu={(e) => {\n          if (!showContextMenu) return;\n          if (e.metaKey) return;\n          // console.log('context menu', e);\n          const link = e.target.closest('a');\n          if (\n            link &&\n            statusRef.current.contains(link) &&\n            !link.getAttribute('href').startsWith('#')\n          )\n            return;\n\n          // If there's selected text, don't show custom context menu\n          const selection = window.getSelection?.();\n          if (selection.toString().length > 0) {\n            const { anchorNode } = selection;\n            if (statusRef.current?.contains(anchorNode)) {\n              return;\n            }\n          }\n          e.preventDefault();\n          setContextMenuProps({\n            anchorPoint: {\n              x: e.clientX,\n              y: e.clientY,\n            },\n            direction: 'right',\n          });\n          setIsContextMenuOpen(true);\n        }}\n        {...(showContextMenu ? bindLongPressContext() : {})}\n      >\n        {showContextMenu && (\n          <ControlledMenu\n            ref={contextMenuRef}\n            state={isContextMenuOpen ? 'open' : undefined}\n            {...contextMenuProps}\n            onClose={(e) => {\n              setIsContextMenuOpen(false);\n              // statusRef.current?.focus?.();\n              if (e?.reason === 'click') {\n                statusRef.current?.closest('[tabindex]')?.focus?.();\n              }\n            }}\n            portal={{\n              target: document.body,\n            }}\n            containerProps={{\n              style: {\n                // Higher than the backdrop\n                zIndex: 1001,\n              },\n              onClick: () => {\n                contextMenuRef.current?.closeMenu?.();\n              },\n            }}\n            overflow=\"auto\"\n            boundingBoxPadding={safeBoundingBoxPadding()}\n            unmountOnClose\n          >\n            {StatusMenuItems}\n          </ControlledMenu>\n        )}\n        {showActionsBar &&\n          size !== 'l' &&\n          !previewMode &&\n          !readOnly &&\n          !_deleted &&\n          !quoted && (\n            <div\n              class={`status-actions ${\n                isContextMenuOpen === 'actions-bar' ? 'open' : ''\n              }`}\n              ref={actionsRef}\n            >\n              <StatusButton\n                size=\"s\"\n                title=\"Reply\"\n                alt=\"Reply\"\n                class=\"reply-button\"\n                icon=\"comment\"\n                iconSize=\"m\"\n                onClick={replyStatus}\n              />\n              <StatusButton\n                size=\"s\"\n                checked={favourited}\n                title={['Like', 'Unlike']}\n                alt={['Like', 'Liked']}\n                class=\"favourite-button\"\n                icon=\"heart\"\n                iconSize=\"m\"\n                count={favouritesCount}\n                onClick={favouriteStatusNotify}\n              />\n              <button\n                type=\"button\"\n                title=\"More\"\n                class=\"plain more-button\"\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  setContextMenuProps({\n                    anchorRef: {\n                      current: e.currentTarget,\n                    },\n                    align: 'start',\n                    direction: 'left',\n                    gap: 0,\n                    shift: -8,\n                  });\n                  setIsContextMenuOpen('actions-bar');\n                }}\n              >\n                <Icon icon=\"more2\" size=\"m\" alt=\"More\" />\n              </button>\n            </div>\n          )}\n        {size !== 'l' && (\n          <div class=\"status-badge\">\n            {reblogged && <Icon class=\"reblog\" icon=\"rocket\" size=\"s\" />}\n            {favourited && <Icon class=\"favourite\" icon=\"heart\" size=\"s\" />}\n            {bookmarked && <Icon class=\"bookmark\" icon=\"bookmark\" size=\"s\" />}\n            {_pinned && <Icon class=\"pin\" icon=\"pin\" size=\"s\" />}\n          </div>\n        )}\n        {size !== 's' && (\n          <a\n            href={accountURL}\n            tabindex=\"-1\"\n            // target=\"_blank\"\n            title={`@${acct}`}\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              states.showAccount = {\n                account: status.account,\n                instance,\n              };\n            }}\n          >\n            <Avatar url={avatarStatic || avatar} size=\"xxl\" squircle={bot} />\n          </a>\n        )}\n        <div class=\"container\">\n          <div class=\"meta\">\n            <span class=\"meta-name\">\n              <NameText\n                account={status.account}\n                instance={instance}\n                showAvatar={size === 's'}\n                showAcct={isSizeLarge}\n              />\n            </span>\n            {/* {inReplyToAccount && !withinContext && size !== 's' && (\n              <>\n                {' '}\n                <span class=\"ib\">\n                  <Icon icon=\"arrow-right\" class=\"arrow\" />{' '}\n                  <NameText account={inReplyToAccount} instance={instance} short />\n                </span>\n              </>\n            )} */}\n            {/* </span> */}{' '}\n            {size !== 'l' &&\n              (_deleted ? (\n                <span class=\"status-deleted-tag\">Deleted</span>\n              ) : url && !previewMode && !readOnly && !quoted ? (\n                <Link\n                  to={instance ? `/${instance}/s/${id}` : `/s/${id}`}\n                  onClick={(e) => {\n                    if (\n                      e.metaKey ||\n                      e.ctrlKey ||\n                      e.shiftKey ||\n                      e.altKey ||\n                      e.which === 2\n                    ) {\n                      return;\n                    }\n                    e.preventDefault();\n                    e.stopPropagation();\n                    onStatusLinkClick?.(e, status);\n                    setContextMenuProps({\n                      anchorRef: {\n                        current: e.currentTarget,\n                      },\n                      align: 'end',\n                      direction: 'bottom',\n                      gap: 4,\n                    });\n                    setIsContextMenuOpen(true);\n                  }}\n                  class={`time ${\n                    isContextMenuOpen && contextMenuProps?.anchorRef\n                      ? 'is-open'\n                      : ''\n                  }`}\n                >\n                  {showCommentHint && !showCommentCount ? (\n                    <Icon\n                      icon=\"comment2\"\n                      size=\"s\"\n                      alt={`${repliesCount} ${\n                        repliesCount === 1 ? 'reply' : 'replies'\n                      }`}\n                    />\n                  ) : (\n                    visibility !== 'public' &&\n                    visibility !== 'direct' && (\n                      <Icon\n                        icon={visibilityIconsMap[visibility]}\n                        alt={visibilityText[visibility]}\n                        size=\"s\"\n                      />\n                    )\n                  )}{' '}\n                  <RelativeTime datetime={createdAtDate} format=\"micro\" />\n                  {!previewMode && !readOnly && (\n                    <Icon icon=\"more2\" class=\"more\" />\n                  )}\n                </Link>\n              ) : (\n                // <Menu\n                //   instanceRef={menuInstanceRef}\n                //   portal={{\n                //     target: document.body,\n                //   }}\n                //   containerProps={{\n                //     style: {\n                //       // Higher than the backdrop\n                //       zIndex: 1001,\n                //     },\n                //     onClick: (e) => {\n                //       if (e.target === e.currentTarget)\n                //         menuInstanceRef.current?.closeMenu?.();\n                //     },\n                //   }}\n                //   align=\"end\"\n                //   gap={4}\n                //   overflow=\"auto\"\n                //   viewScroll=\"close\"\n                //   boundingBoxPadding=\"8 8 8 8\"\n                //   unmountOnClose\n                //   menuButton={({ open }) => (\n                //     <Link\n                //       to={instance ? `/${instance}/s/${id}` : `/s/${id}`}\n                //       onClick={(e) => {\n                //         e.preventDefault();\n                //         e.stopPropagation();\n                //         onStatusLinkClick?.(e, status);\n                //       }}\n                //       class={`time ${open ? 'is-open' : ''}`}\n                //     >\n                //       <Icon\n                //         icon={visibilityIconsMap[visibility]}\n                //         alt={visibilityText[visibility]}\n                //         size=\"s\"\n                //       />{' '}\n                //       <RelativeTime datetime={createdAtDate} format=\"micro\" />\n                //     </Link>\n                //   )}\n                // >\n                //   {StatusMenuItems}\n                // </Menu>\n                <span class=\"time\">\n                  {visibility !== 'public' && visibility !== 'direct' && (\n                    <>\n                      <Icon\n                        icon={visibilityIconsMap[visibility]}\n                        alt={visibilityText[visibility]}\n                        size=\"s\"\n                      />{' '}\n                    </>\n                  )}\n                  <RelativeTime datetime={createdAtDate} format=\"micro\" />\n                </span>\n              ))}\n          </div>\n          {visibility === 'direct' && (\n            <>\n              <div class=\"status-direct-badge\">Private mention</div>{' '}\n            </>\n          )}\n          {!withinContext && (\n            <>\n              {isThread ? (\n                <div class=\"status-thread-badge\">\n                  <Icon icon=\"thread\" size=\"s\" />\n                  Thread\n                  {snapStates.statusThreadNumber[sKey]\n                    ? ` ${snapStates.statusThreadNumber[sKey]}/X`\n                    : ''}\n                </div>\n              ) : (\n                !!inReplyToId &&\n                !!inReplyToAccount &&\n                (!!spoilerText ||\n                  !mentions.find((mention) => {\n                    return mention.id === inReplyToAccountId;\n                  })) && (\n                  <div class=\"status-reply-badge\">\n                    <Icon icon=\"reply\" />{' '}\n                    <NameText\n                      account={inReplyToAccount}\n                      instance={instance}\n                      short\n                    />\n                  </div>\n                )\n              )}\n            </>\n          )}\n          <div\n            class={`content-container ${\n              spoilerText || sensitive ? 'has-spoiler' : ''\n            } ${showSpoiler ? 'show-spoiler' : ''} ${\n              showSpoilerMedia ? 'show-media' : ''\n            }`}\n            data-content-text-weight={contentTextWeight ? textWeight() : null}\n            style={\n              (isSizeLarge || contentTextWeight) && {\n                '--content-text-weight': textWeight(),\n              }\n            }\n          >\n            {mediaFirst && hasMediaAttachments ? (\n              <>\n                {(!!spoilerText || !!sensitive) && !readingExpandSpoilers && (\n                  <>\n                    {!!spoilerText && (\n                      <span\n                        class=\"spoiler-content media-first-spoiler-content\"\n                        lang={language}\n                        dir=\"auto\"\n                        ref={spoilerContentRef}\n                        data-read-more={readMoreText}\n                      >\n                        <EmojiText text={spoilerText} emojis={emojis} />{' '}\n                      </span>\n                    )}\n                    <button\n                      class={`light spoiler-button media-first-spoiler-button ${\n                        showSpoiler ? 'spoiling' : ''\n                      }`}\n                      type=\"button\"\n                      onClick={(e) => {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        if (showSpoiler) {\n                          delete states.spoilers[id];\n                          if (!readingExpandSpoilers) {\n                            delete states.spoilersMedia[id];\n                          }\n                        } else {\n                          states.spoilers[id] = true;\n                          if (!readingExpandSpoilers) {\n                            states.spoilersMedia[id] = true;\n                          }\n                        }\n                      }}\n                    >\n                      <Icon icon={showSpoiler ? 'eye-open' : 'eye-close'} />{' '}\n                      {showSpoiler ? 'Show less' : 'Show content'}\n                    </button>\n                  </>\n                )}\n                <MediaFirstContainer\n                  mediaAttachments={mediaAttachments}\n                  language={language}\n                  postID={id}\n                  instance={instance}\n                />\n                {!!content && (\n                  <div class=\"media-first-content content\" ref={contentRef}>\n                    <PostContent\n                      post={status}\n                      instance={instance}\n                      previewMode={previewMode}\n                    />\n                  </div>\n                )}\n              </>\n            ) : (\n              <>\n                {!!spoilerText && (\n                  <>\n                    <div\n                      class=\"content spoiler-content\"\n                      lang={language}\n                      dir=\"auto\"\n                      ref={spoilerContentRef}\n                      data-read-more={readMoreText}\n                    >\n                      <p>\n                        <EmojiText text={spoilerText} emojis={emojis} />\n                      </p>\n                    </div>\n                    {readingExpandSpoilers || previewMode ? (\n                      <div class=\"spoiler-divider\">\n                        <Icon icon=\"eye-open\" /> Content warning\n                      </div>\n                    ) : (\n                      <button\n                        class={`light spoiler-button ${\n                          showSpoiler ? 'spoiling' : ''\n                        }`}\n                        type=\"button\"\n                        onClick={(e) => {\n                          e.preventDefault();\n                          e.stopPropagation();\n                          if (showSpoiler) {\n                            delete states.spoilers[id];\n                            if (!readingExpandSpoilers) {\n                              delete states.spoilersMedia[id];\n                            }\n                          } else {\n                            states.spoilers[id] = true;\n                            if (!readingExpandSpoilers) {\n                              states.spoilersMedia[id] = true;\n                            }\n                          }\n                        }}\n                      >\n                        <Icon icon={showSpoiler ? 'eye-open' : 'eye-close'} />{' '}\n                        {showSpoiler ? 'Show less' : 'Show content'}\n                      </button>\n                    )}\n                  </>\n                )}\n                {!!content && (\n                  <div\n                    class=\"content\"\n                    ref={contentRef}\n                    data-read-more={readMoreText}\n                  >\n                    <PostContent\n                      post={status}\n                      instance={instance}\n                      previewMode={previewMode}\n                    />\n                    <QuoteStatuses id={id} instance={instance} level={quoted} />\n                  </div>\n                )}\n                {!!poll && (\n                  <Poll\n                    lang={language}\n                    poll={poll}\n                    readOnly={readOnly || !sameInstance || !authenticated}\n                    onUpdate={(newPoll) => {\n                      states.statuses[sKey].poll = newPoll;\n                    }}\n                    refresh={() => {\n                      return masto.v1.polls\n                        .$select(poll.id)\n                        .fetch()\n                        .then((pollResponse) => {\n                          states.statuses[sKey].poll = pollResponse;\n                        })\n                        .catch((e) => {}); // Silently fail\n                    }}\n                    votePoll={(choices) => {\n                      return masto.v1.polls\n                        .$select(poll.id)\n                        .votes.create({\n                          choices,\n                        })\n                        .then((pollResponse) => {\n                          states.statuses[sKey].poll = pollResponse;\n                        })\n                        .catch((e) => {}); // Silently fail\n                    }}\n                  />\n                )}\n                {(((enableTranslate || inlineTranslate) &&\n                  !!content.trim() &&\n                  !!getHTMLText(emojifyText(content, emojis)) &&\n                  differentLanguage) ||\n                  forceTranslate) && (\n                  <TranslationBlock\n                    forceTranslate={forceTranslate || inlineTranslate}\n                    mini={!isSizeLarge && !withinContext}\n                    sourceLanguage={language}\n                    autoDetected={languageAutoDetected}\n                    text={getPostText(status)}\n                  />\n                )}\n                {!previewMode &&\n                  sensitive &&\n                  !!mediaAttachments.length &&\n                  readingExpandMedia !== 'show_all' && (\n                    <button\n                      class={`plain spoiler-media-button ${\n                        showSpoilerMedia ? 'spoiling' : ''\n                      }`}\n                      type=\"button\"\n                      hidden={!readingExpandSpoilers && !!spoilerText}\n                      onClick={(e) => {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        if (showSpoilerMedia) {\n                          delete states.spoilersMedia[id];\n                        } else {\n                          states.spoilersMedia[id] = true;\n                        }\n                      }}\n                    >\n                      <Icon\n                        icon={showSpoilerMedia ? 'eye-open' : 'eye-close'}\n                      />{' '}\n                      {showSpoilerMedia ? 'Show less' : 'Show media'}\n                    </button>\n                  )}\n                {!!mediaAttachments.length &&\n                  (mediaAttachments.length > 1 &&\n                  (isSizeLarge || (withinContext && size === 'm')) ? (\n                    <div class=\"media-large-container\">\n                      {mediaAttachments.map((media, i) => (\n                        <div key={media.id} class={`media-container media-eq1`}>\n                          <Media\n                            media={media}\n                            autoAnimate\n                            showCaption\n                            allowLongerCaption={!content}\n                            lang={language}\n                            to={`/${instance}/s/${id}?${\n                              withinContext ? 'media' : 'media-only'\n                            }=${i + 1}`}\n                            onClick={\n                              onMediaClick\n                                ? (e) => onMediaClick(e, i, media, status)\n                                : undefined\n                            }\n                          />\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <MultipleMediaFigure\n                      lang={language}\n                      enabled={showMultipleMediaCaptions}\n                      captionChildren={captionChildren}\n                    >\n                      <div\n                        ref={mediaContainerRef}\n                        class={`media-container media-eq${\n                          mediaAttachments.length\n                        } ${mediaAttachments.length > 2 ? 'media-gt2' : ''} ${\n                          mediaAttachments.length > 4 ? 'media-gt4' : ''\n                        }`}\n                      >\n                        {displayedMediaAttachments.map((media, i) => (\n                          <Media\n                            key={media.id}\n                            media={media}\n                            autoAnimate={isSizeLarge}\n                            showCaption={mediaAttachments.length === 1}\n                            allowLongerCaption={\n                              !content && mediaAttachments.length === 1\n                            }\n                            lang={language}\n                            altIndex={\n                              showMultipleMediaCaptions &&\n                              !!media.description &&\n                              i + 1\n                            }\n                            to={`/${instance}/s/${id}?${\n                              withinContext ? 'media' : 'media-only'\n                            }=${i + 1}`}\n                            onClick={\n                              onMediaClick\n                                ? (e) => {\n                                    onMediaClick(e, i, media, status);\n                                  }\n                                : undefined\n                            }\n                          />\n                        ))}\n                      </div>\n                    </MultipleMediaFigure>\n                  ))}\n                {!!card &&\n                  /^https/i.test(card?.url) &&\n                  !sensitive &&\n                  !spoilerText &&\n                  !poll &&\n                  !mediaAttachments.length &&\n                  !snapStates.statusQuotes[sKey] && (\n                    <Card\n                      card={card}\n                      selfReferential={\n                        card?.url === status.url || card?.url === status.uri\n                      }\n                      instance={currentInstance}\n                    />\n                  )}\n              </>\n            )}\n          </div>\n          {!isSizeLarge && showCommentCount && (\n            <div class=\"content-comment-hint insignificant\">\n              <Icon icon=\"comment2\" alt=\"Replies\" /> {repliesCount}\n            </div>\n          )}\n          {isSizeLarge && (\n            <>\n              <div class=\"extra-meta\">\n                {_deleted ? (\n                  <span class=\"status-deleted-tag\">Deleted</span>\n                ) : (\n                  <>\n                    {/* <Icon\n                      icon={visibilityIconsMap[visibility]}\n                      alt={visibilityText[visibility]}\n                    /> */}\n                    <span>{visibilityText[visibility]}</span> &bull;{' '}\n                    <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n                      <time\n                        class=\"created\"\n                        datetime={createdAtDate.toISOString()}\n                        title={createdAtDate.toLocaleString()}\n                      >\n                        {createdDateText}\n                      </time>\n                    </a>\n                    {editedAt && (\n                      <>\n                        {' '}\n                        &bull; <Icon icon=\"pencil\" alt=\"Edited\" />{' '}\n                        <time\n                          tabIndex=\"0\"\n                          class=\"edited\"\n                          datetime={editedAtDate.toISOString()}\n                          onClick={() => {\n                            setShowEdited(id);\n                          }}\n                        >\n                          {editedDateText}\n                        </time>\n                      </>\n                    )}\n                  </>\n                )}\n              </div>\n              {!!emojiReactions?.length && (\n                <div class=\"emoji-reactions\">\n                  {emojiReactions.map((emojiReaction) => {\n                    const { name, count, me, url, staticUrl } = emojiReaction;\n                    if (url) {\n                      // Some servers return url and staticUrl\n                      return (\n                        <span\n                          class={`emoji-reaction tag ${\n                            me ? '' : 'insignificant'\n                          }`}\n                        >\n                          <CustomEmoji\n                            alt={name}\n                            url={url}\n                            staticUrl={staticUrl}\n                          />{' '}\n                          {count}\n                        </span>\n                      );\n                    }\n                    const isShortCode = /^:.+?:$/.test(name);\n                    if (isShortCode) {\n                      const emoji = emojis.find(\n                        (e) =>\n                          e.shortcode ===\n                          name.replace(/^:/, '').replace(/:$/, ''),\n                      );\n                      if (emoji) {\n                        return (\n                          <span\n                            class={`emoji-reaction tag ${\n                              me ? '' : 'insignificant'\n                            }`}\n                          >\n                            <CustomEmoji\n                              alt={name}\n                              url={emoji.url}\n                              staticUrl={emoji.staticUrl}\n                            />{' '}\n                            {count}\n                          </span>\n                        );\n                      }\n                    }\n                    return (\n                      <span\n                        class={`emoji-reaction tag ${\n                          me ? '' : 'insignificant'\n                        }`}\n                      >\n                        {name} {count}\n                      </span>\n                    );\n                  })}\n                </div>\n              )}\n              <div class={`actions ${_deleted ? 'disabled' : ''}`}>\n                <div class=\"action has-count\">\n                  <StatusButton\n                    title=\"Reply\"\n                    alt=\"Comments\"\n                    class=\"reply-button\"\n                    icon=\"comment\"\n                    count={repliesCount}\n                    onClick={replyStatus}\n                  />\n                </div>\n                {/* <div class=\"action has-count\">\n                <StatusButton\n                  checked={reblogged}\n                  title={['Boost', 'Unboost']}\n                  alt={['Boost', 'Boosted']}\n                  class=\"reblog-button\"\n                  icon=\"rocket\"\n                  count={reblogsCount}\n                  onClick={boostStatus}\n                  disabled={!canBoost}\n                />\n              </div> */}\n                <MenuConfirm\n                  disabled={!canBoost}\n                  onClick={confirmBoostStatus}\n                  confirmLabel={\n                    <>\n                      <Icon icon=\"rocket\" />\n                      <span>{reblogged ? 'Unboost' : 'Boost'}</span>\n                    </>\n                  }\n                  menuExtras={\n                    <MenuItem\n                      onClick={() => {\n                        showCompose({\n                          draftStatus: {\n                            status: `\\n${url}`,\n                          },\n                        });\n                      }}\n                    >\n                      <Icon icon=\"quote\" />\n                      <span>Quote</span>\n                    </MenuItem>\n                  }\n                  menuFooter={\n                    mediaNoDesc &&\n                    !reblogged && (\n                      <div class=\"footer\">\n                        <Icon icon=\"alert\" />\n                        Some media have no descriptions.\n                      </div>\n                    )\n                  }\n                >\n                  <div class=\"action has-count\">\n                    <StatusButton\n                      checked={reblogged}\n                      title={['Boost', 'Unboost']}\n                      alt={['Boost', 'Boosted']}\n                      class=\"reblog-button\"\n                      icon=\"rocket\"\n                      count={reblogsCount}\n                      // onClick={boostStatus}\n                      disabled={!canBoost}\n                    />\n                  </div>\n                </MenuConfirm>\n                <div class=\"action has-count\">\n                  <StatusButton\n                    checked={favourited}\n                    title={['Like', 'Unlike']}\n                    alt={['Like', 'Liked']}\n                    class=\"favourite-button\"\n                    icon=\"heart\"\n                    count={favouritesCount}\n                    onClick={favouriteStatus}\n                  />\n                </div>\n                {supports('@mastodon/post-bookmark') && (\n                  <div class=\"action\">\n                    <StatusButton\n                      checked={bookmarked}\n                      title={['Bookmark', 'Unbookmark']}\n                      alt={['Bookmark', 'Bookmarked']}\n                      class=\"bookmark-button\"\n                      icon=\"bookmark\"\n                      onClick={bookmarkStatus}\n                    />\n                  </div>\n                )}\n                <Menu2\n                  portal={{\n                    target:\n                      document.querySelector('.status-deck') || document.body,\n                  }}\n                  align=\"end\"\n                  gap={4}\n                  overflow=\"auto\"\n                  viewScroll=\"close\"\n                  menuButton={\n                    <div class=\"action\">\n                      <button\n                        type=\"button\"\n                        title=\"More\"\n                        class=\"plain more-button\"\n                      >\n                        <Icon icon=\"more\" size=\"l\" alt=\"More\" />\n                      </button>\n                    </div>\n                  }\n                >\n                  {StatusMenuItems}\n                </Menu2>\n              </div>\n            </>\n          )}\n        </div>\n        {!!showEdited && (\n          <Modal\n            onClick={(e) => {\n              if (e.target === e.currentTarget) {\n                setShowEdited(false);\n                // statusRef.current?.focus();\n              }\n            }}\n          >\n            <EditedAtModal\n              statusID={showEdited}\n              instance={instance}\n              fetchStatusHistory={() => {\n                return masto.v1.statuses.$select(showEdited).history.list();\n              }}\n              onClose={() => {\n                setShowEdited(false);\n                statusRef.current?.focus();\n              }}\n            />\n          </Modal>\n        )}\n        {!!showEmbed && (\n          <Modal\n            onClick={(e) => {\n              if (e.target === e.currentTarget) {\n                setShowEmbed(false);\n              }\n            }}\n          >\n            <EmbedModal\n              post={status}\n              instance={instance}\n              onClose={() => {\n                setShowEmbed(false);\n              }}\n            />\n          </Modal>\n        )}\n      </article>\n    </StatusParent>\n  );\n}\n\nfunction MultipleMediaFigure(props) {\n  const { enabled, children, lang, captionChildren } = props;\n  if (!enabled || !captionChildren) return children;\n  return (\n    <figure class=\"media-figure-multiple\">\n      {children}\n      <figcaption lang={lang} dir=\"auto\">\n        {captionChildren}\n      </figcaption>\n    </figure>\n  );\n}\n\nfunction MediaFirstContainer(props) {\n  const { mediaAttachments, language, postID, instance } = props;\n  const moreThanOne = mediaAttachments.length > 1;\n\n  const carouselRef = useRef();\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  useEffect(() => {\n    let handleScroll = () => {\n      const { clientWidth, scrollLeft } = carouselRef.current;\n      const index = Math.round(scrollLeft / clientWidth);\n      setCurrentIndex(index);\n    };\n    if (carouselRef.current) {\n      carouselRef.current.addEventListener('scroll', handleScroll, {\n        passive: true,\n      });\n    }\n    return () => {\n      if (carouselRef.current) {\n        carouselRef.current.removeEventListener('scroll', handleScroll);\n      }\n    };\n  }, []);\n\n  return (\n    <>\n      <div class=\"media-first-container\">\n        <div class=\"media-first-carousel\" ref={carouselRef}>\n          {mediaAttachments.map((media, i) => (\n            <div class=\"media-first-item\" key={media.id}>\n              <Media\n                media={media}\n                lang={language}\n                to={`/${instance}/s/${postID}?media=${i + 1}`}\n              />\n            </div>\n          ))}\n        </div>\n        {moreThanOne && (\n          <div class=\"media-carousel-controls\">\n            <div class=\"carousel-indexer\">\n              {currentIndex + 1}/{mediaAttachments.length}\n            </div>\n            <label class=\"media-carousel-button\">\n              <button\n                type=\"button\"\n                class=\"carousel-button\"\n                hidden={currentIndex === 0}\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  carouselRef.current.focus();\n                  carouselRef.current.scrollTo({\n                    left: carouselRef.current.clientWidth * (currentIndex - 1),\n                    behavior: 'smooth',\n                  });\n                }}\n              >\n                <Icon icon=\"arrow-left\" />\n              </button>\n            </label>\n            <label class=\"media-carousel-button\">\n              <button\n                type=\"button\"\n                class=\"carousel-button\"\n                hidden={currentIndex === mediaAttachments.length - 1}\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  carouselRef.current.focus();\n                  carouselRef.current.scrollTo({\n                    left: carouselRef.current.clientWidth * (currentIndex + 1),\n                    behavior: 'smooth',\n                  });\n                }}\n              >\n                <Icon icon=\"arrow-right\" />\n              </button>\n            </label>\n          </div>\n        )}\n      </div>\n      {moreThanOne && (\n        <div\n          class=\"media-carousel-dots\"\n          style={{\n            '--dots-count': mediaAttachments.length,\n          }}\n        >\n          {mediaAttachments.map((media, i) => (\n            <span\n              key={media.id}\n              class={`carousel-dot ${i === currentIndex ? 'active' : ''}`}\n            />\n          ))}\n        </div>\n      )}\n    </>\n  );\n}\n\nfunction Card({ card, selfReferential, instance }) {\n  const snapStates = useSnapshot(states);\n  const {\n    blurhash,\n    title,\n    description,\n    html,\n    providerName,\n    providerUrl,\n    authorName,\n    authorUrl,\n    width,\n    height,\n    image,\n    imageDescription,\n    url,\n    type,\n    embedUrl,\n    language,\n    publishedAt,\n  } = card;\n\n  /* type\n  link = Link OEmbed\n  photo = Photo OEmbed\n  video = Video OEmbed\n  rich = iframe OEmbed. Not currently accepted, so wont show up in practice.\n  */\n\n  const hasText = title || providerName || authorName;\n  const isLandscape = width / height >= 1.2;\n  const size = isLandscape ? 'large' : '';\n\n  const [cardStatusURL, setCardStatusURL] = useState(null);\n  // const [cardStatusID, setCardStatusID] = useState(null);\n  useEffect(() => {\n    if (hasText && image && !selfReferential && isMastodonLinkMaybe(url)) {\n      unfurlMastodonLink(instance, url).then((result) => {\n        if (!result) return;\n        const { id, url } = result;\n        setCardStatusURL('#' + url);\n\n        // NOTE: This is for quote post\n        // (async () => {\n        //   const { masto } = api({ instance });\n        //   const status = await masto.v1.statuses.$select(id).fetch();\n        //   saveStatus(status, instance);\n        //   setCardStatusID(id);\n        // })();\n      });\n    }\n  }, [hasText, image, selfReferential]);\n\n  // if (cardStatusID) {\n  //   return (\n  //     <Status statusID={cardStatusID} instance={instance} size=\"s\" readOnly />\n  //   );\n  // }\n\n  if (snapStates.unfurledLinks[url]) return null;\n\n  const hasIframeHTML = /<iframe/i.test(html);\n  const handleClick = useCallback(\n    (e) => {\n      if (hasIframeHTML) {\n        e.preventDefault();\n        states.showEmbedModal = {\n          html,\n          url: url || embedUrl,\n          width,\n          height,\n        };\n      }\n    },\n    [hasIframeHTML],\n  );\n\n  if (hasText && (image || (type === 'photo' && blurhash))) {\n    const domain = punycode.toUnicode(\n      new URL(url).hostname.replace(/^www\\./, '').replace(/\\/$/, ''),\n    );\n    let blurhashImage;\n    const rgbAverageColor =\n      image && blurhash ? getBlurHashAverageColor(blurhash) : null;\n    if (!image) {\n      const w = 44;\n      const h = 44;\n      const blurhashPixels = decodeBlurHash(blurhash, w, h);\n      const canvas = window.OffscreenCanvas\n        ? new OffscreenCanvas(1, 1)\n        : document.createElement('canvas');\n      canvas.width = w;\n      canvas.height = h;\n      const ctx = canvas.getContext('2d');\n      ctx.imageSmoothingEnabled = false;\n      const imageData = ctx.createImageData(w, h);\n      imageData.data.set(blurhashPixels);\n      ctx.putImageData(imageData, 0, 0);\n      blurhashImage = canvas.toDataURL();\n    }\n\n    // \"Post\": Quote post + card link preview combo\n    // Assume all links from these domains are \"posts\"\n    // Mastodon links are \"posts\" too but they are converted to real quote posts and there's too many domains to check\n    // This is just \"Progressive Enhancement\"\n    const isPost = ['x.com', 'twitter.com', 'threads.net'].includes(domain);\n\n    return (\n      <a\n        href={cardStatusURL || url}\n        target={cardStatusURL ? null : '_blank'}\n        rel=\"nofollow noopener noreferrer\"\n        class={`card link ${isPost ? 'card-post' : ''} ${\n          blurhashImage ? '' : size\n        }`}\n        lang={language}\n        dir=\"auto\"\n        style={{\n          '--average-color':\n            rgbAverageColor && `rgb(${rgbAverageColor.join(',')})`,\n        }}\n        onClick={handleClick}\n      >\n        <div class=\"card-image\">\n          <img\n            src={image || blurhashImage}\n            width={width}\n            height={height}\n            loading=\"lazy\"\n            alt={imageDescription || ''}\n            onError={(e) => {\n              try {\n                e.target.style.display = 'none';\n              } catch (e) {}\n            }}\n          />\n        </div>\n        <div class=\"meta-container\">\n          <p class=\"meta domain\">\n            <span class=\"domain\">{domain}</span>{' '}\n            {!!publishedAt && <>&middot; </>}\n            {!!publishedAt && (\n              <>\n                <RelativeTime datetime={publishedAt} format=\"micro\" />\n              </>\n            )}\n          </p>\n          <p class=\"title\" dir=\"auto\" title={title}>\n            {title}\n          </p>\n          <p class=\"meta\" dir=\"auto\" title={description}>\n            {description ||\n              (!!publishedAt && (\n                <RelativeTime datetime={publishedAt} format=\"micro\" />\n              ))}\n          </p>\n        </div>\n      </a>\n    );\n  } else if (type === 'photo') {\n    return (\n      <a\n        href={url}\n        target=\"_blank\"\n        rel=\"nofollow noopener noreferrer\"\n        class=\"card photo\"\n        onClick={handleClick}\n      >\n        <img\n          src={embedUrl}\n          width={width}\n          height={height}\n          alt={title || description}\n          loading=\"lazy\"\n          style={{\n            height: 'auto',\n            aspectRatio: `${width}/${height}`,\n          }}\n        />\n      </a>\n    );\n  } else {\n    if (type === 'video') {\n      if (/youtube/i.test(providerName)) {\n        // Get ID from e.g. https://www.youtube.com/watch?v=[VIDEO_ID]\n        const videoID = url.match(/watch\\?v=([^&]+)/)?.[1];\n        if (videoID) {\n          return (\n            <a class=\"card video\" onClick={handleClick}>\n              <lite-youtube videoid={videoID} nocookie></lite-youtube>\n            </a>\n          );\n        }\n      }\n      // return (\n      //   <div\n      //     class=\"card video\"\n      //     style={{\n      //       aspectRatio: `${width}/${height}`,\n      //     }}\n      //     dangerouslySetInnerHTML={{ __html: html }}\n      //   />\n      // );\n    }\n    if (hasText && !image) {\n      const domain = punycode.toUnicode(\n        new URL(url).hostname.replace(/^www\\./, ''),\n      );\n      return (\n        <a\n          href={cardStatusURL || url}\n          target={cardStatusURL ? null : '_blank'}\n          rel=\"nofollow noopener noreferrer\"\n          class={`card link no-image`}\n          lang={language}\n          onClick={handleClick}\n        >\n          <div class=\"meta-container\">\n            <p class=\"meta domain\">\n              <span class=\"domain\">\n                <Icon icon=\"link\" size=\"s\" /> <span>{domain}</span>\n              </span>{' '}\n              {!!publishedAt && <>&middot; </>}\n              {!!publishedAt && (\n                <>\n                  <RelativeTime datetime={publishedAt} format=\"micro\" />\n                </>\n              )}\n            </p>\n            <p class=\"title\" title={title}>\n              {title}\n            </p>\n            <p class=\"meta\" title={description || providerName || authorName}>\n              {description || providerName || authorName}\n            </p>\n          </div>\n        </a>\n      );\n    }\n  }\n}\n\nfunction EditedAtModal({\n  statusID,\n  instance,\n  fetchStatusHistory = () => {},\n  onClose,\n}) {\n  const [uiState, setUIState] = useState('default');\n  const [editHistory, setEditHistory] = useState([]);\n\n  useEffect(() => {\n    setUIState('loading');\n    (async () => {\n      try {\n        const editHistory = await fetchStatusHistory();\n        console.log(editHistory);\n        setEditHistory(editHistory);\n        setUIState('default');\n      } catch (e) {\n        console.error(e);\n        setUIState('error');\n      }\n    })();\n  }, []);\n\n  return (\n    <div id=\"edit-history\" class=\"sheet\">\n      {!!onClose && (\n        <button type=\"button\" class=\"sheet-close\" onClick={onClose}>\n          <Icon icon=\"x\" />\n        </button>\n      )}\n      <header>\n        <h2>Edit History</h2>\n        {uiState === 'error' && <p>Failed to load history</p>}\n        {uiState === 'loading' && (\n          <p>\n            <Loader abrupt /> Loading&hellip;\n          </p>\n        )}\n      </header>\n      <main tabIndex=\"-1\">\n        {editHistory.length > 0 && (\n          <ol>\n            {editHistory.map((status) => {\n              const { createdAt } = status;\n              const createdAtDate = new Date(createdAt);\n              return (\n                <li key={createdAt} class=\"history-item\">\n                  <h3>\n                    <time>\n                      {niceDateTime(createdAtDate, {\n                        formatOpts: {\n                          weekday: 'short',\n                          second: 'numeric',\n                        },\n                      })}\n                    </time>\n                  </h3>\n                  <Status\n                    status={status}\n                    instance={instance}\n                    size=\"s\"\n                    withinContext\n                    readOnly\n                    previewMode\n                  />\n                </li>\n              );\n            })}\n          </ol>\n        )}\n      </main>\n    </div>\n  );\n}\n\nfunction generateHTMLCode(post, instance, level = 0) {\n  const {\n    account: {\n      url: accountURL,\n      displayName,\n      acct,\n      username,\n      emojis: accountEmojis,\n      bot,\n      group,\n    },\n    id,\n    poll,\n    spoilerText,\n    language,\n    editedAt,\n    createdAt,\n    content,\n    mediaAttachments,\n    url,\n    emojis,\n  } = post;\n\n  const sKey = statusKey(id, instance);\n  const quotes = states.statusQuotes[sKey] || [];\n  const uniqueQuotes = quotes.filter(\n    (q, i, arr) => arr.findIndex((q2) => q2.url === q.url) === i,\n  );\n  const quoteStatusesHTML =\n    uniqueQuotes.length && level <= 2\n      ? uniqueQuotes\n          .map((quote) => {\n            const { id, instance } = quote;\n            const sKey = statusKey(id, instance);\n            const s = states.statuses[sKey];\n            if (s) {\n              return generateHTMLCode(s, instance, ++level);\n            }\n          })\n          .join('')\n      : '';\n\n  const createdAtDate = new Date(createdAt);\n  // const editedAtDate = editedAt && new Date(editedAt);\n\n  const contentHTML =\n    emojifyText(content, emojis) +\n    '\\n' +\n    quoteStatusesHTML +\n    '\\n' +\n    (poll?.options?.length\n      ? `\n        <p>:</p>\n        <ul>\n        ${poll.options\n          .map(\n            (option) => `\n              <li>\n                ${option.title}\n                ${option.votesCount >= 0 ? ` (${option.votesCount})` : ''}\n              </li>\n            `,\n          )\n          .join('')}\n        </ul>`\n      : '') +\n    (mediaAttachments.length > 0\n      ? '\\n' +\n        mediaAttachments\n          .map((media) => {\n            const {\n              description,\n              meta,\n              previewRemoteUrl,\n              previewUrl,\n              remoteUrl,\n              url,\n              type,\n            } = media;\n            const { original = {}, small } = meta || {};\n            const width = small?.width || original?.width;\n            const height = small?.height || original?.height;\n\n            // Prefer remote over original\n            const sourceMediaURL = remoteUrl || url;\n            const previewMediaURL = previewRemoteUrl || previewUrl;\n            const mediaURL = previewMediaURL || sourceMediaURL;\n\n            const sourceMediaURLObj = sourceMediaURL\n              ? new URL(sourceMediaURL)\n              : null;\n            const isVideoMaybe =\n              type === 'unknown' &&\n              sourceMediaURLObj &&\n              /\\.(mp4|m4r|m4v|mov|webm)$/i.test(sourceMediaURLObj.pathname);\n            const isAudioMaybe =\n              type === 'unknown' &&\n              sourceMediaURLObj &&\n              /\\.(mp3|ogg|wav|m4a|m4p|m4b)$/i.test(sourceMediaURLObj.pathname);\n            const isImage =\n              type === 'image' ||\n              (type === 'unknown' &&\n                previewMediaURL &&\n                !isVideoMaybe &&\n                !isAudioMaybe);\n            const isVideo = type === 'gifv' || type === 'video' || isVideoMaybe;\n            const isAudio = type === 'audio' || isAudioMaybe;\n\n            let mediaHTML = '';\n            if (isImage) {\n              mediaHTML = `<img src=\"${mediaURL}\" width=\"${width}\" height=\"${height}\" alt=\"${description}\" loading=\"lazy\" />`;\n            } else if (isVideo) {\n              mediaHTML = `\n                <video src=\"${sourceMediaURL}\" width=\"${width}\" height=\"${height}\" controls preload=\"auto\" poster=\"${previewMediaURL}\" loading=\"lazy\"></video>\n                ${description ? `<figcaption>${description}</figcaption>` : ''}\n              `;\n            } else if (isAudio) {\n              mediaHTML = `\n                <audio src=\"${sourceMediaURL}\" controls preload=\"auto\"></audio>\n                ${description ? `<figcaption>${description}</figcaption>` : ''}\n              `;\n            } else {\n              mediaHTML = `\n                <a href=\"${sourceMediaURL}\"> ${\n                description || sourceMediaURL\n              }</a>\n              `;\n            }\n\n            return `<figure>${mediaHTML}</figure>`;\n          })\n          .join('\\n')\n      : '');\n\n  const htmlCode = `\n    <blockquote lang=\"${language}\" cite=\"${url}\">\n      ${\n        spoilerText\n          ? `\n            <details>\n              <summary>${spoilerText}</summary>\n              ${contentHTML}\n            </details>\n          `\n          : contentHTML\n      }\n      <footer>\n         ${emojifyText(\n          displayName,\n          accountEmojis,\n        )} (@${acct}) <a href=\"${url}\"><time datetime=\"${createdAtDate.toISOString()}\">${createdAtDate.toLocaleString()}</time></a>\n      </footer>\n    </blockquote>\n  `;\n\n  return prettify(htmlCode);\n}\n\nfunction EmbedModal({ post, instance, onClose }) {\n  const {\n    account: {\n      url: accountURL,\n      displayName,\n      username,\n      emojis: accountEmojis,\n      bot,\n      group,\n    },\n    id,\n    poll,\n    spoilerText,\n    language,\n    editedAt,\n    createdAt,\n    content,\n    mediaAttachments,\n    url,\n    emojis,\n  } = post;\n\n  const htmlCode = generateHTMLCode(post, instance);\n  return (\n    <div id=\"embed-post\" class=\"sheet\">\n      {!!onClose && (\n        <button type=\"button\" class=\"sheet-close\" onClick={onClose}>\n          <Icon icon=\"x\" />\n        </button>\n      )}\n      <header>\n        <h2>Embed post</h2>\n      </header>\n      <main tabIndex=\"-1\">\n        <h3>HTML Code</h3>\n        <textarea\n          class=\"embed-code\"\n          readonly\n          onClick={(e) => {\n            e.target.select();\n          }}\n        >\n          {htmlCode}\n        </textarea>\n        <button\n          type=\"button\"\n          onClick={() => {\n            try {\n              navigator.clipboard.writeText(htmlCode);\n              showToast('HTML code copied');\n            } catch (e) {\n              console.error(e);\n              showToast('Unable to copy HTML code');\n            }\n          }}\n        >\n          <Icon icon=\"clipboard\" /> <span>Copy</span>\n        </button>\n        {!!mediaAttachments?.length && (\n          <section>\n            <p>Media attachments:</p>\n            <ol class=\"links-list\">\n              {mediaAttachments.map((media) => {\n                return (\n                  <li key={media.id}>\n                    <a\n                      href={media.remoteUrl || media.url}\n                      target=\"_blank\"\n                      download\n                    >\n                      {media.remoteUrl || media.url}\n                    </a>\n                  </li>\n                );\n              })}\n            </ol>\n          </section>\n        )}\n        {!!accountEmojis?.length && (\n          <section>\n            <p>Account Emojis:</p>\n            <ul>\n              {accountEmojis.map((emoji) => {\n                return (\n                  <li key={emoji.shortcode}>\n                    <picture>\n                      <source\n                        srcset={emoji.staticUrl}\n                        media=\"(prefers-reduced-motion: reduce)\"\n                      ></source>\n                      <img\n                        class=\"shortcode-emoji emoji\"\n                        src={emoji.url}\n                        alt={`:${emoji.shortcode}:`}\n                        width=\"16\"\n                        height=\"16\"\n                        loading=\"lazy\"\n                        decoding=\"async\"\n                      />\n                    </picture>{' '}\n                    <code>:{emoji.shortcode}:</code> (\n                    <a href={emoji.url} target=\"_blank\" download>\n                      url\n                    </a>\n                    )\n                    {emoji.staticUrl ? (\n                      <>\n                        {' '}\n                        (\n                        <a href={emoji.staticUrl} target=\"_blank\" download>\n                          static\n                        </a>\n                        )\n                      </>\n                    ) : null}\n                  </li>\n                );\n              })}\n            </ul>\n          </section>\n        )}\n        {!!emojis?.length && (\n          <section>\n            <p>Emojis:</p>\n            <ul>\n              {emojis.map((emoji) => {\n                return (\n                  <li key={emoji.shortcode}>\n                    <picture>\n                      <source\n                        srcset={emoji.staticUrl}\n                        media=\"(prefers-reduced-motion: reduce)\"\n                      ></source>\n                      <img\n                        class=\"shortcode-emoji emoji\"\n                        src={emoji.url}\n                        alt={`:${emoji.shortcode}:`}\n                        width=\"16\"\n                        height=\"16\"\n                        loading=\"lazy\"\n                        decoding=\"async\"\n                      />\n                    </picture>{' '}\n                    <code>:{emoji.shortcode}:</code> (\n                    <a href={emoji.url} target=\"_blank\" download>\n                      url\n                    </a>\n                    )\n                    {emoji.staticUrl ? (\n                      <>\n                        {' '}\n                        (\n                        <a href={emoji.staticUrl} target=\"_blank\" download>\n                          static\n                        </a>\n                        )\n                      </>\n                    ) : null}\n                  </li>\n                );\n              })}\n            </ul>\n          </section>\n        )}\n        <section>\n          <small>\n            <p>Notes:</p>\n            <ul>\n              <li>\n                This is static, unstyled and scriptless. You may need to apply\n                your own styles and edit as needed.\n              </li>\n              <li>\n                Polls are not interactive, becomes a list with vote counts.\n              </li>\n              <li>\n                Media attachments can be images, videos, audios or any file\n                types.\n              </li>\n              <li>Post could be edited or deleted later.</li>\n            </ul>\n          </small>\n        </section>\n        <h3>Preview</h3>\n        <output\n          class=\"embed-preview\"\n          dangerouslySetInnerHTML={{ __html: htmlCode }}\n        />\n        <p>\n          <small>Note: This preview is lightly styled.</small>\n        </p>\n      </main>\n    </div>\n  );\n}\n\nfunction StatusButton({\n  checked,\n  count,\n  class: className,\n  title,\n  alt,\n  size,\n  icon,\n  iconSize = 'l',\n  onClick,\n  ...props\n}) {\n  if (typeof title === 'string') {\n    title = [title, title];\n  }\n  if (typeof alt === 'string') {\n    alt = [alt, alt];\n  }\n\n  const [buttonTitle, setButtonTitle] = useState(title[0] || '');\n  const [iconAlt, setIconAlt] = useState(alt[0] || '');\n\n  useEffect(() => {\n    if (checked) {\n      setButtonTitle(title[1] || '');\n      setIconAlt(alt[1] || '');\n    } else {\n      setButtonTitle(title[0] || '');\n      setIconAlt(alt[0] || '');\n    }\n  }, [checked, title, alt]);\n\n  return (\n    <button\n      type=\"button\"\n      title={buttonTitle}\n      class={`plain ${size ? 'small' : ''} ${className} ${\n        checked ? 'checked' : ''\n      }`}\n      onClick={(e) => {\n        if (!onClick) return;\n        e.preventDefault();\n        e.stopPropagation();\n        onClick(e);\n      }}\n      {...props}\n    >\n      <Icon icon={icon} size={iconSize} alt={iconAlt} />\n      {!!count && (\n        <>\n          {' '}\n          <small title={count}>{shortenNumber(count)}</small>\n        </>\n      )}\n    </button>\n  );\n}\n\nfunction nicePostURL(url) {\n  if (!url) return;\n  const urlObj = new URL(url);\n  const { host, pathname } = urlObj;\n  const path = pathname.replace(/\\/$/, '');\n  // split only first slash\n  const [_, username, restPath] = path.match(/\\/(@[^\\/]+)\\/(.*)/) || [];\n  return (\n    <>\n      {punycode.toUnicode(host)}\n      {username ? (\n        <>\n          /{username}\n          <wbr />\n          <span class=\"more-insignificant\">/{restPath}</span>\n        </>\n      ) : (\n        <span class=\"more-insignificant\">{path}</span>\n      )}\n    </>\n  );\n}\n\nfunction StatusCompact({ sKey }) {\n  const snapStates = useSnapshot(states);\n  const statusReply = snapStates.statusReply[sKey];\n  if (!statusReply) return null;\n\n  const { id, instance } = statusReply;\n  const status = getStatus(id, instance);\n  if (!status) return null;\n\n  const {\n    sensitive,\n    spoilerText,\n    account: { avatar, avatarStatic, bot } = {},\n    visibility,\n    content,\n    language,\n    filtered,\n  } = status;\n  if (sensitive || spoilerText) return null;\n  if (!content) return null;\n\n  const srKey = statusKey(id, instance);\n  const statusPeekText = statusPeek(status);\n\n  const filterContext = useContext(FilterContext);\n  const filterInfo = isFiltered(filtered, filterContext);\n\n  if (filterInfo?.action === 'hide') return null;\n\n  const filterTitleStr = filterInfo?.titlesStr || '';\n\n  return (\n    <article\n      class={`status compact-reply ${\n        visibility === 'direct' ? 'visibility-direct' : ''\n      }`}\n      tabindex=\"-1\"\n      data-state-post-id={srKey}\n    >\n      <Avatar url={avatarStatic || avatar} squircle={bot} />\n      <div\n        class=\"content-compact\"\n        title={statusPeekText}\n        lang={language}\n        dir=\"auto\"\n      >\n        {filterInfo ? (\n          <b class=\"status-filtered-badge badge-meta\" title={filterTitleStr}>\n            <span>Filtered</span>\n            <span>{filterTitleStr}</span>\n          </b>\n        ) : (\n          <span>{statusPeekText}</span>\n        )}\n      </div>\n    </article>\n  );\n}\n\nfunction FilteredStatus({\n  status,\n  filterInfo,\n  instance,\n  containerProps = {},\n  showFollowedTags,\n  quoted,\n}) {\n  const snapStates = useSnapshot(states);\n  const {\n    id: statusID,\n    account: { avatar, avatarStatic, bot, group },\n    createdAt,\n    visibility,\n    reblog,\n  } = status;\n  const isReblog = !!reblog;\n  const filterTitleStr = filterInfo?.titlesStr || '';\n  const createdAtDate = new Date(createdAt);\n  const statusPeekText = statusPeek(status.reblog || status);\n\n  const [showPeek, setShowPeek] = useState(false);\n  const bindLongPressPeek = useLongPress(\n    () => {\n      setShowPeek(true);\n    },\n    {\n      threshold: 600,\n      captureEvent: true,\n      detect: 'touch',\n      cancelOnMovement: 2, // true allows movement of up to 25 pixels\n    },\n  );\n\n  const statusPeekRef = useTruncated();\n  const sKey = statusKey(status.id, instance);\n  const ssKey =\n    statusKey(status.id, instance) +\n    ' ' +\n    (statusKey(reblog?.id, instance) || '');\n\n  const actualStatusID = reblog?.id || statusID;\n  const url = instance\n    ? `/${instance}/s/${actualStatusID}`\n    : `/s/${actualStatusID}`;\n  const isFollowedTags =\n    showFollowedTags && !!snapStates.statusFollowedTags[sKey]?.length;\n\n  return (\n    <div\n      class={\n        quoted\n          ? ''\n          : isReblog\n          ? group\n            ? 'status-group'\n            : 'status-reblog'\n          : isFollowedTags\n          ? 'status-followed-tags'\n          : ''\n      }\n      {...containerProps}\n      // title={statusPeekText}\n      onContextMenu={(e) => {\n        e.preventDefault();\n        setShowPeek(true);\n      }}\n      {...bindLongPressPeek()}\n    >\n      <article\n        data-state-post-id={ssKey}\n        class={`status filtered ${quoted ? 'status-card' : ''}`}\n        tabindex=\"-1\"\n      >\n        <b\n          class=\"status-filtered-badge clickable badge-meta\"\n          title={filterTitleStr}\n          onClick={(e) => {\n            e.preventDefault();\n            setShowPeek(true);\n          }}\n        >\n          <span>Filtered</span>\n          <span>{filterTitleStr}</span>\n        </b>{' '}\n        <Avatar url={avatarStatic || avatar} squircle={bot} />\n        <span class=\"status-filtered-info\">\n          <span class=\"status-filtered-info-1\">\n            <NameText account={status.account} instance={instance} />{' '}\n            <Icon\n              icon={visibilityIconsMap[visibility]}\n              alt={visibilityText[visibility]}\n              size=\"s\"\n            />{' '}\n            {isReblog ? (\n              'boosted'\n            ) : isFollowedTags ? (\n              <span>\n                {snapStates.statusFollowedTags[sKey].slice(0, 3).map((tag) => (\n                  <span key={tag} class=\"status-followed-tag-item\">\n                    #{tag}\n                  </span>\n                ))}\n              </span>\n            ) : (\n              <RelativeTime datetime={createdAtDate} format=\"micro\" />\n            )}\n          </span>\n          <span class=\"status-filtered-info-2\">\n            {isReblog && (\n              <>\n                <Avatar\n                  url={reblog.account.avatarStatic || reblog.account.avatar}\n                  squircle={bot}\n                />{' '}\n              </>\n            )}\n            {statusPeekText}\n          </span>\n        </span>\n      </article>\n      {!!showPeek && (\n        <Modal\n          onClick={(e) => {\n            if (e.target === e.currentTarget) {\n              setShowPeek(false);\n            }\n          }}\n        >\n          <div id=\"filtered-status-peek\" class=\"sheet\">\n            <button\n              type=\"button\"\n              class=\"sheet-close\"\n              onClick={() => setShowPeek(false)}\n            >\n              <Icon icon=\"x\" />\n            </button>\n            <header>\n              <b class=\"status-filtered-badge\">Filtered</b> {filterTitleStr}\n            </header>\n            <main tabIndex=\"-1\">\n              <Link\n                ref={statusPeekRef}\n                class=\"status-link\"\n                to={url}\n                onClick={() => {\n                  setShowPeek(false);\n                }}\n                data-read-more=\"Read more \"\n              >\n                <Status status={status} instance={instance} size=\"s\" readOnly />\n              </Link>\n            </main>\n          </div>\n        </Modal>\n      )}\n    </div>\n  );\n}\n\nconst QuoteStatuses = memo(({ id, instance, level = 0 }) => {\n  if (!id || !instance) return;\n  const snapStates = useSnapshot(states);\n  const sKey = statusKey(id, instance);\n  const quotes = snapStates.statusQuotes[sKey];\n  const uniqueQuotes = quotes?.filter(\n    (q, i, arr) => arr.findIndex((q2) => q2.url === q.url) === i,\n  );\n\n  if (!uniqueQuotes?.length) return;\n  if (level > 2) return;\n\n  return uniqueQuotes.map((q) => {\n    return (\n      <LazyShazam id={q.instance + q.id}>\n        <Link\n          key={q.instance + q.id}\n          to={`${q.instance ? `/${q.instance}` : ''}/s/${q.id}`}\n          class=\"status-card-link\"\n          data-read-more=\"Read more \"\n        >\n          <Status\n            statusID={q.id}\n            instance={q.instance}\n            size=\"s\"\n            quoted={level + 1}\n            enableCommentHint\n          />\n        </Link>\n      </LazyShazam>\n    );\n  });\n});\n\nexport default memo(Status, (oldProps, newProps) => {\n  // Shallow equal all props except 'status'\n  // This will be pure static until status ID changes\n  const { status, ...restOldProps } = oldProps;\n  const { status: newStatus, ...restNewProps } = newProps;\n  return (\n    status?.id === newStatus?.id && shallowEqual(restOldProps, restNewProps)\n  );\n});\n","var IDX=36, HEX='';\nwhile (IDX--) HEX += IDX.toString(36);\n\nexport function uid(len) {\n\tvar str='', num = len || 11;\n\twhile (num--) str += HEX[Math.random() * 36 | 0];\n\treturn str;\n}\n","/**\n * Fuse.js v7.0.0 - Lightweight fuzzy-search (http://fusejs.io)\n *\n * Copyright (c) 2023 Kiro Risk (http://kiro.me)\n * All Rights Reserved. Apache Software License 2.0\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction isArray(value) {\n  return !Array.isArray\n    ? getTag(value) === '[object Array]'\n    : Array.isArray(value)\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/baseToString.js\nconst INFINITY = 1 / 0;\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value\n  }\n  let result = value + '';\n  return result == '0' && 1 / value == -INFINITY ? '-0' : result\n}\n\nfunction toString(value) {\n  return value == null ? '' : baseToString(value)\n}\n\nfunction isString(value) {\n  return typeof value === 'string'\n}\n\nfunction isNumber(value) {\n  return typeof value === 'number'\n}\n\n// Adapted from: https://github.com/lodash/lodash/blob/master/isBoolean.js\nfunction isBoolean(value) {\n  return (\n    value === true ||\n    value === false ||\n    (isObjectLike(value) && getTag(value) == '[object Boolean]')\n  )\n}\n\nfunction isObject(value) {\n  return typeof value === 'object'\n}\n\n// Checks if `value` is object-like.\nfunction isObjectLike(value) {\n  return isObject(value) && value !== null\n}\n\nfunction isDefined(value) {\n  return value !== undefined && value !== null\n}\n\nfunction isBlank(value) {\n  return !value.trim().length\n}\n\n// Gets the `toStringTag` of `value`.\n// Adapted from: https://github.com/lodash/lodash/blob/master/.internal/getTag.js\nfunction getTag(value) {\n  return value == null\n    ? value === undefined\n      ? '[object Undefined]'\n      : '[object Null]'\n    : Object.prototype.toString.call(value)\n}\n\nconst EXTENDED_SEARCH_UNAVAILABLE = 'Extended search is not available';\n\nconst INCORRECT_INDEX_TYPE = \"Incorrect 'index' type\";\n\nconst LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY = (key) =>\n  `Invalid value for key ${key}`;\n\nconst PATTERN_LENGTH_TOO_LARGE = (max) =>\n  `Pattern length exceeds max of ${max}.`;\n\nconst MISSING_KEY_PROPERTY = (name) => `Missing ${name} property in key`;\n\nconst INVALID_KEY_WEIGHT_VALUE = (key) =>\n  `Property 'weight' in key '${key}' must be a positive integer`;\n\nconst hasOwn = Object.prototype.hasOwnProperty;\n\nclass KeyStore {\n  constructor(keys) {\n    this._keys = [];\n    this._keyMap = {};\n\n    let totalWeight = 0;\n\n    keys.forEach((key) => {\n      let obj = createKey(key);\n\n      this._keys.push(obj);\n      this._keyMap[obj.id] = obj;\n\n      totalWeight += obj.weight;\n    });\n\n    // Normalize weights so that their sum is equal to 1\n    this._keys.forEach((key) => {\n      key.weight /= totalWeight;\n    });\n  }\n  get(keyId) {\n    return this._keyMap[keyId]\n  }\n  keys() {\n    return this._keys\n  }\n  toJSON() {\n    return JSON.stringify(this._keys)\n  }\n}\n\nfunction createKey(key) {\n  let path = null;\n  let id = null;\n  let src = null;\n  let weight = 1;\n  let getFn = null;\n\n  if (isString(key) || isArray(key)) {\n    src = key;\n    path = createKeyPath(key);\n    id = createKeyId(key);\n  } else {\n    if (!hasOwn.call(key, 'name')) {\n      throw new Error(MISSING_KEY_PROPERTY('name'))\n    }\n\n    const name = key.name;\n    src = name;\n\n    if (hasOwn.call(key, 'weight')) {\n      weight = key.weight;\n\n      if (weight <= 0) {\n        throw new Error(INVALID_KEY_WEIGHT_VALUE(name))\n      }\n    }\n\n    path = createKeyPath(name);\n    id = createKeyId(name);\n    getFn = key.getFn;\n  }\n\n  return { path, id, weight, src, getFn }\n}\n\nfunction createKeyPath(key) {\n  return isArray(key) ? key : key.split('.')\n}\n\nfunction createKeyId(key) {\n  return isArray(key) ? key.join('.') : key\n}\n\nfunction get(obj, path) {\n  let list = [];\n  let arr = false;\n\n  const deepGet = (obj, path, index) => {\n    if (!isDefined(obj)) {\n      return\n    }\n    if (!path[index]) {\n      // If there's no path left, we've arrived at the object we care about.\n      list.push(obj);\n    } else {\n      let key = path[index];\n\n      const value = obj[key];\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      // If we're at the last value in the path, and if it's a string/number/bool,\n      // add it to the list\n      if (\n        index === path.length - 1 &&\n        (isString(value) || isNumber(value) || isBoolean(value))\n      ) {\n        list.push(toString(value));\n      } else if (isArray(value)) {\n        arr = true;\n        // Search each item in the array.\n        for (let i = 0, len = value.length; i < len; i += 1) {\n          deepGet(value[i], path, index + 1);\n        }\n      } else if (path.length) {\n        // An object. Recurse further.\n        deepGet(value, path, index + 1);\n      }\n    }\n  };\n\n  // Backwards compatibility (since path used to be a string)\n  deepGet(obj, isString(path) ? path.split('.') : path, 0);\n\n  return arr ? list : list[0]\n}\n\nconst MatchOptions = {\n  // Whether the matches should be included in the result set. When `true`, each record in the result\n  // set will include the indices of the matched characters.\n  // These can consequently be used for highlighting purposes.\n  includeMatches: false,\n  // When `true`, the matching function will continue to the end of a search pattern even if\n  // a perfect match has already been located in the string.\n  findAllMatches: false,\n  // Minimum number of characters that must be matched before a result is considered a match\n  minMatchCharLength: 1\n};\n\nconst BasicOptions = {\n  // When `true`, the algorithm continues searching to the end of the input even if a perfect\n  // match is found before the end of the same input.\n  isCaseSensitive: false,\n  // When true, the matching function will continue to the end of a search pattern even if\n  includeScore: false,\n  // List of properties that will be searched. This also supports nested properties.\n  keys: [],\n  // Whether to sort the result list, by score\n  shouldSort: true,\n  // Default sort function: sort by ascending score, ascending index\n  sortFn: (a, b) =>\n    a.score === b.score ? (a.idx < b.idx ? -1 : 1) : a.score < b.score ? -1 : 1\n};\n\nconst FuzzyOptions = {\n  // Approximately where in the text is the pattern expected to be found?\n  location: 0,\n  // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match\n  // (of both letters and location), a threshold of '1.0' would match anything.\n  threshold: 0.6,\n  // Determines how close the match must be to the fuzzy location (specified above).\n  // An exact letter match which is 'distance' characters away from the fuzzy location\n  // would score as a complete mismatch. A distance of '0' requires the match be at\n  // the exact location specified, a threshold of '1000' would require a perfect match\n  // to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.\n  distance: 100\n};\n\nconst AdvancedOptions = {\n  // When `true`, it enables the use of unix-like search commands\n  useExtendedSearch: false,\n  // The get function to use when fetching an object's properties.\n  // The default will search nested paths *ie foo.bar.baz*\n  getFn: get,\n  // When `true`, search will ignore `location` and `distance`, so it won't matter\n  // where in the string the pattern appears.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#fuzziness-score\n  ignoreLocation: false,\n  // When `true`, the calculation for the relevance score (used for sorting) will\n  // ignore the field-length norm.\n  // More info: https://fusejs.io/concepts/scoring-theory.html#field-length-norm\n  ignoreFieldNorm: false,\n  // The weight to determine how much field length norm effects scoring.\n  fieldNormWeight: 1\n};\n\nvar Config = {\n  ...BasicOptions,\n  ...MatchOptions,\n  ...FuzzyOptions,\n  ...AdvancedOptions\n};\n\nconst SPACE = /[^ ]+/g;\n\n// Field-length norm: the shorter the field, the higher the weight.\n// Set to 3 decimals to reduce index size.\nfunction norm(weight = 1, mantissa = 3) {\n  const cache = new Map();\n  const m = Math.pow(10, mantissa);\n\n  return {\n    get(value) {\n      const numTokens = value.match(SPACE).length;\n\n      if (cache.has(numTokens)) {\n        return cache.get(numTokens)\n      }\n\n      // Default function is 1/sqrt(x), weight makes that variable\n      const norm = 1 / Math.pow(numTokens, 0.5 * weight);\n\n      // In place of `toFixed(mantissa)`, for faster computation\n      const n = parseFloat(Math.round(norm * m) / m);\n\n      cache.set(numTokens, n);\n\n      return n\n    },\n    clear() {\n      cache.clear();\n    }\n  }\n}\n\nclass FuseIndex {\n  constructor({\n    getFn = Config.getFn,\n    fieldNormWeight = Config.fieldNormWeight\n  } = {}) {\n    this.norm = norm(fieldNormWeight, 3);\n    this.getFn = getFn;\n    this.isCreated = false;\n\n    this.setIndexRecords();\n  }\n  setSources(docs = []) {\n    this.docs = docs;\n  }\n  setIndexRecords(records = []) {\n    this.records = records;\n  }\n  setKeys(keys = []) {\n    this.keys = keys;\n    this._keysMap = {};\n    keys.forEach((key, idx) => {\n      this._keysMap[key.id] = idx;\n    });\n  }\n  create() {\n    if (this.isCreated || !this.docs.length) {\n      return\n    }\n\n    this.isCreated = true;\n\n    // List is Array<String>\n    if (isString(this.docs[0])) {\n      this.docs.forEach((doc, docIndex) => {\n        this._addString(doc, docIndex);\n      });\n    } else {\n      // List is Array<Object>\n      this.docs.forEach((doc, docIndex) => {\n        this._addObject(doc, docIndex);\n      });\n    }\n\n    this.norm.clear();\n  }\n  // Adds a doc to the end of the index\n  add(doc) {\n    const idx = this.size();\n\n    if (isString(doc)) {\n      this._addString(doc, idx);\n    } else {\n      this._addObject(doc, idx);\n    }\n  }\n  // Removes the doc at the specified index of the index\n  removeAt(idx) {\n    this.records.splice(idx, 1);\n\n    // Change ref index of every subsquent doc\n    for (let i = idx, len = this.size(); i < len; i += 1) {\n      this.records[i].i -= 1;\n    }\n  }\n  getValueForItemAtKeyId(item, keyId) {\n    return item[this._keysMap[keyId]]\n  }\n  size() {\n    return this.records.length\n  }\n  _addString(doc, docIndex) {\n    if (!isDefined(doc) || isBlank(doc)) {\n      return\n    }\n\n    let record = {\n      v: doc,\n      i: docIndex,\n      n: this.norm.get(doc)\n    };\n\n    this.records.push(record);\n  }\n  _addObject(doc, docIndex) {\n    let record = { i: docIndex, $: {} };\n\n    // Iterate over every key (i.e, path), and fetch the value at that key\n    this.keys.forEach((key, keyIndex) => {\n      let value = key.getFn ? key.getFn(doc) : this.getFn(doc, key.path);\n\n      if (!isDefined(value)) {\n        return\n      }\n\n      if (isArray(value)) {\n        let subRecords = [];\n        const stack = [{ nestedArrIndex: -1, value }];\n\n        while (stack.length) {\n          const { nestedArrIndex, value } = stack.pop();\n\n          if (!isDefined(value)) {\n            continue\n          }\n\n          if (isString(value) && !isBlank(value)) {\n            let subRecord = {\n              v: value,\n              i: nestedArrIndex,\n              n: this.norm.get(value)\n            };\n\n            subRecords.push(subRecord);\n          } else if (isArray(value)) {\n            value.forEach((item, k) => {\n              stack.push({\n                nestedArrIndex: k,\n                value: item\n              });\n            });\n          } else ;\n        }\n        record.$[keyIndex] = subRecords;\n      } else if (isString(value) && !isBlank(value)) {\n        let subRecord = {\n          v: value,\n          n: this.norm.get(value)\n        };\n\n        record.$[keyIndex] = subRecord;\n      }\n    });\n\n    this.records.push(record);\n  }\n  toJSON() {\n    return {\n      keys: this.keys,\n      records: this.records\n    }\n  }\n}\n\nfunction createIndex(\n  keys,\n  docs,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys.map(createKey));\n  myIndex.setSources(docs);\n  myIndex.create();\n  return myIndex\n}\n\nfunction parseIndex(\n  data,\n  { getFn = Config.getFn, fieldNormWeight = Config.fieldNormWeight } = {}\n) {\n  const { keys, records } = data;\n  const myIndex = new FuseIndex({ getFn, fieldNormWeight });\n  myIndex.setKeys(keys);\n  myIndex.setIndexRecords(records);\n  return myIndex\n}\n\nfunction computeScore$1(\n  pattern,\n  {\n    errors = 0,\n    currentLocation = 0,\n    expectedLocation = 0,\n    distance = Config.distance,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  const accuracy = errors / pattern.length;\n\n  if (ignoreLocation) {\n    return accuracy\n  }\n\n  const proximity = Math.abs(expectedLocation - currentLocation);\n\n  if (!distance) {\n    // Dodge divide by zero error.\n    return proximity ? 1.0 : accuracy\n  }\n\n  return accuracy + proximity / distance\n}\n\nfunction convertMaskToIndices(\n  matchmask = [],\n  minMatchCharLength = Config.minMatchCharLength\n) {\n  let indices = [];\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (let len = matchmask.length; i < len; i += 1) {\n    let match = matchmask[i];\n    if (match && start === -1) {\n      start = i;\n    } else if (!match && start !== -1) {\n      end = i - 1;\n      if (end - start + 1 >= minMatchCharLength) {\n        indices.push([start, end]);\n      }\n      start = -1;\n    }\n  }\n\n  // (i-1 - start) + 1 => i - start\n  if (matchmask[i - 1] && i - start >= minMatchCharLength) {\n    indices.push([start, i - 1]);\n  }\n\n  return indices\n}\n\n// Machine word size\nconst MAX_BITS = 32;\n\nfunction search(\n  text,\n  pattern,\n  patternAlphabet,\n  {\n    location = Config.location,\n    distance = Config.distance,\n    threshold = Config.threshold,\n    findAllMatches = Config.findAllMatches,\n    minMatchCharLength = Config.minMatchCharLength,\n    includeMatches = Config.includeMatches,\n    ignoreLocation = Config.ignoreLocation\n  } = {}\n) {\n  if (pattern.length > MAX_BITS) {\n    throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS))\n  }\n\n  const patternLen = pattern.length;\n  // Set starting location at beginning text and initialize the alphabet.\n  const textLen = text.length;\n  // Handle the case when location > text.length\n  const expectedLocation = Math.max(0, Math.min(location, textLen));\n  // Highest score beyond which we give up.\n  let currentThreshold = threshold;\n  // Is there a nearby exact match? (speedup)\n  let bestLocation = expectedLocation;\n\n  // Performance: only computer matches when the minMatchCharLength > 1\n  // OR if `includeMatches` is true.\n  const computeMatches = minMatchCharLength > 1 || includeMatches;\n  // A mask of the matches, used for building the indices\n  const matchMask = computeMatches ? Array(textLen) : [];\n\n  let index;\n\n  // Get all exact matches, here for speed up\n  while ((index = text.indexOf(pattern, bestLocation)) > -1) {\n    let score = computeScore$1(pattern, {\n      currentLocation: index,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    currentThreshold = Math.min(score, currentThreshold);\n    bestLocation = index + patternLen;\n\n    if (computeMatches) {\n      let i = 0;\n      while (i < patternLen) {\n        matchMask[index + i] = 1;\n        i += 1;\n      }\n    }\n  }\n\n  // Reset the best location\n  bestLocation = -1;\n\n  let lastBitArr = [];\n  let finalScore = 1;\n  let binMax = patternLen + textLen;\n\n  const mask = 1 << (patternLen - 1);\n\n  for (let i = 0; i < patternLen; i += 1) {\n    // Scan for the best match; each iteration allows for one more error.\n    // Run a binary search to determine how far from the match location we can stray\n    // at this error level.\n    let binMin = 0;\n    let binMid = binMax;\n\n    while (binMin < binMid) {\n      const score = computeScore$1(pattern, {\n        errors: i,\n        currentLocation: expectedLocation + binMid,\n        expectedLocation,\n        distance,\n        ignoreLocation\n      });\n\n      if (score <= currentThreshold) {\n        binMin = binMid;\n      } else {\n        binMax = binMid;\n      }\n\n      binMid = Math.floor((binMax - binMin) / 2 + binMin);\n    }\n\n    // Use the result from this iteration as the maximum for the next.\n    binMax = binMid;\n\n    let start = Math.max(1, expectedLocation - binMid + 1);\n    let finish = findAllMatches\n      ? textLen\n      : Math.min(expectedLocation + binMid, textLen) + patternLen;\n\n    // Initialize the bit array\n    let bitArr = Array(finish + 2);\n\n    bitArr[finish + 1] = (1 << i) - 1;\n\n    for (let j = finish; j >= start; j -= 1) {\n      let currentLocation = j - 1;\n      let charMatch = patternAlphabet[text.charAt(currentLocation)];\n\n      if (computeMatches) {\n        // Speed up: quick bool to int conversion (i.e, `charMatch ? 1 : 0`)\n        matchMask[currentLocation] = +!!charMatch;\n      }\n\n      // First pass: exact match\n      bitArr[j] = ((bitArr[j + 1] << 1) | 1) & charMatch;\n\n      // Subsequent passes: fuzzy match\n      if (i) {\n        bitArr[j] |=\n          ((lastBitArr[j + 1] | lastBitArr[j]) << 1) | 1 | lastBitArr[j + 1];\n      }\n\n      if (bitArr[j] & mask) {\n        finalScore = computeScore$1(pattern, {\n          errors: i,\n          currentLocation,\n          expectedLocation,\n          distance,\n          ignoreLocation\n        });\n\n        // This match will almost certainly be better than any existing match.\n        // But check anyway.\n        if (finalScore <= currentThreshold) {\n          // Indeed it is\n          currentThreshold = finalScore;\n          bestLocation = currentLocation;\n\n          // Already passed `loc`, downhill from here on in.\n          if (bestLocation <= expectedLocation) {\n            break\n          }\n\n          // When passing `bestLocation`, don't exceed our current distance from `expectedLocation`.\n          start = Math.max(1, 2 * expectedLocation - bestLocation);\n        }\n      }\n    }\n\n    // No hope for a (better) match at greater error levels.\n    const score = computeScore$1(pattern, {\n      errors: i + 1,\n      currentLocation: expectedLocation,\n      expectedLocation,\n      distance,\n      ignoreLocation\n    });\n\n    if (score > currentThreshold) {\n      break\n    }\n\n    lastBitArr = bitArr;\n  }\n\n  const result = {\n    isMatch: bestLocation >= 0,\n    // Count exact matches (those with a score of 0) to be \"almost\" exact\n    score: Math.max(0.001, finalScore)\n  };\n\n  if (computeMatches) {\n    const indices = convertMaskToIndices(matchMask, minMatchCharLength);\n    if (!indices.length) {\n      result.isMatch = false;\n    } else if (includeMatches) {\n      result.indices = indices;\n    }\n  }\n\n  return result\n}\n\nfunction createPatternAlphabet(pattern) {\n  let mask = {};\n\n  for (let i = 0, len = pattern.length; i < len; i += 1) {\n    const char = pattern.charAt(i);\n    mask[char] = (mask[char] || 0) | (1 << (len - i - 1));\n  }\n\n  return mask\n}\n\nclass BitapSearch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    this.options = {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreLocation\n    };\n\n    this.pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n\n    this.chunks = [];\n\n    if (!this.pattern.length) {\n      return\n    }\n\n    const addChunk = (pattern, startIndex) => {\n      this.chunks.push({\n        pattern,\n        alphabet: createPatternAlphabet(pattern),\n        startIndex\n      });\n    };\n\n    const len = this.pattern.length;\n\n    if (len > MAX_BITS) {\n      let i = 0;\n      const remainder = len % MAX_BITS;\n      const end = len - remainder;\n\n      while (i < end) {\n        addChunk(this.pattern.substr(i, MAX_BITS), i);\n        i += MAX_BITS;\n      }\n\n      if (remainder) {\n        const startIndex = len - MAX_BITS;\n        addChunk(this.pattern.substr(startIndex), startIndex);\n      }\n    } else {\n      addChunk(this.pattern, 0);\n    }\n  }\n\n  searchIn(text) {\n    const { isCaseSensitive, includeMatches } = this.options;\n\n    if (!isCaseSensitive) {\n      text = text.toLowerCase();\n    }\n\n    // Exact match\n    if (this.pattern === text) {\n      let result = {\n        isMatch: true,\n        score: 0\n      };\n\n      if (includeMatches) {\n        result.indices = [[0, text.length - 1]];\n      }\n\n      return result\n    }\n\n    // Otherwise, use Bitap algorithm\n    const {\n      location,\n      distance,\n      threshold,\n      findAllMatches,\n      minMatchCharLength,\n      ignoreLocation\n    } = this.options;\n\n    let allIndices = [];\n    let totalScore = 0;\n    let hasMatches = false;\n\n    this.chunks.forEach(({ pattern, alphabet, startIndex }) => {\n      const { isMatch, score, indices } = search(text, pattern, alphabet, {\n        location: location + startIndex,\n        distance,\n        threshold,\n        findAllMatches,\n        minMatchCharLength,\n        includeMatches,\n        ignoreLocation\n      });\n\n      if (isMatch) {\n        hasMatches = true;\n      }\n\n      totalScore += score;\n\n      if (isMatch && indices) {\n        allIndices = [...allIndices, ...indices];\n      }\n    });\n\n    let result = {\n      isMatch: hasMatches,\n      score: hasMatches ? totalScore / this.chunks.length : 1\n    };\n\n    if (hasMatches && includeMatches) {\n      result.indices = allIndices;\n    }\n\n    return result\n  }\n}\n\nclass BaseMatch {\n  constructor(pattern) {\n    this.pattern = pattern;\n  }\n  static isMultiMatch(pattern) {\n    return getMatch(pattern, this.multiRegex)\n  }\n  static isSingleMatch(pattern) {\n    return getMatch(pattern, this.singleRegex)\n  }\n  search(/*text*/) {}\n}\n\nfunction getMatch(pattern, exp) {\n  const matches = pattern.match(exp);\n  return matches ? matches[1] : null\n}\n\n// Token: 'file\n\nclass ExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'exact'\n  }\n  static get multiRegex() {\n    return /^=\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^=(.*)$/\n  }\n  search(text) {\n    const isMatch = text === this.pattern;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !fire\n\nclass InverseExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!(.*)$/\n  }\n  search(text) {\n    const index = text.indexOf(this.pattern);\n    const isMatch = index === -1;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: ^file\n\nclass PrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'prefix-exact'\n  }\n  static get multiRegex() {\n    return /^\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, this.pattern.length - 1]\n    }\n  }\n}\n\n// Token: !^fire\n\nclass InversePrefixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-prefix-exact'\n  }\n  static get multiRegex() {\n    return /^!\\^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^!\\^(.*)$/\n  }\n  search(text) {\n    const isMatch = !text.startsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\n// Token: .file$\n\nclass SuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'suffix-exact'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = text.endsWith(this.pattern);\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [text.length - this.pattern.length, text.length - 1]\n    }\n  }\n}\n\n// Token: !.file$\n\nclass InverseSuffixExactMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'inverse-suffix-exact'\n  }\n  static get multiRegex() {\n    return /^!\"(.*)\"\\$$/\n  }\n  static get singleRegex() {\n    return /^!(.*)\\$$/\n  }\n  search(text) {\n    const isMatch = !text.endsWith(this.pattern);\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices: [0, text.length - 1]\n    }\n  }\n}\n\nclass FuzzyMatch extends BaseMatch {\n  constructor(\n    pattern,\n    {\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance,\n      includeMatches = Config.includeMatches,\n      findAllMatches = Config.findAllMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      isCaseSensitive = Config.isCaseSensitive,\n      ignoreLocation = Config.ignoreLocation\n    } = {}\n  ) {\n    super(pattern);\n    this._bitapSearch = new BitapSearch(pattern, {\n      location,\n      threshold,\n      distance,\n      includeMatches,\n      findAllMatches,\n      minMatchCharLength,\n      isCaseSensitive,\n      ignoreLocation\n    });\n  }\n  static get type() {\n    return 'fuzzy'\n  }\n  static get multiRegex() {\n    return /^\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^(.*)$/\n  }\n  search(text) {\n    return this._bitapSearch.searchIn(text)\n  }\n}\n\n// Token: 'file\n\nclass IncludeMatch extends BaseMatch {\n  constructor(pattern) {\n    super(pattern);\n  }\n  static get type() {\n    return 'include'\n  }\n  static get multiRegex() {\n    return /^'\"(.*)\"$/\n  }\n  static get singleRegex() {\n    return /^'(.*)$/\n  }\n  search(text) {\n    let location = 0;\n    let index;\n\n    const indices = [];\n    const patternLen = this.pattern.length;\n\n    // Get all exact matches\n    while ((index = text.indexOf(this.pattern, location)) > -1) {\n      location = index + patternLen;\n      indices.push([index, location - 1]);\n    }\n\n    const isMatch = !!indices.length;\n\n    return {\n      isMatch,\n      score: isMatch ? 0 : 1,\n      indices\n    }\n  }\n}\n\n// Order is important. DO NOT CHANGE.\nconst searchers = [\n  ExactMatch,\n  IncludeMatch,\n  PrefixExactMatch,\n  InversePrefixExactMatch,\n  InverseSuffixExactMatch,\n  SuffixExactMatch,\n  InverseExactMatch,\n  FuzzyMatch\n];\n\nconst searchersLen = searchers.length;\n\n// Regex to split by spaces, but keep anything in quotes together\nconst SPACE_RE = / +(?=(?:[^\\\"]*\\\"[^\\\"]*\\\")*[^\\\"]*$)/;\nconst OR_TOKEN = '|';\n\n// Return a 2D array representation of the query, for simpler parsing.\n// Example:\n// \"^core go$ | rb$ | py$ xy$\" => [[\"^core\", \"go$\"], [\"rb$\"], [\"py$\", \"xy$\"]]\nfunction parseQuery(pattern, options = {}) {\n  return pattern.split(OR_TOKEN).map((item) => {\n    let query = item\n      .trim()\n      .split(SPACE_RE)\n      .filter((item) => item && !!item.trim());\n\n    let results = [];\n    for (let i = 0, len = query.length; i < len; i += 1) {\n      const queryItem = query[i];\n\n      // 1. Handle multiple query match (i.e, once that are quoted, like `\"hello world\"`)\n      let found = false;\n      let idx = -1;\n      while (!found && ++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isMultiMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          found = true;\n        }\n      }\n\n      if (found) {\n        continue\n      }\n\n      // 2. Handle single query matches (i.e, once that are *not* quoted)\n      idx = -1;\n      while (++idx < searchersLen) {\n        const searcher = searchers[idx];\n        let token = searcher.isSingleMatch(queryItem);\n        if (token) {\n          results.push(new searcher(token, options));\n          break\n        }\n      }\n    }\n\n    return results\n  })\n}\n\n// These extended matchers can return an array of matches, as opposed\n// to a singl match\nconst MultiMatchSet = new Set([FuzzyMatch.type, IncludeMatch.type]);\n\n/**\n * Command-like searching\n * ======================\n *\n * Given multiple search terms delimited by spaces.e.g. `^jscript .python$ ruby !java`,\n * search in a given text.\n *\n * Search syntax:\n *\n * | Token       | Match type                 | Description                            |\n * | ----------- | -------------------------- | -------------------------------------- |\n * | `jscript`   | fuzzy-match                | Items that fuzzy match `jscript`       |\n * | `=scheme`   | exact-match                | Items that are `scheme`                |\n * | `'python`   | include-match              | Items that include `python`            |\n * | `!ruby`     | inverse-exact-match        | Items that do not include `ruby`       |\n * | `^java`     | prefix-exact-match         | Items that start with `java`           |\n * | `!^earlang` | inverse-prefix-exact-match | Items that do not start with `earlang` |\n * | `.js$`      | suffix-exact-match         | Items that end with `.js`              |\n * | `!.go$`     | inverse-suffix-exact-match | Items that do not end with `.go`       |\n *\n * A single pipe character acts as an OR operator. For example, the following\n * query matches entries that start with `core` and end with either`go`, `rb`,\n * or`py`.\n *\n * ```\n * ^core go$ | rb$ | py$\n * ```\n */\nclass ExtendedSearch {\n  constructor(\n    pattern,\n    {\n      isCaseSensitive = Config.isCaseSensitive,\n      includeMatches = Config.includeMatches,\n      minMatchCharLength = Config.minMatchCharLength,\n      ignoreLocation = Config.ignoreLocation,\n      findAllMatches = Config.findAllMatches,\n      location = Config.location,\n      threshold = Config.threshold,\n      distance = Config.distance\n    } = {}\n  ) {\n    this.query = null;\n    this.options = {\n      isCaseSensitive,\n      includeMatches,\n      minMatchCharLength,\n      findAllMatches,\n      ignoreLocation,\n      location,\n      threshold,\n      distance\n    };\n\n    this.pattern = isCaseSensitive ? pattern : pattern.toLowerCase();\n    this.query = parseQuery(this.pattern, this.options);\n  }\n\n  static condition(_, options) {\n    return options.useExtendedSearch\n  }\n\n  searchIn(text) {\n    const query = this.query;\n\n    if (!query) {\n      return {\n        isMatch: false,\n        score: 1\n      }\n    }\n\n    const { includeMatches, isCaseSensitive } = this.options;\n\n    text = isCaseSensitive ? text : text.toLowerCase();\n\n    let numMatches = 0;\n    let allIndices = [];\n    let totalScore = 0;\n\n    // ORs\n    for (let i = 0, qLen = query.length; i < qLen; i += 1) {\n      const searchers = query[i];\n\n      // Reset indices\n      allIndices.length = 0;\n      numMatches = 0;\n\n      // ANDs\n      for (let j = 0, pLen = searchers.length; j < pLen; j += 1) {\n        const searcher = searchers[j];\n        const { isMatch, indices, score } = searcher.search(text);\n\n        if (isMatch) {\n          numMatches += 1;\n          totalScore += score;\n          if (includeMatches) {\n            const type = searcher.constructor.type;\n            if (MultiMatchSet.has(type)) {\n              allIndices = [...allIndices, ...indices];\n            } else {\n              allIndices.push(indices);\n            }\n          }\n        } else {\n          totalScore = 0;\n          numMatches = 0;\n          allIndices.length = 0;\n          break\n        }\n      }\n\n      // OR condition, so if TRUE, return\n      if (numMatches) {\n        let result = {\n          isMatch: true,\n          score: totalScore / numMatches\n        };\n\n        if (includeMatches) {\n          result.indices = allIndices;\n        }\n\n        return result\n      }\n    }\n\n    // Nothing was matched\n    return {\n      isMatch: false,\n      score: 1\n    }\n  }\n}\n\nconst registeredSearchers = [];\n\nfunction register(...args) {\n  registeredSearchers.push(...args);\n}\n\nfunction createSearcher(pattern, options) {\n  for (let i = 0, len = registeredSearchers.length; i < len; i += 1) {\n    let searcherClass = registeredSearchers[i];\n    if (searcherClass.condition(pattern, options)) {\n      return new searcherClass(pattern, options)\n    }\n  }\n\n  return new BitapSearch(pattern, options)\n}\n\nconst LogicalOperator = {\n  AND: '$and',\n  OR: '$or'\n};\n\nconst KeyType = {\n  PATH: '$path',\n  PATTERN: '$val'\n};\n\nconst isExpression = (query) =>\n  !!(query[LogicalOperator.AND] || query[LogicalOperator.OR]);\n\nconst isPath = (query) => !!query[KeyType.PATH];\n\nconst isLeaf = (query) =>\n  !isArray(query) && isObject(query) && !isExpression(query);\n\nconst convertToExplicit = (query) => ({\n  [LogicalOperator.AND]: Object.keys(query).map((key) => ({\n    [key]: query[key]\n  }))\n});\n\n// When `auto` is `true`, the parse function will infer and initialize and add\n// the appropriate `Searcher` instance\nfunction parse(query, options, { auto = true } = {}) {\n  const next = (query) => {\n    let keys = Object.keys(query);\n\n    const isQueryPath = isPath(query);\n\n    if (!isQueryPath && keys.length > 1 && !isExpression(query)) {\n      return next(convertToExplicit(query))\n    }\n\n    if (isLeaf(query)) {\n      const key = isQueryPath ? query[KeyType.PATH] : keys[0];\n\n      const pattern = isQueryPath ? query[KeyType.PATTERN] : query[key];\n\n      if (!isString(pattern)) {\n        throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(key))\n      }\n\n      const obj = {\n        keyId: createKeyId(key),\n        pattern\n      };\n\n      if (auto) {\n        obj.searcher = createSearcher(pattern, options);\n      }\n\n      return obj\n    }\n\n    let node = {\n      children: [],\n      operator: keys[0]\n    };\n\n    keys.forEach((key) => {\n      const value = query[key];\n\n      if (isArray(value)) {\n        value.forEach((item) => {\n          node.children.push(next(item));\n        });\n      }\n    });\n\n    return node\n  };\n\n  if (!isExpression(query)) {\n    query = convertToExplicit(query);\n  }\n\n  return next(query)\n}\n\n// Practical scoring function\nfunction computeScore(\n  results,\n  { ignoreFieldNorm = Config.ignoreFieldNorm }\n) {\n  results.forEach((result) => {\n    let totalScore = 1;\n\n    result.matches.forEach(({ key, norm, score }) => {\n      const weight = key ? key.weight : null;\n\n      totalScore *= Math.pow(\n        score === 0 && weight ? Number.EPSILON : score,\n        (weight || 1) * (ignoreFieldNorm ? 1 : norm)\n      );\n    });\n\n    result.score = totalScore;\n  });\n}\n\nfunction transformMatches(result, data) {\n  const matches = result.matches;\n  data.matches = [];\n\n  if (!isDefined(matches)) {\n    return\n  }\n\n  matches.forEach((match) => {\n    if (!isDefined(match.indices) || !match.indices.length) {\n      return\n    }\n\n    const { indices, value } = match;\n\n    let obj = {\n      indices,\n      value\n    };\n\n    if (match.key) {\n      obj.key = match.key.src;\n    }\n\n    if (match.idx > -1) {\n      obj.refIndex = match.idx;\n    }\n\n    data.matches.push(obj);\n  });\n}\n\nfunction transformScore(result, data) {\n  data.score = result.score;\n}\n\nfunction format(\n  results,\n  docs,\n  {\n    includeMatches = Config.includeMatches,\n    includeScore = Config.includeScore\n  } = {}\n) {\n  const transformers = [];\n\n  if (includeMatches) transformers.push(transformMatches);\n  if (includeScore) transformers.push(transformScore);\n\n  return results.map((result) => {\n    const { idx } = result;\n\n    const data = {\n      item: docs[idx],\n      refIndex: idx\n    };\n\n    if (transformers.length) {\n      transformers.forEach((transformer) => {\n        transformer(result, data);\n      });\n    }\n\n    return data\n  })\n}\n\nclass Fuse {\n  constructor(docs, options = {}, index) {\n    this.options = { ...Config, ...options };\n\n    if (\n      this.options.useExtendedSearch &&\n      !true\n    ) {\n      throw new Error(EXTENDED_SEARCH_UNAVAILABLE)\n    }\n\n    this._keyStore = new KeyStore(this.options.keys);\n\n    this.setCollection(docs, index);\n  }\n\n  setCollection(docs, index) {\n    this._docs = docs;\n\n    if (index && !(index instanceof FuseIndex)) {\n      throw new Error(INCORRECT_INDEX_TYPE)\n    }\n\n    this._myIndex =\n      index ||\n      createIndex(this.options.keys, this._docs, {\n        getFn: this.options.getFn,\n        fieldNormWeight: this.options.fieldNormWeight\n      });\n  }\n\n  add(doc) {\n    if (!isDefined(doc)) {\n      return\n    }\n\n    this._docs.push(doc);\n    this._myIndex.add(doc);\n  }\n\n  remove(predicate = (/* doc, idx */) => false) {\n    const results = [];\n\n    for (let i = 0, len = this._docs.length; i < len; i += 1) {\n      const doc = this._docs[i];\n      if (predicate(doc, i)) {\n        this.removeAt(i);\n        i -= 1;\n        len -= 1;\n\n        results.push(doc);\n      }\n    }\n\n    return results\n  }\n\n  removeAt(idx) {\n    this._docs.splice(idx, 1);\n    this._myIndex.removeAt(idx);\n  }\n\n  getIndex() {\n    return this._myIndex\n  }\n\n  search(query, { limit = -1 } = {}) {\n    const {\n      includeMatches,\n      includeScore,\n      shouldSort,\n      sortFn,\n      ignoreFieldNorm\n    } = this.options;\n\n    let results = isString(query)\n      ? isString(this._docs[0])\n        ? this._searchStringList(query)\n        : this._searchObjectList(query)\n      : this._searchLogical(query);\n\n    computeScore(results, { ignoreFieldNorm });\n\n    if (shouldSort) {\n      results.sort(sortFn);\n    }\n\n    if (isNumber(limit) && limit > -1) {\n      results = results.slice(0, limit);\n    }\n\n    return format(results, this._docs, {\n      includeMatches,\n      includeScore\n    })\n  }\n\n  _searchStringList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { records } = this._myIndex;\n    const results = [];\n\n    // Iterate over every string in the index\n    records.forEach(({ v: text, i: idx, n: norm }) => {\n      if (!isDefined(text)) {\n        return\n      }\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        results.push({\n          item: text,\n          idx,\n          matches: [{ score, value: text, norm, indices }]\n        });\n      }\n    });\n\n    return results\n  }\n\n  _searchLogical(query) {\n\n    const expression = parse(query, this.options);\n\n    const evaluate = (node, item, idx) => {\n      if (!node.children) {\n        const { keyId, searcher } = node;\n\n        const matches = this._findMatches({\n          key: this._keyStore.get(keyId),\n          value: this._myIndex.getValueForItemAtKeyId(item, keyId),\n          searcher\n        });\n\n        if (matches && matches.length) {\n          return [\n            {\n              idx,\n              item,\n              matches\n            }\n          ]\n        }\n\n        return []\n      }\n\n      const res = [];\n      for (let i = 0, len = node.children.length; i < len; i += 1) {\n        const child = node.children[i];\n        const result = evaluate(child, item, idx);\n        if (result.length) {\n          res.push(...result);\n        } else if (node.operator === LogicalOperator.AND) {\n          return []\n        }\n      }\n      return res\n    };\n\n    const records = this._myIndex.records;\n    const resultMap = {};\n    const results = [];\n\n    records.forEach(({ $: item, i: idx }) => {\n      if (isDefined(item)) {\n        let expResults = evaluate(expression, item, idx);\n\n        if (expResults.length) {\n          // Dedupe when adding\n          if (!resultMap[idx]) {\n            resultMap[idx] = { idx, item, matches: [] };\n            results.push(resultMap[idx]);\n          }\n          expResults.forEach(({ matches }) => {\n            resultMap[idx].matches.push(...matches);\n          });\n        }\n      }\n    });\n\n    return results\n  }\n\n  _searchObjectList(query) {\n    const searcher = createSearcher(query, this.options);\n    const { keys, records } = this._myIndex;\n    const results = [];\n\n    // List is Array<Object>\n    records.forEach(({ $: item, i: idx }) => {\n      if (!isDefined(item)) {\n        return\n      }\n\n      let matches = [];\n\n      // Iterate over every key (i.e, path), and fetch the value at that key\n      keys.forEach((key, keyIndex) => {\n        matches.push(\n          ...this._findMatches({\n            key,\n            value: item[keyIndex],\n            searcher\n          })\n        );\n      });\n\n      if (matches.length) {\n        results.push({\n          idx,\n          item,\n          matches\n        });\n      }\n    });\n\n    return results\n  }\n  _findMatches({ key, value, searcher }) {\n    if (!isDefined(value)) {\n      return []\n    }\n\n    let matches = [];\n\n    if (isArray(value)) {\n      value.forEach(({ v: text, i: idx, n: norm }) => {\n        if (!isDefined(text)) {\n          return\n        }\n\n        const { isMatch, score, indices } = searcher.searchIn(text);\n\n        if (isMatch) {\n          matches.push({\n            score,\n            key,\n            value: text,\n            idx,\n            norm,\n            indices\n          });\n        }\n      });\n    } else {\n      const { v: text, n: norm } = value;\n\n      const { isMatch, score, indices } = searcher.searchIn(text);\n\n      if (isMatch) {\n        matches.push({ score, key, value: text, norm, indices });\n      }\n    }\n\n    return matches\n  }\n}\n\nFuse.version = '7.0.0';\nFuse.createIndex = createIndex;\nFuse.parseIndex = parseIndex;\nFuse.config = Config;\n\n{\n  Fuse.parseQuery = parse;\n}\n\n{\n  register(ExtendedSearch);\n}\n\nexport { Fuse as default };\n"],"file":"assets/fuse-2DLCpdqb.js"}