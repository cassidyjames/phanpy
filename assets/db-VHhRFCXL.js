function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{B as To,F as ne,_ as Ee,a as e,Q as ko,p as X,u as Ne,a0 as Lo,r as wo,N as Ao,h as $o,a1 as Io,w as ct,g as $,a2 as So,a3 as Se,a4 as Po,a5 as Ro,y as Do,q as ue,a6 as Co,A as Yt,a7 as xo,a8 as Mo,f as Q,a9 as Oo,S as Vo,aa as Uo,ab as No,o as Un,ac as Ho,x as Jt,ad as In,m as zo,V as Bo,z as Fo,b as lt,P as Nn,M as Qe,J as Hn,C as jo,ae as qo,af as Ko,ag as Wo,ah as Go,ai as Yo,aj as Xo,ak as Zo,al as Qo,am as Jo,an as ea,ao as ta,ap as na}from"./vendor-YNBWu-Mz.js";import{_ as m,s as P,q as Ce,c as Lt,p as en,L as zn,a as Sn,d as Le,b as ke,h as Bn,r as oa,v as aa,i as ra}from"./useTitle-3DvqVLcR.js";window._showToast=ie;function ie(t){typeof t=="string"&&(t={text:t});const{onClick:n,delay:o,...i}=t,r=To({className:`${n||t.destination?"shiny-pill":""}`,gravity:"bottom",position:"center",...i,onClick:()=>{n==null||n(r)}});return o?setTimeout(()=>{r.showToast()},o):r.showToast(),r}function vr(t,n,o,i){const r=ne(t);Ee(()=>{r.current=t},[t,o]),Ee(()=>{!i||n===null||n===!1||r.current()},[i]),Ee(()=>{if(n===null||n===!1)return;const l=setInterval(()=>r.current(),n);return()=>clearInterval(l)},[n])}function ia(t){const n=new URL("/compose/",window.location),{width:o,height:i}=window.screen,r=Math.max(0,(o-600)/2),s=Math.max(0,(i-450)/2),l=Math.min(o,600),c=Math.min(i,450),d=(t==null?void 0:t.uid)||Math.random(),f=window.open(n,"compose"+d,`width=${l},height=${c},left=${r},top=${s}`);return f?f.__COMPOSE__=t:alert("Looks like your browser is blocking popups."),f}const Fn={x:()=>m(()=>import("./icons/close-line-YTE7hIJE.js"),__vite__mapDeps([]),import.meta.url),heart:()=>m(()=>import("./icons/heart-line-VwvWYh8h.js"),__vite__mapDeps([]),import.meta.url),bookmark:()=>m(()=>import("./icons/bookmark-line-D6jQ7QFs.js"),__vite__mapDeps([]),import.meta.url),"check-circle":()=>m(()=>import("./icons/check-circle-line-sE41WGxF.js"),__vite__mapDeps([]),import.meta.url),"x-circle":()=>m(()=>import("./icons/close-circle-line-qd3g541O.js"),__vite__mapDeps([]),import.meta.url),transfer:()=>m(()=>import("./icons/transfer-4-line-Q9QJoxz3.js"),__vite__mapDeps([]),import.meta.url),rocket:()=>m(()=>import("./icons/rocket-line-rZbVYYCZ.js"),__vite__mapDeps([]),import.meta.url),"arrow-left":()=>m(()=>import("./icons/arrow-left-line-_YC6-XGG.js"),__vite__mapDeps([]),import.meta.url),"arrow-right":()=>m(()=>import("./icons/arrow-right-line-PypiEqpu.js"),__vite__mapDeps([]),import.meta.url),"arrow-up":()=>m(()=>import("./icons/arrow-up-line-fcuKqhVE.js"),__vite__mapDeps([]),import.meta.url),"arrow-down":()=>m(()=>import("./icons/arrow-down-line-0TRJUP_K.js"),__vite__mapDeps([]),import.meta.url),earth:()=>m(()=>import("./icons/earth-line-t1Um8wpQ.js"),__vite__mapDeps([]),import.meta.url),lock:()=>m(()=>import("./icons/lock-line-0jNHqZpm.js"),__vite__mapDeps([]),import.meta.url),unlock:()=>m(()=>import("./icons/unlock-line-w3piJMVb.js"),__vite__mapDeps([]),import.meta.url),"eye-close":()=>m(()=>import("./icons/eye-close-line-lBiePPv9.js"),__vite__mapDeps([]),import.meta.url),"eye-open":()=>m(()=>import("./icons/eye-2-line-vz_Kw-rK.js"),__vite__mapDeps([]),import.meta.url),message:()=>m(()=>import("./icons/mail-line-5XLS6FEo.js"),__vite__mapDeps([]),import.meta.url),comment:()=>m(()=>import("./icons/chat-3-line-F0xcdpXY.js"),__vite__mapDeps([]),import.meta.url),comment2:()=>m(()=>import("./icons/comment-2-line-xEXuT-Ip.js"),__vite__mapDeps([]),import.meta.url),home:()=>m(()=>import("./icons/home-3-line-qJiZhXUH.js"),__vite__mapDeps([]),import.meta.url),notification:()=>m(()=>import("./icons/notification-line-olNPLtgS.js"),__vite__mapDeps([]),import.meta.url),follow:()=>m(()=>import("./icons/user-follow-line-k_GCWTtp.js"),__vite__mapDeps([]),import.meta.url),"follow-add":()=>m(()=>import("./icons/user-add-line-zzW9OULB.js"),__vite__mapDeps([]),import.meta.url),poll:[()=>m(()=>import("./icons/chart-bar-line-5r_DfN2w.js"),__vite__mapDeps([]),import.meta.url),"90deg"],pencil:()=>m(()=>import("./icons/pencil-line-bKXqElLR.js"),__vite__mapDeps([]),import.meta.url),quill:()=>m(()=>import("./icons/quill-pen-line-h_5-FsGz.js"),__vite__mapDeps([]),import.meta.url),at:()=>m(()=>import("./icons/at-line-9vJS_Hnl.js"),__vite__mapDeps([]),import.meta.url),attachment:()=>m(()=>import("./icons/attachment-line-C2PUa1Ke.js"),__vite__mapDeps([]),import.meta.url),upload:()=>m(()=>import("./icons/upload-3-line-Qsjvubiw.js"),__vite__mapDeps([]),import.meta.url),gear:()=>m(()=>import("./icons/settings-3-line-kt4MSpRv.js"),__vite__mapDeps([]),import.meta.url),more:()=>m(()=>import("./icons/more-3-line-wUD-Yhmj.js"),__vite__mapDeps([]),import.meta.url),more2:()=>m(()=>import("./icons/more-1-fill-je1-slyh.js"),__vite__mapDeps([]),import.meta.url),external:()=>m(()=>import("./icons/external-link-line-8nOOkmFu.js"),__vite__mapDeps([]),import.meta.url),popout:()=>m(()=>import("./icons/external-link-line-8nOOkmFu.js"),__vite__mapDeps([]),import.meta.url),popin:[()=>m(()=>import("./icons/external-link-line-8nOOkmFu.js"),__vite__mapDeps([]),import.meta.url),"180deg"],plus:()=>m(()=>import("./icons/add-circle-line--O-MfyNy.js"),__vite__mapDeps([]),import.meta.url),"chevron-left":()=>m(()=>import("./icons/left-line-Jck0yVmC.js"),__vite__mapDeps([]),import.meta.url),"chevron-right":()=>m(()=>import("./icons/right-line-7VBoqLdz.js"),__vite__mapDeps([]),import.meta.url),"chevron-down":()=>m(()=>import("./icons/down-line-9PeS5YhF.js"),__vite__mapDeps([]),import.meta.url),reply:[()=>m(()=>import("./icons/share-forward-line-4jL-2Q4u.js"),__vite__mapDeps([]),import.meta.url),"180deg","horizontal"],thread:()=>m(()=>import("./icons/route-line-2YYy3958.js"),__vite__mapDeps([]),import.meta.url),group:()=>m(()=>import("./icons/group-line-JvhJklhQ.js"),__vite__mapDeps([]),import.meta.url),bot:()=>m(()=>import("./icons/android-2-line-uPwvVubH.js"),__vite__mapDeps([]),import.meta.url),menu:()=>m(()=>import("./icons/rows-4-line-SxGPYpTa.js"),__vite__mapDeps([]),import.meta.url),list:()=>m(()=>import("./icons/list-check-line-qNqx9Mm4.js"),__vite__mapDeps([]),import.meta.url),search:()=>m(()=>import("./icons/search-2-line-G39AynEw.js"),__vite__mapDeps([]),import.meta.url),hashtag:()=>m(()=>import("./icons/hashtag-line-SS3QMu1R.js"),__vite__mapDeps([]),import.meta.url),info:()=>m(()=>import("./icons/information-line-8SOch6cR.js"),__vite__mapDeps([]),import.meta.url),shortcut:()=>m(()=>import("./icons/lightning-line-JMYUlCZM.js"),__vite__mapDeps([]),import.meta.url),user:()=>m(()=>import("./icons/user-4-line-zT_bpOrS.js"),__vite__mapDeps([]),import.meta.url),following:()=>m(()=>import("./icons/walk-line-CF7a5s4t.js"),__vite__mapDeps([]),import.meta.url),pin:()=>m(()=>import("./icons/pin-line-ULyRQyWZ.js"),__vite__mapDeps([]),import.meta.url),unpin:[()=>m(()=>import("./icons/pin-line-ULyRQyWZ.js"),__vite__mapDeps([]),import.meta.url),"180deg"],bus:()=>m(()=>import("./icons/bus-2-line-XuQdDZ_w.js"),__vite__mapDeps([]),import.meta.url),link:()=>m(()=>import("./icons/link-2-line-BUqp1EwN.js"),__vite__mapDeps([]),import.meta.url),history:()=>m(()=>import("./icons/history-line-yoG7K8wL.js"),__vite__mapDeps([]),import.meta.url),share:()=>m(()=>import("./icons/share-2-line-PYo-zN94.js"),__vite__mapDeps([]),import.meta.url),sparkles:()=>m(()=>import("./icons/sparkles-line-wjZWGZ1a.js"),__vite__mapDeps([]),import.meta.url),sparkles2:()=>m(()=>import("./icons/sparkles-2-line-g2FqdZ0R.js"),__vite__mapDeps([]),import.meta.url),exit:()=>m(()=>import("./icons/exit-line-l-1uUgI7.js"),__vite__mapDeps([]),import.meta.url),translate:()=>m(()=>import("./icons/translate-line-HpDtlqS2.js"),__vite__mapDeps([]),import.meta.url),play:()=>m(()=>import("./icons/play-fill-Ey-zv2eL.js"),__vite__mapDeps([]),import.meta.url),trash:()=>m(()=>import("./icons/delete-2-line-pjUduCFs.js"),__vite__mapDeps([]),import.meta.url),mute:()=>m(()=>import("./icons/volume-mute-line-WthBoXru.js"),__vite__mapDeps([]),import.meta.url),unmute:()=>m(()=>import("./icons/volume-line-PZujbN8h.js"),__vite__mapDeps([]),import.meta.url),block:()=>m(()=>import("./icons/forbid-circle-line-3FxopGoP.js"),__vite__mapDeps([]),import.meta.url),unblock:[()=>m(()=>import("./icons/forbid-circle-line-3FxopGoP.js"),__vite__mapDeps([]),import.meta.url),"180deg"],flag:()=>m(()=>import("./icons/flag-1-line-xvcg7G7Q.js"),__vite__mapDeps([]),import.meta.url),time:()=>m(()=>import("./icons/time-line-ThP0kTRr.js"),__vite__mapDeps([]),import.meta.url),refresh:()=>m(()=>import("./icons/refresh-2-line-t42qqclb.js"),__vite__mapDeps([]),import.meta.url),emoji2:()=>m(()=>import("./icons/emoji-2-line--uNVc2IC.js"),__vite__mapDeps([]),import.meta.url),filter:()=>m(()=>import("./icons/filter-2-line-KyjbFYlO.js"),__vite__mapDeps([]),import.meta.url),filters:()=>m(()=>import("./icons/filter-line-1KEfnWDm.js"),__vite__mapDeps([]),import.meta.url),chart:()=>m(()=>import("./icons/chart-line-line-pHaLt6yC.js"),__vite__mapDeps([]),import.meta.url),react:()=>m(()=>import("./icons/react-line-YfZPqZem.js"),__vite__mapDeps([]),import.meta.url),layout4:()=>m(()=>import("./icons/layout-4-line-FOdnyEcZ.js"),__vite__mapDeps([]),import.meta.url),layout5:()=>m(()=>import("./icons/layout-5-line-9Kks7dle.js"),__vite__mapDeps([]),import.meta.url),announce:()=>m(()=>import("./icons/announcement-line-MSlAmDH1.js"),__vite__mapDeps([]),import.meta.url),alert:()=>m(()=>import("./icons/alert-line-zyc6hy8V.js"),__vite__mapDeps([]),import.meta.url),round:()=>m(()=>import("./icons/round-fill-a0rplSmV.js"),__vite__mapDeps([]),import.meta.url),"arrow-up-circle":()=>m(()=>import("./icons/arrow-up-circle-line-e3kZqEZN.js"),__vite__mapDeps([]),import.meta.url),"arrow-down-circle":()=>m(()=>import("./icons/arrow-down-circle-line-mpqFtRtO.js"),__vite__mapDeps([]),import.meta.url),clipboard:()=>m(()=>import("./icons/clipboard-line-9F_Yeo71.js"),__vite__mapDeps([]),import.meta.url),"account-edit":()=>m(()=>import("./icons/user-edit-line-9VnWCh0X.js"),__vite__mapDeps([]),import.meta.url),"account-warning":()=>m(()=>import("./icons/user-warning-line-gL3RGb1N.js"),__vite__mapDeps([]),import.meta.url),keyboard:()=>m(()=>import("./icons/keyboard-line-10AZQcVH.js"),__vite__mapDeps([]),import.meta.url),cloud:()=>m(()=>import("./icons/cloud-line-abe0HgFS.js"),__vite__mapDeps([]),import.meta.url),month:()=>m(()=>import("./icons/calendar-month-line-VoXZVWAe.js"),__vite__mapDeps([]),import.meta.url),media:()=>m(()=>import("./icons/photo-album-line--GdJqjfq.js"),__vite__mapDeps([]),import.meta.url),speak:()=>m(()=>import("./icons/radar-line-ndI8IhOG.js"),__vite__mapDeps([]),import.meta.url),building:()=>m(()=>import("./icons/building-5-line-ew7lu83B.js"),__vite__mapDeps([]),import.meta.url),history2:()=>m(()=>import("./icons/history-2-line-3yIVzoWo.js"),__vite__mapDeps([]),import.meta.url),document:()=>m(()=>import("./icons/document-line--D6ooZg1.js"),__vite__mapDeps([]),import.meta.url),"arrows-right":()=>m(()=>import("./icons/arrows-right-line-HF4HILdT.js"),__vite__mapDeps([]),import.meta.url),code:()=>m(()=>import("./icons/code-line-h4RWLaak.js"),__vite__mapDeps([]),import.meta.url),copy:()=>m(()=>import("./icons/copy-2-line-mPSDKieb.js"),__vite__mapDeps([]),import.meta.url),quote:()=>m(()=>import("./icons/quote-left-line-NQzeELMO.js"),__vite__mapDeps([]),import.meta.url),settings:()=>m(()=>import("./icons/settings-6-line-ZgCBilgF.js"),__vite__mapDeps([]),import.meta.url),"heart-break":()=>m(()=>import("./icons/heart-crack-line-P3DoKfTT.js"),__vite__mapDeps([]),import.meta.url)},sa={s:12,m:16,l:20,xl:24,xxl:32},Pn={},ca=ko(function({width:t,height:n,body:o,rotate:i,flip:r}){return e("svg",{viewBox:`0 0 ${t} ${n}`,dangerouslySetInnerHTML:{__html:o},style:{transform:`${i?`rotate(${i})`:""} ${r?"scaleX(-1)":""}`}})},{isShallowEqual:!0,maxSize:Object.keys(Fn).length,matchesArg:(t,n)=>t.icon===n.icon&&t.body===n.body});function y({icon:t,size:n="m",alt:o,title:i,class:r="",style:s={}}){if(!t)return null;const l=sa[n];let c=Fn[t];if(!c)return null;let d,f;Array.isArray(c)&&([c,d,f]=c);const[h,u]=X(Pn[t]),_=ne(t);return Ee(()=>{h&&_.current===t||((async()=>{const g=await c();u(g.default),Pn[t]=g.default})(),_.current=t)},[t]),e("span",{class:`icon ${r}`,title:i||o,style:{width:`${l}px`,height:`${l}px`,...s},children:h&&e(ca,{icon:t,width:h.width,height:h.height,body:h.body,rotate:d,flip:f})})}function la(t,n=[]){!t||typeof t!="function"||Ee(()=>{const o=new CloseWatcher;return o.addEventListener("close",t),()=>{o.destroy()}},n)}const da=window.CloseWatcher?la:()=>{},ua=document.getElementById("modal-container");function Xt({children:t,onClose:n,onClick:o,class:i}){if(!t)return null;const r=ne();Ee(()=>{let d=setTimeout(()=>{var h;const f=(h=r.current)==null?void 0:h.querySelector('[tabindex="-1"]');f&&f.focus()},100);return()=>clearTimeout(d)},[]);const s=window.CloseWatcher,l=Ne("esc",()=>{setTimeout(()=>{n==null||n()},0)},{enabled:!s&&!!n,keydown:!1,keyup:!0},[n]);da(n,[n]);const c=e("div",{ref:d=>{var f;r.current=d,l.current=((f=d==null?void 0:d.querySelector)==null?void 0:f.call(d,'[tabindex="-1"]'))||d},className:i,onClick:d=>{o==null||o(d),d.target===d.currentTarget&&(n==null||n(d))},tabIndex:"-1",onFocus:d=>{var f,h;try{if(d.target===d.currentTarget){const u=(f=r.current)==null?void 0:f.querySelector('[tabindex="-1"]'),_=!!u&&((h=getComputedStyle(u))==null?void 0:h.pointerEvents)!=="none";u&&_&&u.focus()}}catch{}},children:t});return Lo(c,ua)}const He=Ao((t,n)=>{let o;try{o=wo()}catch{}let i=(location.hash||"").replace(/^#/,"").trim();i===""&&(i="/");const{to:r,...s}=t;if(i&&i!=="/"&&i.includes("?"))try{const c=new URL(i,location.origin);if(c.searchParams.size){const d=Array.from(c.searchParams.entries()).map(([f,h])=>`${f}=${encodeURIComponent(h)}`).join("&");i=c.pathname+"?"+d}}catch{}const l=i===r||decodeURIComponent(i)===r;return e("a",{ref:n,href:`#${r}`,...s,class:`${t.class||""} ${l?"is-active":""}`,onClick:c=>{var d,f,h;(f=(d=c.currentTarget)==null?void 0:d.parentNode)!=null&&f.closest("a")&&c.stopPropagation(),o&&(P.prevLocation=o),(h=t.onClick)==null||h.call(t,c)}})}),{locale:ma}=Intl.NumberFormat().resolvedOptions(),Pe=Intl.NumberFormat(ma,{notation:"compact"}).format;function wt({className:t="truncated"}={}){const n=ne(),o=$o(({height:i})=>{if(n.current){const{scrollHeight:r}=n.current;let s=r>i;if(s){const{height:l,maxHeight:c}=getComputedStyle(n.current),d=parseInt(c||l,10);s=r>d}n.current.classList.toggle(t,s)}},300);return Io({ref:n,box:"border-box",onResize:o}),n}const Rn={s:16,m:20,l:24,xl:32,xxl:50,xxxl:64},Je={},tt=window.OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas"),At=tt.getContext("2d",{willReadFrequently:!0});At.imageSmoothingEnabled=!1;function ha({url:t,size:n,alt:o="",squircle:i,...r}){n=Rn[n]||n||Rn.m;const s=ne(),l=/missing\.png$/.test(t);return e("span",{ref:s,class:`avatar ${i?"squircle":""} ${Je[t]?"has-alpha":""}`,style:{width:n,height:n},title:o,...r,children:!!t&&e("img",{src:t,width:n,height:n,alt:o,loading:"lazy",decoding:"async",crossOrigin:Je[t]===void 0&&!l?"anonymous":void 0,onError:c=>{c.target.crossOrigin&&(c.target.crossOrigin=null,c.target.src=t)},onLoad:c=>{s.current&&(s.current.dataset.loaded=!0),Je[t]===void 0&&(l||queueMicrotask(()=>{try{const{width:d,height:f}=c.target;tt.width!==d&&(tt.width=d),tt.height!==f&&(tt.height=f),At.drawImage(c.target,0,0);const h=At.getImageData(0,0,d,f),u=h.data.filter((_,g)=>g%4===3&&_<=128).length/(h.data.length/4)>.1;u&&s.current.classList.add("has-alpha"),Je[t]=u,At.clearRect(0,0,d,f)}catch{Je[t]=!1}}))}})})}const Ae=Ce(ha);function jn({staticUrl:t,alt:n,url:o}){return e("picture",{children:[e("source",{srcset:t,media:"(prefers-reduced-motion: reduce)"}),e("img",{src:o,alt:n,class:"shortcode-emoji emoji",width:"16",height:"16",loading:"lazy",decoding:"async"},n)]})}function pa({text:t,emojis:n}){if(!t)return"";if(!(n!=null&&n.length)||t.indexOf(":")===-1)return t;const o=new RegExp(`:(${n.map(r=>r.shortcode).join("|")}):`,"g");return t.split(o).map(r=>{const s=n.find(l=>l.shortcode===r);if(s){const{url:l,staticUrl:c}=s;return e(jn,{staticUrl:c,alt:r,url:l})}return r})}const it=ct(pa,(t,n)=>{var o,i;return t.text===n.text&&((o=t.emojis)==null?void 0:o.length)===((i=n.emojis)==null?void 0:i.length)}),fa=new Intl.Collator("en",{sensitivity:"base"});function ga({account:t,instance:n,showAvatar:o,showAcct:i,short:r,external:s,onClick:l}){const{acct:c,avatar:d,avatarStatic:f,id:h,url:u,displayName:_,emojis:g,bot:b}=t;let{username:E}=t;const[w,R,k]=c.match(/([^@]+)(@.+)/i)||[,c],v=E.toLowerCase().trim(),p=(_||"").toLowerCase().trim(),D=p.replace(/(\:(\w|\+|\-)+\:)(?=|[\!\.\?]|$)/g,"").replace(/\s+/g,""),U=D.replace(/[^a-z0-9]/gi,"");return!r&&(v===p||v===D||v===U||fa.compare(v,D)===0)&&(E=null),e("a",{class:`name-text ${i?"show-acct":""} ${r?"short":""}`,href:u,target:s?"_blank":null,title:_?`${_} (${k?"":"@"}${c})`:`${k?"":"@"}${c}`,onClick:A=>{if(!s){if(A.preventDefault(),A.stopPropagation(),l)return l(A);P.showAccount={account:t,instance:n}}},children:[o&&e($,{children:[e(Ae,{url:f||d,squircle:b})," "]}),_&&!r?e($,{children:[e("b",{children:e(it,{text:_,emojis:g})}),!i&&E&&e($,{children:[" ",e("i",{children:["@",E]})]})]}):r?e("i",{children:E}):e("b",{children:E}),i&&e($,{children:[e("br",{}),e("i",{children:[k?"":"@",R,!!k&&e("span",{class:"ib",children:k})]})]})]})}const nt=ct(ga,(t,n)=>{const{account:o}=t,{account:i}=n;return(o==null?void 0:o.acct)===(i==null?void 0:i.acct)});Se.extend(So);Se.extend(Po);Se.extend(Ro);const _a=new Intl.DateTimeFormat;function Re({datetime:t,format:n}){if(!t)return null;const[o,i]=Do(d=>d+1,0),r=ue(()=>Se(t),[t]),[s,l,c]=ue(()=>{let d;if(n==="micro"){const f=Se();f.diff(r,"day")<=1||f.year()===r.year()?d=r.twitter():d=_a.format(r.toDate())}return d||(d=r.fromNow()),[d,r.toISOString(),r.format("LLLL")]},[r,n,o]);return Ee(()=>{let d,f;function h(){f=requestAnimationFrame(()=>{i(),u()})}function u(){r.diff(Se(),"minute",!0)<1?d=setTimeout(h,1e4):r.diff(Se(),"hour",!0)<1&&(d=setTimeout(h,6e4))}return u(),()=>{clearTimeout(d),cancelAnimationFrame(f)}},[]),e("time",{datetime:l,title:c,children:s})}function va({children:t}){const n=ne(),[o,i]=X(!1),[r,s]=X(!1),{ref:l}=Co({root:null,trackVisibility:!0,delay:1e3,onChange:c=>{c&&i(!0)},triggerOnce:!0,skip:r||o});return Yt(()=>{if(!n.current)return;n.current.getBoundingClientRect().bottom>0&&s(!0)},[]),r?t:e("div",{ref:n,class:"shazam-container no-animation",hidden:!o,children:e("div",{ref:l,class:"shazam-container-inner",children:t})})}const ba=document.documentElement,kt=getComputedStyle(ba),ya=8;let qn=[0,0,0,0];function Kn(){const t=kt.getPropertyValue("--sai-top"),n=kt.getPropertyValue("--sai-right"),o=kt.getPropertyValue("--sai-bottom"),i=kt.getPropertyValue("--sai-left");qn=[Math.max(0,parseInt(t,10)),Math.max(0,parseInt(n,10)),Math.max(0,parseInt(o,10)),Math.max(0,parseInt(i,10))]}requestAnimationFrame(Kn);function Wn(t=[]){return qn.map((o,i)=>(o||ya)+(t[i]||0)).join(" ")}CSS.supports("top: env(safe-area-inset-top)")&&window.addEventListener("resize",Kn,{passive:!0});function Gn(t){const{containerProps:n,instanceRef:o}=t,i=xo(),r=o!=null&&o.current?o:ne();return e(Mo,{boundingBoxPadding:Wn(),repositionFlag:`${i.width}x${i.height}`,unmountOnClose:!0,...t,instanceRef:r,containerProps:{onClick:s=>{var l,c,d;s.target===s.currentTarget&&((c=(l=r.current)==null?void 0:l.closeMenu)==null||c.call(l)),(d=n==null?void 0:n.onClick)==null||d.call(n,s)},...n}})}function Nt({subMenu:t=!1,confirm:n=!0,confirmLabel:o,menuItemClassName:i,menuFooter:r,menuExtras:s,...l}){const{children:c,onClick:d,...f}=l;if(!n)return t?e(Q,{...l}):d?Oo(c,{onClick:d}):c;const h=t?Vo:Gn,u=ne();return e(h,{instanceRef:u,openTrigger:"clickOnly",direction:"bottom",overflow:"auto",gap:-8,shift:8,menuClassName:"menu-emphasized",...f,menuButton:t?void 0:c,label:t?c:void 0,itemProps:{onPointerMove:_=>{var g,b;_.pointerType==="touch"&&((b=(g=u.current)==null?void 0:g.openMenu)==null||b.call(g))},onPointerLeave:_=>{var g,b;_.pointerType==="touch"&&((b=(g=u.current)==null?void 0:g.openMenu)==null||b.call(g))}},children:[e(Q,{className:i,onClick:d,children:o}),s,r]})}function Ea({poll:t,lang:n,readOnly:o,refresh:i=()=>{},votePoll:r=()=>{}}){const[s,l]=X("default"),{expired:c,expiresAt:d,id:f,multiple:h,options:u,ownVotes:_,voted:g,votersCount:b,votesCount:E,emojis:w}=t,R=!!d&&new Date(d),k=b||E;let v=0;k<=1e3?v=0:k<=1e4?v=1:k<=1e5&&(v=2);const[p,D]=X(!1),U=u.every(A=>A.votesCount!==null);return e("div",{lang:n,dir:"auto",class:`poll ${o?"read-only":""} ${s==="loading"?"loading":""}`,children:[p&&U||g||c?e($,{children:[e("div",{class:"poll-options",children:u.map((A,L)=>{const{title:S,votesCount:C}=A,q=k?(C/k*100).toFixed(v):0,M=C>0&&C===Math.max(...u.map(O=>O.votesCount));return e("div",{class:`poll-option poll-result ${M?"poll-option-leading":""}`,style:{"--percentage":`${q}%`},children:[e("div",{class:"poll-option-title",children:[e("span",{children:e(it,{text:S,emojis:w})}),g&&_.includes(L)&&e($,{children:[" ",e(y,{icon:"check-circle"})]})]}),e("div",{class:"poll-option-votes",title:`${C} vote${C===1?"":"s"}`,children:[q,"%"]})]},`${L}-${S}-${C}`)})}),!c&&!g&&e("button",{class:"poll-vote-button plain2",disabled:s==="loading",onClick:A=>{A.preventDefault(),D(!1)},children:[e(y,{icon:"arrow-left",size:"s"})," Hide results"]})]}):e("form",{onSubmit:async A=>{A.preventDefault();const L=A.target,S=new FormData(L),C=[];S.forEach((q,M)=>{M==="poll"&&C.push(q)}),C.length&&(l("loading"),await r(C),l("default"))},children:[e("div",{class:"poll-options",children:u.map((A,L)=>{const{title:S}=A;return e("div",{class:"poll-option",children:e("label",{class:"poll-label",children:[e("input",{type:h?"checkbox":"radio",name:"poll",value:L,disabled:s==="loading",readOnly:o}),e("span",{class:"poll-option-title",children:e(it,{text:S,emojis:w})})]})})})}),!o&&e("button",{class:"poll-vote-button",type:"submit",disabled:s==="loading",children:"Vote"})]}),e("p",{class:"poll-meta",children:[!c&&!o&&e("button",{type:"button",class:"plain small",disabled:s==="loading",style:{marginLeft:-8},onClick:A=>{A.preventDefault(),l("loading"),(async()=>(await i(),l("default")))()},title:"Refresh",children:e(y,{icon:"refresh",alt:"Refresh"})}),!g&&!c&&!o&&U&&e("button",{type:"button",class:"plain small",disabled:s==="loading",onClick:A=>{A.preventDefault(),D(!p)},title:p?"Hide results":"Show results",children:[e(y,{icon:p?"eye-open":"eye-close",alt:p?"Hide results":"Show results"})," "]}),!c&&!o&&" ",e("span",{title:E,children:Pe(E)})," vote",E===1?"":"s",!!b&&b!==E&&e($,{children:[" ","â€¢ ",e("span",{title:b,children:Pe(b)})," ","voter",b===1?"":"s"]})," ","â€¢ ",c?"Ended":"Ending"," ",!!R&&e(Re,{datetime:R})]})," "]})}function $t(t,n=[]){return t?(!n.length||t.indexOf(":")===-1||n.forEach(o=>{const{shortcode:i,staticUrl:r,url:s}=o;t=t.replace(new RegExp(`:${i}:`,"g"),`<picture><source srcset="${r}" media="(prefers-reduced-motion: reduce)"></source><img class="shortcode-emoji emoji" src="${s}" alt=":${i}:" width="16" height="16" loading="lazy" decoding="async" /></picture>`)}),t):""}const Ve=document.createElement("div"),Ta=["u-url","mention","hashtag"];function ka(t,n={}){const{emojis:o,postEnhanceDOM:i=()=>{}}=n;let r=t;const s=document.createElement("div");s.innerHTML=r;const l=/<a/i.test(r),c=r.includes("```");if(l&&(s.querySelectorAll('a:not([target="_blank"])').forEach(u=>{u.setAttribute("target","_blank")}),s.querySelectorAll("a[class]").forEach(u=>{u.classList.forEach(_=>{Ta.includes(_)||u.classList.remove(_)})})),l&&s.querySelectorAll("a[href]").forEach(h=>{/^https?:\/\//i.test(h.textContent.trim())&&(h.classList.add("has-url-text"),$a(h))}),l){const f=s.querySelectorAll("a[href]"),h=[];f.forEach(u=>{const _=u.innerText.trim(),g=u.querySelector("*");if(/^@[^@]+(@[^@]+)?$/g.test(_)){const[b,E,w]=_.split("@");g||(!h.some(([R])=>R===E)||h.some(([R,k])=>R===E&&k===w)?(u.innerHTML=`@<span>${E}</span>`,h.push([E,w])):u.innerHTML=`@<span>${E}@${w}</span>`),u.classList.add("mention")}/^#[^#]+$/g.test(_)&&(g||(u.innerHTML=`#<span>${_.slice(1)}</span>`),u.classList.add("mention","hashtag"))})}let d;if(r.includes(":")&&(d=zt(s),d.forEach(f=>{let h=f.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");o&&(h=$t(h,o)),Ve.innerHTML=h,f.replaceWith(...Ve.childNodes)})),c&&[...s.querySelectorAll("p")].filter(h=>/^```[^]+```$/g.test(h.innerText.trim())).forEach(h=>{const u=document.createElement("pre");h.querySelectorAll("br").forEach(_=>_.replaceWith(`
`)),u.innerHTML=`<code>${h.innerHTML.trim()}</code>`,h.replaceWith(u)}),c&&[...s.querySelectorAll("p")].filter(u=>/^```/g.test(u.innerText)).forEach(u=>{const _=[u];let g=!1,b=u;for(;b.nextElementSibling;){const E=b.nextElementSibling;if(E&&E.tagName==="P")if(/```$/g.test(E.innerText)){_.push(E),g=!0;break}else _.push(E);else break;b=E}if(g){const E=document.createElement("pre");_.forEach(R=>{R.querySelectorAll("br").forEach(k=>k.replaceWith(`
`))});const w=_.map(R=>R.innerHTML).join(`

`);E.innerHTML=`<code tabindex="0">${w}</code>`,u.replaceWith(E),_.forEach(R=>R.remove())}}),r.includes("`")&&(d=zt(s),d.forEach(f=>{let h=f.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");/`[^`]+`/g.test(h)&&(h=h.replaceAll(/(`[^]+?`)/g,"<code>$1</code>")),Ve.innerHTML=h,f.replaceWith(...Ve.childNodes)})),/twitter\.com/i.test(r)&&(d=zt(s,{rejectFilter:["A"]}),d.forEach(f=>{let h=f.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");/@[a-zA-Z0-9_]+@twitter\.com/g.test(h)&&(h=h.replaceAll(/(@([a-zA-Z0-9_]+)@twitter\.com)/g,'<a href="https://twitter.com/$2" rel="nofollow noopener noreferrer" target="_blank">$1</a>')),Ve.innerHTML=h,f.replaceWith(...Ve.childNodes)})),r.includes("#")){let f=null;const h=[...s.querySelectorAll("p")].filter((u,_)=>{let g=0;for(let b=0;b<u.childNodes.length;b++){const E=u.childNodes[b];if(E.nodeType===Node.TEXT_NODE){if(E.textContent.trim()!=="")return!1}else if(E.tagName!=="BR")if(E.tagName==="A"){const w=E.textContent.trim();if(!w||!w.startsWith("#"))return!1;g++}else return!1}if(g>3||g>1&&f&&_===f+1)return f=_,!0});h!=null&&h.length&&h.forEach(u=>{u.classList.add("hashtag-stuffing"),u.title=u.innerText})}return i&&queueMicrotask(()=>i(s)),r=s.innerHTML,r}const Yn=Ce(ka),La=["STYLE","IMG","VIDEO","AUDIO","AREA","MAP","TRACK","EMBED","IFRAME","OBJECT","PICTURE","PORTAL","SOURCE","SVG","MATH","CANVAS","NOSCRIPT","SCRIPT","INPUT","OPTION","TEXTAREA","SLOT","TEMPLATE"],wa=Object.fromEntries(La.map(t=>[t,!0])),Aa=/^(https?:\/\/(www\.)?|xmpp:)/,Ht=30;function $a(t){var n;if(!(!t||(n=t.querySelector)!=null&&n.call(t,"*")))try{const o=t.innerText.trim(),i=(o.match(Aa)||[])[0]||"";if(!i)return;const r=o.slice(i.length,i.length+Ht),s=o.slice(i.length+Ht),l=o.slice(i.length).length>Ht;t.innerHTML=`<span class="invisible">${i}</span><span class=${l?"ellipsis":""}>${r}</span><span class="invisible">${s}</span>`}catch{}}function zt(t,n={}){var l;const o=[],i=Object.assign({},wa,(l=n.rejectFilter)==null?void 0:l.reduce((c,d)=>(c[d]=!0,c),{})),r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode(c){return i[c.parentNode.nodeName]?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}},!1);let s;for(;s=r.nextNode();)o.push(s);return o}const Xn=Uo();function Ia(t,n){if(!(t!=null&&t.length))return!1;const o=t.filter(s=>{const{filter:l}=s,c=l.context.includes(n);return c?l.expiresAt?new Date(l.expiresAt)>new Date:c:!1});if(!o.length)return!1;if(o.some(s=>s.filter.filterAction==="hide"))return{action:"hide"};if(o.some(s=>s.filter.filterAction==="warn")){const s=o.map(l=>l.filter.title);return{action:"warn",titles:s,titlesStr:s.join(" â€¢ ")}}return!1}const tn=Ce(Ia);function Sa(t,n,o){var l;const{filtered:i}=t;if(!(i!=null&&i.length)||o&&((l=t.account)==null?void 0:l.id)===o)return!0;const s=tn(i,n);return s?s.action!=="hide":!0}function br(t,n){if(!(t!=null&&t.length))return[];if(!n)return t;const o=Lt.session.get("currentAccount");return t.filter(i=>Sa(i,n,o))}const Pa=[{code:"af",name:"Afrikaans"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bho",name:"Bhojpuri"},{code:"bs",name:"Bosnian"},{code:"bg",name:"Bulgarian"},{code:"ca",name:"Catalan"},{code:"ceb",name:"Cebuano"},{code:"ny",name:"Chichewa"},{code:"zh",name:"Chinese"},{code:"zh_HANT",name:"Chinese (Traditional)"},{code:"co",name:"Corsican"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Dhivehi"},{code:"doi",name:"Dogri"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"tl",name:"Filipino"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"fy",name:"Frisian"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek"},{code:"gn",name:"Guarani"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian Creole"},{code:"ha",name:"Hausa"},{code:"haw",name:"Hawaiian"},{code:"iw",name:"Hebrew"},{code:"hi",name:"Hindi"},{code:"hmn",name:"Hmong"},{code:"hu",name:"Hungarian"},{code:"is",name:"Icelandic"},{code:"ig",name:"Igbo"},{code:"ilo",name:"Ilocano"},{code:"id",name:"Indonesian"},{code:"ga",name:"Irish"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"jw",name:"Javanese"},{code:"kn",name:"Kannada"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"rw",name:"Kinyarwanda"},{code:"gom",name:"Konkani"},{code:"ko",name:"Korean"},{code:"kri",name:"Krio"},{code:"ku",name:"Kurdish (Kurmanji)"},{code:"ckb",name:"Kurdish (Sorani)"},{code:"ky",name:"Kyrgyz"},{code:"lo",name:"Lao"},{code:"la",name:"Latin"},{code:"lv",name:"Latvian"},{code:"ln",name:"Lingala"},{code:"lt",name:"Lithuanian"},{code:"lg",name:"Luganda"},{code:"lb",name:"Luxembourgish"},{code:"mk",name:"Macedonian"},{code:"mai",name:"Maithili"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"Maori"},{code:"mr",name:"Marathi"},{code:"mni-Mtei",name:"Meiteilon (Manipuri)"},{code:"lus",name:"Mizo"},{code:"mn",name:"Mongolian"},{code:"my",name:"Myanmar (Burmese)"},{code:"ne",name:"Nepali"},{code:"no",name:"Norwegian"},{code:"or",name:"Odia (Oriya)"},{code:"om",name:"Oromo"},{code:"ps",name:"Pashto"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"pa",name:"Punjabi"},{code:"qu",name:"Quechua"},{code:"ro",name:"Romanian"},{code:"ru",name:"Russian"},{code:"sm",name:"Samoan"},{code:"sa",name:"Sanskrit"},{code:"gd",name:"Scots Gaelic"},{code:"nso",name:"Sepedi"},{code:"sr",name:"Serbian"},{code:"st",name:"Sesotho"},{code:"sn",name:"Shona"},{code:"sd",name:"Sindhi"},{code:"si",name:"Sinhala"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovenian"},{code:"so",name:"Somali"},{code:"es",name:"Spanish"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"sv",name:"Swedish"},{code:"tg",name:"Tajik"},{code:"ta",name:"Tamil"},{code:"tt",name:"Tatar"},{code:"te",name:"Telugu"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"ts",name:"Tsonga"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"},{code:"ak",name:"Twi"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"ug",name:"Uyghur"},{code:"uz",name:"Uzbek"},{code:"vi",name:"Vietnamese"},{code:"cy",name:"Welsh"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"zu",name:"Zulu"}];function Ra(...t){try{return No(...t)}catch{return t[2]||!1}}const Zt=Ce(Ra),Da=[new Intl.DateTimeFormat().resolvedOptions().locale,...navigator.languages],Ca=Zt(Da,Pa.map(t=>t.code.replace("_","-")),"en");function Zn(t=!1){if(t){const{contentTranslationTargetLanguage:n}=P.settings;if(n)return n}return Ca}const et=document.createElement("div");function xa(t){return t?(et.innerHTML=t.replace(/<\/p>/g,`</p>

`).replace(/<\/li>/g,`</li>
`),et.querySelectorAll("br").forEach(n=>{n.replaceWith(`
`)}),et.querySelectorAll(".invisible").forEach(n=>{n.remove()}),et.querySelectorAll(".ellipsis").forEach(n=>{n.append("...")}),et.innerText.replace(/[\r\n]{3,}/g,`

`).trim()):""}const nn=Ce(xa);function Ma(t){const{mentions:n=[],instance:o,previewMode:i,statusURL:r}=t||{};return s=>{var h,u;let{target:l}=s;if(l=l.closest("a"),!l||s.metaKey||s.ctrlKey||s.shiftKey||s.altKey||s.which===2)return;const c=(h=l.previousSibling)==null?void 0:h.textContent,d=c==null?void 0:c.endsWith("@"),f=l.innerText.startsWith("@");if((l.classList.contains("u-url")||l.classList.contains("mention"))&&f||d&&!f){const _=(l.querySelector("span")||l).innerText.trim(),g=_.replace(/^@/,""),b=l.getAttribute("href"),E=n.find(w=>w.url===b)||n.find(w=>w.acct===g||w.username===g);if(E)s.preventDefault(),s.stopPropagation(),P.showAccount={account:E.acct,instance:o};else if(!/^http/i.test(_)){s.preventDefault(),s.stopPropagation();const w=l.getAttribute("href");P.showAccount={account:w,instance:o}}}else if(!i){const _=c==null?void 0:c.endsWith("#");if(l.classList.contains("hashtag")||_){s.preventDefault(),s.stopPropagation();const g=l.innerText.replace(/^#/,"").trim(),b=o?`#/${o}/t/${g}`:`#/t/${g}`;location.hash=b}else(u=P.unfurledLinks[l.href])!=null&&u.url&&r!==l.href&&(s.preventDefault(),s.stopPropagation(),P.prevLocation={pathname:location.hash.replace(/^#/,"")},location.hash=`#${P.unfurledLinks[l.href].url}`)}}}const Bt=document.createElement("div");function Ft(t){return t?(Bt.innerHTML=t,Bt.querySelectorAll(".invisible").forEach(n=>{n.remove()}),Bt.innerText.length):0}const{locale:Oa}=new Intl.DateTimeFormat().resolvedOptions(),Va=t=>{const{dateYear:n,hideTime:o,formatOpts:i}=t||{},r=new Date().getFullYear();return Intl.DateTimeFormat(Oa,{year:n===r?void 0:"numeric",month:"short",day:"numeric",hour:o?void 0:"numeric",minute:o?void 0:"numeric",...i})},Ua=Ce(Va);function st(t,n){return t instanceof Date||(t=new Date(t)),Ua({dateYear:t.getFullYear(),...n}).format(t)}const ot="speechSynthesis"in window;function Dn(t,n){if(ot)try{speechSynthesis.speaking&&speechSynthesis.cancel();const o=new SpeechSynthesisUtterance(t);n&&(o.lang=n),speechSynthesis.speak(o)}catch(o){alert(o)}}function Qn(t){var l;const{spoilerText:n,content:o,poll:i,mediaAttachments:r}=t;let s="";return n!=null&&n.trim()?s+=n:s+=nn(o),s=s.trim(),(l=i==null?void 0:i.options)!=null&&l.length&&(s+=`

ðŸ“Š:
${i.options.map(c=>`${i.multiple?"â–ªï¸":"â€¢"} ${c.title}`).join(`
`)}`),r!=null&&r.length&&(s+=" "+r.map(c=>({image:"ðŸ–¼ï¸",gifv:"ðŸŽžï¸",video:"ðŸ“¹",audio:"ðŸŽµ",unknown:""})[c.type]||"").join("")),s}const Qt={public:"earth",unlisted:"group",private:"lock",direct:"message"};function Cn(t){if(!t)return;let n=Math.floor(t/3600),o=Math.floor(t%3600/60),i=Math.round(t%60);return n===0?`${o}:${i.toString().padStart(2,"0")}`:`${n}:${o.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}const Na=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Ha="ALT",jt=t=>{const{alt:n,lang:o,index:i,...r}=t;return!n||!n.trim()?null:e("button",{type:"button",class:"alt-badge clickable",...r,onClick:s=>{s.stopPropagation(),s.preventDefault(),P.showMediaAlt={alt:n,lang:o}},title:"Media description",children:[Ha,!!i&&e("sup",{children:i})]})},za=140,Ba=280,Jn=Ce(t=>t!=null&&t.length?t.length>za||/[\n\r].*[\n\r]/.test(t.trim()):!1);function Fa({class:t="",media:n,to:o,lang:i,showOriginal:r,autoAnimate:s,showCaption:l,allowLongerCaption:c,altIndex:d,onClick:f=()=>{}}){const{blurhash:h,description:u,meta:_,previewRemoteUrl:g,previewUrl:b,remoteUrl:E,url:w,type:R}=n,{original:k={},small:v,focus:p}=_||{},D=r?k==null?void 0:k.width:v==null?void 0:v.width,U=r?k==null?void 0:k.height:v==null?void 0:v.height,A=r?w:b||w,L=r?E:g||E,S=D>=U?"landscape":"portrait",C=h?Un(h):null,q=ne();let M;if(p){const V=(p.x+1)/2*100,K=(1-p.y)/2*100;M=`${V.toFixed(0)}% ${K.toFixed(0)}%`}const O=ne(),te=Jt(({x:V,y:K,scale:z})=>{const{current:ce}=O;if(ce){const ee=Ho({x:V,y:K,scale:z});z===1?ce.style.removeProperty("transform"):ce.style.setProperty("transform",ee),ce.closest(".media-zoom").style.touchAction=z<=1.01?"pan-x":""}},[]),[re,Z]=X(!1),me={enabled:re,draggableUnZoomed:!1,inertiaFriction:.9,doubleTapZoomOutOnMaxScale:!0,containerProps:{className:"media-zoom",style:{overflow:"visible"}},onUpdate:te},he=ue(()=>o?V=>e(He,{to:o,...V}):"div",[o]),B=L?new URL(L):null,I=R==="unknown"&&B&&/\.(mp4|m4r|m4v|mov|webm)$/i.test(B.pathname),H=R==="unknown"&&B&&/\.(mp3|ogg|wav|m4a|m4p|m4b)$/i.test(B.pathname),W=R==="image"||R==="unknown"&&b&&!I&&!H,fe=ne(),[J,ge]=X(!1);Yt(()=>{if(!W||!r||!fe.current)return;const{offsetWidth:V,offsetHeight:K}=fe.current,z=D<V&&U<K;z&&ge(z)},[D,U]);const _e=window.innerHeight*(S==="portrait"?.45:.33),oe=S==="portrait"?0:160,ve={"--average-color":C&&`rgb(${C.join(",")})`},se=D&&U?{"--width":`${D}px`,"--height":`${U}px`,"--aspectWidth":`${D/U*Math.max(oe,_e)}px`,aspectRatio:`${D} / ${U}`,...ve}:{...ve},ae=Jn(u);let N=!!l&&!r&&!!u&&!ae;c&&!N&&(u==null?void 0:u.length)<=Ba&&(N=!0);const G=N?V=>{const{children:K,...z}=V;return e("figure",{...z,children:[K,e("figcaption",{class:"media-caption",lang:i,dir:"auto",onClick:ce=>{ce.preventDefault(),ce.stopPropagation(),P.showMediaAlt={alt:u,lang:i}},children:u})]})}:$;if(W)return me.containerProps.style.display="inherit",Yt(()=>{Na&&r&&(async()=>{try{await fetch(A,{mode:"no-cors"}),O.current.src=A}catch{}})()},[A]),e(G,{children:e(he,{ref:fe,class:`media media-image ${t}`,onClick:f,"data-orientation":S,"data-has-alt":!N,style:r?{backgroundImage:`url(${b})`,backgroundSize:J?`${D}px ${U}px`:void 0,...ve}:se,children:r?e(In,{...me,children:e("img",{ref:O,src:A,alt:u,width:D,height:U,"data-orientation":S,loading:"eager",decoding:"sync",onLoad:V=>{V.target.closest(".media-image").style.backgroundImage="",V.target.closest(".media-zoom").style.display="",Z(!0)},onError:V=>{const{src:K}=V.target;K===A&&A!==L&&(V.target.src=L)}})}):e($,{children:[e("img",{src:A,alt:N?"":u,width:D,height:U,"data-orientation":S,loading:"lazy",style:{objectPosition:M||"center","--anim-duration":`${Math.min(Math.max(Math.max(D,U)/100,5),120)}s`},onLoad:V=>{V.target.dataset.loaded=!0},onError:V=>{const{src:K}=V.target;K===A&&A!==L&&(V.target.src=L)}}),!N&&e(jt,{alt:u,lang:i,index:d})]})})});if(R==="gifv"||R==="video"||I){const V=k.duration<31,K=R==="gifv"&&V,z=k.duration<61,ce=Cn(k.duration),ee=!r&&!s&&K,le=!r&&s&&K,de=k.duration>5,Te=`
    <video
      src="${w}"
      poster="${b}"
      width="${D}"
      height="${U}"
      data-orientation="${S}"
      preload="auto"
      autoplay
      muted="${K}"
      ${K?"":"controls"}
      playsinline
      loop="${z}"
      ${K?'ondblclick="this.paused ? this.play() : this.pause()"':""}
      ${K&&de?"ontimeupdate=\"this.closest('.media-gif') && this.closest('.media-gif').style.setProperty('--progress', `${~~((this.currentTime / this.duration) * 100)}%`)\"":""}
    ></video>
  `;return e(G,{children:e(he,{class:`media ${t} media-${K?"gif":"video"} ${le?"media-contain":""} ${ee?"media-hover-animate":""}`,"data-orientation":S,"data-formatted-duration":r?void 0:ce,"data-label":K&&!r&&!le?"GIF":"","data-has-alt":!N,style:!r&&se,onClick:F=>{if(ee)try{q.current.pause()}catch{}f(F)},onMouseEnter:()=>{if(ee)try{q.current.play()}catch{}},onMouseLeave:()=>{if(ee)try{q.current.pause()}catch{}},onFocus:()=>{if(ee)try{q.current.play()}catch{}},onBlur:()=>{if(ee)try{q.current.pause()}catch{}},children:[r||le?K&&r?e(In,{...me,enabled:!0,children:e("div",{ref:O,dangerouslySetInnerHTML:{__html:Te}})}):e("div",{class:"video-container",dangerouslySetInnerHTML:{__html:Te}}):K?e("video",{ref:q,src:w,poster:b,width:D,height:U,"data-orientation":S,preload:"auto",playsinline:!0,loop:!0,muted:!0,onTimeUpdate:de?F=>{const{target:pe}=F,It=pe==null?void 0:pe.closest(".media-gif");if(It){const be=pe.currentTime/pe.duration*100;It.style.setProperty("--progress",`${be}%`)}}:void 0}):e($,{children:[e("img",{src:b,alt:N?"":u,width:D,height:U,"data-orientation":S,loading:"lazy"}),e("div",{class:"media-play",children:e(y,{icon:"play",size:"xl"})})]}),!r&&!N&&e(jt,{alt:u,lang:i,index:d})]})})}else if(R==="audio"||H){const V=Cn(k.duration);return e(G,{children:e(he,{class:`media media-audio ${t}`,"data-formatted-duration":r?void 0:V,"data-has-alt":!N,onClick:f,style:!r&&se,children:[r?e("audio",{src:E||w,preload:"none",controls:!0,autoplay:!0}):b?e("img",{src:b,alt:N?"":u,width:D,height:U,"data-orientation":S,loading:"lazy",onError:K=>{var z,ce;try{(ce=(z=K.target)==null?void 0:z.remove)==null||ce.call(z)}catch{}}}):null,!r&&e($,{children:[e("div",{class:"media-play",children:e(y,{icon:"play",size:"xl"})}),!N&&e(jt,{alt:u,lang:i,index:d})]})]})})}}function xn(t){const{className:n,disabled:o,...i}=t;return e(zo,{className:n,disabled:o,children:({ref:r,closeMenu:s})=>e(He,{...i,ref:r,onClick:({detail:l})=>s(l===0?"Enter":void 0)})})}const ja=[{code:"auto",name:"Detect"},{code:"af",name:"Afrikaans"},{code:"sq",name:"Albanian"},{code:"am",name:"Amharic"},{code:"ar",name:"Arabic"},{code:"hy",name:"Armenian"},{code:"as",name:"Assamese"},{code:"ay",name:"Aymara"},{code:"az",name:"Azerbaijani"},{code:"bm",name:"Bambara"},{code:"eu",name:"Basque"},{code:"be",name:"Belarusian"},{code:"bn",name:"Bengali"},{code:"bho",name:"Bhojpuri"},{code:"bs",name:"Bosnian"},{code:"bg",name:"Bulgarian"},{code:"ca",name:"Catalan"},{code:"ceb",name:"Cebuano"},{code:"ny",name:"Chichewa"},{code:"zh",name:"Chinese"},{code:"co",name:"Corsican"},{code:"hr",name:"Croatian"},{code:"cs",name:"Czech"},{code:"da",name:"Danish"},{code:"dv",name:"Dhivehi"},{code:"doi",name:"Dogri"},{code:"nl",name:"Dutch"},{code:"en",name:"English"},{code:"eo",name:"Esperanto"},{code:"et",name:"Estonian"},{code:"ee",name:"Ewe"},{code:"tl",name:"Filipino"},{code:"fi",name:"Finnish"},{code:"fr",name:"French"},{code:"fy",name:"Frisian"},{code:"gl",name:"Galician"},{code:"ka",name:"Georgian"},{code:"de",name:"German"},{code:"el",name:"Greek"},{code:"gn",name:"Guarani"},{code:"gu",name:"Gujarati"},{code:"ht",name:"Haitian Creole"},{code:"ha",name:"Hausa"},{code:"haw",name:"Hawaiian"},{code:"iw",name:"Hebrew"},{code:"hi",name:"Hindi"},{code:"hmn",name:"Hmong"},{code:"hu",name:"Hungarian"},{code:"is",name:"Icelandic"},{code:"ig",name:"Igbo"},{code:"ilo",name:"Ilocano"},{code:"id",name:"Indonesian"},{code:"ga",name:"Irish"},{code:"it",name:"Italian"},{code:"ja",name:"Japanese"},{code:"jw",name:"Javanese"},{code:"kn",name:"Kannada"},{code:"kk",name:"Kazakh"},{code:"km",name:"Khmer"},{code:"rw",name:"Kinyarwanda"},{code:"gom",name:"Konkani"},{code:"ko",name:"Korean"},{code:"kri",name:"Krio"},{code:"ku",name:"Kurdish (Kurmanji)"},{code:"ckb",name:"Kurdish (Sorani)"},{code:"ky",name:"Kyrgyz"},{code:"lo",name:"Lao"},{code:"la",name:"Latin"},{code:"lv",name:"Latvian"},{code:"ln",name:"Lingala"},{code:"lt",name:"Lithuanian"},{code:"lg",name:"Luganda"},{code:"lb",name:"Luxembourgish"},{code:"mk",name:"Macedonian"},{code:"mai",name:"Maithili"},{code:"mg",name:"Malagasy"},{code:"ms",name:"Malay"},{code:"ml",name:"Malayalam"},{code:"mt",name:"Maltese"},{code:"mi",name:"Maori"},{code:"mr",name:"Marathi"},{code:"mni-Mtei",name:"Meiteilon (Manipuri)"},{code:"lus",name:"Mizo"},{code:"mn",name:"Mongolian"},{code:"my",name:"Myanmar (Burmese)"},{code:"ne",name:"Nepali"},{code:"no",name:"Norwegian"},{code:"or",name:"Odia (Oriya)"},{code:"om",name:"Oromo"},{code:"ps",name:"Pashto"},{code:"fa",name:"Persian"},{code:"pl",name:"Polish"},{code:"pt",name:"Portuguese"},{code:"pa",name:"Punjabi"},{code:"qu",name:"Quechua"},{code:"ro",name:"Romanian"},{code:"ru",name:"Russian"},{code:"sm",name:"Samoan"},{code:"sa",name:"Sanskrit"},{code:"gd",name:"Scots Gaelic"},{code:"nso",name:"Sepedi"},{code:"sr",name:"Serbian"},{code:"st",name:"Sesotho"},{code:"sn",name:"Shona"},{code:"sd",name:"Sindhi"},{code:"si",name:"Sinhala"},{code:"sk",name:"Slovak"},{code:"sl",name:"Slovenian"},{code:"so",name:"Somali"},{code:"es",name:"Spanish"},{code:"su",name:"Sundanese"},{code:"sw",name:"Swahili"},{code:"sv",name:"Swedish"},{code:"tg",name:"Tajik"},{code:"ta",name:"Tamil"},{code:"tt",name:"Tatar"},{code:"te",name:"Telugu"},{code:"th",name:"Thai"},{code:"ti",name:"Tigrinya"},{code:"ts",name:"Tsonga"},{code:"tr",name:"Turkish"},{code:"tk",name:"Turkmen"},{code:"ak",name:"Twi"},{code:"uk",name:"Ukrainian"},{code:"ur",name:"Urdu"},{code:"ug",name:"Uyghur"},{code:"uz",name:"Uzbek"},{code:"vi",name:"Vietnamese"},{code:"cy",name:"Welsh"},{code:"xh",name:"Xhosa"},{code:"yi",name:"Yiddish"},{code:"yo",name:"Yoruba"},{code:"zu",name:"Zulu"}];function qt(t){try{return new Intl.DisplayNames(navigator.languages,{type:"language"}).of(t)}catch{return null}}var qa={PHANPY_CLIENT_NAME:"Phanpy",PHANPY_WEBSITE:"https://phanpy.social",PHANPY_LINGVA_INSTANCES:"lingva.phanpy.social lingva.lunar.icu lingva.garudalinux.org translate.plausibility.cloud",PHANPY_PRIVACY_POLICY_URL:"https://github.com/cheeaun/phanpy/blob/main/PRIVACY.MD",VITE_APP_ENV:"production",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{PHANPY_LINGVA_INSTANCES:Mn}=qa,rt=Mn?Mn.split(/\s+/):[],Ka=Bo({limit:1,interval:2e3});let Kt=0;function Wa(t,n,o){return Fo(()=>{let r=rt[Kt];return fetch(`https://${r}/api/v1/${n}/${o}/${encodeURIComponent(t)}`).then(s=>{if(!s.ok)throw new Error(s.statusText);return s.json()}).then(s=>{var l;return{provider:"lingva",content:s.translation,detectedSourceLanguage:(l=s.info)==null?void 0:l.detectedSource,info:s.info}})},{retries:3,onFailedAttempt:r=>{Kt=(Kt+1)%rt.length}})}const eo=1e3*60*60,to=en(Wa,{maxAge:eo}),Ga=en(Ka(to),{maxAge:eo});function Ya({forceTranslate:t,sourceLanguage:n,onTranslate:o,text:i="",mini:r}){const s=Zn(!0),[l,c]=X("default"),[d,f]=X(null),[h,u]=X(null),[_,g]=X(null),b=ne(),E=n?qt(n):null,w=qt(s),R=ne("auto");o||(o=r?Ga:to);const k=async()=>{var v,p;c("loading");try{const{content:D,detectedSourceLanguage:U,provider:A,error:L,...S}=await o(i,R.current,s);if(D){if(U){const C=qt(U);g(C)}if(A==="lingva"){const C=(p=(v=S==null?void 0:S.info)==null?void 0:v.pronunciation)==null?void 0:p.query;C&&f(C)}u(D),c("default"),!r&&D.trim()!==i.trim()&&(b.current.open=!0,b.current.scrollIntoView({behavior:"smooth",block:"nearest"}))}else c("error")}catch{c("error")}};return Ee(()=>{t&&k()},[t]),r?h&&h.trim()!==i.trim()&&_!==w?e("div",{class:"shazam-container",children:e("div",{class:"shazam-container-inner",children:e("div",{class:"status-translation-block-mini",children:[e(y,{icon:"translate",alt:`Auto-translated from ${E}`}),e("output",{lang:s,dir:"auto",title:d||"",children:h})]})})}):null:e("div",{class:"status-translation-block",onClick:v=>{v.preventDefault()},children:e("details",{ref:b,children:[e("summary",{children:e("button",{type:"button",onClick:async v=>{v.preventDefault(),v.stopPropagation(),b.current.open=!b.current.open,l!=="loading"&&(h||k())},children:[e(y,{icon:"translate"})," ",e("span",{children:l==="loading"?"Translatingâ€¦":n&&E&&!_?`Translate from ${E}`:"Translate"})]})}),e("div",{class:"translated-block",children:[e("div",{class:"translation-info insignificant",children:[e("select",{class:"translated-source-select",disabled:l==="loading",onChange:v=>{R.current=v.target.value,k()},children:ja.map(v=>e("option",{value:v.code,children:v.code==="auto"?`Auto (${_??"â€¦"})`:v.name}))})," ",e("span",{children:["â†’ ",w]}),e(zn,{abrupt:!0,hidden:l!=="loading"})]}),l==="error"?e("p",{class:"ui-state",children:"Failed to translate"}):!!h&&e($,{children:[e("output",{class:"translated-content",lang:s,dir:"auto",children:h}),!!d&&e("output",{class:"translated-pronunciation-content",tabIndex:-1,onClick:v=>{v.target.classList.toggle("expand")},children:d})]})]})]})})}const Xa=rt!=null&&rt.length?Ya:()=>null,Za=280,Qa=140;function Ja(t,n){return n.v1.accounts.$select(t).fetch()}const er=en(Ja),at={public:"Public",unlisted:"Unlisted",private:"Followers only",direct:"Private mention"},tr=window.ontouchstart!==void 0&&/iPad|iPhone|iPod/.test(navigator.userAgent),nr=new Intl.RelativeTimeFormat,On=80;function or(t){var n;return(n=t==null?void 0:t.options)!=null&&n.length?`ðŸ“Š:
${t.options.map(o=>`- ${o.title}${o.votesCount>=0?` (${o.votesCount})`:""}`).join(`
`)}`:""}function Wt(t){const{spoilerText:n,content:o,poll:i}=t;return(n?`${n}

`:"")+nn(o)+or(i)}const ar=ct(({post:t,instance:n,previewMode:o})=>{const{content:i,emojis:r,language:s,mentions:l,url:c}=t;return e("div",{lang:s,dir:"auto",class:"inner-content",onClick:Ma({mentions:l,instance:n,previewMode:o,statusURL:c}),dangerouslySetInnerHTML:{__html:Yn(i,{emojis:r,postEnhanceDOM:d=>{d.querySelectorAll('a.u-url[target="_blank"]').forEach(f=>{/http/i.test(f.innerText.trim())||f.removeAttribute("target")})}})}})},(t,n)=>{const{post:o}=t,{post:i}=n;return o.content===i.content});function De({statusID:t,status:n,instance:o,size:i="m",contentTextWeight:r,readOnly:s,enableCommentHint:l,withinContext:c,skeleton:d,enableTranslate:f,forceTranslate:h,previewMode:u,onMediaClick:_,quoted:g,onStatusLinkClick:b=()=>{},showFollowedTags:E,allowContextMenu:w,showActionsBar:R,showReplyParent:k}){var wn,An,$n;if(d)return e("div",{class:"status skeleton",children:[e(Ae,{size:"xxl"}),e("div",{class:"container",children:[e("div",{class:"meta",children:"â–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ"}),e("div",{class:"content-container",children:e("div",{class:"content",children:e("p",{children:"â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ"})})})]})]});const{masto:v,instance:p,authenticated:D}=Sn({instance:o}),{instance:U}=Sn(),A=p===U;let L=Le(t||(n==null?void 0:n.id),p);const S=lt(P);if(n||(n=S.statuses[L]||S.statuses[t],L=Le(n==null?void 0:n.id,p)),!n)return null;const{account:{acct:C,avatar:q,avatarStatic:M,id:O,url:te,displayName:re,username:Z,emojis:me,bot:he,group:B},id:I,repliesCount:H,reblogged:W,reblogsCount:fe,favourited:J,favouritesCount:ge,bookmarked:_e,poll:oe,muted:ve,sensitive:se,spoilerText:ae,visibility:N,language:G,editedAt:V,filtered:K,card:z,createdAt:ce,inReplyToId:ee,inReplyToAccountId:le,content:de,mentions:Te,mediaAttachments:F,reblog:pe,uri:It,url:be,emojis:St,tags:pr,_deleted:xe,_pinned:Me,emojiReactions:dt}=n,ze=ue(()=>Lt.session.get("currentAccount"),[]),$e=ue(()=>ze&&ze===O,[O,ze]),oo=Nn(Xn),Be=!$e&&!s&&!u&&tn(K,oo);if((Be==null?void 0:Be.action)==="hide")return null;const Fe=a=>{a.shiftKey};if(i!=="l"&&Be)return e(ur,{status:n,filterInfo:Be,instance:p,containerProps:{onMouseEnter:Fe},showFollowedTags:!0});const Ie=new Date(ce),on=new Date(V);let Pt=Te==null?void 0:Te.find(a=>a.id===le);!Pt&&le===I&&(Pt={url:te,username:Z,displayName:re});const[ut,an]=X(Pt);if(!c&&!ut&&le){const a=P.accounts[le];a?an(a):er(le,v).then(T=>{an(T),P.accounts[T.id]=T}).catch(T=>{})}const rn=le===ze||(Te==null?void 0:Te.find(a=>a.id===ze)),je=ue(()=>!!(Lt.account.get("preferences")||{})["reading:expand:spoilers"],[]),sn=ue(()=>(Lt.account.get("preferences")||{})["reading:expand:media"]||"default",[]),qe=u||je||!!S.spoilers[I],Ke=u||sn==="show_all"||!!S.spoilersMedia[I];if(pe)return B?e("div",{"data-state-post-id":L,class:"status-group",onMouseEnter:Fe,children:[e("div",{class:"status-pre-meta",children:[e(y,{icon:"group",size:"l",alt:"Group"})," ",e(nt,{account:n.account,instance:p,showAvatar:!0})]}),e(De,{status:t?null:pe,statusID:t?pe.id:null,instance:p,size:i,contentTextWeight:r,readOnly:s})]}):e("div",{"data-state-post-id":L,class:"status-reblog",onMouseEnter:Fe,children:[e("div",{class:"status-pre-meta",children:[e(y,{icon:"rocket",size:"l"})," ",e(nt,{account:n.account,instance:p,showAvatar:!0})," ",e("span",{children:"boosted"})]}),e(De,{status:t?null:pe,statusID:t?pe.id:null,instance:p,size:i,contentTextWeight:r,readOnly:s,enableCommentHint:!0})]});if(E&&((wn=S.statusFollowedTags[L])!=null&&wn.length))return e("div",{"data-state-post-id":L,class:"status-followed-tags",onMouseEnter:Fe,children:[e("div",{class:"status-pre-meta",children:[e(y,{icon:"hashtag",size:"l"})," ",S.statusFollowedTags[L].slice(0,3).map(a=>e(He,{to:p?`/${p}/t/${a}`:`/t/${a}`,class:"status-followed-tag-item",children:a},a))]}),e(De,{status:t?null:n,statusID:t?n.id:null,instance:p,size:i,contentTextWeight:r,readOnly:s,enableCommentHint:!0})]});const Y=i==="l",[Rt,ao]=X(h),cn=Zn(!0),ro=S.settings.contentTranslationHideLanguages||[],{contentTranslation:Dt,contentTranslationAutoInline:ln}=S.settings;Dt||(f=!1);const dn=ue(()=>{if(!Dt||!ln||s||c&&!Y||u||ae||se||oe||z||F!=null&&F.length)return!1;const a=Ft(de);return a>0&&a<=Qa},[Dt,ln,s,c,Y,u,ae,se,oe,z,F,de]),[Ct,mt]=X(!1),[io,xt]=X(!1),so=wt(),co=wt(),lo=wt(),un="Read more â†’",Oe=ne(null),We="Sorry, your current logged-in instance can't interact with this post from another instance.",mn=Jt(()=>Math.max(Math.round((ae.length+Ft(de))/140)||1,1),[ae,de]),hn=st(Ie),pn=V&&st(on);let Ge=D&&N!=="direct"&&N!=="private";N==="private"&&$e&&(Ge=!0);const ht=a=>{var T;if(!A||!D)return alert(We);(a!=null&&a.shiftKey||(T=a==null?void 0:a.syntheticEvent)!=null&&T.shiftKey)&&ia({replyToStatus:n})||(P.showCompose={replyToStatus:n})},Mt=ue(()=>F.some(a=>{var T,x;return!((x=(T=a.description)==null?void 0:T.trim)!=null&&x.call(T))}),[F]),fn=ue(()=>Math.floor((new Date-Ie)/(1e3*60*60*24*30)),[Ie]),fr=async()=>{if(!A||!D)return alert(We),!1;try{if(!W){let a="Boost this post?";if(Mt&&(a+=`

âš ï¸ Some media have no descriptions.`),!confirm(a))return!1}if(P.statuses[L]={...n,reblogged:!W,reblogsCount:fe+(W?-1:1)},W){const a=await v.v1.statuses.$select(I).unreblog();return ke(a,p),!0}else{const a=await v.v1.statuses.$select(I).reblog();return ke(a,p),!0}}catch{return P.statuses[L]=n,!1}},Ot=async()=>{if(!A||!D)return alert(We),!1;try{if(P.statuses[L]={...n,reblogged:!W,reblogsCount:fe+(W?-1:1)},W){const a=await v.v1.statuses.$select(I).unreblog();ke(a,p)}else{const a=await v.v1.statuses.$select(I).reblog();ke(a,p)}return!0}catch{return P.statuses[L]=n,!1}},gn=async()=>{if(!A||!D)return alert(We),!1;try{if(P.statuses[L]={...n,favourited:!J,favouritesCount:ge+(J?-1:1)},J){const a=await v.v1.statuses.$select(I).unfavourite();ke(a,p)}else{const a=await v.v1.statuses.$select(I).favourite();ke(a,p)}return!0}catch{return P.statuses[L]=n,!1}},Vt=async()=>{try{const a=await gn();!Y&&a&&ie(J?`Unliked @${Z||C}'s post`:`Liked @${Z||C}'s post`)}catch{}},_n=async()=>{if(!A||!D)return alert(We),!1;try{if(P.statuses[L]={...n,bookmarked:!_e},_e){const a=await v.v1.statuses.$select(I).unbookmark();ke(a,p)}else{const a=await v.v1.statuses.$select(I).bookmark();ke(a,p)}return!0}catch{return P.statuses[L]=n,!1}},vn=async()=>{try{const a=await _n();!Y&&a&&ie(_e?`Unbookmarked @${Z||C}'s post`:`Bookmarked @${Z||C}'s post`)}catch{}},pt=!!G&&G!==cn&&!Zt([G],[cn])&&!ro.find(a=>G===a||Zt([G],[a])),bn=ne(),yn=ne();async function uo(a){var j,ye,we,Tt;a&&(bn.current=v.v1.statuses.$select(t).rebloggedBy.list({limit:On}),yn.current=v.v1.statuses.$select(t).favouritedBy.list({limit:On}));const[{value:T},{value:x}]=await Promise.allSettled([bn.current.next(),yn.current.next()]);if((j=T.value)!=null&&j.length||(ye=x.value)!=null&&ye.length){const Ut=[];return(we=T.value)!=null&&we.length&&Ut.push(...T.value.map(Ze=>(Ze._types=["reblog"],Ze))),(Tt=x.value)!=null&&Tt.length&&Ut.push(...x.value.map(Ze=>(Ze._types=["favourite"],Ze))),{value:Ut,done:T.done&&x.done}}return{value:[],done:!0}}const mo=ne(),En=["public","unlisted"].includes(N),ho=["public","unlisted","private"].includes(N),Tn=e($,{children:[!Y&&A&&e($,{children:e("div",{class:"menu-control-group-horizontal status-menu",children:[e(Q,{onClick:ht,children:[e(y,{icon:"comment"}),e("span",{children:H>0?Pe(H):"Reply"})]}),e(Nt,{subMenu:!0,confirmLabel:e($,{children:[e(y,{icon:"rocket"}),e("span",{children:W?"Unboost":"Boost"})]}),className:`menu-reblog ${W?"checked":""}`,menuExtras:e(Q,{onClick:()=>{P.showCompose={draftStatus:{status:`
${be}`}}},children:[e(y,{icon:"quote"}),e("span",{children:"Quote"})]}),menuFooter:Mt&&!W?e("div",{class:"footer",children:[e(y,{icon:"alert"}),"Some media have no descriptions."]}):fn>=3&&e("div",{class:"footer",children:[e(y,{icon:"info"}),e("span",{children:["Old post (",e("strong",{children:nr.format(-fn,"month")}),")"]})]}),disabled:!Ge,onClick:async()=>{try{const a=await Ot();!Y&&a&&ie(W?`Unboosted @${Z||C}'s post`:`Boosted @${Z||C}'s post`)}catch{}},children:[e(y,{icon:"rocket"}),e("span",{children:fe>0?Pe(fe):W?"Unboost":"Boostâ€¦"})]}),e(Q,{onClick:Vt,className:`menu-favourite ${J?"checked":""}`,children:[e(y,{icon:"heart"}),e("span",{children:ge>0?Pe(ge):J?"Unlike":"Like"})]}),e(Q,{onClick:vn,className:`menu-bookmark ${_e?"checked":""}`,children:[e(y,{icon:"bookmark"}),e("span",{children:_e?"Unbookmark":"Bookmark"})]})]})}),!Y&&A&&(Y||R)&&e(Qe,{}),(Y||R)&&e($,{children:e(Q,{onClick:()=>{P.showGenericAccounts={heading:"Boosted/Liked byâ€¦",fetchAccounts:uo,instance:p,showReactions:!0,postID:L}},children:[e(y,{icon:"react"}),e("span",{children:["Boosted/Liked by",e("span",{class:"more-insignificant",children:"â€¦"})]})]})}),(f||!G||pt)&&e(Qe,{}),f?e("div",{class:ot?"menu-horizontal":"",children:[e(Q,{disabled:Rt,onClick:()=>{ao(!0)},children:[e(y,{icon:"translate"}),e("span",{children:"Translate"})]}),ot&&e(Q,{onClick:()=>{const a=Wt(n);a&&Dn(a,G)},children:[e(y,{icon:"speak"}),e("span",{children:"Speak"})]})]}):(!G||pt)&&e("div",{class:ot?"menu-horizontal":"",children:[e(xn,{to:`${p?`/${p}`:""}/s/${I}?translate=1`,children:[e(y,{icon:"translate"}),e("span",{children:"Translate"})]}),ot&&e(Q,{onClick:()=>{const a=Wt(n);a&&Dn(a,G)},children:[e(y,{icon:"speak"}),e("span",{children:"Speak"})]})]}),(!Y&&A||f||!G||pt)&&e(Qe,{}),!Y&&e($,{children:e(xn,{to:p?`/${p}/s/${I}`:`/s/${I}`,onClick:a=>{b(a,n)},children:[e(y,{icon:"arrows-right"}),e("small",{children:["View post by @",Z||C,e("br",{}),e("span",{class:"more-insignificant",children:[at[N]," â€¢ ",hn]})]})]})}),!!V&&e($,{children:e(Q,{onClick:()=>{mt(I)},children:[e(y,{icon:"history"}),e("small",{children:["Show Edit History",e("br",{}),e("span",{class:"more-insignificant",children:["Edited: ",pn]})]})]})}),e(Q,{href:be,target:"_blank",children:[e(y,{icon:"external"}),e("small",{class:"menu-double-lines",children:lr(be)})]}),e("div",{class:"menu-horizontal",children:[e(Q,{onClick:()=>{try{navigator.clipboard.writeText(be),ie("Link copied")}catch{ie("Unable to copy link")}},children:[e(y,{icon:"link"}),e("span",{children:"Copy"})]}),En&&(navigator==null?void 0:navigator.share)&&((An=navigator==null?void 0:navigator.canShare)==null?void 0:An.call(navigator,{url:be}))&&e(Q,{onClick:()=>{try{navigator.share({url:be})}catch{alert("Sharing doesn't seem to work.")}},children:[e(y,{icon:"share"}),e("span",{children:"Shareâ€¦"})]})]}),En&&Y&&e(Q,{onClick:()=>{xt(!0)},children:[e(y,{icon:"code"}),e("span",{children:"Embed post"})]}),($e||rn)&&e(Qe,{}),($e||rn)&&e(Q,{onClick:async()=>{try{const a=await v.v1.statuses.$select(I)[ve?"unmute":"mute"]();ke(a,p),ie(ve?"Conversation unmuted":"Conversation muted")}catch{ie(ve?"Unable to unmute conversation":"Unable to mute conversation")}},children:ve?e($,{children:[e(y,{icon:"unmute"}),e("span",{children:"Unmute conversation"})]}):e($,{children:[e(y,{icon:"mute"}),e("span",{children:"Mute conversation"})]})}),$e&&ho&&e(Q,{onClick:async()=>{try{const a=await v.v1.statuses.$select(I)[Me?"unpin":"pin"]();ie(Me?"Post unpinned from profile":"Post pinned to profile")}catch{ie(Me?"Unable to unpin post":"Unable to pin post")}},children:Me?e($,{children:[e(y,{icon:"unpin"}),e("span",{children:"Unpin from profile"})]}):e($,{children:[e(y,{icon:"pin"}),e("span",{children:"Pin to profile"})]})}),$e&&e("div",{class:"menu-horizontal",children:[e(Q,{onClick:()=>{P.showCompose={editStatus:n}},children:[e(y,{icon:"pencil"}),e("span",{children:"Edit"})]}),Y&&e(Nt,{subMenu:!0,confirmLabel:e($,{children:[e(y,{icon:"trash"}),e("span",{children:"Delete this post?"})]}),menuItemClassName:"danger",onClick:()=>{(async()=>{try{await v.v1.statuses.$select(I).remove();const a=Bn(I,p);a._deleted=!0,ie("Deleted")}catch{ie("Unable to delete")}})()},children:[e(y,{icon:"trash"}),e("span",{children:"Deleteâ€¦"})]})]}),!$e&&Y&&e($,{children:[e(Qe,{}),e(Q,{className:"danger",onClick:()=>{P.showReportModal={account:n.account,post:n}},children:[e(y,{icon:"flag"}),e("span",{children:"Report postâ€¦"})]})]})]}),kn=ne(),[ft,Ye]=X(!1),[gt,_t]=X({}),vt=w||!Y&&!u&&!xe&&!g,po=Hn(tr&&vt?a=>{var ye;if(a.pointerType==="mouse")return;const{clientX:T,clientY:x}=((ye=a.touches)==null?void 0:ye[0])||a,j=a.target.closest("a");j&&Oe.current.contains(j)&&!j.getAttribute("href").startsWith("#")||(a.preventDefault(),_t({anchorPoint:{x:T,y:x},direction:"right"}),Ye(!0))}:null,{threshold:600,captureEvent:!0,detect:"touch",cancelOnMovement:2}),bt=!s&&!u&&!g,fo=Ne("r, shift+r",ht,{enabled:bt}),go=Ne("f, l",Vt,{enabled:bt}),_o=Ne("d",vn,{enabled:bt}),vo=Ne("shift+b",()=>{(async()=>{try{const a=await Ot();!Y&&a&&ie(W?`Unboosted @${Z||C}'s post`:`Boosted @${Z||C}'s post`)}catch{}})()},{enabled:bt&&Ge}),bo=Ne("x",a=>{const T=document.activeElement.closest(".status-link, .status-focus");if(T){const x=T.querySelector(".spoiler-button:not(.spoiling)");if(x)a.stopPropagation(),x.click();else{const j=T.querySelector(".spoiler-media-button:not(.spoiling)");j&&(a.stopPropagation(),j.click())}}}),yt=F.slice(0,Y?void 0:4),Et=F.length>1&&yt.some(a=>!!a.description&&!Jn(a.description)),yo=ue(()=>{if(!Et)return null;const a=[];return yt.forEach((T,x)=>{if(!T.description)return;const j=a.findIndex(ye=>ye.media.description===T.description);j===-1?a.push({media:T,indices:[x]}):a[j].indices.push(x)}),a.map(({media:T,indices:x})=>e("div",{"data-caption-index":x.map(j=>j+1).join(" "),onClick:j=>{j.preventDefault(),j.stopPropagation(),P.showMediaAlt={alt:T.description,lang:G}},title:T.description,children:[e("sup",{children:x.map(j=>j+1).join(" ")})," ",T.description]},T.id))},[Et,yt,G]),Xe=ue(()=>{var a;return!!ee&&le===((a=n.account)==null?void 0:a.id)||!!S.statusThreadNumber[L]},[ee,le,($n=n.account)==null?void 0:$n.id,S.statusThreadNumber[L]]),Eo=ue(()=>l&&!Xe&&!c&&!ee&&N==="public"&&H>0,[l,Xe,c,ee,H,N]),Ln=ue(()=>{if(z||oe||se||ae||F!=null&&F.length||Xe||c||ee||H<=0||!/[??ï¼Ÿï¸–â“â”â‡âˆâ‰Â¿â€½ØŸ]/.test(de))return!1;const x=Ft(de);if(x>0&&x<=Za)return!0},[z,oe,se,ae,F,pe,Xe,c,ee,H,de]);return e($,{children:[k&&!!(ee&&le)&&e(dr,{sKey:L}),e("article",{"data-state-post-id":L,ref:a=>{var x;Oe.current=a;const T=((x=a==null?void 0:a.closest)==null?void 0:x.call(a,".timeline-item, .timeline-item-alt, .status-link, .status-focus"))||a;fo.current=T,go.current=T,_o.current=T,vo.current=T,bo.current=T},tabindex:"-1",class:`status ${!c&&ee&&ut?"status-reply-to":""} visibility-${N} ${Me?"status-pinned":""} ${{s:"small",m:"medium",l:"large"}[i]} ${xe?"status-deleted":""} ${g?"status-card":""} ${ft?"status-menu-open":""}`,onMouseEnter:Fe,onContextMenu:a=>{var j,ye;if(!vt||a.metaKey)return;const T=a.target.closest("a");if(T&&Oe.current.contains(T)&&!T.getAttribute("href").startsWith("#"))return;const x=(j=window.getSelection)==null?void 0:j.call(window);if(x.toString().length>0){const{anchorNode:we}=x;if((ye=Oe.current)!=null&&ye.contains(we))return}a.preventDefault(),_t({anchorPoint:{x:a.clientX,y:a.clientY},direction:"right"}),Ye(!0)},...vt?po():{},children:[vt&&e(jo,{ref:kn,state:ft?"open":void 0,...gt,onClose:a=>{var T,x,j;Ye(!1),(a==null?void 0:a.reason)==="click"&&((j=(x=(T=Oe.current)==null?void 0:T.closest("[tabindex]"))==null?void 0:x.focus)==null||j.call(x))},portal:{target:document.body},containerProps:{style:{zIndex:1001},onClick:()=>{var a,T;(T=(a=kn.current)==null?void 0:a.closeMenu)==null||T.call(a)}},overflow:"auto",boundingBoxPadding:Wn(),unmountOnClose:!0,children:Tn}),R&&i!=="l"&&!u&&!s&&!xe&&!g&&e("div",{class:`status-actions ${ft==="actions-bar"?"open":""}`,ref:mo,children:[e(Ue,{size:"s",title:"Reply",alt:"Reply",class:"reply-button",icon:"comment",iconSize:"m",onClick:ht}),e(Ue,{size:"s",checked:J,title:["Like","Unlike"],alt:["Like","Liked"],class:"favourite-button",icon:"heart",iconSize:"m",count:ge,onClick:Vt}),e("button",{type:"button",title:"More",class:"plain more-button",onClick:a=>{a.preventDefault(),a.stopPropagation(),_t({anchorRef:{current:a.currentTarget},align:"start",direction:"left",gap:0,shift:-8}),Ye("actions-bar")},children:e(y,{icon:"more2",size:"m",alt:"More"})})]}),i!=="l"&&e("div",{class:"status-badge",children:[W&&e(y,{class:"reblog",icon:"rocket",size:"s"}),J&&e(y,{class:"favourite",icon:"heart",size:"s"}),_e&&e(y,{class:"bookmark",icon:"bookmark",size:"s"}),Me&&e(y,{class:"pin",icon:"pin",size:"s"})]}),i!=="s"&&e("a",{href:te,tabindex:"-1",title:`@${C}`,onClick:a=>{a.preventDefault(),a.stopPropagation(),P.showAccount={account:n.account,instance:p}},children:e(Ae,{url:M||q,size:"xxl",squircle:he})}),e("div",{class:"container",children:[e("div",{class:"meta",children:[e("span",{class:"meta-name",children:e(nt,{account:n.account,instance:p,showAvatar:i==="s",showAcct:Y})})," ",i!=="l"&&(xe?e("span",{class:"status-deleted-tag",children:"Deleted"}):be&&!u&&!s&&!g?e(He,{to:p?`/${p}/s/${I}`:`/s/${I}`,onClick:a=>{a.metaKey||a.ctrlKey||a.shiftKey||a.altKey||a.which===2||(a.preventDefault(),a.stopPropagation(),b==null||b(a,n),_t({anchorRef:{current:a.currentTarget},align:"end",direction:"bottom",gap:4}),Ye(!0))},class:`time ${ft&&(gt!=null&&gt.anchorRef)?"is-open":""}`,children:[Eo&&!Ln?e(y,{icon:"comment2",size:"s",alt:`${H} ${H===1?"reply":"replies"}`}):N!=="public"&&N!=="direct"&&e(y,{icon:Qt[N],alt:at[N],size:"s"})," ",e(Re,{datetime:Ie,format:"micro"}),!u&&!s&&e(y,{icon:"more2",class:"more"})]}):e("span",{class:"time",children:[N!=="public"&&N!=="direct"&&e($,{children:[e(y,{icon:Qt[N],alt:at[N],size:"s"})," "]}),e(Re,{datetime:Ie,format:"micro"})]}))]}),N==="direct"&&e($,{children:[e("div",{class:"status-direct-badge",children:"Private mention"})," "]}),!c&&e($,{children:Xe?e("div",{class:"status-thread-badge",children:[e(y,{icon:"thread",size:"s"}),"Thread",S.statusThreadNumber[L]?` ${S.statusThreadNumber[L]}/X`:""]}):!!ee&&!!ut&&(!!ae||!Te.find(a=>a.id===le))&&e("div",{class:"status-reply-badge",children:[e(y,{icon:"reply"})," ",e(nt,{account:ut,instance:p,short:!0})]})}),e("div",{class:`content-container ${ae||se?"has-spoiler":""} ${qe?"show-spoiler":""} ${Ke?"show-media":""}`,"data-content-text-weight":r?mn():null,style:(Y||r)&&{"--content-text-weight":mn()},children:[!!ae&&e($,{children:[e("div",{class:"content spoiler-content",lang:G,dir:"auto",ref:so,"data-read-more":un,children:e("p",{children:e(it,{text:ae,emojis:St})})}),je||u?e("div",{class:"spoiler-divider",children:[e(y,{icon:"eye-open"})," Content warning"]}):e("button",{class:`light spoiler-button ${qe?"spoiling":""}`,type:"button",onClick:a=>{a.preventDefault(),a.stopPropagation(),qe?(delete P.spoilers[I],je||delete P.spoilersMedia[I]):(P.spoilers[I]=!0,je||(P.spoilersMedia[I]=!0))},children:[e(y,{icon:qe?"eye-open":"eye-close"})," ",qe?"Show less":"Show content"]})]}),!!de&&e("div",{class:"content",ref:co,"data-read-more":un,children:[e(ar,{post:n,instance:p,previewMode:u}),e(mr,{id:I,instance:p,level:g})]}),!!oe&&e(Ea,{lang:G,poll:oe,readOnly:s||!A||!D,onUpdate:a=>{P.statuses[L].poll=a},refresh:()=>v.v1.polls.$select(oe.id).fetch().then(a=>{P.statuses[L].poll=a}).catch(a=>{}),votePoll:a=>v.v1.polls.$select(oe.id).votes.create({choices:a}).then(T=>{P.statuses[L].poll=T}).catch(T=>{})}),((f||dn)&&!!de.trim()&&!!nn($t(de,St))&&pt||Rt)&&e(Xa,{forceTranslate:Rt||dn,mini:!Y&&!c,sourceLanguage:G,text:Wt(n)}),!u&&se&&!!F.length&&sn!=="show_all"&&e("button",{class:`plain spoiler-media-button ${Ke?"spoiling":""}`,type:"button",hidden:!je&&!!ae,onClick:a=>{a.preventDefault(),a.stopPropagation(),Ke?delete P.spoilersMedia[I]:P.spoilersMedia[I]=!0},children:[e(y,{icon:Ke?"eye-open":"eye-close"})," ",Ke?"Show less":"Show media"]}),!!F.length&&e(rr,{lang:G,enabled:Et,captionChildren:yo,children:e("div",{ref:lo,class:`media-container media-eq${F.length} ${F.length>2?"media-gt2":""} ${F.length>4?"media-gt4":""}`,children:yt.map((a,T)=>e(Fa,{media:a,autoAnimate:Y,showCaption:F.length===1,allowLongerCaption:!de&&F.length===1,lang:G,altIndex:Et&&!!a.description&&T+1,to:`/${p}/s/${I}?${c?"media":"media-only"}=${T+1}`,onClick:_?x=>{_(x,T,a,n)}:void 0},a.id))})}),!!z&&/^https/i.test(z==null?void 0:z.url)&&!se&&!ae&&!oe&&!F.length&&!S.statusQuotes[L]&&e(ir,{card:z,selfReferential:(z==null?void 0:z.url)===n.url||(z==null?void 0:z.url)===n.uri,instance:U})]}),!Y&&Ln&&e("div",{class:"content-comment-hint insignificant",children:[e(y,{icon:"comment2",alt:"Replies"})," ",H]}),Y&&e($,{children:[e("div",{class:"extra-meta",children:xe?e("span",{class:"status-deleted-tag",children:"Deleted"}):e($,{children:[e("span",{children:at[N]})," â€¢"," ",e("a",{href:be,target:"_blank",rel:"noopener noreferrer",children:e("time",{class:"created",datetime:Ie.toISOString(),title:Ie.toLocaleString(),children:hn})}),V&&e($,{children:[" ","â€¢ ",e(y,{icon:"pencil",alt:"Edited"})," ",e("time",{tabIndex:"0",class:"edited",datetime:on.toISOString(),onClick:()=>{mt(I)},children:pn})]})]})}),!!(dt!=null&&dt.length)&&e("div",{class:"emoji-reactions",children:dt.map(a=>{const{name:T,count:x,me:j}=a;if(/^:.+?:$/.test(T)){const we=St.find(Tt=>Tt.shortcode===T.replace(/^:/,"").replace(/:$/,""));if(we)return e("span",{class:`emoji-reaction tag ${j?"":"insignificant"}`,children:[e(jn,{alt:T,url:we.url,staticUrl:we.staticUrl}),x]})}return e("span",{class:`emoji-reaction tag ${j?"":"insignificant"}`,children:[T," ",x]})})}),e("div",{class:`actions ${xe?"disabled":""}`,children:[e("div",{class:"action has-count",children:e(Ue,{title:"Reply",alt:"Comments",class:"reply-button",icon:"comment",count:H,onClick:ht})}),e(Nt,{disabled:!Ge,onClick:Ot,confirmLabel:e($,{children:[e(y,{icon:"rocket"}),e("span",{children:W?"Unboost":"Boost"})]}),menuExtras:e(Q,{onClick:()=>{P.showCompose={draftStatus:{status:`
${be}`}}},children:[e(y,{icon:"quote"}),e("span",{children:"Quote"})]}),menuFooter:Mt&&!W&&e("div",{class:"footer",children:[e(y,{icon:"alert"}),"Some media have no descriptions."]}),children:e("div",{class:"action has-count",children:e(Ue,{checked:W,title:["Boost","Unboost"],alt:["Boost","Boosted"],class:"reblog-button",icon:"rocket",count:fe,disabled:!Ge})})}),e("div",{class:"action has-count",children:e(Ue,{checked:J,title:["Like","Unlike"],alt:["Like","Liked"],class:"favourite-button",icon:"heart",count:ge,onClick:gn})}),e("div",{class:"action",children:e(Ue,{checked:_e,title:["Bookmark","Unbookmark"],alt:["Bookmark","Bookmarked"],class:"bookmark-button",icon:"bookmark",onClick:_n})}),e(Gn,{portal:{target:document.querySelector(".status-deck")||document.body},align:"end",gap:4,overflow:"auto",viewScroll:"close",menuButton:e("div",{class:"action",children:e("button",{type:"button",title:"More",class:"plain more-button",children:e(y,{icon:"more",size:"l",alt:"More"})})}),children:Tn})]})]})]}),!!Ct&&e(Xt,{onClick:a=>{a.target===a.currentTarget&&mt(!1)},children:e(sr,{statusID:Ct,instance:p,fetchStatusHistory:()=>v.v1.statuses.$select(Ct).history.list(),onClose:()=>{var a;mt(!1),(a=Oe.current)==null||a.focus()}})}),!!io&&e(Xt,{onClick:a=>{a.target===a.currentTarget&&xt(!1)},children:e(cr,{post:n,instance:p,onClose:()=>{xt(!1)}})})]})]})}function rr(t){const{enabled:n,children:o,lang:i,captionChildren:r}=t;return!n||!r?o:e("figure",{class:"media-figure-multiple",children:[o,e("figcaption",{lang:i,dir:"auto",children:r})]})}function ir({card:t,selfReferential:n,instance:o}){var M;const i=lt(P),{blurhash:r,title:s,description:l,html:c,providerName:d,providerUrl:f,authorName:h,authorUrl:u,width:_,height:g,image:b,imageDescription:E,url:w,type:R,embedUrl:k,language:v,publishedAt:p}=t,D=s||d||h,A=_/g>=1.2?"large":"",[L,S]=X(null);if(Ee(()=>{D&&b&&!n&&oa(w)&&aa(o,w).then(O=>{if(!O)return;const{id:te,url:re}=O;S("#"+re)})},[D,b,n]),i.unfurledLinks[w])return null;const C=/<iframe/i.test(c),q=Jt(O=>{C&&(O.preventDefault(),P.showEmbedModal={html:c,url:w||k,width:_,height:g})},[C]);if(D&&(b||R==="photo"&&r)){const O=new URL(w).hostname.replace(/^www\./,"").replace(/\/$/,"");let te;const re=b&&r?Un(r):null;if(!b){const he=qo(r,44,44),B=window.OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas");B.width=44,B.height=44;const I=B.getContext("2d");I.imageSmoothingEnabled=!1;const H=I.createImageData(44,44);H.data.set(he),I.putImageData(H,0,0),te=B.toDataURL()}return e("a",{href:L||w,target:L?null:"_blank",rel:"nofollow noopener noreferrer",class:`card link ${te?"":A}`,lang:v,dir:"auto",style:{"--average-color":re&&`rgb(${re.join(",")})`},onClick:q,children:[e("div",{class:"card-image",children:e("img",{src:b||te,width:_,height:g,loading:"lazy",alt:E||"",onError:Z=>{try{Z.target.style.display="none"}catch{}}})}),e("div",{class:"meta-container",children:[e("p",{class:"meta domain",children:[e("span",{class:"domain",children:O})," ",!!p&&e($,{children:"Â· "}),!!p&&e($,{children:e(Re,{datetime:p,format:"micro"})})]}),e("p",{class:"title",dir:"auto",title:s,children:s}),e("p",{class:"meta",dir:"auto",title:l,children:l||!!p&&e(Re,{datetime:p,format:"micro"})})]})]})}else{if(R==="photo")return e("a",{href:w,target:"_blank",rel:"nofollow noopener noreferrer",class:"card photo",onClick:q,children:e("img",{src:k,width:_,height:g,alt:s||l,loading:"lazy",style:{height:"auto",aspectRatio:`${_}/${g}`}})});if(R==="video"&&/youtube/i.test(d)){const O=(M=w.match(/watch\?v=([^&]+)/))==null?void 0:M[1];if(O)return e("a",{class:"card video",onClick:q,children:e("lite-youtube",{videoid:O,nocookie:!0})})}if(D&&!b){const O=new URL(w).hostname.replace(/^www\./,"");return e("a",{href:L||w,target:L?null:"_blank",rel:"nofollow noopener noreferrer",class:"card link no-image",lang:v,onClick:q,children:e("div",{class:"meta-container",children:[e("p",{class:"meta domain",children:[e("span",{class:"domain",children:[e(y,{icon:"link",size:"s"})," ",e("span",{children:O})]})," ",!!p&&e($,{children:"Â· "}),!!p&&e($,{children:e(Re,{datetime:p,format:"micro"})})]}),e("p",{class:"title",title:s,children:s}),e("p",{class:"meta",title:l||d||h,children:l||d||h})]})})}}}function sr({statusID:t,instance:n,fetchStatusHistory:o=()=>{},onClose:i}){const[r,s]=X("default"),[l,c]=X([]);return Ee(()=>{s("loading"),(async()=>{try{const d=await o();c(d),s("default")}catch{s("error")}})()},[]),e("div",{id:"edit-history",class:"sheet",children:[!!i&&e("button",{type:"button",class:"sheet-close",onClick:i,children:e(y,{icon:"x"})}),e("header",{children:[e("h2",{children:"Edit History"}),r==="error"&&e("p",{children:"Failed to load history"}),r==="loading"&&e("p",{children:[e(zn,{abrupt:!0})," Loadingâ€¦"]})]}),e("main",{tabIndex:"-1",children:l.length>0&&e("ol",{children:l.map(d=>{const{createdAt:f}=d,h=new Date(f);return e("li",{class:"history-item",children:[e("h3",{children:e("time",{children:st(h,{formatOpts:{weekday:"short",second:"numeric"}})})}),e(De,{status:d,instance:n,size:"s",withinContext:!0,readOnly:!0,previewMode:!0})]},f)})})})]})}function no(t,n,o=0){var q;const{account:{url:i,displayName:r,acct:s,username:l,emojis:c,bot:d,group:f},id:h,poll:u,spoilerText:_,language:g,editedAt:b,createdAt:E,content:w,mediaAttachments:R,url:k,emojis:v}=t,p=Le(h,n),U=(P.statusQuotes[p]||[]).filter((M,O,te)=>te.findIndex(re=>re.url===M.url)===O),A=U.length&&o<=2?U.map(M=>{const{id:O,instance:te}=M,re=Le(O,te),Z=P.statuses[re];if(Z)return no(Z,te,++o)}).join(""):"",L=new Date(E),S=$t(w,v)+`
`+A+`
`+((q=u==null?void 0:u.options)!=null&&q.length?`
        <p>ðŸ“Š:</p>
        <ul>
        ${u.options.map(M=>`
              <li>
                ${M.title}
                ${M.votesCount>=0?` (${M.votesCount})`:""}
              </li>
            `).join("")}
        </ul>`:"")+(R.length>0?`
`+R.map(M=>{const{description:O,meta:te,previewRemoteUrl:re,previewUrl:Z,remoteUrl:me,url:he,type:B}=M,{original:I={},small:H}=te||{},W=(H==null?void 0:H.width)||(I==null?void 0:I.width),fe=(H==null?void 0:H.height)||(I==null?void 0:I.height),J=me||he,ge=re||Z,_e=ge||J,oe=J?new URL(J):null,ve=B==="unknown"&&oe&&/\.(mp4|m4r|m4v|mov|webm)$/i.test(oe.pathname),se=B==="unknown"&&oe&&/\.(mp3|ogg|wav|m4a|m4p|m4b)$/i.test(oe.pathname),ae=B==="image"||B==="unknown"&&ge&&!ve&&!se,N=B==="gifv"||B==="video"||ve,G=B==="audio"||se;let V="";return ae?V=`<img src="${_e}" width="${W}" height="${fe}" alt="${O}" loading="lazy" />`:N?V=`
                <video src="${J}" width="${W}" height="${fe}" controls preload="auto" poster="${ge}" loading="lazy"></video>
                ${O?`<figcaption>${O}</figcaption>`:""}
              `:G?V=`
                <audio src="${J}" controls preload="auto"></audio>
                ${O?`<figcaption>${O}</figcaption>`:""}
              `:V=`
                <a href="${J}">ðŸ“„ ${O||J}</a>
              `,`<figure>${V}</figure>`}).join(`
`):""),C=`
    <blockquote lang="${g}" cite="${k}">
      ${_?`
            <details>
              <summary>${_}</summary>
              ${S}
            </details>
          `:S}
      <footer>
        â€” ${$t(r,c)} (@${s}) <a href="${k}"><time datetime="${L.toISOString()}">${L.toLocaleString()}</time></a>
      </footer>
    </blockquote>
  `;return Ko(C)}function cr({post:t,instance:n,onClose:o}){const{account:{url:i,displayName:r,username:s,emojis:l,bot:c,group:d},id:f,poll:h,spoilerText:u,language:_,editedAt:g,createdAt:b,content:E,mediaAttachments:w,url:R,emojis:k}=t,v=no(t,n);return e("div",{id:"embed-post",class:"sheet",children:[!!o&&e("button",{type:"button",class:"sheet-close",onClick:o,children:e(y,{icon:"x"})}),e("header",{children:e("h2",{children:"Embed post"})}),e("main",{tabIndex:"-1",children:[e("h3",{children:"HTML Code"}),e("textarea",{class:"embed-code",readonly:!0,onClick:p=>{p.target.select()},children:v}),e("button",{type:"button",onClick:()=>{try{navigator.clipboard.writeText(v),ie("HTML code copied")}catch{ie("Unable to copy HTML code")}},children:[e(y,{icon:"clipboard"})," ",e("span",{children:"Copy"})]}),!!(w!=null&&w.length)&&e("section",{children:[e("p",{children:"Media attachments:"}),e("ol",{class:"links-list",children:w.map(p=>e("li",{children:e("a",{href:p.remoteUrl||p.url,target:"_blank",download:!0,children:p.remoteUrl||p.url})},p.id))})]}),!!(l!=null&&l.length)&&e("section",{children:[e("p",{children:"Account Emojis:"}),e("ul",{children:l.map(p=>e("li",{children:[e("picture",{children:[e("source",{srcset:p.staticUrl,media:"(prefers-reduced-motion: reduce)"}),e("img",{class:"shortcode-emoji emoji",src:p.url,alt:`:${p.shortcode}:`,width:"16",height:"16",loading:"lazy",decoding:"async"})]})," ",e("code",{children:[":",p.shortcode,":"]})," (",e("a",{href:p.url,target:"_blank",download:!0,children:"url"}),")",p.staticUrl?e($,{children:[" ","(",e("a",{href:p.staticUrl,target:"_blank",download:!0,children:"static"}),")"]}):null]},p.shortcode))})]}),!!(k!=null&&k.length)&&e("section",{children:[e("p",{children:"Emojis:"}),e("ul",{children:k.map(p=>e("li",{children:[e("picture",{children:[e("source",{srcset:p.staticUrl,media:"(prefers-reduced-motion: reduce)"}),e("img",{class:"shortcode-emoji emoji",src:p.url,alt:`:${p.shortcode}:`,width:"16",height:"16",loading:"lazy",decoding:"async"})]})," ",e("code",{children:[":",p.shortcode,":"]})," (",e("a",{href:p.url,target:"_blank",download:!0,children:"url"}),")",p.staticUrl?e($,{children:[" ","(",e("a",{href:p.staticUrl,target:"_blank",download:!0,children:"static"}),")"]}):null]},p.shortcode))})]}),e("section",{children:e("small",{children:[e("p",{children:"Notes:"}),e("ul",{children:[e("li",{children:"This is static, unstyled and scriptless. You may need to apply your own styles and edit as needed."}),e("li",{children:"Polls are not interactive, becomes a list with vote counts."}),e("li",{children:"Media attachments can be images, videos, audios or any file types."}),e("li",{children:"Post could be edited or deleted later."})]})]})}),e("h3",{children:"Preview"}),e("output",{class:"embed-preview",dangerouslySetInnerHTML:{__html:v}}),e("p",{children:e("small",{children:"Note: This preview is lightly styled."})})]})]})}function Ue({checked:t,count:n,class:o,title:i,alt:r,size:s,icon:l,iconSize:c="l",onClick:d,...f}){typeof i=="string"&&(i=[i,i]),typeof r=="string"&&(r=[r,r]);const[h,u]=X(i[0]||""),[_,g]=X(r[0]||"");return Ee(()=>{t?(u(i[1]||""),g(r[1]||"")):(u(i[0]||""),g(r[0]||""))},[t,i,r]),e("button",{type:"button",title:h,class:`plain ${s?"small":""} ${o} ${t?"checked":""}`,onClick:b=>{d&&(b.preventDefault(),b.stopPropagation(),d(b))},...f,children:[e(y,{icon:l,size:c,alt:_}),!!n&&e($,{children:[" ",e("small",{title:n,children:Pe(n)})]})]})}function lr(t){if(!t)return;const n=new URL(t),{host:o,pathname:i}=n,r=i.replace(/\/$/,""),[s,l,c]=r.match(/\/(@[^\/]+)\/(.*)/)||[];return e($,{children:[o,l?e($,{children:["/",l,e("wbr",{}),e("span",{class:"more-insignificant",children:["/",c]})]}):e("span",{class:"more-insignificant",children:r})]})}function dr({sKey:t}){const o=lt(P).statusReply[t];if(!o)return null;const{id:i,instance:r}=o,s=Bn(i,r);if(!s)return null;const{sensitive:l,spoilerText:c,account:{avatar:d,avatarStatic:f,bot:h},visibility:u,content:_,language:g,filtered:b}=s;if(l||c||!_)return null;const E=Le(i,r),w=Qn(s),R=Nn(Xn),k=tn(b,R);if((k==null?void 0:k.action)==="hide")return null;const v=(k==null?void 0:k.titlesStr)||"";return e("article",{class:`status compact-reply ${u==="direct"?"visibility-direct":""}`,tabindex:"-1","data-state-post-id":E,children:[e(Ae,{url:f||d,squircle:h}),e("div",{class:"content-compact",title:w,lang:g,dir:"auto",children:k?e("b",{class:"status-filtered-badge badge-meta",title:v,children:[e("span",{children:"Filtered"}),e("span",{children:v})]}):e("span",{children:w})})]})}function ur({status:t,filterInfo:n,instance:o,containerProps:i={},showFollowedTags:r}){var q;const s=lt(P),{id:l,account:{avatar:c,avatarStatic:d,bot:f,group:h},createdAt:u,visibility:_,reblog:g}=t,b=!!g,E=(n==null?void 0:n.titlesStr)||"",w=new Date(u),R=Qn(t.reblog||t),[k,v]=X(!1),p=Hn(()=>{v(!0)},{threshold:600,captureEvent:!0,detect:"touch",cancelOnMovement:2}),D=wt(),U=Le(t.id,o),A=Le(t.id,o)+" "+(Le(g==null?void 0:g.id,o)||""),L=(g==null?void 0:g.id)||l,S=o?`/${o}/s/${L}`:`/s/${L}`,C=r&&!!((q=s.statusFollowedTags[U])!=null&&q.length);return e("div",{class:b?h?"status-group":"status-reblog":C?"status-followed-tags":"",...i,onContextMenu:M=>{M.preventDefault(),v(!0)},...p(),children:[e("article",{"data-state-post-id":A,class:"status filtered",tabindex:"-1",children:[e("b",{class:"status-filtered-badge clickable badge-meta",title:E,onClick:M=>{M.preventDefault(),v(!0)},children:[e("span",{children:"Filtered"}),e("span",{children:E})]})," ",e(Ae,{url:d||c,squircle:f}),e("span",{class:"status-filtered-info",children:[e("span",{class:"status-filtered-info-1",children:[e(nt,{account:t.account,instance:o})," ",e(y,{icon:Qt[_],alt:at[_],size:"s"})," ",b?"boosted":C?e("span",{children:s.statusFollowedTags[U].slice(0,3).map(M=>e("span",{class:"status-followed-tag-item",children:["#",M]},M))}):e(Re,{datetime:w,format:"micro"})]}),e("span",{class:"status-filtered-info-2",children:[b&&e($,{children:[e(Ae,{url:g.account.avatarStatic||g.account.avatar,squircle:f})," "]}),R]})]})]}),!!k&&e(Xt,{onClick:M=>{M.target===M.currentTarget&&v(!1)},children:e("div",{id:"filtered-status-peek",class:"sheet",children:[e("button",{type:"button",class:"sheet-close",onClick:()=>v(!1),children:e(y,{icon:"x"})}),e("header",{children:[e("b",{class:"status-filtered-badge",children:"Filtered"})," ",E]}),e("main",{tabIndex:"-1",children:e(He,{ref:D,class:"status-link",to:S,onClick:()=>{v(!1)},"data-read-more":"Read more â†’",children:e(De,{status:t,instance:o,size:"s",readOnly:!0})})})]})})]})}const mr=ct(({id:t,instance:n,level:o=0})=>{if(!t||!n)return;const i=lt(P),r=Le(t,n),s=i.statusQuotes[r],l=s==null?void 0:s.filter((c,d,f)=>f.findIndex(h=>h.url===c.url)===d);if(l!=null&&l.length&&!(o>2))return l.map(c=>e(va,{children:e(He,{to:`${c.instance?`/${c.instance}`:""}/s/${c.id}`,class:"status-card-link","data-read-more":"Read more â†’",children:e(De,{statusID:c.id,instance:c.instance,size:"s",quoted:o+1,enableCommentHint:!0})},c.instance+c.id)}))}),yr=ct(De,(t,n)=>{const{status:o,...i}=t,{status:r,...s}=n;return(o==null?void 0:o.id)===(r==null?void 0:r.id)&&Wo(i,s)});function Er({skeleton:t,account:n,avatarSize:o="xl",useAvatarStatic:i=!1,instance:r,external:s,internal:l,onClick:c,showActivity:d=!1,showStats:f=!1,accountInstance:h,hideDisplayName:u=!1,relationship:_={},excludeRelationshipAttrs:g=[]}){if(t)return e("div",{class:"account-block skeleton",children:[e(Ae,{size:o}),e("span",{children:[e("b",{children:"â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ"}),e("br",{}),e("span",{class:"account-block-acct",children:"â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ"})]})]});if(!n)return null;const{id:b,acct:E,avatar:w,avatarStatic:R,displayName:k,username:v,emojis:p,url:D,statusesCount:U,lastStatusAt:A,bot:L,fields:S,note:C,group:q,followersCount:M,createdAt:O,locked:te}=n;let[re,Z,me]=E.match(/([^@]+)(@.+)/i)||[,E];h&&(me=`@${h}`);const he=S==null?void 0:S.find(H=>!!H.verifiedAt&&!!H.value),B={};for(const H in _)g.includes(H)||(B[H]=_[H]);const I=B.following||B.followedBy||B.requested;return e("a",{class:"account-block",href:D,target:s?"_blank":null,title:me?E:`@${E}`,onClick:H=>{if(!s){if(H.preventDefault(),c)return c(H);l?location.hash=`/${r}/a/${b}`:P.showAccount={account:n,instance:r}}},children:[e(Ae,{url:i?R:w||R,size:o,squircle:L}),e("span",{class:"account-block-content",children:[!u&&e($,{children:k?e("b",{children:e(it,{text:k,emojis:p})}):e("b",{children:v})})," ",e("span",{class:"account-block-acct",children:[me?"":"@",Z,e("wbr",{}),me,te&&e($,{children:[" ",e(y,{icon:"lock",size:"s",alt:"Locked"})]})]}),d&&e($,{children:[e("br",{}),e("small",{class:"last-status-at insignificant",children:["Posts: ",U,!!A&&e($,{children:[" ","Â· Last posted:"," ",st(A,{hideTime:!0})]})]})]}),f&&e("div",{class:"account-block-stats",children:[L&&e($,{children:e("span",{class:"tag collapsed",children:[e(y,{icon:"bot"})," Automated"]})}),!!q&&e($,{children:e("span",{class:"tag collapsed",children:[e(y,{icon:"group"})," Group"]})}),I&&e("div",{class:"shazam-container-horizontal",children:e("div",{class:"shazam-container-inner",children:B.following&&B.followedBy?e("span",{class:"tag minimal",children:"Mutual"}):B.requested?e("span",{class:"tag minimal",children:"Requested"}):B.following?e("span",{class:"tag minimal",children:"Following"}):B.followedBy?e("span",{class:"tag minimal",children:"Follows you"}):null})},_.id),!!M&&e("span",{class:"ib",children:[Pe(M)," ",M===1?"follower":"followers"]}),!!he&&e("span",{class:"verified-field",children:[e(y,{icon:"check-circle",size:"s"})," ",e("span",{dangerouslySetInnerHTML:{__html:Yn(he.value,{emojis:p})}})]}),!L&&!q&&!I&&!M&&!he&&!!O&&e("span",{class:"created-at",children:["Joined"," ",e("time",{datetime:O,children:st(O,{hideTime:!0})})]})]})]})]})}const hr={"@mastodon/edit-media-attributes":">=4.1","@mastodon/list-exclusive":">=4.2","@mastodon/filtered-notifications":"~4.3 || >=4.3"},Gt={};function Tr(t){try{const{version:n,domain:o}=ra(),i=`${o}-${t}`;if(Gt[i])return Gt[i];const r=hr[t];return r?Gt[i]=Go(n,r,{includePrerelease:!0,loose:!0}):!1}catch{return!1}}function Vn(t,n){const o=Yo(t,n);return{set:(i,r)=>Xo(i,r,o),get:i=>Zo(i,o),getMany:i=>Qo(i,o),del:i=>Jo(i,o),delMany:i=>ea(i,o),clear:()=>ta(o),keys:()=>na(o)}}const kr={drafts:Vn("drafts-db","drafts-store"),catchup:Vn("catchup-db","catchup-store")};export{Ae as A,Zt as B,jn as C,ot as D,it as E,Xn as F,Dn as G,da as H,y as I,Qt as J,He as L,Xt as M,nt as N,Re as R,yr as S,Xa as T,Pe as a,wt as b,Nt as c,Gn as d,xn as e,Tr as f,Er as g,Ma as h,Yn as i,nn as j,tn as k,Fa as l,Wn as m,st as n,ia as o,br as p,Qn as q,kr as r,ie as s,Ft as t,vr as u,Fn as v,$t as w,Zn as x,qt as y,Pa as z};
//# sourceMappingURL=db-VHhRFCXL.js.map
