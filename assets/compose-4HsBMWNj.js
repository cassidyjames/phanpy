import{p as N,t as At,F as U,_ as J,u as be,Z as Lt,q as xe,b as e,k as ge,E as zt,ao as St,n as It,o as ze,m as _t,a as Tt,M as Ge,g as Ve,x as ct}from"./vendor-xjYnst4X.js";import{v as Mt,P as Bt,p as Ye,u as $t,e as ut,a as Dt,I as K,r as Ze,d as dt,Q as Pt,M as Le,s as me,K as Rt,j as jt,b as Nt,l as Ht,q as Ot}from"./status-ZnvYi558.js";import{s as ae,a as Ne,e as Ut,A as ht,c as fe,f as qt,b as Kt,L as Se,p as Wt}from"./useTitle-G76IQb4q.js";class Gt{constructor(t,a,{tabInsertsSuggestions:o,defaultFirstOption:r}={}){this.input=t,this.list=a,this.tabInsertsSuggestions=o??!0,this.defaultFirstOption=r??!1,this.isComposing=!1,a.id||(a.id=`combobox-${Math.random().toString().slice(2,6)}`),this.ctrlBindings=!!navigator.userAgent.match(/Macintosh/),this.keyboardEventHandler=u=>Vt(u,this),this.compositionEventHandler=u=>Zt(u,this),this.inputHandler=this.clearSelection.bind(this),t.setAttribute("role","combobox"),t.setAttribute("aria-controls",a.id),t.setAttribute("aria-expanded","false"),t.setAttribute("aria-autocomplete","list"),t.setAttribute("aria-haspopup","listbox")}destroy(){this.clearSelection(),this.stop(),this.input.removeAttribute("role"),this.input.removeAttribute("aria-controls"),this.input.removeAttribute("aria-expanded"),this.input.removeAttribute("aria-autocomplete"),this.input.removeAttribute("aria-haspopup")}start(){this.input.setAttribute("aria-expanded","true"),this.input.addEventListener("compositionstart",this.compositionEventHandler),this.input.addEventListener("compositionend",this.compositionEventHandler),this.input.addEventListener("input",this.inputHandler),this.input.addEventListener("keydown",this.keyboardEventHandler),this.list.addEventListener("click",Je),this.indicateDefaultOption()}stop(){this.clearSelection(),this.input.setAttribute("aria-expanded","false"),this.input.removeEventListener("compositionstart",this.compositionEventHandler),this.input.removeEventListener("compositionend",this.compositionEventHandler),this.input.removeEventListener("input",this.inputHandler),this.input.removeEventListener("keydown",this.keyboardEventHandler),this.list.removeEventListener("click",Je)}indicateDefaultOption(){var t;this.defaultFirstOption&&((t=Array.from(this.list.querySelectorAll('[role="option"]:not([aria-disabled="true"])')).filter(De)[0])===null||t===void 0||t.setAttribute("data-combobox-option-default","true"))}navigate(t=1){const a=Array.from(this.list.querySelectorAll('[aria-selected="true"]')).filter(De)[0],o=Array.from(this.list.querySelectorAll('[role="option"]')).filter(De),r=o.indexOf(a);if(r===o.length-1&&t===1||r===0&&t===-1){this.clearSelection(),this.input.focus();return}let u=t===1?0:o.length-1;if(a&&r>=0){const f=r+t;f>=0&&f<o.length&&(u=f)}const d=o[u];if(d)for(const f of o)f.removeAttribute("data-combobox-option-default"),d===f?(this.input.setAttribute("aria-activedescendant",d.id),d.setAttribute("aria-selected","true"),Jt(this.list,d)):f.removeAttribute("aria-selected")}clearSelection(){this.input.removeAttribute("aria-activedescendant");for(const t of this.list.querySelectorAll('[aria-selected="true"]'))t.removeAttribute("aria-selected");this.indicateDefaultOption()}}function Vt(n,t){if(!(n.shiftKey||n.metaKey||n.altKey)&&!(!t.ctrlBindings&&n.ctrlKey)&&!t.isComposing)switch(n.key){case"Enter":Xe(t.input,t.list)&&n.preventDefault();break;case"Tab":t.tabInsertsSuggestions&&Xe(t.input,t.list)&&n.preventDefault();break;case"Escape":t.clearSelection();break;case"ArrowDown":t.navigate(1),n.preventDefault();break;case"ArrowUp":t.navigate(-1),n.preventDefault();break;case"n":t.ctrlBindings&&n.ctrlKey&&(t.navigate(1),n.preventDefault());break;case"p":t.ctrlBindings&&n.ctrlKey&&(t.navigate(-1),n.preventDefault());break;default:if(n.ctrlKey)break;t.clearSelection()}}function Je(n){if(!(n.target instanceof Element))return;const t=n.target.closest('[role="option"]');t&&t.getAttribute("aria-disabled")!=="true"&&Yt(t)}function Xe(n,t){const a=t.querySelector('[aria-selected="true"], [data-combobox-option-default="true"]');return a?(a.getAttribute("aria-disabled")==="true"||a.click(),!0):!1}function Yt(n){n.dispatchEvent(new CustomEvent("combobox-commit",{bubbles:!0}))}function De(n){return!n.hidden&&!(n instanceof HTMLInputElement&&n.type==="hidden")&&(n.offsetWidth>0||n.offsetHeight>0)}function Zt(n,t){t.isComposing=n.type==="compositionstart",document.getElementById(t.input.getAttribute("aria-controls")||"")&&t.clearSelection()}function Jt(n,t){Xt(n,t)||(n.scrollTop=t.offsetTop)}function Xt(n,t){const a=n.scrollTop,o=a+n.clientHeight,r=t.offsetTop,u=r+t.clientHeight;return r>=a&&u<=o}const Qt=/\s|\(|\[/;function en(n,t,a,{multiWord:o,lookBackIndex:r,lastMatchPosition:u}={multiWord:!1,lookBackIndex:0,lastMatchPosition:null}){let d=n.lastIndexOf(t,a-1);if(d===-1||d<r)return;if(o){if(u!=null){if(u===d)return;d=u-t.length}if(n[d+1]===" "&&a>=d+t.length+1||n.lastIndexOf(`
`,a-1)>d||n.lastIndexOf(".",a-1)>d)return}else if(n.lastIndexOf(" ",a-1)>d)return;const f=n[d-1];return f&&!Qt.test(f)?void 0:{text:n.substring(d+t.length,a),position:d+t.length}}const tn=["position:absolute;","overflow:auto;","word-wrap:break-word;","top:0px;","left:-9999px;"],Qe=["box-sizing","font-family","font-size","font-style","font-variant","font-weight","height","letter-spacing","line-height","max-height","min-height","padding-bottom","padding-left","padding-right","padding-top","border-bottom","border-left","border-right","border-top","text-decoration","text-indent","text-transform","width","word-spacing"],et=new WeakMap;function nn(n,t){const a=n.nodeName.toLowerCase();if(a!=="textarea"&&a!=="input")throw new Error("expected textField to a textarea or input");let o=et.get(n);if(o&&o.parentElement===n.parentElement)o.innerHTML="";else{o=document.createElement("div"),et.set(n,o);const f=window.getComputedStyle(n),m=tn.slice(0);a==="textarea"?m.push("white-space:pre-wrap;"):m.push("white-space:nowrap;");for(let M=0,E=Qe.length;M<E;M++){const b=Qe[M];m.push(`${b}:${f.getPropertyValue(b)};`)}o.style.cssText=m.join(" ")}const r=document.createElement("span");r.style.cssText="position: absolute;",r.innerHTML="&nbsp;";let u,d;if(typeof t=="number"){let f=n.value.substring(0,t);f&&(u=document.createTextNode(f)),f=n.value.substring(t),f&&(d=document.createTextNode(f))}else{const f=n.value;f&&(u=document.createTextNode(f))}if(u&&o.appendChild(u),o.appendChild(r),d&&o.appendChild(d),!o.parentElement){if(!n.parentElement)throw new Error("textField must have a parentElement to mirror");n.parentElement.insertBefore(o,n)}return o.scrollTop=n.scrollTop,o.scrollLeft=n.scrollLeft,{mirror:o,marker:r}}function an(n,t=n.selectionEnd){const{mirror:a,marker:o}=nn(n,t),r=a.getBoundingClientRect(),u=o.getBoundingClientRect();return setTimeout(()=>{a.remove()},5e3),{top:u.top-r.top,left:u.left-r.left}}const Ce=new WeakMap;function sn(n){try{if(n.matches(":popover-open"))return!0}catch{}try{if(n.matches("dialog:modal"))return!0}catch{}try{if(n.matches(":fullscreen"))return!0}catch{}return!1}class on{constructor(t,a){this.expander=t,this.input=a,this.combobox=null,this.menu=null,this.match=null,this.justPasted=!1,this.lookBackIndex=0,this.oninput=this.onInput.bind(this),this.onpaste=this.onPaste.bind(this),this.onkeydown=this.onKeydown.bind(this),this.oncommit=this.onCommit.bind(this),this.onmousedown=this.onMousedown.bind(this),this.onblur=this.onBlur.bind(this),this.interactingWithList=!1,a.addEventListener("paste",this.onpaste),a.addEventListener("input",this.oninput),a.addEventListener("keydown",this.onkeydown),a.addEventListener("blur",this.onblur)}destroy(){this.input.removeEventListener("paste",this.onpaste),this.input.removeEventListener("input",this.oninput),this.input.removeEventListener("keydown",this.onkeydown),this.input.removeEventListener("blur",this.onblur)}dismissMenu(){this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex)}activate(t,a){var o,r;if(this.input!==document.activeElement&&this.input!==((r=(o=document.activeElement)===null||o===void 0?void 0:o.shadowRoot)===null||r===void 0?void 0:r.activeElement))return;this.deactivate(),this.menu=a,a.id||(a.id=`text-expander-${Math.floor(Math.random()*1e5).toString()}`),this.expander.append(a),this.combobox=new Gt(this.input,a),this.expander.dispatchEvent(new Event("text-expander-activate"));let{top:u,left:d}=an(this.input,t.position);if(sn(a)){const f=this.input.getBoundingClientRect();u+=f.top,d+=f.left,getComputedStyle(a).position==="absolute"&&(u+=window.scrollY,d+=window.scrollX)}a.style.top=`${u}px`,a.style.left=`${d}px`,this.combobox.start(),a.addEventListener("combobox-commit",this.oncommit),a.addEventListener("mousedown",this.onmousedown),this.combobox.navigate(1)}deactivate(){const t=this.menu;return!t||!this.combobox?!1:(this.expander.dispatchEvent(new Event("text-expander-deactivate")),this.menu=null,t.removeEventListener("combobox-commit",this.oncommit),t.removeEventListener("mousedown",this.onmousedown),this.combobox.destroy(),this.combobox=null,t.remove(),!0)}onCommit({target:t}){var a;const o=t;if(!(o instanceof HTMLElement)||!this.combobox)return;const r=this.match;if(!r)return;const u=this.input.value.substring(0,r.position-r.key.length),d=this.input.value.substring(r.position+r.text.length),f={item:o,key:r.key,value:null,continue:!1};if(!this.expander.dispatchEvent(new CustomEvent("text-expander-value",{cancelable:!0,detail:f}))||!f.value)return;let M=(a=this.expander.getAttribute("suffix"))!==null&&a!==void 0?a:" ";f.continue&&(M="");const E=`${f.value}${M}`;this.input.value=u+E+d;const b=u.length+E.length;this.deactivate(),this.input.focus({preventScroll:!0}),this.input.selectionStart=b,this.input.selectionEnd=b,f.continue||(this.lookBackIndex=b,this.match=null),this.expander.dispatchEvent(new CustomEvent("text-expander-committed",{cancelable:!1,detail:{input:this.input}}))}onBlur(){if(this.interactingWithList){this.interactingWithList=!1;return}this.deactivate()}onPaste(){this.justPasted=!0}async onInput(){if(this.justPasted){this.justPasted=!1;return}const t=this.findMatch();if(t){this.match=t;const a=await this.notifyProviders(t);if(!this.match)return;a?this.activate(t,a):this.deactivate()}else this.match=null,this.deactivate()}findMatch(){const t=this.input.selectionEnd||0,a=this.input.value;t<=this.lookBackIndex&&(this.lookBackIndex=t-1);for(const{key:o,multiWord:r}of this.expander.keys){const u=en(a,o,t,{multiWord:r,lookBackIndex:this.lookBackIndex,lastMatchPosition:this.match?this.match.position:null});if(u)return{text:u.text,key:o,position:u.position}}}async notifyProviders(t){const a=[],o=f=>a.push(f);return this.expander.dispatchEvent(new CustomEvent("text-expander-change",{cancelable:!0,detail:{provide:o,text:t.text,key:t.key}}))?(await Promise.all(a)).filter(f=>f.matched).map(f=>f.fragment)[0]:void 0}onMousedown(){this.interactingWithList=!0}onKeydown(t){t.key==="Escape"&&(this.match=null,this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex,t.stopImmediatePropagation(),t.preventDefault()))}}class tt extends HTMLElement{get keys(){const t=this.getAttribute("keys"),a=t?t.split(" "):[],o=this.getAttribute("multiword"),r=o?o.split(" "):[],u=r.length===0&&this.hasAttribute("multiword");return a.map(d=>({key:d,multiWord:u||r.includes(d)}))}connectedCallback(){const t=this.querySelector('input[type="text"], textarea');if(!(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement))return;const a=new on(this,t);Ce.set(this,a)}disconnectedCallback(){const t=Ce.get(this);t&&(t.destroy(),Ce.delete(this))}dismiss(){const t=Ce.get(this);t&&t.dismissMenu()}}window.customElements.get("text-expander")||(window.TextExpanderElement=tt,window.customElements.define("text-expander",tt));function rn({onlyFirst:n=!1}={}){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,n?void 0:"g")}const ln=rn();function cn(n){if(typeof n!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof n}\``);return n.replace(ln,"")}const un=new Intl.Segmenter;function nt(n,{countAnsiEscapeCodes:t=!1}={}){if(n===""||(t||(n=cn(n)),n===""))return 0;let a=0;for(const o of un.segment(n))a++;return a}const dn="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.0'%20viewBox='0%200%20641%20223'%3e%3cpath%20fill='%23aaa'%20d='M86%20214c-9-1-17-4-24-8l-6-3-5-5-5-4-4-6-4-6-3-8-2-8v-27l2-9%203-9%204-6%204-6%205-5%205-5%207-3%206-4%207-2%207-2%2012-1h12l7%201%208%202%207%204%207%203%205%205%205%204-10%2010-10%209-4-3-10-5-5-1H88l-5%202-6%203-3%204-4%204-2%205-2%206v6l-1%207%201%207%202%207%203%205%202%204%204%203%204%203%205%202%206%202h9l10-1%205-2%206-3v-16H91v-27h59v54l-1%203-2%203-5%204-4%204-5%203-5%202-8%202-8%202-10%201H92l-6-1zm266-62V91h34v46h44V91h34v121h-34v-46h-44v46h-34v-61zm-182-1V90h34v121h-34v-60zm59-1V90h35l36%201%205%202c3%200%208%202%2010%204l5%202%204%205%205%204%203%207%203%207%201%2013v13l-4%206-3%207-4%204-5%205-5%202-5%203-6%202-5%201-18%201h-18v32h-34v-61zm67-2%203-2%202-4%202-5v-5l-2-4-2-4-3-2-3-3h-30v31h30l3-2zm226%2039v-24l-8-12-18-28a1751%201751%200%200%200-20-31v-2h39l7%2012%2012%2021%206%209%2013-21%2013-21h38v2l-41%2061-7%2010v48h-34v-24zM109%2066l-4-1-5-5-5-4-1-5-3-9v-5l1-5c2-7%203-10%208-15l4-4%207-2%207-2h7l6%201%205%202%205%202%203%204%204%203%202%206%202%205v13l-2%205-2%206-4%204-3%203-5%202-4%202-9%201h-9l-5-2zm22-11%204-2%203-4%202-5V34l-2-4-2-4-3-2-4-3-5-1h-6l-4%202-5%202-2%204-3%205-1%203v4l1%205%202%205%202%202%205%203%204%202h10l4-2zM37%2039V11h33l3%201%203%202%204%203%203%203%201%205%201%204v5l-1%204-3%204-3%205-4%201-3%202-11%201H49v16H37V39zm31%200%203-2%201-2%201-2v-4l-1-3-3-2-2-2H49v18h15l4-1zm107%2025a512%20512%200%200%200-19-53h14l4%2014%206%2019%201%204%201-1%207-19%205-17h9l6%2019%207%2018v-1l2-6%205-17%204-13h14v1l-4%2012-16%2041v2h-5l-5-1-6-15-6-15-1%201-3%207-6%2015-2%208h-11l-1-3zm74-25V11h42v11h-29v2l-1%205v4h29v11h-28v11h2l15%201h13v11h-43V39zm55%200V11h33l5%203%205%202%202%204%202%205v10l-2%203-1%204-5%203-5%203%205%205%208%2010%203%204h-14l-7-9-8-10h-9v19h-12V39zm33-3%202-3v-6l-3-3-2-3h-18v16h1v1h17l2-2zm26%203V11h42v11h-29l-1%206v5h29v11h-28v5l-1%205%201%201v1h30v11h-43V39zm54%200V11h17l18%201%204%202%205%203%202%204%203%204%202%206%201%206v5c-1%206-3%2012-6%2015l-3%204-5%203-5%202-17%201h-16V39zm33%2014%205-5%202-3v-6l-1-6-1-3-1-3-4-3-3-2h-5l-6-1-3%201h-3v34h9l8-1%203-2zm50-14V11h34l5%202%204%202%202%203%202%203v9l-2%202-3%204-1%201%203%203%203%204%201%203%201%204-1%204-1%204-3%203-3%203-5%201-5%201h-31V39zm34%2015%202-1v-6l-2-2-2-2h-20v13h20l2-2zm-3-22%204-2v-6l-2-1-2-2h-19v12h16l4-1zm42%2024V45l-6-9-11-17-5-8h15l4%208%207%2011%202%203%207-11%207-11h14l-11%2016-11%2017v23h-12V56z'/%3e%3c/svg%3e",He=[["aa","Afar","Afaraf"],["ab","Abkhaz","аҧсуа бызшәа"],["ae","Avestan","avesta"],["af","Afrikaans","Afrikaans"],["ak","Akan","Akan"],["am","Amharic","አማርኛ"],["an","Aragonese","aragonés"],["ar","Arabic","اللغة العربية"],["as","Assamese","অসমীয়া"],["av","Avaric","авар мацӀ"],["ay","Aymara","aymar aru"],["az","Azerbaijani","azərbaycan dili"],["ba","Bashkir","башҡорт теле"],["be","Belarusian","беларуская мова"],["bg","Bulgarian","български език"],["bh","Bihari","भोजपुरी"],["bi","Bislama","Bislama"],["bm","Bambara","bamanankan"],["bn","Bengali","বাংলা"],["bo","Tibetan","བོད་ཡིག"],["br","Breton","brezhoneg"],["bs","Bosnian","bosanski jezik"],["ca","Catalan","Català"],["ce","Chechen","нохчийн мотт"],["ch","Chamorro","Chamoru"],["co","Corsican","corsu"],["cr","Cree","ᓀᐦᐃᔭᐍᐏᐣ"],["cs","Czech","čeština"],["cu","Old Church Slavonic","ѩзыкъ словѣньскъ"],["cv","Chuvash","чӑваш чӗлхи"],["cy","Welsh","Cymraeg"],["da","Danish","dansk"],["de","German","Deutsch"],["dv","Divehi","Dhivehi"],["dz","Dzongkha","རྫོང་ཁ"],["ee","Ewe","Eʋegbe"],["el","Greek","Ελληνικά"],["en","English","English"],["eo","Esperanto","Esperanto"],["es","Spanish","Español"],["et","Estonian","eesti"],["eu","Basque","euskara"],["fa","Persian","فارسی"],["ff","Fula","Fulfulde"],["fi","Finnish","suomi"],["fj","Fijian","Vakaviti"],["fo","Faroese","føroyskt"],["fr","French","Français"],["fy","Western Frisian","Frysk"],["ga","Irish","Gaeilge"],["gd","Scottish Gaelic","Gàidhlig"],["gl","Galician","galego"],["gu","Gujarati","ગુજરાતી"],["gv","Manx","Gaelg"],["ha","Hausa","هَوُسَ"],["he","Hebrew","עברית"],["hi","Hindi","हिन्दी"],["ho","Hiri Motu","Hiri Motu"],["hr","Croatian","Hrvatski"],["ht","Haitian","Kreyòl ayisyen"],["hu","Hungarian","magyar"],["hy","Armenian","Հայերեն"],["hz","Herero","Otjiherero"],["ia","Interlingua","Interlingua"],["id","Indonesian","Bahasa Indonesia"],["ie","Interlingue","Interlingue"],["ig","Igbo","Asụsụ Igbo"],["ii","Nuosu","ꆈꌠ꒿ Nuosuhxop"],["ik","Inupiaq","Iñupiaq"],["io","Ido","Ido"],["is","Icelandic","Íslenska"],["it","Italian","Italiano"],["iu","Inuktitut","ᐃᓄᒃᑎᑐᑦ"],["ja","Japanese","日本語"],["jv","Javanese","basa Jawa"],["ka","Georgian","ქართული"],["kg","Kongo","Kikongo"],["ki","Kikuyu","Gĩkũyũ"],["kj","Kwanyama","Kuanyama"],["kk","Kazakh","қазақ тілі"],["kl","Kalaallisut","kalaallisut"],["km","Khmer","ខេមរភាសា"],["kn","Kannada","ಕನ್ನಡ"],["ko","Korean","한국어"],["kr","Kanuri","Kanuri"],["ks","Kashmiri","कश्मीरी"],["ku","Kurmanji (Kurdish)","Kurmancî"],["kv","Komi","коми кыв"],["kw","Cornish","Kernewek"],["ky","Kyrgyz","Кыргызча"],["la","Latin","latine"],["lb","Luxembourgish","Lëtzebuergesch"],["lg","Ganda","Luganda"],["li","Limburgish","Limburgs"],["ln","Lingala","Lingála"],["lo","Lao","ລາວ"],["lt","Lithuanian","lietuvių kalba"],["lu","Luba-Katanga","Tshiluba"],["lv","Latvian","latviešu valoda"],["mg","Malagasy","fiteny malagasy"],["mh","Marshallese","Kajin M̧ajeļ"],["mi","Māori","te reo Māori"],["mk","Macedonian","македонски јазик"],["ml","Malayalam","മലയാളം"],["mn","Mongolian","Монгол хэл"],["mr","Marathi","मराठी"],["ms","Malay","Bahasa Melayu"],["mt","Maltese","Malti"],["my","Burmese","ဗမာစာ"],["na","Nauru","Ekakairũ Naoero"],["nb","Norwegian Bokmål","Norsk bokmål"],["nd","Northern Ndebele","isiNdebele"],["ne","Nepali","नेपाली"],["ng","Ndonga","Owambo"],["nl","Dutch","Nederlands"],["nn","Norwegian Nynorsk","Norsk Nynorsk"],["no","Norwegian","Norsk"],["nr","Southern Ndebele","isiNdebele"],["nv","Navajo","Diné bizaad"],["ny","Chichewa","chiCheŵa"],["oc","Occitan","occitan"],["oj","Ojibwe","ᐊᓂᔑᓈᐯᒧᐎᓐ"],["om","Oromo","Afaan Oromoo"],["or","Oriya","ଓଡ଼ିଆ"],["os","Ossetian","ирон æвзаг"],["pa","Panjabi","ਪੰਜਾਬੀ"],["pi","Pāli","पाऴि"],["pl","Polish","Polski"],["ps","Pashto","پښتو"],["pt","Portuguese","Português"],["qu","Quechua","Runa Simi"],["rm","Romansh","rumantsch grischun"],["rn","Kirundi","Ikirundi"],["ro","Romanian","Română"],["ru","Russian","Русский"],["rw","Kinyarwanda","Ikinyarwanda"],["sa","Sanskrit","संस्कृतम्"],["sc","Sardinian","sardu"],["sd","Sindhi","सिन्धी"],["se","Northern Sami","Davvisámegiella"],["sg","Sango","yângâ tî sängö"],["si","Sinhala","සිංහල"],["sk","Slovak","slovenčina"],["sl","Slovenian","slovenščina"],["sn","Shona","chiShona"],["so","Somali","Soomaaliga"],["sq","Albanian","Shqip"],["sr","Serbian","српски језик"],["ss","Swati","SiSwati"],["st","Southern Sotho","Sesotho"],["su","Sundanese","Basa Sunda"],["sv","Swedish","Svenska"],["sw","Swahili","Kiswahili"],["ta","Tamil","தமிழ்"],["te","Telugu","తెలుగు"],["tg","Tajik","тоҷикӣ"],["th","Thai","ไทย"],["ti","Tigrinya","ትግርኛ"],["tk","Turkmen","Türkmen"],["tl","Tagalog","Wikang Tagalog"],["tn","Tswana","Setswana"],["to","Tonga","faka Tonga"],["tr","Turkish","Türkçe"],["ts","Tsonga","Xitsonga"],["tt","Tatar","татар теле"],["tw","Twi","Twi"],["ty","Tahitian","Reo Tahiti"],["ug","Uyghur","ئۇيغۇرچە‎"],["uk","Ukrainian","Українська"],["ur","Urdu","اردو"],["uz","Uzbek","Ўзбек"],["ve","Venda","Tshivenḓa"],["vi","Vietnamese","Tiếng Việt"],["vo","Volapük","Volapük"],["wa","Walloon","walon"],["wo","Wolof","Wollof"],["xh","Xhosa","isiXhosa"],["yi","Yiddish","ייִדיש"],["yo","Yoruba","Yorùbá"],["za","Zhuang","Saɯ cueŋƅ"],["zh","Chinese","中文"],["zu","Zulu","isiZulu"],["zh-CN","Chinese (China)","简体中文"],["zh-HK","Chinese (Hong Kong)","繁體中文（香港）"],["zh-TW","Chinese (Taiwan)","繁體中文（臺灣）"],["zh-YUE","Cantonese","廣東話"],["ast","Asturian","Asturianu"],["chr","Cherokee","ᏣᎳᎩ ᎦᏬᏂᎯᏍᏗ"],["ckb","Sorani (Kurdish)","سۆرانی"],["cnr","Montenegrin","crnogorski"],["jbo","Lojban","la .lojban."],["kab","Kabyle","Taqbaylit"],["ldn","Láadan","Láadan"],["lfn","Lingua Franca Nova","lingua franca nova"],["sco","Scots","Scots"],["sma","Southern Sami","Åarjelsaemien Gïele"],["smj","Lule Sami","Julevsámegiella"],["szl","Silesian","ślůnsko godka"],["tok","Toki Pona","toki pona"],["xal","Kalmyk","Хальмг келн"],["zba","Balaibalan","باليبلن"],["zgh","Standard Moroccan Tamazight","ⵜⴰⵎⴰⵣⵉⵖⵜ"]],hn="(((?:[^A-Za-z0-9@＠$#＃\\uFFFE\\uFEFF\\uFFFF]|[\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069]|^))((https?:\\/\\/)((?:(?:(?:[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/](?:[_-]|[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/])*)?[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/]\\.)*(?:(?:[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/](?:-|[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/])*)?[^/\\!'#%&'\\(\\)*\\+,\\\\\\-\\.\\/:;<=>\\?@\\[\\]\\^_{|}~\\$//\\x09-\\x0D\\x20\\x85\\xA0\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000//\\uFFFE\\uFEFF\\uFFFF//\\u202A-\\u202E\\u061C\\u200E\\u200F\\u2066\\u2067\\u2068\\u2069/]\\.)(?:(?:(?:삼성|닷컴|닷넷|香格里拉|餐厅|食品|飞利浦|電訊盈科|集团|通販|购物|谷歌|诺基亚|联通|网络|网站|网店|网址|组织机构|移动|珠宝|点看|游戏|淡马锡|机构|書籍|时尚|新闻|政府|政务|招聘|手表|手机|我爱你|慈善|微博|广东|工行|家電|娱乐|天主教|大拿|大众汽车|在线|嘉里大酒店|嘉里|商标|商店|商城|公益|公司|八卦|健康|信息|佛山|企业|中文网|中信|世界|ポイント|ファッション|セール|ストア|コム|グーグル|クラウド|みんな|คอม|संगठन|नेट|कॉम|همراه|موقع|موبايلي|كوم|كاثوليك|عرب|شبكة|بيتك|بازار|العليان|ارامكو|اتصالات|ابوظبي|קום|сайт|рус|орг|онлайн|москва|ком|католик|дети|zuerich|zone|zippo|zip|zero|zara|zappos|yun|youtube|you|yokohama|yoga|yodobashi|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|voyage|voto|voting|vote|volvo|volkswagen|vodka|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vet|versicherung|vermögensberatung|vermögensberater|verisign|ventures|vegas|vanguard|vana|vacations|ups|uol|uno|university|unicom|uconnect|ubs|ubank|tvs|tushu|tunes|tui|tube|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|tmall|tkmaxx|tjx|tjmaxx|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|tci|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|systems|symantec|sydney|swiss|swiftcover|swatch|suzuki|surgery|surf|support|supply|supplies|sucks|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|srt|srl|spreadbetting|spot|sport|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|sncf|smile|smart|sling|skype|sky|skin|ski|site|singles|sina|silk|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|search|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sbs|sbi|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|ryukyu|rwe|run|ruhr|rugby|rsvp|room|rogers|rodeo|rocks|rocher|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|raid|radio|racing|qvc|quest|quebec|qpon|pwc|pub|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|post|porn|politie|poker|pohl|pnc|plus|plumbing|playstation|play|place|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|phd|pharmacy|pfizer|pet|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|pamperedchef|page|ovh|ott|otsuka|osaka|origins|orientexpress|organic|org|orange|oracle|open|ooo|onyourside|online|onl|ong|one|omega|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nyc|ntt|nrw|nra|nowtv|nowruz|now|norton|northwesternmutual|nokia|nissay|nissan|ninja|nikon|nike|nico|nhk|ngo|nfl|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|nba|navy|natura|nationwide|name|nagoya|nadex|nab|mutuelle|mutual|museum|mtr|mtpc|mtn|msd|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|montblanc|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mma|mls|mlb|mitsubishi|mit|mint|mini|mil|microsoft|miami|metlife|merckmsd|meo|menu|men|memorial|meme|melbourne|meet|media|med|mckinsey|mcdonalds|mcd|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|macys|luxury|luxe|lupin|lundbeck|ltda|ltd|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|llp|llc|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|kyoto|kuokgroup|kred|krd|kpn|kpmg|kosher|komatsu|koeln|kiwi|kitchen|kindle|kinder|kim|kia|kfh|kerryproperties|kerrylogistics|kerryhotels|kddi|kaufen|juniper|juegos|jprs|jpmorgan|joy|jot|joburg|jobs|jnj|jmp|jll|jlc|jio|jewelry|jetzt|jeep|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|istanbul|ist|ismaili|iselect|irish|ipiranga|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|immobilien|immo|imdb|imamat|ikano|iinet|ifm|ieee|icu|ice|icbc|ibm|hyundai|hyatt|hughes|htc|hsbc|how|house|hotmail|hotels|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hkt|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|guru|guitars|guide|guge|gucci|guardian|group|grocery|gripe|green|gratis|graphics|grainger|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gmx|gmo|gmbh|gmail|globo|global|gle|glass|glade|giving|gives|gifts|gift|ggee|george|genting|gent|gea|gdn|gbiz|gay|garden|gap|games|game|gallup|gallo|gallery|gal|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fly|flsmidth|flowers|florist|flir|flights|flickr|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|etisalat|esurance|estate|esq|erni|ericsson|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|education|edu|edeka|eco|eat|earth|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|doosan|domains|doha|dog|dodge|doctor|docs|dnp|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cyou|cymru|cuisinella|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cpa|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|church|chrysler|chrome|christmas|chloe|chintai|cheap|chat|chase|charity|channel|chanel|cfd|cfa|cern|ceo|center|ceb|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|bzh|buzz|buy|business|builders|build|bugatti|budapest|brussels|brother|broker|broadway|bridgestone|bradesco|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bnpparibas|bnl|bmw|bms|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|biz|bio|bingo|bing|bike|bid|bible|bharti|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|bcn|bcg|bbva|bbt|bbc|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|azure|axa|aws|avianca|autos|auto|author|auspost|audio|audible|audi|auction|attorney|athleta|associates|asia|asda|arte|art|arpa|army|archi|aramco|arab|aquarelle|apple|app|apartments|aol|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|akdn|airtel|airforce|airbus|aigo|aig|agency|agakhan|africa|afl|afamilycompany|aetna|aero|aeg|adult|ads|adac|actor|active|aco|accountants|accountant|accenture|academy|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa|onion)(?=[^0-9a-zA-Z@+-]|$))|(?:(?:한국|香港|澳門|新加坡|台灣|台湾|中國|中国|გე|ລາວ|ไทย|ලංකා|ഭാരതം|ಭಾರತ|భారత్|சிங்கப்பூர்|இலங்கை|இந்தியா|ଭାରତ|ભારત|ਭਾਰਤ|ভাৰত|ভারত|বাংলা|भारोत|भारतम्|भारत|ڀارت|پاکستان|موريتانيا|مليسيا|مصر|قطر|فلسطين|عمان|عراق|سورية|سودان|تونس|بھارت|بارت|ایران|امارات|المغرب|السعودية|الجزائر|البحرين|الاردن|հայ|қаз|укр|срб|рф|мон|мкд|ею|бел|бг|ευ|ελ|zw|zm|za|yt|ye|ws|wf|vu|vn|vi|vg|ve|vc|va|uz|uy|us|um|uk|ug|ua|tz|tw|tv|tt|tr|tp|to|tn|tm|tl|tk|tj|th|tg|tf|td|tc|sz|sy|sx|sv|su|st|ss|sr|so|sn|sm|sl|sk|sj|si|sh|sg|se|sd|sc|sb|sa|rw|ru|rs|ro|re|qa|py|pw|pt|ps|pr|pn|pm|pl|pk|ph|pg|pf|pe|pa|om|nz|nu|nr|np|no|nl|ni|ng|nf|ne|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|mn|mm|ml|mk|mh|mg|mf|me|md|mc|ma|ly|lv|lu|lt|ls|lr|lk|li|lc|lb|la|kz|ky|kw|kr|kp|kn|km|ki|kh|kg|ke|jp|jo|jm|je|it|is|ir|iq|io|in|im|il|ie|id|hu|ht|hr|hn|hm|hk|gy|gw|gu|gt|gs|gr|gq|gp|gn|gm|gl|gi|gh|gg|gf|ge|gd|gb|ga|fr|fo|fm|fk|fj|fi|eu|et|es|er|eh|eg|ee|ec|dz|do|dm|dk|dj|de|cz|cy|cx|cw|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|bz|by|bw|bv|bt|bs|br|bq|bo|bn|bm|bl|bj|bi|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ar|aq|ao|an|am|al|ai|ag|af|ae|ad|ac)(?=[^0-9a-zA-Z@+-]|$))|(?:xn--[\\-0-9a-z]+))))(?::([0-9]+))?(\\/(?:(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*(?:\\((?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+|(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*\\([a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*))\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*)*[\\+\\-a-z\\u0400-\\u04FF0-9=_#\\/\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]|(?:\\((?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+|(?:[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*\\([a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\)[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]*))\\)))|(?:@[a-z\\u0400-\\u04FF0-9!\\*';:=\\+,\\.\\$\\/%#\\[\\]\\-\\u2013_~@\\|&\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\xFF\\u0100-\\u024F\\u0253\\u0254\\u0256\\u0257\\u0259\\u025B\\u0263\\u0268\\u026F\\u0272\\u0289\\u028B\\u02BB\\u0300-\\u036F\\u1E00-\\u1EFF]+\\/))*)?(\\?[a-z0-9!?\\*'@\\(\\);:&=\\+\\$\\/%#\\[\\]\\-_\\.,~|]*[a-z0-9\\-_&=#\\/])?))",pn="gi",it={source:hn,flags:pn};var mn={PHANPY_CLIENT_NAME:"Blaede Phanpy",PHANPY_WEBSITE:"https://phanpy.blaede.family",PHANPY_LINGVA_INSTANCES:"lingva.phanpy.social lingva.lunar.icu lingva.garudalinux.org translate.plausibility.cloud",PHANPY_PRIVACY_POLICY_URL:"https://mastodon.blaede.family/privacy-policy",VITE_APP_ENV:"production",PHANPY_DEFAULT_INSTANCE:"mastodon.blaede.family",PHANPY_GIPHY_API_KEY:"48JGsrSS1XE5w4nWe9c9hqxPbsfRWR0e",PHANPY_DEFAULT_INSTANCE_REGISTRATION_URL:"https://mastodon.blaede.family/auth/sign_up",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{PHANPY_IMG_ALT_API_URL:Pe,PHANPY_GIPHY_API_KEY:gn}=mn,fn=He.reduce((n,t)=>{const[a,o,r]=t;return n[a]={common:o,native:r},n},{}),pt={"5 minutes":5*60,"30 minutes":30*60,"1 hour":60*60,"6 hours":6*60*60,"12 hours":12*60*60,"1 day":24*60*60,"3 days":3*24*60*60,"7 days":7*24*60*60},vn=Object.values(pt),at=24*60*60,st=n=>{if(!n)return at;const t=(new Date(n).getTime()-Date.now())/1e3;return vn.find(a=>a>=t)||at},de=document.createElement("ul");de.role="listbox";de.className="text-expander-menu";const bn=16,xn=new IntersectionObserver(n=>{n.forEach(t=>{if(t.isIntersecting){const{left:a,width:o}=t.boundingClientRect,{innerWidth:r}=window;a+o>r&&(de.style.left=r-o-bn+"px")}})});xn.observe(de);const pe=Mt([new Intl.DateTimeFormat().resolvedOptions().locale,...navigator.languages],He.map(n=>n[0]),"en"),mt=new RegExp(it.source,it.flags),yn=/(^|[^\/\w])@(([a-z0-9_]+)@[a-z0-9\.\-]+[a-z0-9]+)/gi,wn="$2xxxxxxxxxxxxxxxxxxxxxxx";function kn(n){return n.replace(mt,wn).replace(yn,"$1@$3")}const En=/[a-z0-9_]+([a-z0-9_.-]+[a-z0-9_]+)?/i,Fn=new RegExp(`(^|[^=\\/\\w])(@${En.source}(?:@[\\p{L}\\w.-]+[\\w]+)?)`,"uig"),Cn=new RegExp("(^|[^=\\/\\w])(#[a-z0-9_]+([a-z0-9_.]+[a-z0-9_]+)?)(?![\\/\\w])","ig"),An="[a-zA-Z0-9_]{2,}",Ln=new RegExp(`(^|[^=\\/\\w])(:${An}:)(?=[^A-Za-z0-9_:]|$)`,"g"),zn=new Intl.Segmenter;function Sn(n,{maxCharacters:t=1/0}){let a=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");const{composerCharacterCount:o}=ae;if(o>t){let r="",u="";const d=zn.segment(a);for(const{segment:f,index:m}of d)m<t?r+=f:u+=f;return u&&(u='<mark class="compose-highlight-exceeded">'+u+"</mark>"),r+u}return a.replace(mt,'$2<mark class="compose-highlight-url">$3</mark>').replace(Fn,'$1<mark class="compose-highlight-mention">$2</mark>').replace(Cn,'$1<mark class="compose-highlight-hashtag">$2</mark>').replace(Ln,'$1<mark class="compose-highlight-emoji-shortcode">$2</mark>')}const In=new Intl.RelativeTimeFormat,je=100;function qn({onClose:n,replyToStatus:t,editStatus:a,draftStatus:o,standalone:r,hasOpener:u}){var We;const{masto:d,instance:f}=Ne(),[m,M]=N("default"),E=U((o==null?void 0:o.uid)||At()),b=Ut(),z=b.info,G=ht(),{statuses:{maxCharacters:D,maxMediaAttachments:I,charactersReservedPerUrl:te}={},mediaAttachments:{supportedMimeTypes:V=[],imageSizeLimit:c,imageMatrixLimit:p,videoSizeLimit:g,videoMatrixLimit:v,videoFrameRateLimit:F}={},polls:{maxOptions:y,maxCharactersPerOption:B,maxExpiration:q,minExpiration:se}={}}=G||{},S=U(),Y=U(),[W,O]=N("public"),[P,X]=N(!1),[j,ee]=N(fe.session.get("currentLanguage")||pe),ne=U(j),[_,A]=N([]),[T,L]=N(null),H=fe.account.get("preferences")||{},Z=()=>{S.current&&S.current.dispatchEvent(new Event("input"))},ie=()=>{setTimeout(()=>{var s,l,x;S.current&&((l=(s=o==null?void 0:o.status)==null?void 0:s.startsWith)!=null&&l.call(s,`
`)&&(S.current.selectionStart=0,S.current.selectionEnd=0),(x=S.current)==null||x.focus())},300)};J(()=>{if(t){const{spoilerText:s,visibility:l,language:x,sensitive:h}=t;s&&Y.current&&(Y.current.value=s);const w=[...new Set([t.account.acct,...t.mentions.map(k=>k.acct)])].filter(k=>k!==z.acct);w.length>0&&(S.current.value=`${w.map(k=>`@${k}`).join(" ")} `,Z()),ie(),O(l==="public"&&H["posting:default:visibility"]?H["posting:default:visibility"]:l),ee(x||H.postingDefaultLanguage||pe),X(h&&!!s)}else if(a){const{visibility:s,language:l,sensitive:x,poll:h,mediaAttachments:$}=a,w=!!(h!=null&&h.options)&&{...h,options:h.options.map(k=>(k==null?void 0:k.title)||k),expiresIn:(h==null?void 0:h.expiresIn)||st(h.expiresAt)};M("loading"),(async()=>{try{const k=await d.v1.statuses.$select(a.id).source.fetch(),{text:C,spoilerText:R}=k;S.current.value=C,S.current.dataset.source=C,Z(),ie(),Y.current.value=R,O(s),ee(l||presf.postingDefaultLanguage||pe),X(x),w&&L(w),A($),M("default")}catch(k){alert((k==null?void 0:k.reason)||k),M("error")}})()}else ie(),H["posting:default:visibility"]&&O(H["posting:default:visibility"]),H["posting:default:language"]&&ee(H["posting:default:language"]),H["posting:default:sensitive"]&&X(H["posting:default:sensitive"]);if(o){const{status:s,spoilerText:l,visibility:x,language:h,sensitive:$,poll:w,mediaAttachments:k}=o,C=!!(w!=null&&w.options)&&{...w,options:w.options.map(R=>(R==null?void 0:R.title)||R),expiresIn:(w==null?void 0:w.expiresIn)||st(w.expiresAt)};S.current.value=s,Z(),ie(),l&&(Y.current.value=l),x&&O(x),ee(h||H.postingDefaultLanguage||pe),$!==null&&X($),C&&L(C),k&&A(k)}},[o,a,t]);const oe=U(),ce="You have unsaved changes. Discard this post?",he=()=>{const{value:s,dataset:l}=S.current;if(m==="loading")return!1;const x=(s||"").trim().replace(new RegExp("^\\p{White_Space}+|\\p{White_Space}+$","gu"),""),h=_.length>0;if(!x&&!h||_.length>0&&_.every(R=>R.id))return!0;const w=(t==null?void 0:t.account.id)===z.id,k=t&&s.trim()===`@${t.account.acct}`;return!!(!w&&k||s===(l==null?void 0:l.source))},ye=()=>he()?!0:confirm(ce);J(()=>{const s=l=>{he()||(l.preventDefault(),l.returnValue=ce)};return window.addEventListener("beforeunload",s,{capture:!0}),()=>window.removeEventListener("beforeunload",s,{capture:!0})},[]);const vt=()=>{const{value:s}=S.current,{value:l}=Y.current;return nt(kn(s))+nt(l)},Ie=()=>{const s=vt();ae.composerCharacterCount=s};J(Ie,[]);const Oe=window.CloseWatcher,_e=U(!1);be("esc",()=>{_e.current=!0},{enabled:!Oe,enableOnFormTags:!0}),be("esc",()=>{!r&&_e.current&&ye()&&n(),_e.current=!1},{enabled:!Oe,enableOnFormTags:!0,keyup:!0,ignoreEventWhen:s=>{const l=document.querySelectorAll("#modal-container > *"),x=!!l,h=l.length===1&&l[0].querySelector("#compose-container");return x&&!h}}),Bt(()=>{!r&&ye()&&n()},[r,ye,n]);const Ue=U({}),qe=()=>`${qt()}#${E.current}`,Te=()=>{if(a||ae.composerState.minimized)return;const s=qe(),l={key:s,replyTo:t?{id:t.id,account:{id:t.account.id,username:t.account.username,acct:t.account.acct}}:null,draftStatus:{uid:E.current,status:S.current.value,spoilerText:Y.current.value,visibility:W,language:j,sensitive:P,poll:T,mediaAttachments:_}};!Lt(l,Ue.current)&&!he()&&(Ye.drafts.set(s,{...l,state:"unsaved",updatedAt:Date.now()}).then(()=>{}).catch(x=>{}),Ue.current=structuredClone(l))};$t(Te,5e3),J(()=>(Te(),()=>{Ye.drafts.del(qe())}),[]),J(()=>{const s=x=>{const{items:h}=x.clipboardData||x.dataTransfer,$=[];for(let w=0;w<h.length;w++){const k=h[w];if(k.kind==="file"){const C=k.getAsFile();C&&V.includes(C.type)&&$.push(C)}}if($.length>0&&_.length>=I){alert(`You can only attach up to ${I} files.`);return}if($.length>0){x.preventDefault(),x.stopPropagation();const w=I-_.length,k=$.slice(0,w);if(k.length<=0){alert(`You can only attach up to ${I} files.`);return}const C=k.map(R=>({file:R,type:R.type,size:R.size,url:URL.createObjectURL(R),id:null,description:null}));A([..._,...C])}};window.addEventListener("paste",s);const l=x=>{x.dataTransfer.items.length>0&&(x.preventDefault(),x.stopPropagation())};return window.addEventListener("dragover",l),window.addEventListener("drop",s),()=>{window.removeEventListener("paste",s),window.removeEventListener("dragover",l),window.removeEventListener("drop",s)}},[_]);const[we,Me]=N(!1),[ke,Ee]=N(!1),[bt,Be]=N(!1),[re,xt]=N(null),[yt,wt]=xe(()=>{const s=[],l=[],{contentTranslationHideLanguages:x=[]}=ae.settings;return He.forEach(h=>{const[$]=h;$===j||$===ne.current||$===pe||x.includes($)||re!=null&&re.length&&re.includes($)?s.push(h):l.push(h)}),s.sort(([h,$],[w,k])=>h===j?-1:w===j?1:$.localeCompare(k)),l.sort(([h,$],[w,k])=>$.localeCompare(k)),[s,l]},[j,re]),Ke=xe(()=>!!(t!=null&&t.createdAt)&&Math.floor((Date.now()-new Date(t.createdAt))/(1e3*60*60*24*30)),[t]),kt=()=>{Te(),ae.composerState.minimized=!0};return e("div",{id:"compose-container-outer",children:[e("div",{id:"compose-container",class:r?"standalone":"",children:[e("div",{class:"compose-top",children:[(z==null?void 0:z.avatarStatic)&&e(ut,{account:z,accountInstance:b.instanceURL,hideDisplayName:!0,useAvatarStatic:!0}),r?u&&e("button",{type:"button",class:"light pop-button",disabled:m==="loading",onClick:()=>{var s;if(!window.opener){alert("Looks like you closed the parent window.");return}if(window.opener.__STATES__.showCompose){if((s=window.opener.__STATES__.composerState)!=null&&s.publishing){alert("Looks like you already have a compose field open in the parent window and currently publishing. Please wait for it to be done and try again later.");return}if(!confirm("Looks like you already have a compose field open in the parent window. Popping in this window will discard the changes you made in the parent window. Continue?"))return}n({fn:()=>{const l={editStatus:a,replyToStatus:t,draftStatus:{uid:E.current,status:S.current.value,spoilerText:Y.current.value,visibility:W,language:j,sensitive:P,poll:T,mediaAttachments:_}};window.opener.__COMPOSE__=l,window.opener.__STATES__.showCompose?(window.opener.__STATES__.showCompose=!1,setTimeout(()=>{window.opener.__STATES__.showCompose=!0},10)):window.opener.__STATES__.showCompose=!0,window.opener.__STATES__.composerState.minimized&&(window.opener.__STATES__.composerState.minimized=!1)}})},children:e(K,{icon:"popin",alt:"Pop in"})}):e("span",{class:"compose-controls",children:[e("button",{type:"button",class:"plain4 pop-button",disabled:m==="loading",onClick:()=>{Dt({editStatus:a,replyToStatus:t,draftStatus:{uid:E.current,status:S.current.value,spoilerText:Y.current.value,visibility:W,language:j,sensitive:P,poll:T,mediaAttachments:_}})&&n()},children:e(K,{icon:"popout",alt:"Pop out"})}),e("button",{type:"button",class:"plain4 min-button",onClick:kt,children:e(K,{icon:"minimize",alt:"Minimize"})})," ",e("button",{type:"button",class:"light close-button",disabled:m==="loading",onClick:()=>{ye()&&n()},children:e(K,{icon:"x"})})]})]}),!!t&&e("div",{class:"status-preview",children:[e(Ze,{status:t,size:"s",previewMode:!0}),e("div",{class:"status-preview-legend reply-to",children:["Replying to @",t.account.acct||t.account.username,"’s post",Ke>=3&&e(ge,{children:[" ","(",e("strong",{children:In.format(-Ke,"month")}),")"]})]})]}),!!a&&e("div",{class:"status-preview",children:[e(Ze,{status:a,size:"s",previewMode:!0}),e("div",{class:"status-preview-legend",children:"Editing source post"})]}),e("form",{ref:oe,class:`form-visibility-${W}`,style:{pointerEvents:m==="loading"?"none":"auto",opacity:m==="loading"?.5:1},onKeyDown:s=>{s.key==="Enter"&&(s.ctrlKey||s.metaKey)&&oe.current.dispatchEvent(new Event("submit",{cancelable:!0}))},onSubmit:s=>{s.preventDefault();const l=new FormData(s.target),x=Object.fromEntries(l.entries());let{status:h,visibility:$,sensitive:w,spoilerText:k}=x;if(w=w==="on",T){if(T.options.length<2){alert("Poll must have at least 2 options");return}if(T.options.some(C=>C==="")){alert("Some poll choices are empty");return}}_.length>0&&_.some(R=>{var Q,ve;return!((ve=(Q=R.description)==null?void 0:Q.trim)!=null&&ve.call(Q))})&&!confirm("Some media have no descriptions. Continue?")||(k=w&&k||void 0,h=h===""?void 0:h,ae.composerState.publishing=!0,M("loading"),(async()=>{try{if(_.length>0){const Q=_.map(le=>{const{file:Fe,description:Et,id:Ft}=le;if(Ft)return le;{const Ct=lt({file:Fe,description:Et});return d.v2.media.create(Ct).then($e=>($e.id&&(le.id=$e.id),$e))}}),ve=await Promise.allSettled(Q);if(ve.some(le=>{var Fe;return le.status==="rejected"||!((Fe=le.value)!=null&&Fe.id)})){ae.composerState.publishing=!1,ae.composerState.publishingError=!0,M("error"),ve.forEach(le=>{le.status==="rejected"&&alert(le.reason||`Attachment #${i} failed`)});return}}let C={status:h,spoiler_text:k,language:j,sensitive:w,poll:T,media_ids:_.map(Q=>Q.id)};a&&dt("@mastodon/edit-media-attributes")?C.media_attributes=_.map(Q=>({id:Q.id,description:Q.description})):a||(C.visibility=$,C.in_reply_to_id=(t==null?void 0:t.id)||void 0),C=lt(C);let R;if(a)R=await d.v1.statuses.$select(a.id).update(C),Kt(R,f,{skipThreading:!0});else try{R=await d.v1.statuses.create(C,{requestInit:{headers:{"Idempotency-Key":E.current}}})}catch{R=await d.v1.statuses.create(C)}ae.composerState.minimized=!1,ae.composerState.publishing=!1,M("default"),n({type:a?"edit":t?"reply":"post",newStatus:R,instance:f})}catch(C){ae.composerState.publishing=!1,ae.composerState.publishingError=!0,alert((C==null?void 0:C.reason)||C),M("error")}})())},children:[e("div",{class:"toolbar stretch",children:[e("input",{ref:Y,type:"text",name:"spoilerText",placeholder:"Content warning",disabled:m==="loading",class:"spoiler-text-field",lang:j,spellCheck:"true",dir:"auto",style:{opacity:P?1:0,pointerEvents:P?"auto":"none"},onInput:()=>{Ie()}}),e("label",{class:`toolbar-button ${P?"highlight":""}`,title:"Content warning or sensitive media",children:[e("input",{name:"sensitive",type:"checkbox",checked:P,disabled:m==="loading",onChange:s=>{var x,h;const l=s.target.checked;X(l),l?(x=Y.current)==null||x.focus():(h=S.current)==null||h.focus()}}),e(K,{icon:`eye-${P?"close":"open"}`})]})," ",e("label",{class:`toolbar-button ${W!=="public"&&!P?"show-field":""} ${W!=="public"?"highlight":""}`,title:`Visibility: ${W}`,children:[e(K,{icon:Pt[W],alt:W}),e("select",{name:"visibility",value:W,onChange:s=>{O(s.target.value)},disabled:m==="loading"||!!a,children:[e("option",{value:"public",children:["Public ",e(K,{icon:"earth"})]}),e("option",{value:"unlisted",children:"Unlisted"}),e("option",{value:"private",children:"Followers only"}),e("option",{value:"direct",children:"Private mention"})]})]})," "]}),e(Mn,{ref:S,placeholder:t?"Post your reply":a?"Edit your post":"What are you doing?",required:(_==null?void 0:_.length)===0,disabled:m==="loading",lang:j,onInput:()=>{Ie()},maxCharacters:D,performSearch:s=>{const{type:l,q:x,limit:h}=s;return l==="accounts"?d.v1.accounts.search.list({q:x,limit:h,resolve:!1}):d.v2.search.fetch(s)},onTrigger:s=>{(s==null?void 0:s.name)==="custom-emojis"?Ee({defaultSearchTerm:(s==null?void 0:s.defaultSearchTerm)||null}):(s==null?void 0:s.name)==="mention"?Me({defaultSearchTerm:(s==null?void 0:s.defaultSearchTerm)||null}):(s==null?void 0:s.name)==="auto-detect-language"&&(s!=null&&s.languages)&&xt(s.languages)}}),(_==null?void 0:_.length)>0&&e("div",{class:"media-attachments",children:[_.map((s,l)=>{const{id:x,file:h}=s,$=(h==null?void 0:h.size)+(h==null?void 0:h.type)+(h==null?void 0:h.name);return e($n,{attachment:s,disabled:m==="loading",lang:j,onDescriptionChange:w=>{A(k=>{const C=[...k];return C[l].description=w,C})},onRemove:()=>{A(w=>w.filter((k,C)=>C!==l))}},x||$||l)}),e("label",{class:"media-sensitive",children:[e("input",{name:"sensitive",type:"checkbox",checked:P,disabled:m==="loading",onChange:s=>{const l=s.target.checked;X(l)}})," ",e("span",{children:"Mark media as sensitive"})," ",e(K,{icon:`eye-${P?"close":"open"}`})]})]}),!!T&&e(Dn,{lang:j,maxOptions:y,maxExpiration:q,minExpiration:se,maxCharactersPerOption:B,poll:T,disabled:m==="loading",onInput:s=>{if(s){const l={...s};L(l)}else L(null)}}),e("div",{class:"toolbar wrap",style:{justifyContent:"flex-end"},children:[e("span",{children:[e("label",{class:"toolbar-button",children:[e("input",{type:"file",accept:V.join(","),multiple:_.length<I-1,disabled:m==="loading"||_.length>=I||!!T,onChange:s=>{const l=s.target.files;if(!l)return;const x=Array.from(l).map(h=>({file:h,type:h.type,size:h.size,url:URL.createObjectURL(h),id:null,description:null}));_.length+x.length>I?alert(`You can only attach up to ${I} files.`):A(h=>h.concat(x)),s.target.value=""}}),e(K,{icon:"attachment"})]})," ",y==null||y>1&&e(ge,{children:[e("button",{type:"button",class:"toolbar-button",disabled:m==="loading"||!!T||!!_.length,onClick:()=>{L({options:["",""],expiresIn:24*60*60,multiple:!1})},children:e(K,{icon:"poll",alt:"Add poll"})})," "]}),e("button",{type:"button",class:"toolbar-button",disabled:m==="loading",onClick:()=>{Ee(!0)},children:e(K,{icon:"emoji2"})}),!!ae.settings.composerGIFPicker&&e("button",{type:"button",class:"toolbar-button gif-picker-button",disabled:m==="loading",onClick:()=>{Be(!0)},children:e("span",{children:"GIF"})})]}),e("div",{class:"spacer"}),m==="loading"?e(Se,{abrupt:!0}):e(Bn,{maxCharacters:D,hidden:m==="loading"}),e("label",{class:`toolbar-button ${j!==ne.current||re!=null&&re.length&&!re.includes(j)?"highlight":""}`,children:[e("span",{class:"icon-text",children:(We=fn[j])==null?void 0:We.native}),e("select",{name:"language",value:j,onChange:s=>{const{value:l}=s.target;ee(l||pe),fe.session.set("currentLanguage",l||pe)},disabled:m==="loading",children:[yt.map(([s,l,x])=>e("option",{value:s,children:[l," (",x,")"]},s)),e("hr",{}),wt.map(([s,l,x])=>e("option",{value:s,children:[l," (",x,")"]},s))]})]})," ",e("button",{type:"submit",class:"large",disabled:m==="loading",children:t?"Reply":a?"Update":"Post"})]})]})]}),we&&e(Le,{onClick:s=>{s.target===s.currentTarget&&Me(!1)},children:e(Pn,{masto:d,instance:f,onClose:()=>{Me(!1)},defaultSearchTerm:we==null?void 0:we.defaultSearchTerm,onSelect:s=>{const l=S.current;if(!l)return;const{selectionStart:x,selectionEnd:h}=l,$=l.value,w=$.slice(0,x),k=w?/[\s\t\n\r]$/.test(w)?"":" ":"",C=$.slice(h),R=/^[\s\t\n\r]/.test(C)?"":" ",Q=w+k+"@"+s+R+C;l.value=Q,l.selectionStart=l.selectionEnd=h+1+s.length+R.length,l.focus(),l.dispatchEvent(new Event("input"))}})}),ke&&e(Le,{onClick:s=>{s.target===s.currentTarget&&Ee(!1)},children:e(Rn,{masto:d,instance:f,onClose:()=>{Ee(!1)},defaultSearchTerm:ke==null?void 0:ke.defaultSearchTerm,onSelect:s=>{const l=S.current;if(!l)return;const{selectionStart:x,selectionEnd:h}=l,$=l.value,w=$.slice(0,x),k=w?/[\s\t\n\r]$/.test(w)?"":" ":"",C=$.slice(h),R=/^[\s\t\n\r]/.test(C)?"":" ",Q=w+k+s+R+C;l.value=Q,l.selectionStart=l.selectionEnd=h+s.length+R.length,l.focus(),l.dispatchEvent(new Event("input"))}})}),bt&&e(Le,{onClick:s=>{s.target===s.currentTarget&&Be(!1)},children:e(Nn,{onClose:()=>Be(!1),onSelect:({url:s,type:l,alt_text:x})=>{if(_.length>=I){alert(`You can only attach up to ${I} files.`);return}(async()=>{var $,w;let h;try{h=me({text:"Downloading GIF…",duration:-1});const k=await fetch(s,{referrerPolicy:"no-referrer"}).then(Q=>Q.blob()),C=new File([k],l==="video/mp4"?"video.mp4":"image.gif",{type:l}),R=[..._,{file:C,type:l,size:C.size,id:null,description:x||""}];A(R),($=h==null?void 0:h.hideToast)==null||$.call(h)}catch{(w=h==null?void 0:h.hideToast)==null||w.call(h),me("Failed to download GIF")}})()}})})]})}function ot(n){if(!n)return;const{value:t,offsetHeight:a,scrollHeight:o,clientHeight:r}=n;if(a<window.innerHeight){const u=a-r,d=t?o+u+"px":null;n.style.height=d}}async function _n(n,t){const o=(await t.v1.customEmojis.list()).filter(u=>u.visibleInPicker),r=new zt(o,{keys:["shortcode"],findAllMatches:!0});return[o,r]}const gt=Wt(_n,{matchesArg:(n,t)=>n.instance===t.instance,maxAge:30*60*1e3}),Tn=n=>{const t=St(n);return t!=null&&t.length?t.slice(0,2).map(a=>a.lang):null},Mn=_t((n,t)=>{var V;const{masto:a,instance:o}=Ne(),[r,u]=N(((V=t.current)==null?void 0:V.value)||""),{maxCharacters:d,performSearch:f=()=>{},onTrigger:m=()=>{},...M}=n,E=U();J(()=>{gt(o,a).then(c=>{const[p,g]=c;E.current=g}).catch(c=>{})},[]);const b=U(),z=U("");J(()=>{let c,p,g;return b.current&&(c=v=>{var se;const{key:F,provide:y,text:B}=v.detail;if(z.current=B,B===""){y(Promise.resolve({matched:!1}));return}if(F===":"){const S=(se=E.current)==null?void 0:se.search(B,{limit:5});let Y="";S.forEach(({item:W})=>{const{shortcode:O,url:P}=W;Y+=`
                <li role="option" data-value="${ue(O)}">
                <img src="${ue(P)}" width="16" height="16" alt="" loading="lazy" /> 
                ${ue(O)}
              </li>`}),Y+=`<li role="option" data-value="" data-more="${B}">More…</li>`,de.innerHTML=Y,y(Promise.resolve({matched:S.length>0,fragment:de}));return}const q={"@":"accounts","#":"hashtags"}[F];y(new Promise(S=>{f({type:q,q:B,limit:5}).then(W=>{if(B!==z.current)return;const O=W[q]||W;let P="";O.forEach(X=>{var Z;const{name:j,avatarStatic:ee,displayName:ne,username:_,acct:A,emojis:T,history:L}=X,H=Rt(ne,T);if(A)P+=`
                    <li role="option" data-value="${ue(A)}">
                      <span class="avatar">
                        <img src="${ue(ee)}" width="16" height="16" alt="" loading="lazy" />
                      </span>
                      <span>
                        <b>${H||_}</b>
                        <br>@${ue(A)}
                      </span>
                    </li>
                  `;else{const ie=(Z=L==null?void 0:L.reduce)==null?void 0:Z.call(L,(oe,ce)=>oe+ +ce.uses,0);P+=`
                    <li role="option" data-value="${ue(j)}">
                      <span class="grow">#<b>${ue(j)}</b></span>
                      ${ie?`<span class="count">${jt(ie)}</span>`:""}
                    </li>
                  `}}),q==="accounts"&&(P+=`<li role="option" data-value="" data-more="${B}">More…</li>`),de.innerHTML=P,S({matched:O.length>0,fragment:de})})}))},b.current.addEventListener("text-expander-change",c),p=v=>{const{key:F,item:y}=v.detail,{value:B,more:q}=y.dataset;F===":"?(v.detail.value=B?`:${B}:`:"​",q&&(v.detail.continue=!0,setTimeout(()=>{m==null||m({name:"custom-emojis",defaultSearchTerm:q})},300))):F==="@"?(v.detail.value=B?`@${B} `:"​",q&&(v.detail.continue=!0,setTimeout(()=>{m==null||m({name:"mention",defaultSearchTerm:q})},300))):v.detail.value=`${F}${B}`},b.current.addEventListener("text-expander-value",p),g=v=>{const{input:F}=v.detail;if(u(F.value),t.current){const y=new Event("input",{bubbles:!0});t.current.dispatchEvent(y)}},b.current.addEventListener("text-expander-committed",g)),()=>{b.current&&(b.current.removeEventListener("text-expander-change",c),b.current.removeEventListener("text-expander-value",p),b.current.removeEventListener("text-expander-committed",g))}},[]),J(()=>{const c=t.current;if(!c)return;new ResizeObserver(()=>{if(b.current){const{height:g}=c.getBoundingClientRect();b.current.style.height=g+"px"}}).observe(c)},[]);const G=U(0),D=U(),I=It(c=>{var v;if(!D.current)return;if(G.current>3){D.current.innerHTML="",D.current=null,(v=I==null?void 0:I.cancel)==null||v.call(I);return}let p,g;G.current<=3&&(p=Date.now()),D.current.innerHTML=Sn(c,{maxCharacters:d})+`
`,G.current<=3&&(g=Date.now()),p&&g&&g-p>50&&G.current++},500),te=ze(()=>{var v,F;const c=(v=D.current)==null?void 0:v.cloneNode(!0);if(!c)return;c.querySelectorAll("mark").forEach(y=>{y.remove()});const p=(F=c.innerText)==null?void 0:F.trim();if(!p)return;const g=Tn(p);g!=null&&g.length&&(m==null||m({name:"auto-detect-language",languages:g}))},2e3);return e("text-expander",{ref:b,keys:"@ # :",class:"compose-field-container",children:[e("textarea",{class:"compose-field",autoCapitalize:"sentences",autoComplete:"on",autoCorrect:"on",spellCheck:"true",dir:"auto",rows:"6",cols:"50",...M,ref:t,name:"status",value:r,onKeyDown:c=>{const{key:p,target:g}=c;if(p==="Enter"&&!(c.ctrlKey||c.metaKey))try{const{value:v,selectionStart:F}=g,B=v.slice(0,F).split(`
`).slice(-1)[0];if(B&&/^\s*(-|\d+\.)\s/.test(B)){const[q,se,S,Y,W]=B.match(/^(\s*)(-|\d+\.)(\s+)(.+)?/)||[];if(W){c.preventDefault();const[O]=S.match(/\d+/)||[],P=O?`${+O+1}.`:"-",X=`
${se}${P}${Y}`;g.setRangeText(X,F,F);const j=F+X.length;g.setSelectionRange(j,j)}else{const O=F-B.length;g.setRangeText("",O,F)}ot(g),g.dispatchEvent(new Event("input"))}}catch{}D.current&&(D.current.scrollTop=g.scrollTop)},onInput:c=>{var v;const{target:p}=c,g=p.value.replace(/\u200b/g,"");u(g),ot(p),(v=n.onInput)==null||v.call(n,c),I(g),te()},style:{width:"100%",height:"4em"},onScroll:c=>{if(D.current){const{scrollTop:p}=c.target;D.current.scrollTop=p}}}),e("div",{ref:D,class:"compose-highlight","aria-hidden":"true"})]})});function Bn({maxCharacters:n=500,hidden:t}){const o=Tt(ae).composerCharacterCount,r=n-o;return t?e("span",{class:"char-counter",hidden:!0}):e("span",{class:"char-counter",title:`${r}/${n}`,style:{"--percentage":o/n*100},children:[e("meter",{class:`${r<=-10?"explode":r<=0?"danger":r<=20?"warning":""}`,value:o,max:n}),e("span",{class:"counter",children:r})]})}function Ae(n){const t=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];let a=0;for(;n>=1024;)n/=1024,a++;return`${n.toFixed(0).toLocaleString()} ${t[a]}`}function rt(n,t,a,o){const r=Math.sqrt(t/n),u=Math.floor(a*r),d=Math.floor(o*r);return{newWidth:u,newHeight:d}}function $n({attachment:n,disabled:t,lang:a,onDescriptionChange:o=()=>{},onRemove:r=()=>{}}){const[u,d]=N("default"),f=dt("@mastodon/edit-media-attributes"),{type:m,id:M,file:E}=n,b=xe(()=>E?URL.createObjectURL(E):n.url,[E,n.url]),z=!!(E!=null&&E.size),G=z?ht():{},{mediaAttachments:{imageSizeLimit:D,imageMatrixLimit:I,videoSizeLimit:te,videoMatrixLimit:V,videoFrameRateLimit:c}={}}=G||{},[p,g]=N(()=>z?m.startsWith("image")&&D&&E.size>D?{type:"imageSizeLimit",details:{imageSize:E.size,imageSizeLimit:D}}:m.startsWith("video")&&te&&E.size>te?{type:"videoSizeLimit",details:{videoSize:E.size,videoSizeLimit:te}}:null:null),[v,F]=N({});J(()=>{!z||!I||(v==null?void 0:v.matrix)>I&&g({type:"imageMatrixLimit",details:{imageMatrix:v==null?void 0:v.matrix,imageMatrixLimit:I,width:v==null?void 0:v.width,height:v==null?void 0:v.height}})},[v,I,z]);const[y,B]=N({});J(()=>{!z||!V||(y==null?void 0:y.matrix)>V&&g({type:"videoMatrixLimit",details:{videoMatrix:y==null?void 0:y.matrix,videoMatrixLimit:V,width:y==null?void 0:y.width,height:y==null?void 0:y.height}})},[y,V,z]);const[q,se]=N(n.description),[S,Y]=m.split("/"),W=ze(o,250);J(()=>{W(q)},[q,W]);const[O,P]=N(!1),X=U(null);J(()=>{let A;return O&&X.current&&(A=setTimeout(()=>{X.current.focus()},100)),()=>{clearTimeout(A)}},[O]);const j=e(ge,{children:M&&!f?e("div",{class:"media-desc",children:[e("span",{class:"tag",children:"Uploaded"}),e("p",{title:q,children:n.description||e("i",{children:"No description"})})]}):e("textarea",{ref:X,value:q||"",lang:a,placeholder:{image:"Image description",video:"Video description",audio:"Audio description"}[S],autoCapitalize:"sentences",autoComplete:"on",autoCorrect:"on",spellCheck:"true",dir:"auto",disabled:t||u==="loading",class:u==="loading"?"loading":"",maxlength:"1500",onInput:A=>{const{value:T}=A.target;se(T)}})}),ee=U(null);J(()=>()=>{var A,T;(T=(A=ee.current)==null?void 0:A.hideToast)==null||T.call(A)},[]);const ne=U(null),_=A=>{const{type:T,details:L}=A;switch(T){case"imageSizeLimit":{const{imageSize:H,imageSizeLimit:Z}=L;return`File size too large. Uploading might encounter issues. Try reduce the file size from ${Ae(H)} to ${Ae(Z)} or lower.`}case"imageMatrixLimit":{const{imageMatrix:H,imageMatrixLimit:Z,width:ie,height:oe}=L,{newWidth:ce,newHeight:he}=rt(H,Z,ie,oe);return`Dimension too large. Uploading might encounter issues. Try reduce dimension from ${ie.toLocaleString()}×${oe.toLocaleString()}px to ${ce.toLocaleString()}×${he.toLocaleString()}px.`}case"videoSizeLimit":{const{videoSize:H,videoSizeLimit:Z}=L;return`File size too large. Uploading might encounter issues. Try reduce the file size from ${Ae(H)} to ${Ae(Z)} or lower.`}case"videoMatrixLimit":{const{videoMatrix:H,videoMatrixLimit:Z,width:ie,height:oe}=L,{newWidth:ce,newHeight:he}=rt(H,Z,ie,oe);return`Dimension too large. Uploading might encounter issues. Try reduce dimension from ${ie.toLocaleString()}×${oe.toLocaleString()}px to ${ce.toLocaleString()}×${he.toLocaleString()}px.`}case"videoFrameRateLimit":return"Frame rate too high. Uploading might encounter issues."}};return e(ge,{children:[e("div",{class:"media-attachment",children:[e("div",{class:"media-preview",tabIndex:"0",onClick:()=>{P(!0)},children:S==="image"?e("img",{src:b,alt:"",onLoad:A=>{if(!z)return;const{naturalWidth:T,naturalHeight:L}=A.target;F({matrix:T*L,width:T,height:L})}}):S==="video"||S==="gifv"?e("video",{src:b+"#t=0.1",playsinline:!0,muted:!0,disablePictureInPicture:!0,preload:"metadata",onLoadedMetadata:A=>{if(!z)return;const{videoWidth:T,videoHeight:L}=A.target;T&&L&&B({matrix:T*L,width:T,height:L})}}):S==="audio"?e("audio",{src:b,controls:!0}):null}),j,e("div",{class:"media-aside",children:[e("button",{type:"button",class:"plain close-button",disabled:t,onClick:r,children:e(K,{icon:"x"})}),!!p&&e("button",{type:"button",class:"media-error",title:_(p),onClick:()=>{ne.current&&ne.current.hideToast(),ne.current=me({text:_(p),duration:1e4})},children:e(K,{icon:"alert"})})]})]}),O&&e(Le,{onClick:A=>{A.target===A.currentTarget&&P(!1)},children:e("div",{id:"media-sheet",class:"sheet sheet-max",children:[e("button",{type:"button",class:"sheet-close",onClick:()=>{P(!1)},children:e(K,{icon:"x"})}),e("header",{children:e("h2",{children:{image:"Edit image description",video:"Edit video description",audio:"Edit audio description"}[S]})}),e("main",{tabIndex:"-1",children:[e("div",{class:"media-preview",children:S==="image"?e("img",{src:b,alt:""}):S==="video"||S==="gifv"?e("video",{src:b,playsinline:!0,controls:!0}):S==="audio"?e("audio",{src:b,controls:!0}):null}),e("div",{class:"media-form",children:[j,e("footer",{children:[S==="image"&&/^(png|jpe?g|gif|webp)$/i.test(Y)&&!!ae.settings.mediaAltGenerator&&!!Pe&&e(Nt,{portal:{target:document.body},containerProps:{style:{zIndex:1001}},align:"center",position:"anchor",overflow:"auto",menuButton:e("button",{type:"button",title:"More",class:"plain",children:e(K,{icon:"more",size:"l",alt:"More"})}),children:[e(Ge,{disabled:u==="loading",onClick:()=>{d("loading"),ee.current=me({text:"Generating description. Please wait...",duration:-1}),async function(){var A,T;try{const L=new FormData;L.append("image",E);const H=await fetch(Pe,{method:"POST",body:L}).then(Z=>Z.json());if(H.error)throw new Error(H.error);se(H.description)}catch(L){me(`Failed to generate description${L!=null&&L.message?`: ${L.message}`:""}`)}finally{d("default"),(T=(A=ee.current)==null?void 0:A.hideToast)==null||T.call(A)}}()},children:[e(K,{icon:"sparkles2"}),a&&a!=="en"?e("small",{children:["Generate description…",e("br",{}),"(English)"]}):e("span",{children:"Generate description…"})]}),!!a&&a!=="en"&&e(Ge,{disabled:u==="loading",onClick:()=>{d("loading"),ee.current=me({text:"Generating description. Please wait...",duration:-1}),async function(){var A,T;try{const L=new FormData;L.append("image",E);const H=`?lang=${a}`,Z=await fetch(Pe+H,{method:"POST",body:L}).then(ie=>ie.json());if(Z.error)throw new Error(Z.error);se(Z.description)}catch(L){me(`Failed to generate description${L!=null&&L.message?`: ${L.message}`:""}`)}finally{d("default"),(T=(A=ee.current)==null?void 0:A.hideToast)==null||T.call(A)}}()},children:[e(K,{icon:"sparkles2"}),e("small",{children:["Generate description…",e("br",{}),"(",Ht(a),")"," ",e("span",{class:"more-insignificant",children:"— experimental"})]})]})]}),e("button",{type:"button",class:"light block",onClick:()=>{P(!1)},disabled:u==="loading",children:"Done"})]})]})]})]})})]})}function Dn({lang:n,poll:t,disabled:a,onInput:o=()=>{},maxOptions:r,maxExpiration:u,minExpiration:d,maxCharactersPerOption:f}){const{options:m,expiresIn:M,multiple:E}=t;return e("div",{class:`poll ${E?"multiple":""}`,children:[e("div",{class:"poll-choices",children:m.map((b,z)=>e("div",{class:"poll-choice",children:[e("input",{required:!0,type:"text",value:b,disabled:a,maxlength:f,placeholder:`Choice ${z+1}`,lang:n,spellCheck:"true",dir:"auto",onInput:G=>{const{value:D}=G.target;m[z]=D,o(t)}}),e("button",{type:"button",class:"plain2 poll-button",disabled:a||m.length<=1,onClick:()=>{m.splice(z,1),o(t)},children:e(K,{icon:"x",size:"s"})})]},z))}),e("div",{class:"poll-toolbar",children:[e("button",{type:"button",class:"plain2 poll-button",disabled:a||m.length>=r,onClick:()=>{m.push(""),o(t)},children:"+"})," ",e("label",{class:"multiple-choices",children:[e("input",{type:"checkbox",checked:E,disabled:a,onChange:b=>{const{checked:z}=b.target;t.multiple=z,o(t)}})," ","Multiple choices"]}),e("label",{class:"expires-in",children:["Duration"," ",e("select",{value:M,disabled:a,onChange:b=>{const{value:z}=b.target;t.expiresIn=z,o(t)},children:Object.entries(pt).filter(([b,z])=>z>=d&&z<=u).map(([b,z])=>e("option",{value:z,children:b},z))})]})]}),e("div",{class:"poll-toolbar",children:e("button",{type:"button",class:"plain remove-poll-button",disabled:a,onClick:()=>{o(null)},children:"Remove poll"})})]})}function ue(n){return n.replace(/[&<>"']/g,function(t){return"&#"+t.charCodeAt(0)+";"})}function lt(n){for(let t in n)(n[t]===null||n[t]===void 0)&&delete n[t];return n}function Pn({onClose:n=()=>{},onSelect:t=()=>{},defaultSearchTerm:a}){const{masto:o}=Ne(),[r,u]=N("default"),[d,f]=N([]),[m,M]=N({}),[E,b]=N(0),z=async c=>{if(!(c!=null&&c.length))return;const p=await Ot(c,m);p&&M({...m,...p})},G=c=>{c&&(u("loading"),(async()=>{try{const p=await o.v1.accounts.search.list({q:c,limit:40,resolve:!1});f(p),z(p),u("default")}catch{u("error")}})())},D=ze(G,1e3);J(()=>{G()},[G]);const I=U();J(()=>{I.current&&(I.current.focus(),I.current.value&&(I.current.selectionStart=I.current.value.length,I.current.selectionEnd=I.current.value.length))},[]),J(()=>{a&&G(a)},[a]);const te=c=>{const p=c.acct;t(p),n()};be("enter",()=>{const c=d[E];c&&te(c)},{preventDefault:!0,enableOnFormTags:["input"]});const V=U();return be("down",()=>{E<d.length-1?b(E+1):b(0),setTimeout(()=>{const c=V.current.querySelector(".selected");c&&c.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},1)},{preventDefault:!0,enableOnFormTags:["input"]}),be("up",()=>{E>0?b(E-1):b(d.length-1),setTimeout(()=>{const c=V.current.querySelector(".selected");c&&c.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},1)},{preventDefault:!0,enableOnFormTags:["input"]}),e("div",{id:"mention-sheet",class:"sheet",children:[!!n&&e("button",{type:"button",class:"sheet-close",onClick:n,children:e(K,{icon:"x"})}),e("header",{children:e("form",{onSubmit:c=>{var p;c.preventDefault(),(p=D.flush)==null||p.call(D)},children:e("input",{ref:I,required:!0,type:"search",class:"block",placeholder:"Search accounts",onInput:c=>{const{value:p}=c.target;D(p)},autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellCheck:"false",dir:"auto",defaultValue:a||""})})}),e("main",{children:(d==null?void 0:d.length)>0?e("ul",{ref:V,class:`accounts-list ${r==="loading"?"loading":""}`,children:d.map((c,p)=>{const g=m[c.id];return e("li",{class:p===E?"selected":"",children:[e(ut,{avatarSize:"xxl",account:c,relationship:g,showStats:!0,showActivity:!0}),e("button",{type:"button",class:"plain2",onClick:()=>{te(c)},children:e(K,{icon:"plus",size:"xl"})})]},c.id)})}):r==="loading"?e("div",{class:"ui-state",children:e(Se,{abrupt:!0})}):r==="error"?e("div",{class:"ui-state",children:e("p",{children:"Error loading accounts"})}):null})]})}function Rn({masto:n,instance:t,onClose:a=()=>{},onSelect:o=()=>{},defaultSearchTerm:r}){const[u,d]=N("default"),f=U([]),[m,M]=N([]),E=xe(()=>fe.account.get("recentlyUsedCustomEmojis")||[]),b=U();J(()=>{d("loading"),(async()=>{try{const[p,g]=await gt(t,n);b.current=g,M(p),d("default")}catch{d("error")}})()},[]);const z=xe(()=>{const p={"--recent--":E.filter(v=>m.find(F=>F.shortcode===v.shortcode))},g=[];return m.forEach(v=>{var F,y;if((y=(F=f.current)==null?void 0:F.push)==null||y.call(F,v),!v.category){g.push(v);return}p[v.category]||(p[v.category]=[]),p[v.category].push(v)}),g.length&&(p["--others--"]=g),p},[m]),G=U(),[D,I]=N(null),te=Ve(p=>{var v,F,y;const{value:g}=p.target;if(g){const B=(v=b.current)==null?void 0:v.search(g,{limit:je});I(B.map(q=>q.item)),(y=(F=G.current)==null?void 0:F.scrollTo)==null||y.call(F,0,0)}else I(null)},[m]);J(()=>{r&&(m!=null&&m.length)&&te({target:{value:r}})},[r,te,m]);const V=Ve(p=>{o==null||o(p),a==null||a(),queueMicrotask(()=>{let g=fe.account.get("recentlyUsedCustomEmojis")||[];const v=g.findIndex(F=>F.shortcode===p.shortcode);v!==-1?(g.splice(v,1),g.unshift(p)):(g.unshift(p),g=g.filter(F=>{var y,B;return(B=(y=f.current)==null?void 0:y.find)==null?void 0:B.call(y,q=>q.shortcode===F.shortcode)}),g=g.slice(0,10)),fe.account.set("recentlyUsedCustomEmojis",g)})},[o]),c=U();return J(()=>{c.current&&(c.current.focus(),c.current.value&&(c.current.selectionStart=c.current.value.length,c.current.selectionEnd=c.current.value.length))},[]),e("div",{id:"custom-emojis-sheet",class:"sheet",children:[!!a&&e("button",{type:"button",class:"sheet-close",onClick:a,children:e(K,{icon:"x"})}),e("header",{children:[e("div",{children:[e("b",{children:"Custom emojis"})," ",u==="loading"?e(Se,{}):e("small",{class:"insignificant",children:[" • ",t]})]}),e("form",{onSubmit:p=>{p.preventDefault();const g=D[0];g&&V(`:${g.shortcode}:`)},children:e("input",{ref:c,type:"search",placeholder:"Search emoji",onInput:te,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellCheck:"false",dir:"auto",defaultValue:r||""})})]}),e("main",{ref:G,children:D!==null?e("ul",{class:"custom-emojis-matches custom-emojis-list",children:D.map(p=>e("li",{class:"custom-emojis-match",children:e(ft,{emoji:p,onClick:()=>{V(`:${p.shortcode}:`)},showCode:!0})},p.shortcode))}):e("div",{class:"custom-emojis-list",children:[u==="error"&&e("div",{class:"ui-state",children:e("p",{children:"Error loading custom emojis"})}),u==="default"&&Object.entries(z).map(([p,g])=>!!(g!=null&&g.length)&&e(ge,{children:[e("div",{class:"section-header",children:{"--recent--":"Recently used","--others--":"Others"}[p]||p}),e(jn,{emojis:g,onSelect:V})]}))]})})]})}const jn=ct(({emojis:n,onSelect:t})=>{const[a,o]=N(je),r=n.length>a;return e("section",{children:[n.slice(0,a).map(u=>e(ft,{emoji:u,onClick:()=>{t(`:${u.shortcode}:`)}},u.shortcode)),r&&e("button",{type:"button",class:"plain small",onClick:()=>o(a+je),children:[(n.length-a).toLocaleString()," more…"]})]})}),ft=ct(({emoji:n,onClick:t,showCode:a})=>{const o=r=>{const d=r.currentTarget.closest("main");if(d){const f=d.getBoundingClientRect(),m=r.currentTarget.getBoundingClientRect(),M=r.currentTarget.classList;m.left<f.left+88?(M.add("edge-left"),M.remove("edge-right")):m.right>f.right-88?(M.add("edge-right"),M.remove("edge-left")):M.remove("edge-left","edge-right")}};return e("button",{type:"button",className:"plain4",onClick:t,"data-title":a?void 0:n.shortcode,onPointerEnter:o,onFocus:o,children:[e("picture",{children:[!!n.staticUrl&&e("source",{srcSet:n.staticUrl,media:"(prefers-reduced-motion: reduce)"}),e("img",{className:"shortcode-emoji",src:n.url||n.staticUrl,alt:n.shortcode,width:"24",height:"24",loading:"lazy",decoding:"async"})]}),a&&e(ge,{children:[" ",e("code",{children:n.shortcode})]})]})}),Re=20;function Nn({onClose:n=()=>{},onSelect:t=()=>{}}){var z,G,D,I,te,V;const[a,o]=N("default"),[r,u]=N([]),d=U(null),f=U(null),m=U(0),M=U(null);function E({offset:c}){var p,g,v;(p=f.current)!=null&&p.value&&(o("loading"),(v=(g=M.current)==null?void 0:g.scrollTo)==null||v.call(g,{top:0,left:0,behavior:"smooth"}),(async()=>{var F;try{const y={api_key:gn,q:f.current.value,rating:"g",limit:Re,bundle:"messaging_non_clips",offset:c},B=await fetch("https://api.giphy.com/v1/gifs/search?"+new URLSearchParams(y),{referrerPolicy:"no-referrer"}).then(q=>q.json());m.current=((F=B.pagination)==null?void 0:F.offset)||0,u(B),o("results")}catch{o("error")}})())}J(()=>{var c;(c=f.current)==null||c.focus()},[]);const b=ze(()=>{E({offset:0})},1e3);return e("div",{id:"gif-picker-sheet",class:"sheet",children:[!!n&&e("button",{type:"button",class:"sheet-close",onClick:n,children:e(K,{icon:"x"})}),e("header",{children:e("form",{ref:d,onSubmit:c=>{c.preventDefault(),E({offset:0})},children:[e("input",{ref:f,type:"search",name:"q",placeholder:"Search GIFs",required:!0,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellCheck:"false",dir:"auto",onInput:b}),e("input",{type:"image",class:"powered-button",src:dn,width:"86",height:"30"})]})}),e("main",{ref:M,class:a==="loading"?"loading":"",children:[a==="default"&&e("div",{class:"ui-state",children:e("p",{class:"insignificant",children:"Type to search GIFs"})}),a==="loading"&&!((z=r==null?void 0:r.data)!=null&&z.length)&&e("div",{class:"ui-state",children:e(Se,{abrupt:!0})}),((G=r==null?void 0:r.data)==null?void 0:G.length)>0?e(ge,{children:[e("ul",{children:r.data.map(c=>{const{id:p,images:g,title:v,alt_text:F}=c,{fixed_height_small:y,fixed_height_downsampled:B,fixed_height:q,original:se}=g,S=y!=null&&y.url?y:B!=null&&B.url?B:q;let{url:Y,webp:W,width:O,height:P}=S;+P>100&&(O=O/P*100,P=100);const X=new URL(Y),j=X.origin+X.pathname;let ee;if(W){const ne=new URL(W);ee=ne.origin+ne.pathname}return e("li",{children:e("button",{type:"button",onClick:()=>{const{mp4:ne,url:_}=se,A=ne||_,T=new URL(A),L=T.origin+T.pathname;n(),t({url:L,type:ne?"video/mp4":"image/gif",alt_text:F||v})},children:e("figure",{style:{"--figure-width":O+"px"},children:[e("picture",{children:[ee&&e("source",{srcset:ee,type:"image/webp"}),e("img",{src:j,width:O,height:P,loading:"lazy",decoding:"async",alt:F,referrerpolicy:"no-referrer",onLoad:ne=>{ne.target.style.backgroundColor="transparent"}})]}),e("figcaption",{children:F||v})]})})},p)})}),e("p",{class:"pagination",children:[((D=r.pagination)==null?void 0:D.offset)>0&&e("button",{type:"button",class:"light small",disabled:a==="loading",onClick:()=>{var c;E({offset:((c=r.pagination)==null?void 0:c.offset)-Re})},children:[e(K,{icon:"chevron-left"}),e("span",{children:"Previous"})]}),e("span",{}),((I=r.pagination)==null?void 0:I.offset)+((te=r.pagination)==null?void 0:te.count)<((V=r.pagination)==null?void 0:V.total_count)&&e("button",{type:"button",class:"light small",disabled:a==="loading",onClick:()=>{var c;E({offset:((c=r.pagination)==null?void 0:c.offset)+Re})},children:[e("span",{children:"Next"})," ",e(K,{icon:"chevron-right"})]})]})]}):a==="results"&&e("div",{class:"ui-state",children:e("p",{children:"No results"})}),a==="error"&&e("div",{class:"ui-state",children:e("p",{children:"Error loading GIFs"})})]})]})}export{qn as default};
//# sourceMappingURL=compose-4HsBMWNj.js.map
